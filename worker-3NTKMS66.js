var yn=Object.create;var rt=Object.defineProperty;var gn=Object.getOwnPropertyDescriptor;var _n=Object.getOwnPropertyNames;var wn=Object.getPrototypeOf,Tn=Object.prototype.hasOwnProperty;var ae=(x=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(x,{get:(r,o)=>(typeof require<"u"?require:r)[o]}):x)(function(x){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+x+'" is not supported')});var Ee=(x,r)=>()=>(r||x((r={exports:{}}).exports,r),r.exports);var Pn=(x,r,o,c)=>{if(r&&typeof r=="object"||typeof r=="function")for(let s of _n(r))!Tn.call(x,s)&&s!==o&&rt(x,s,{get:()=>r[s],enumerable:!(c=gn(r,s))||c.enumerable});return x};var ie=(x,r,o)=>(o=x!=null?yn(wn(x)):{},Pn(r||!x||!x.__esModule?rt(o,"default",{value:x,enumerable:!0}):o,x));var xe=Ee((Wn,ot)=>{"use strict";var Ne=Math.abs,In=Math.min;function me(x,r,o,c){var s=Ne(x-r);return o==null&&(o=me.DBL_EPSILON),c==null&&(c=o),s<=o||s<=c*In(Ne(x),Ne(r))?!0:x===r}me.FLT_EPSILON=11920929e-14;me.DBL_EPSILON=2220446049250313e-31;ot.exports=me});var dt=Ee((ut,Le)=>{"use strict";(function(x){if(typeof ut=="object"&&typeof Le<"u")Le.exports=x();else if(typeof define=="function"&&define.amd)define([],x);else{var r;typeof window<"u"?r=window:typeof global<"u"?r=global:typeof self<"u"?r=self:r=this,r.localforage=x()}})(function(){var x,r,o;return function c(s,p,d){function m(g,D){if(!p[g]){if(!s[g]){var u=typeof ae=="function"&&ae;if(!D&&u)return u(g,!0);if(b)return b(g,!0);var y=new Error("Cannot find module '"+g+"'");throw y.code="MODULE_NOT_FOUND",y}var S=p[g]={exports:{}};s[g][0].call(S.exports,function(I){var N=s[g][1][I];return m(N||I)},S,S.exports,c,s,p,d)}return p[g].exports}for(var b=typeof ae=="function"&&ae,l=0;l<d.length;l++)m(d[l]);return m}({1:[function(c,s,p){(function(d){"use strict";var m=d.MutationObserver||d.WebKitMutationObserver,b;if(m){var l=0,g=new m(I),D=d.document.createTextNode("");g.observe(D,{characterData:!0}),b=function(){D.data=l=++l%2}}else if(!d.setImmediate&&typeof d.MessageChannel<"u"){var u=new d.MessageChannel;u.port1.onmessage=I,b=function(){u.port2.postMessage(0)}}else"document"in d&&"onreadystatechange"in d.document.createElement("script")?b=function(){var O=d.document.createElement("script");O.onreadystatechange=function(){I(),O.onreadystatechange=null,O.parentNode.removeChild(O),O=null},d.document.documentElement.appendChild(O)}:b=function(){setTimeout(I,0)};var y,S=[];function I(){y=!0;for(var O,X,q=S.length;q;){for(X=S,S=[],O=-1;++O<q;)X[O]();q=S.length}y=!1}s.exports=N;function N(O){S.push(O)===1&&!y&&b()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(c,s,p){"use strict";var d=c(1);function m(){}var b={},l=["REJECTED"],g=["FULFILLED"],D=["PENDING"];s.exports=u;function u(P){if(typeof P!="function")throw new TypeError("resolver must be a function");this.state=D,this.queue=[],this.outcome=void 0,P!==m&&N(this,P)}u.prototype.catch=function(P){return this.then(null,P)},u.prototype.then=function(P,M){if(typeof P!="function"&&this.state===g||typeof M!="function"&&this.state===l)return this;var A=new this.constructor(m);if(this.state!==D){var C=this.state===g?P:M;S(A,C,this.outcome)}else this.queue.push(new y(A,P,M));return A};function y(P,M,A){this.promise=P,typeof M=="function"&&(this.onFulfilled=M,this.callFulfilled=this.otherCallFulfilled),typeof A=="function"&&(this.onRejected=A,this.callRejected=this.otherCallRejected)}y.prototype.callFulfilled=function(P){b.resolve(this.promise,P)},y.prototype.otherCallFulfilled=function(P){S(this.promise,this.onFulfilled,P)},y.prototype.callRejected=function(P){b.reject(this.promise,P)},y.prototype.otherCallRejected=function(P){S(this.promise,this.onRejected,P)};function S(P,M,A){d(function(){var C;try{C=M(A)}catch(j){return b.reject(P,j)}C===P?b.reject(P,new TypeError("Cannot resolve promise with itself")):b.resolve(P,C)})}b.resolve=function(P,M){var A=O(I,M);if(A.status==="error")return b.reject(P,A.value);var C=A.value;if(C)N(P,C);else{P.state=g,P.outcome=M;for(var j=-1,k=P.queue.length;++j<k;)P.queue[j].callFulfilled(M)}return P},b.reject=function(P,M){P.state=l,P.outcome=M;for(var A=-1,C=P.queue.length;++A<C;)P.queue[A].callRejected(M);return P};function I(P){var M=P&&P.then;if(P&&(typeof P=="object"||typeof P=="function")&&typeof M=="function")return function(){M.apply(P,arguments)}}function N(P,M){var A=!1;function C(U){A||(A=!0,b.reject(P,U))}function j(U){A||(A=!0,b.resolve(P,U))}function k(){M(j,C)}var G=O(k);G.status==="error"&&C(G.value)}function O(P,M){var A={};try{A.value=P(M),A.status="success"}catch(C){A.status="error",A.value=C}return A}u.resolve=X;function X(P){return P instanceof this?P:b.resolve(new this(m),P)}u.reject=q;function q(P){var M=new this(m);return b.reject(M,P)}u.all=pe;function pe(P){var M=this;if(Object.prototype.toString.call(P)!=="[object Array]")return this.reject(new TypeError("must be an array"));var A=P.length,C=!1;if(!A)return this.resolve([]);for(var j=new Array(A),k=0,G=-1,U=new this(m);++G<A;)K(P[G],G);return U;function K(ne,ue){M.resolve(ne).then(be,function(ee){C||(C=!0,b.reject(U,ee))});function be(ee){j[ue]=ee,++k===A&&!C&&(C=!0,b.resolve(U,j))}}}u.race=$;function $(P){var M=this;if(Object.prototype.toString.call(P)!=="[object Array]")return this.reject(new TypeError("must be an array"));var A=P.length,C=!1;if(!A)return this.resolve([]);for(var j=-1,k=new this(m);++j<A;)G(P[j]);return k;function G(U){M.resolve(U).then(function(K){C||(C=!0,b.resolve(k,K))},function(K){C||(C=!0,b.reject(k,K))})}}},{1:1}],3:[function(c,s,p){(function(d){"use strict";typeof d.Promise!="function"&&(d.Promise=c(2))}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(c,s,p){"use strict";var d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function m(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function b(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var l=b();function g(){try{if(!l||!l.open)return!1;var e=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),n=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!e||n)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function D(e,n){e=e||[],n=n||{};try{return new Blob(e,n)}catch(a){if(a.name!=="TypeError")throw a;for(var t=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,i=new t,f=0;f<e.length;f+=1)i.append(e[f]);return i.getBlob(n.type)}}typeof Promise>"u"&&c(3);var u=Promise;function y(e,n){n&&e.then(function(t){n(null,t)},function(t){n(t)})}function S(e,n,t){typeof n=="function"&&e.then(n),typeof t=="function"&&e.catch(t)}function I(e){return typeof e!="string"&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function N(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var O="local-forage-detect-blob-support",X=void 0,q={},pe=Object.prototype.toString,$="readonly",P="readwrite";function M(e){for(var n=e.length,t=new ArrayBuffer(n),i=new Uint8Array(t),f=0;f<n;f++)i[f]=e.charCodeAt(f);return t}function A(e){return new u(function(n){var t=e.transaction(O,P),i=D([""]);t.objectStore(O).put(i,"key"),t.onabort=function(f){f.preventDefault(),f.stopPropagation(),n(!1)},t.oncomplete=function(){var f=navigator.userAgent.match(/Chrome\/(\d+)/),a=navigator.userAgent.match(/Edge\//);n(a||!f||parseInt(f[1],10)>=43)}}).catch(function(){return!1})}function C(e){return typeof X=="boolean"?u.resolve(X):A(e).then(function(n){return X=n,X})}function j(e){var n=q[e.name],t={};t.promise=new u(function(i,f){t.resolve=i,t.reject=f}),n.deferredOperations.push(t),n.dbReady?n.dbReady=n.dbReady.then(function(){return t.promise}):n.dbReady=t.promise}function k(e){var n=q[e.name],t=n.deferredOperations.pop();if(t)return t.resolve(),t.promise}function G(e,n){var t=q[e.name],i=t.deferredOperations.pop();if(i)return i.reject(n),i.promise}function U(e,n){return new u(function(t,i){if(q[e.name]=q[e.name]||ze(),e.db)if(n)j(e),e.db.close();else return t(e.db);var f=[e.name];n&&f.push(e.version);var a=l.open.apply(l,f);n&&(a.onupgradeneeded=function(h){var v=a.result;try{v.createObjectStore(e.storeName),h.oldVersion<=1&&v.createObjectStore(O)}catch(_){if(_.name==="ConstraintError")console.warn('The database "'+e.name+'" has been upgraded from version '+h.oldVersion+" to version "+h.newVersion+', but the storage "'+e.storeName+'" already exists.');else throw _}}),a.onerror=function(h){h.preventDefault(),i(a.error)},a.onsuccess=function(){var h=a.result;h.onversionchange=function(v){v.target.close()},t(h),k(e)}})}function K(e){return U(e,!1)}function ne(e){return U(e,!0)}function ue(e,n){if(!e.db)return!0;var t=!e.db.objectStoreNames.contains(e.storeName),i=e.version<e.db.version,f=e.version>e.db.version;if(i&&(e.version!==n&&console.warn('The database "'+e.name+`" can't be downgraded from version `+e.db.version+" to version "+e.version+"."),e.version=e.db.version),f||t){if(t){var a=e.db.version+1;a>e.version&&(e.version=a)}return!0}return!1}function be(e){return new u(function(n,t){var i=new FileReader;i.onerror=t,i.onloadend=function(f){var a=btoa(f.target.result||"");n({__local_forage_encoded_blob:!0,data:a,type:e.type})},i.readAsBinaryString(e)})}function ee(e){var n=M(atob(e.data));return D([n],{type:e.type})}function Ve(e){return e&&e.__local_forage_encoded_blob}function yt(e){var n=this,t=n._initReady().then(function(){var i=q[n._dbInfo.name];if(i&&i.dbReady)return i.dbReady});return S(t,e,e),t}function gt(e){j(e);for(var n=q[e.name],t=n.forages,i=0;i<t.length;i++){var f=t[i];f._dbInfo.db&&(f._dbInfo.db.close(),f._dbInfo.db=null)}return e.db=null,K(e).then(function(a){return e.db=a,ue(e)?ne(e):a}).then(function(a){e.db=n.db=a;for(var h=0;h<t.length;h++)t[h]._dbInfo.db=a}).catch(function(a){throw G(e,a),a})}function Q(e,n,t,i){i===void 0&&(i=1);try{var f=e.db.transaction(e.storeName,n);t(null,f)}catch(a){if(i>0&&(!e.db||a.name==="InvalidStateError"||a.name==="NotFoundError"))return u.resolve().then(function(){if(!e.db||a.name==="NotFoundError"&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),ne(e)}).then(function(){return gt(e).then(function(){Q(e,n,t,i-1)})}).catch(t);t(a)}}function ze(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function _t(e){var n=this,t={db:null};if(e)for(var i in e)t[i]=e[i];var f=q[t.name];f||(f=ze(),q[t.name]=f),f.forages.push(n),n._initReady||(n._initReady=n.ready,n.ready=yt);var a=[];function h(){return u.resolve()}for(var v=0;v<f.forages.length;v++){var _=f.forages[v];_!==n&&a.push(_._initReady().catch(h))}var w=f.forages.slice(0);return u.all(a).then(function(){return t.db=f.db,K(t)}).then(function(T){return t.db=T,ue(t,n._defaultConfig.version)?ne(t):T}).then(function(T){t.db=f.db=T,n._dbInfo=t;for(var E=0;E<w.length;E++){var R=w[E];R!==n&&(R._dbInfo.db=t.db,R._dbInfo.version=t.version)}})}function wt(e,n){var t=this;e=I(e);var i=new u(function(f,a){t.ready().then(function(){Q(t._dbInfo,$,function(h,v){if(h)return a(h);try{var _=v.objectStore(t._dbInfo.storeName),w=_.get(e);w.onsuccess=function(){var T=w.result;T===void 0&&(T=null),Ve(T)&&(T=ee(T)),f(T)},w.onerror=function(){a(w.error)}}catch(T){a(T)}})}).catch(a)});return y(i,n),i}function Tt(e,n){var t=this,i=new u(function(f,a){t.ready().then(function(){Q(t._dbInfo,$,function(h,v){if(h)return a(h);try{var _=v.objectStore(t._dbInfo.storeName),w=_.openCursor(),T=1;w.onsuccess=function(){var E=w.result;if(E){var R=E.value;Ve(R)&&(R=ee(R));var L=e(R,E.key,T++);L!==void 0?f(L):E.continue()}else f()},w.onerror=function(){a(w.error)}}catch(E){a(E)}})}).catch(a)});return y(i,n),i}function Pt(e,n,t){var i=this;e=I(e);var f=new u(function(a,h){var v;i.ready().then(function(){return v=i._dbInfo,pe.call(n)==="[object Blob]"?C(v.db).then(function(_){return _?n:be(n)}):n}).then(function(_){Q(i._dbInfo,P,function(w,T){if(w)return h(w);try{var E=T.objectStore(i._dbInfo.storeName);_===null&&(_=void 0);var R=E.put(_,e);T.oncomplete=function(){_===void 0&&(_=null),a(_)},T.onabort=T.onerror=function(){var L=R.error?R.error:R.transaction.error;h(L)}}catch(L){h(L)}})}).catch(h)});return y(f,t),f}function It(e,n){var t=this;e=I(e);var i=new u(function(f,a){t.ready().then(function(){Q(t._dbInfo,P,function(h,v){if(h)return a(h);try{var _=v.objectStore(t._dbInfo.storeName),w=_.delete(e);v.oncomplete=function(){f()},v.onerror=function(){a(w.error)},v.onabort=function(){var T=w.error?w.error:w.transaction.error;a(T)}}catch(T){a(T)}})}).catch(a)});return y(i,n),i}function St(e){var n=this,t=new u(function(i,f){n.ready().then(function(){Q(n._dbInfo,P,function(a,h){if(a)return f(a);try{var v=h.objectStore(n._dbInfo.storeName),_=v.clear();h.oncomplete=function(){i()},h.onabort=h.onerror=function(){var w=_.error?_.error:_.transaction.error;f(w)}}catch(w){f(w)}})}).catch(f)});return y(t,e),t}function Et(e){var n=this,t=new u(function(i,f){n.ready().then(function(){Q(n._dbInfo,$,function(a,h){if(a)return f(a);try{var v=h.objectStore(n._dbInfo.storeName),_=v.count();_.onsuccess=function(){i(_.result)},_.onerror=function(){f(_.error)}}catch(w){f(w)}})}).catch(f)});return y(t,e),t}function Nt(e,n){var t=this,i=new u(function(f,a){if(e<0){f(null);return}t.ready().then(function(){Q(t._dbInfo,$,function(h,v){if(h)return a(h);try{var _=v.objectStore(t._dbInfo.storeName),w=!1,T=_.openKeyCursor();T.onsuccess=function(){var E=T.result;if(!E){f(null);return}e===0||w?f(E.key):(w=!0,E.advance(e))},T.onerror=function(){a(T.error)}}catch(E){a(E)}})}).catch(a)});return y(i,n),i}function Dt(e){var n=this,t=new u(function(i,f){n.ready().then(function(){Q(n._dbInfo,$,function(a,h){if(a)return f(a);try{var v=h.objectStore(n._dbInfo.storeName),_=v.openKeyCursor(),w=[];_.onsuccess=function(){var T=_.result;if(!T){i(w);return}w.push(T.key),T.continue()},_.onerror=function(){f(_.error)}}catch(T){f(T)}})}).catch(f)});return y(t,e),t}function Rt(e,n){n=N.apply(this,arguments);var t=this.config();e=typeof e!="function"&&e||{},e.name||(e.name=e.name||t.name,e.storeName=e.storeName||t.storeName);var i=this,f;if(!e.name)f=u.reject("Invalid arguments");else{var a=e.name===t.name&&i._dbInfo.db,h=a?u.resolve(i._dbInfo.db):K(e).then(function(v){var _=q[e.name],w=_.forages;_.db=v;for(var T=0;T<w.length;T++)w[T]._dbInfo.db=v;return v});e.storeName?f=h.then(function(v){if(v.objectStoreNames.contains(e.storeName)){var _=v.version+1;j(e);var w=q[e.name],T=w.forages;v.close();for(var E=0;E<T.length;E++){var R=T[E];R._dbInfo.db=null,R._dbInfo.version=_}var L=new u(function(B,z){var V=l.open(e.name,_);V.onerror=function(W){var oe=V.result;oe.close(),z(W)},V.onupgradeneeded=function(){var W=V.result;W.deleteObjectStore(e.storeName)},V.onsuccess=function(){var W=V.result;W.close(),B(W)}});return L.then(function(B){w.db=B;for(var z=0;z<T.length;z++){var V=T[z];V._dbInfo.db=B,k(V._dbInfo)}}).catch(function(B){throw(G(e,B)||u.resolve()).catch(function(){}),B})}}):f=h.then(function(v){j(e);var _=q[e.name],w=_.forages;v.close();for(var T=0;T<w.length;T++){var E=w[T];E._dbInfo.db=null}var R=new u(function(L,B){var z=l.deleteDatabase(e.name);z.onerror=function(){var V=z.result;V&&V.close(),B(z.error)},z.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},z.onsuccess=function(){var V=z.result;V&&V.close(),L(V)}});return R.then(function(L){_.db=L;for(var B=0;B<w.length;B++){var z=w[B];k(z._dbInfo)}}).catch(function(L){throw(G(e,L)||u.resolve()).catch(function(){}),L})})}return y(f,n),f}var At={_driver:"asyncStorage",_initStorage:_t,_support:g(),iterate:Tt,getItem:wt,setItem:Pt,removeItem:It,clear:St,length:Et,key:Nt,keys:Dt,dropInstance:Rt};function Mt(){return typeof openDatabase=="function"}var J="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Lt="~~local_forage_type~",Oe=/^~~local_forage_type~([^~]+)~/,de="__lfsc__:",ve=de.length,ye="arbf",ge="blob",qe="si08",je="ui08",ke="uic8",Fe="si16",Ge="si32",Ue="ur16",We="ui32",Ye="fl32",Xe="fl64",Ke=ve+ye.length,Qe=Object.prototype.toString;function Je(e){var n=e.length*.75,t=e.length,i,f=0,a,h,v,_;e[e.length-1]==="="&&(n--,e[e.length-2]==="="&&n--);var w=new ArrayBuffer(n),T=new Uint8Array(w);for(i=0;i<t;i+=4)a=J.indexOf(e[i]),h=J.indexOf(e[i+1]),v=J.indexOf(e[i+2]),_=J.indexOf(e[i+3]),T[f++]=a<<2|h>>4,T[f++]=(h&15)<<4|v>>2,T[f++]=(v&3)<<6|_&63;return w}function _e(e){var n=new Uint8Array(e),t="",i;for(i=0;i<n.length;i+=3)t+=J[n[i]>>2],t+=J[(n[i]&3)<<4|n[i+1]>>4],t+=J[(n[i+1]&15)<<2|n[i+2]>>6],t+=J[n[i+2]&63];return n.length%3===2?t=t.substring(0,t.length-1)+"=":n.length%3===1&&(t=t.substring(0,t.length-2)+"=="),t}function Bt(e,n){var t="";if(e&&(t=Qe.call(e)),e&&(t==="[object ArrayBuffer]"||e.buffer&&Qe.call(e.buffer)==="[object ArrayBuffer]")){var i,f=de;e instanceof ArrayBuffer?(i=e,f+=ye):(i=e.buffer,t==="[object Int8Array]"?f+=qe:t==="[object Uint8Array]"?f+=je:t==="[object Uint8ClampedArray]"?f+=ke:t==="[object Int16Array]"?f+=Fe:t==="[object Uint16Array]"?f+=Ue:t==="[object Int32Array]"?f+=Ge:t==="[object Uint32Array]"?f+=We:t==="[object Float32Array]"?f+=Ye:t==="[object Float64Array]"?f+=Xe:n(new Error("Failed to get type for BinaryArray"))),n(f+_e(i))}else if(t==="[object Blob]"){var a=new FileReader;a.onload=function(){var h=Lt+e.type+"~"+_e(this.result);n(de+ge+h)},a.readAsArrayBuffer(e)}else try{n(JSON.stringify(e))}catch(h){console.error("Couldn't convert value into a JSON string: ",e),n(null,h)}}function Ct(e){if(e.substring(0,ve)!==de)return JSON.parse(e);var n=e.substring(Ke),t=e.substring(ve,Ke),i;if(t===ge&&Oe.test(n)){var f=n.match(Oe);i=f[1],n=n.substring(f[0].length)}var a=Je(n);switch(t){case ye:return a;case ge:return D([a],{type:i});case qe:return new Int8Array(a);case je:return new Uint8Array(a);case ke:return new Uint8ClampedArray(a);case Fe:return new Int16Array(a);case Ue:return new Uint16Array(a);case Ge:return new Int32Array(a);case We:return new Uint32Array(a);case Ye:return new Float32Array(a);case Xe:return new Float64Array(a);default:throw new Error("Unkown type: "+t)}}var we={serialize:Bt,deserialize:Ct,stringToBuffer:Je,bufferToString:_e};function He(e,n,t,i){e.executeSql("CREATE TABLE IF NOT EXISTS "+n.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],t,i)}function Vt(e){var n=this,t={db:null};if(e)for(var i in e)t[i]=typeof e[i]!="string"?e[i].toString():e[i];var f=new u(function(a,h){try{t.db=openDatabase(t.name,String(t.version),t.description,t.size)}catch(v){return h(v)}t.db.transaction(function(v){He(v,t,function(){n._dbInfo=t,a()},function(_,w){h(w)})},h)});return t.serializer=we,f}function H(e,n,t,i,f,a){e.executeSql(t,i,f,function(h,v){v.code===v.SYNTAX_ERR?h.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[n.storeName],function(_,w){w.rows.length?a(_,v):He(_,n,function(){_.executeSql(t,i,f,a)},a)},a):a(h,v)},a)}function zt(e,n){var t=this;e=I(e);var i=new u(function(f,a){t.ready().then(function(){var h=t._dbInfo;h.db.transaction(function(v){H(v,h,"SELECT * FROM "+h.storeName+" WHERE key = ? LIMIT 1",[e],function(_,w){var T=w.rows.length?w.rows.item(0).value:null;T&&(T=h.serializer.deserialize(T)),f(T)},function(_,w){a(w)})})}).catch(a)});return y(i,n),i}function Ot(e,n){var t=this,i=new u(function(f,a){t.ready().then(function(){var h=t._dbInfo;h.db.transaction(function(v){H(v,h,"SELECT * FROM "+h.storeName,[],function(_,w){for(var T=w.rows,E=T.length,R=0;R<E;R++){var L=T.item(R),B=L.value;if(B&&(B=h.serializer.deserialize(B)),B=e(B,L.key,R+1),B!==void 0){f(B);return}}f()},function(_,w){a(w)})})}).catch(a)});return y(i,n),i}function Ze(e,n,t,i){var f=this;e=I(e);var a=new u(function(h,v){f.ready().then(function(){n===void 0&&(n=null);var _=n,w=f._dbInfo;w.serializer.serialize(n,function(T,E){E?v(E):w.db.transaction(function(R){H(R,w,"INSERT OR REPLACE INTO "+w.storeName+" (key, value) VALUES (?, ?)",[e,T],function(){h(_)},function(L,B){v(B)})},function(R){if(R.code===R.QUOTA_ERR){if(i>0){h(Ze.apply(f,[e,_,t,i-1]));return}v(R)}})})}).catch(v)});return y(a,t),a}function qt(e,n,t){return Ze.apply(this,[e,n,t,1])}function jt(e,n){var t=this;e=I(e);var i=new u(function(f,a){t.ready().then(function(){var h=t._dbInfo;h.db.transaction(function(v){H(v,h,"DELETE FROM "+h.storeName+" WHERE key = ?",[e],function(){f()},function(_,w){a(w)})})}).catch(a)});return y(i,n),i}function kt(e){var n=this,t=new u(function(i,f){n.ready().then(function(){var a=n._dbInfo;a.db.transaction(function(h){H(h,a,"DELETE FROM "+a.storeName,[],function(){i()},function(v,_){f(_)})})}).catch(f)});return y(t,e),t}function Ft(e){var n=this,t=new u(function(i,f){n.ready().then(function(){var a=n._dbInfo;a.db.transaction(function(h){H(h,a,"SELECT COUNT(key) as c FROM "+a.storeName,[],function(v,_){var w=_.rows.item(0).c;i(w)},function(v,_){f(_)})})}).catch(f)});return y(t,e),t}function Gt(e,n){var t=this,i=new u(function(f,a){t.ready().then(function(){var h=t._dbInfo;h.db.transaction(function(v){H(v,h,"SELECT key FROM "+h.storeName+" WHERE id = ? LIMIT 1",[e+1],function(_,w){var T=w.rows.length?w.rows.item(0).key:null;f(T)},function(_,w){a(w)})})}).catch(a)});return y(i,n),i}function Ut(e){var n=this,t=new u(function(i,f){n.ready().then(function(){var a=n._dbInfo;a.db.transaction(function(h){H(h,a,"SELECT key FROM "+a.storeName,[],function(v,_){for(var w=[],T=0;T<_.rows.length;T++)w.push(_.rows.item(T).key);i(w)},function(v,_){f(_)})})}).catch(f)});return y(t,e),t}function Wt(e){return new u(function(n,t){e.transaction(function(i){i.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(f,a){for(var h=[],v=0;v<a.rows.length;v++)h.push(a.rows.item(v).name);n({db:e,storeNames:h})},function(f,a){t(a)})},function(i){t(i)})})}function Yt(e,n){n=N.apply(this,arguments);var t=this.config();e=typeof e!="function"&&e||{},e.name||(e.name=e.name||t.name,e.storeName=e.storeName||t.storeName);var i=this,f;return e.name?f=new u(function(a){var h;e.name===t.name?h=i._dbInfo.db:h=openDatabase(e.name,"","",0),e.storeName?a({db:h,storeNames:[e.storeName]}):a(Wt(h))}).then(function(a){return new u(function(h,v){a.db.transaction(function(_){function w(L){return new u(function(B,z){_.executeSql("DROP TABLE IF EXISTS "+L,[],function(){B()},function(V,W){z(W)})})}for(var T=[],E=0,R=a.storeNames.length;E<R;E++)T.push(w(a.storeNames[E]));u.all(T).then(function(){h()}).catch(function(L){v(L)})},function(_){v(_)})})}):f=u.reject("Invalid arguments"),y(f,n),f}var Xt={_driver:"webSQLStorage",_initStorage:Vt,_support:Mt(),iterate:Ot,getItem:zt,setItem:qt,removeItem:jt,clear:kt,length:Ft,key:Gt,keys:Ut,dropInstance:Yt};function Kt(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function $e(e,n){var t=e.name+"/";return e.storeName!==n.storeName&&(t+=e.storeName+"/"),t}function Qt(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch{return!0}}function Jt(){return!Qt()||localStorage.length>0}function Ht(e){var n=this,t={};if(e)for(var i in e)t[i]=e[i];return t.keyPrefix=$e(e,n._defaultConfig),Jt()?(n._dbInfo=t,t.serializer=we,u.resolve()):u.reject()}function Zt(e){var n=this,t=n.ready().then(function(){for(var i=n._dbInfo.keyPrefix,f=localStorage.length-1;f>=0;f--){var a=localStorage.key(f);a.indexOf(i)===0&&localStorage.removeItem(a)}});return y(t,e),t}function $t(e,n){var t=this;e=I(e);var i=t.ready().then(function(){var f=t._dbInfo,a=localStorage.getItem(f.keyPrefix+e);return a&&(a=f.serializer.deserialize(a)),a});return y(i,n),i}function en(e,n){var t=this,i=t.ready().then(function(){for(var f=t._dbInfo,a=f.keyPrefix,h=a.length,v=localStorage.length,_=1,w=0;w<v;w++){var T=localStorage.key(w);if(T.indexOf(a)===0){var E=localStorage.getItem(T);if(E&&(E=f.serializer.deserialize(E)),E=e(E,T.substring(h),_++),E!==void 0)return E}}});return y(i,n),i}function tn(e,n){var t=this,i=t.ready().then(function(){var f=t._dbInfo,a;try{a=localStorage.key(e)}catch{a=null}return a&&(a=a.substring(f.keyPrefix.length)),a});return y(i,n),i}function nn(e){var n=this,t=n.ready().then(function(){for(var i=n._dbInfo,f=localStorage.length,a=[],h=0;h<f;h++){var v=localStorage.key(h);v.indexOf(i.keyPrefix)===0&&a.push(v.substring(i.keyPrefix.length))}return a});return y(t,e),t}function rn(e){var n=this,t=n.keys().then(function(i){return i.length});return y(t,e),t}function on(e,n){var t=this;e=I(e);var i=t.ready().then(function(){var f=t._dbInfo;localStorage.removeItem(f.keyPrefix+e)});return y(i,n),i}function an(e,n,t){var i=this;e=I(e);var f=i.ready().then(function(){n===void 0&&(n=null);var a=n;return new u(function(h,v){var _=i._dbInfo;_.serializer.serialize(n,function(w,T){if(T)v(T);else try{localStorage.setItem(_.keyPrefix+e,w),h(a)}catch(E){(E.name==="QuotaExceededError"||E.name==="NS_ERROR_DOM_QUOTA_REACHED")&&v(E),v(E)}})})});return y(f,t),f}function fn(e,n){if(n=N.apply(this,arguments),e=typeof e!="function"&&e||{},!e.name){var t=this.config();e.name=e.name||t.name,e.storeName=e.storeName||t.storeName}var i=this,f;return e.name?f=new u(function(a){e.storeName?a($e(e,i._defaultConfig)):a(e.name+"/")}).then(function(a){for(var h=localStorage.length-1;h>=0;h--){var v=localStorage.key(h);v.indexOf(a)===0&&localStorage.removeItem(v)}}):f=u.reject("Invalid arguments"),y(f,n),f}var cn={_driver:"localStorageWrapper",_initStorage:Ht,_support:Kt(),iterate:en,getItem:$t,setItem:an,removeItem:on,clear:Zt,length:rn,key:tn,keys:nn,dropInstance:fn},sn=function(n,t){return n===t||typeof n=="number"&&typeof t=="number"&&isNaN(n)&&isNaN(t)},un=function(n,t){for(var i=n.length,f=0;f<i;){if(sn(n[f],t))return!0;f++}return!1},et=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},re={},tt={},te={INDEXEDDB:At,WEBSQL:Xt,LOCALSTORAGE:cn},dn=[te.INDEXEDDB._driver,te.WEBSQL._driver,te.LOCALSTORAGE._driver],le=["dropInstance"],Te=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(le),ln={description:"",driver:dn.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function mn(e,n){e[n]=function(){var t=arguments;return e.ready().then(function(){return e[n].apply(e,t)})}}function Pe(){for(var e=1;e<arguments.length;e++){var n=arguments[e];if(n)for(var t in n)n.hasOwnProperty(t)&&(et(n[t])?arguments[0][t]=n[t].slice():arguments[0][t]=n[t])}return arguments[0]}var xn=function(){function e(n){m(this,e);for(var t in te)if(te.hasOwnProperty(t)){var i=te[t],f=i._driver;this[t]=f,re[f]||this.defineDriver(i)}this._defaultConfig=Pe({},ln),this._config=Pe({},this._defaultConfig,n),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return e.prototype.config=function(t){if((typeof t>"u"?"undefined":d(t))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var i in t){if(i==="storeName"&&(t[i]=t[i].replace(/\W/g,"_")),i==="version"&&typeof t[i]!="number")return new Error("Database version must be a number.");this._config[i]=t[i]}return"driver"in t&&t.driver?this.setDriver(this._config.driver):!0}else return typeof t=="string"?this._config[t]:this._config},e.prototype.defineDriver=function(t,i,f){var a=new u(function(h,v){try{var _=t._driver,w=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!t._driver){v(w);return}for(var T=Te.concat("_initStorage"),E=0,R=T.length;E<R;E++){var L=T[E],B=!un(le,L);if((B||t[L])&&typeof t[L]!="function"){v(w);return}}var z=function(){for(var oe=function(bn){return function(){var vn=new Error("Method "+bn+" is not implemented by the current driver"),nt=u.reject(vn);return y(nt,arguments[arguments.length-1]),nt}},Ie=0,pn=le.length;Ie<pn;Ie++){var Se=le[Ie];t[Se]||(t[Se]=oe(Se))}};z();var V=function(oe){re[_]&&console.info("Redefining LocalForage driver: "+_),re[_]=t,tt[_]=oe,h()};"_support"in t?t._support&&typeof t._support=="function"?t._support().then(V,v):V(!!t._support):V(!0)}catch(W){v(W)}});return S(a,i,f),a},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(t,i,f){var a=re[t]?u.resolve(re[t]):u.reject(new Error("Driver not found."));return S(a,i,f),a},e.prototype.getSerializer=function(t){var i=u.resolve(we);return S(i,t),i},e.prototype.ready=function(t){var i=this,f=i._driverSet.then(function(){return i._ready===null&&(i._ready=i._initDriver()),i._ready});return S(f,t,t),f},e.prototype.setDriver=function(t,i,f){var a=this;et(t)||(t=[t]);var h=this._getSupportedDrivers(t);function v(){a._config.driver=a.driver()}function _(E){return a._extend(E),v(),a._ready=a._initStorage(a._config),a._ready}function w(E){return function(){var R=0;function L(){for(;R<E.length;){var B=E[R];return R++,a._dbInfo=null,a._ready=null,a.getDriver(B).then(_).catch(L)}v();var z=new Error("No available storage method found.");return a._driverSet=u.reject(z),a._driverSet}return L()}}var T=this._driverSet!==null?this._driverSet.catch(function(){return u.resolve()}):u.resolve();return this._driverSet=T.then(function(){var E=h[0];return a._dbInfo=null,a._ready=null,a.getDriver(E).then(function(R){a._driver=R._driver,v(),a._wrapLibraryMethodsWithReady(),a._initDriver=w(h)})}).catch(function(){v();var E=new Error("No available storage method found.");return a._driverSet=u.reject(E),a._driverSet}),S(this._driverSet,i,f),this._driverSet},e.prototype.supports=function(t){return!!tt[t]},e.prototype._extend=function(t){Pe(this,t)},e.prototype._getSupportedDrivers=function(t){for(var i=[],f=0,a=t.length;f<a;f++){var h=t[f];this.supports(h)&&i.push(h)}return i},e.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,i=Te.length;t<i;t++)mn(this,Te[t])},e.prototype.createInstance=function(t){return new e(t)},e}(),hn=new xn;s.exports=hn},{3:3}]},{},[4])(4)})});var pt=Ee((rr,ht)=>{"use strict";var Be=Math.abs,An=Math.min;function he(x,r,o,c){var s=Be(x-r);return o==null&&(o=he.DBL_EPSILON),c==null&&(c=o),s<=o||s<=c*An(Be(x),Be(r))?!0:x===r}he.FLT_EPSILON=11920929e-14;he.DBL_EPSILON=2220446049250313e-31;ht.exports=he});var fe=x=>({vertices:[{x:x.x,y:x.y},{x:x.x+x.width,y:x.y},{x:x.x+x.width,y:x.y+x.height},{x:x.x,y:x.y+x.height}]});var Ae=ie(xe(),1),it=ie(xe(),1);function De(x,r){for(var o=x.length,c=x[o-1],s=r[0],p=r[1],d=c[0],m=c[1],b,l,g=!1,D=0;D<o;++D)c=x[D],b=c[0],l=c[1],l>p!=m>p&&s<(d-b)*(p-l)/(m-l)+b&&(g=!g),d=b,m=l;return g}var ft=ie(xe(),1);var Y=class Me{constructor(r,o){this.x=r,this.y=o}static uhxgnzrv62d83b14c0b945d09ba1e397aba2d418(r){return new Me(r.x,r.y)}kvolyjocsp2bddffefc1b64f36a76c52a892a7686d(){let r={};return r.x=this.x,r.y=this.y,r}rdgahw7e64cfdd5c614dcaae23429d4bdfdea7(r){let o={ltijI:function(s,p,d){return s(p,d)}};return o.ltijI(Ae.default,this.x,r.x)&&o.ltijI(Ae.default,this.y,r.y)}aaufjn1a5864b71d1f4671be587d52b9ed96d3(){return[this.x,this.y]}ulupbjw07d6fd8a910946abbda0537e9abe965a(r){let o={};o.fuZLj=function(d,m){return d/m},o.hDhxJ=function(d,m){return d+m},o.NpghE=function(d,m){return d/m},o.Xhnfc=function(d,m){return d+m};let c=o,s=c.fuZLj(c.hDhxJ(this.x,r.x),2),p=c.NpghE(c.Xhnfc(this.y,r.y),2);return new Me(s,p)}uylravelpb9eb551943dde449e85af533a580837d3(r){let o={};o.xzPqL=function(d,m){return d-m},o.KyWJQ=function(d,m){return d-m},o.hJToo=function(d,m){return d+m},o.trVVH=function(d,m){return d*m};let c=o,s=c.xzPqL(r.x,this.x),p=c.KyWJQ(r.y,this.y);return Math.sqrt(c.hJToo(s*s,c.trVVH(p,p)))}};function Re(x,r,o){let c={};c.lpteY=function(u,y){return u-y},c.dVTWq=function(u,y){return u+y},c.dqJnk=function(u,y){return u*y},c.dsCYX=function(u,y){return u===y},c.qGMqC=function(u,y){return u/y},c.gyNvP=function(u,y){return u*y};let s=c,p={x:s.lpteY(x.x,r.x),y:x.y-r.y},d={};d.x=o.x-r.x,d.y=o.y-r.y;let m=d,b=s.dVTWq(s.dqJnk(p.x,m.x),s.dqJnk(p.y,m.y)),l=Math.hypot(p.x,p.y),g=Math.hypot(m.x,m.y);if(s.dsCYX(l,0)||g===0)return 0;let D=Math.min(1,Math.max(-1,s.qGMqC(b,s.gyNvP(l,g))));return Math.acos(D)}var at=class{static ivatm6f3b18c8e2f04af98a514b433192fdcf(x,r,o){let c={};c.iKEzg=function(b,l){return b<=l};let s=c,p=r.ulupbjw07d6fd8a910946abbda0537e9abe965a(o),d=r.uylravelpb9eb551943dde449e85af533a580837d3(o)/2,m=p.uylravelpb9eb551943dde449e85af533a580837d3(x);return s.iKEzg(m,d)}},Sn=class F{constructor(r){let o={};o.JzCZs="3|2|1|4|0";let c=o,s=c.JzCZs.split("|"),p=0;for(;;){switch(s[p++]){case"0":!F.bzeyzt9fd2e479f2b54b399e1c62940cd843ca(r)&&this.points.reverse();continue;case"1":this.sectionTag="";continue;case"2":this.tag="";continue;case"3":this.points=r;continue;case"4":this.materialTag="";continue}break}}static uhxgnzrv62d83b14c0b945d09ba1e397aba2d418(r){return new F(r.points.map(o=>Y.uhxgnzrv62d83b14c0b945d09ba1e397aba2d418(o)))}kvolyjocsp2bddffefc1b64f36a76c52a892a7686d(){return{points:this.points.map(r=>r.kvolyjocsp2bddffefc1b64f36a76c52a892a7686d()),tag:this.tag,sectionTag:this.sectionTag,materialTag:this.materialTag}}static bzeyzt9fd2e479f2b54b399e1c62940cd843ca(r){let o={};o.ulJoN=function(b,l){return b-l},o.zoniS=function(b,l){return b-l},o.Keoyq=function(b,l){return b-l},o.MvWyf=function(b,l){return b*l};let c=o,[s,p,d]=r;return c.ulJoN(c.zoniS(p.x,s.x)*c.Keoyq(d.y,s.y),c.MvWyf(p.y-s.y,d.x-s.x))>0}lzequyerbq03d4ec6743c34ccaafe3856529507e22(r,o,c){this.tag=r,this.sectionTag=o,this.materialTag=c}aquwpwrxld78b5e52e72a402ca8948cce594e2058(){let r={};r.QbNRX=function(b,l){return b+l};let o=r,[c,s,p]=this.points,d=o.QbNRX(o.QbNRX(c.x,s.x),p.x)/3,m=o.QbNRX(c.y+s.y,p.y)/3;return new Y(d,m)}gjqglrdl3e7a1b5e2eab4ceea27fc47d4b4e7505(r=.1){let o={};o.hykaf=function(l,g){return l+g},o.lNzKP=function(l,g){return l-g},o.VvfKk=function(l,g){return l*g},o.vKhsk=function(l,g){return l*g},o.wvCSI=function(l,g){return l+g},o.agaXZ=function(l,g){return l*g},o.UykHU=function(l,g){return l*g};let c=o,s=this.aquwpwrxld78b5e52e72a402ca8948cce594e2058(),p=this.points.map(l=>{let g=s.x-l.x,D=s.y-l.y;return Math.sqrt(c.hykaf(g*g,D*D))}),d=Math.max(...p),m=c.UykHU(d,r);return this.points.map(l=>{let g=c.lNzKP(s.x,l.x),D=c.lNzKP(s.y,l.y),u=Math.sqrt(c.VvfKk(g,g)+c.vKhsk(D,D)),y=m/u;return new Y(c.wvCSI(l.x,c.agaXZ(g,y)),l.y+D*y)})}opucci62a4c530b18e421b921d40b36b7154c3(){let r=this.aquwpwrxld78b5e52e72a402ca8948cce594e2058();return[new F([this.points[0],this.points[1],r]),new F([this.points[1],this.points[2],r]),new F([this.points[2],this.points[0],r])]}bbldxbka15c454864c44491b9ef970861e52f1a(){let r={};r.JVEGq=function(l,g){return l+g},r.gFrgY=function(l,g){return l/g},r.AAiyX=function(l,g){return l/g},r.cPnUQ=function(l,g){return l+g},r.qJrqW=function(l,g){return l+g},r.SJbri=function(l,g){return l/g};let o=r,[c,s,p]=this.points,d=new Y(o.JVEGq(c.x,s.x)/2,o.JVEGq(c.y,s.y)/2),m=new Y(o.gFrgY(o.JVEGq(s.x,p.x),2),o.AAiyX(o.cPnUQ(s.y,p.y),2)),b=new Y(o.AAiyX(o.qJrqW(p.x,c.x),2),o.SJbri(p.y+c.y,2));return[new F([c,d,b]),new F([d,s,m]),new F([b,m,p]),new F([d,m,b])]}yrcpirj49eaaa0ff65d4105b3214cfcc299d774(){let r={};r.DzcAN=function(I,N){return I*N},r.qiCRT=function(I,N){return I+N},r.qirDp=function(I,N){return I-N},r.TZzGI=function(I,N){return I*N},r.ZAdXP=function(I,N){return I-N},r.hKejd=function(I,N){return I<N},r.UryAb=function(I,N){return I+N},r.lMJce=function(I,N){return I+N},r.BVpmV=function(I,N){return I*N},r.Xmjgi=function(I,N){return I+N},r.mvpFN=function(I,N){return I-N},r.vBkmQ=function(I,N){return I*N},r.ynEmG=function(I,N){return I+N},r.NSPfb=function(I,N){return I-N},r.gUnQj=function(I,N){return I+N},r.lHnGw=function(I,N){return I*N},r.SQPwL=function(I,N){return I/N},r.MUdPM=function(I,N){return I+N},r.HBpxB=function(I,N){return I-N},r.JmnDj=function(I,N){return I+N};let o=r,[c,s,p]=this.points,d=c.x,m=c.y,b=s.x,l=s.y,g=p.x,D=p.y,u=o.DzcAN(2,o.qiCRT(o.qiCRT(o.DzcAN(d,o.qirDp(l,D)),o.TZzGI(b,D-m)),o.DzcAN(g,o.ZAdXP(m,l))));if(o.hKejd(Math.abs(u),1e-10))return null;let y=o.UryAb(o.lMJce(o.BVpmV(o.Xmjgi(d*d,m*m),o.mvpFN(l,D)),o.vBkmQ(o.ynEmG(o.DzcAN(b,b),o.vBkmQ(l,l)),o.NSPfb(D,m))),o.gUnQj(o.lHnGw(g,g),o.vBkmQ(D,D))*(m-l))/u,S=o.SQPwL(o.gUnQj(o.MUdPM(o.vBkmQ(o.TZzGI(d,d)+m*m,o.HBpxB(g,b)),o.JmnDj(o.vBkmQ(b,b),l*l)*o.HBpxB(d,g)),o.DzcAN(g*g+o.lHnGw(D,D),b-d)),u);return new Y(y,S)}xeethr7b2a07e5693646c1a1513ae732ceca93(){let r={};r.MGNov=function(s,p){return s===p};let o=r,c=this.yrcpirj49eaaa0ff65d4105b3214cfcc299d774();return o.MGNov(c,null)?[]:[new F([this.points[0],this.points[1],c]),new F([this.points[1],this.points[2],c]),new F([this.points[2],this.points[0],c])]}ibvlxuwja38adfc8f9d245acaa01ade47e396c58(){let r={};r.IMWxt=function(y,S){return y+S},r.BAlcV=function(y,S){return y*S},r.VQfeZ=function(y,S){return y-S},r.uIJWB=function(y,S){return y*S},r.KzGNe=function(y,S){return y-S};let o=r,[c,s,p]=this.points,d=c.x,m=s.x,b=p.x,l=c.y,g=s.y,D=p.y;return .5*Math.abs(o.IMWxt(o.IMWxt(d*(g-D),o.BAlcV(m,o.VQfeZ(D,l))),o.uIJWB(b,o.KzGNe(l,g))))}xbkawe87cceb64221426fa50dfeabe8c18388(){let r={fVdxe:function(c,s,p){return c(s,p)}},o=this.ibvlxuwja38adfc8f9d245acaa01ade47e396c58();return r.fVdxe(it.default,o,0)}soaxwzevk69550a0f86ff4e6b89001b9ed4f01e88(){let r={KxGka:function(d,m,b,l){return d(m,b,l)}},[o,c,s]=this.points;return[r.KxGka(Re,c,o,s),r.KxGka(Re,o,c,s),Re(o,s,c)]}vawfxailfu23c4bbe58bac4f808bce87b33247cfe7(r=15*Math.PI/180){return!!this.soaxwzevk69550a0f86ff4e6b89001b9ed4f01e88().some(c=>c<r)}rvwkibcea39343cd2498f893d65ac88356fb9(){let r={};r.uGfht=function(s,p){return s<p},r.XofEP=function(s,p){return s%p},r.ugIeO=function(s,p){return s+p};let o=r,c=this.yrcpirj49eaaa0ff65d4105b3214cfcc299d774();if(!c)return this.duqiq65e40d153cec4e2e94aa67f4a3f06cc2();for(let s=0;o.uGfht(s,3);s++){let p=this.points[s],d=this.points[o.XofEP(o.ugIeO(s,1),3)];if(at.ivatm6f3b18c8e2f04af98a514b433192fdcf(c,p,d))return this.duqiq65e40d153cec4e2e94aa67f4a3f06cc2()}return c}nbgnahpptz7de2c4940dd64128b469ff8366d571ce(r){let[o,c,s]=this.points,p={};p.p1=o,p.p2=c;let d={};d.p1=c,d.p2=s;let m={};m.p1=s,m.p2=o;let b=[p,d,m],l=[];for(let g of b)for(let D of r)if(!this.points.some(u=>u.rdgahw7e64cfdd5c614dcaae23429d4bdfdea7(D))&&at.ivatm6f3b18c8e2f04af98a514b433192fdcf(D,g.p1,g.p2))return l.push(g.p1.ulupbjw07d6fd8a910946abbda0537e9abe965a(g.p2)),l;return l}rtqjnrakmv3375ab7e080d4c1fa26ed4addc291517(r){let o=this.yrcpirj49eaaa0ff65d4105b3214cfcc299d774();return o?r.some(c=>c.mjsklv68c09ca44f214c2fb4e01bbad6493497(o))?o:this.duqiq65e40d153cec4e2e94aa67f4a3f06cc2():this.duqiq65e40d153cec4e2e94aa67f4a3f06cc2()}duqiq65e40d153cec4e2e94aa67f4a3f06cc2(){let r={};r.NFmWG=function(u,y){return u<y},r.VPkPk=function(u,y){return u>y};let o=r,[c,s,p]=this.points,d={};d.p1=c,d.p2=s;let m={};m.p1=s,m.p2=p;let b={};b.p1=p,b.p2=c;let l=[d,m,b],g=l[0],D=g.p1.uylravelpb9eb551943dde449e85af533a580837d3(g.p2);for(let u=1;o.NFmWG(u,l.length);u++){let y=l[u].p1.uylravelpb9eb551943dde449e85af533a580837d3(l[u].p2);o.VPkPk(y,D)&&(D=y,g=l[u])}return g.p1.ulupbjw07d6fd8a910946abbda0537e9abe965a(g.p2)}};var En=class ct{constructor(r,o,c,s){let p="2|3|1|4|0".split("|"),d=0;for(;;){switch(p[d++]){case"0":this.d3Polygon=r.map(m=>[m.x,m.y]);continue;case"1":this.sectionTag=c;continue;case"2":this.points=r;continue;case"3":this.tag=o;continue;case"4":this.materialTag=s;continue}break}}static FromDto(r){return new ct(r.points.map(o=>Y.uhxgnzrv62d83b14c0b945d09ba1e397aba2d418(o)),r.tag,r.sectionTag,r.materialTag)}oyvymlveqt747daa4261c64f218f12a458ce2e2733(r){let o={skJSw:function(c,s){return c-s},DZCfm:function(c,s){return c<s},wifqv:function(c,s,p,d){return c(s,p,d)}};for(let c=0,s=o.skJSw(this.points.length,1);o.DZCfm(c,this.points.length);s=c++)if(o.wifqv(Nn,r,this.points[c],this.points[s]))return!0;return!1}mjsklv68c09ca44f214c2fb4e01bbad6493497(r){let o={SfEgU:function(s,p,d){return s(p,d)}};return this.oyvymlveqt747daa4261c64f218f12a458ce2e2733(r)?!0:o.SfEgU(De,this.d3Polygon,[r.x,r.y])}yevtrttu7a5c87b8d45244cab5ee381ccfea709f(r,o){let c={};c.ZlZEa=function(d,m){return d<m},c.fOhvs=function(d,m){return d+m},c.LIEaQ=function(d,m){return d-m},c.HjTcC=function(d,m){return d+m},c.XSLre=function(d,m){return d*m},c.JQWqo=function(d,m){return d/m},c.HHKny=function(d,m){return d*m},c.ropTX=function(d,m){return d*m};let s=c,p=[];for(let d=0;s.ZlZEa(d,r.length);d++){let m=r[d],b=r[s.fOhvs(d,1)%r.length],l=b.x-m.x,g=s.LIEaQ(b.y,m.y),D=Math.sqrt(s.HjTcC(s.XSLre(l,l),s.XSLre(g,g))),u=Math.floor(s.JQWqo(D,o));p.push(new Y(m.x,m.y));for(let y=1;s.ZlZEa(y,u);y++){let S=s.JQWqo(s.HHKny(y,o),D),I=m.x+s.ropTX(S,l),N=m.y+s.ropTX(S,g);p.push(new Y(I,N))}}return p}};function Nn(x,r,o){let c={};c.ctceh=function(b,l){return b-l},c.aYAvM=function(b,l){return b-l},c.kmVzX=function(b,l){return b*l},c.qUILe=function(b,l){return b-l},c.Wkzzo=function(b,l){return b*l},c.yhlMl=function(b,l){return b*l},c.yaGsT=function(b,l){return b+l},c.yFiub=function(b,l){return b**l},c.lmLMA=function(b,l){return b-l};let s=c,p=s.ctceh(x.y,r.y)*s.aYAvM(o.x,r.x)-s.kmVzX(s.ctceh(x.x,r.x),s.qUILe(o.y,r.y));if(!(0,ft.default)(Math.abs(p),0))return!1;let d=s.Wkzzo(s.ctceh(x.x,r.x),s.qUILe(o.x,r.x))+s.yhlMl(s.aYAvM(x.y,r.y),o.y-r.y);if(d<0)return!1;let m=s.yaGsT(s.yFiub(s.lmLMA(o.x,r.x),2),(o.y-r.y)**2);return!(d>m)}function st(x){let r=x.polygons.map(p=>En.FromDto(p)),o=x.baseTriangles.map(p=>Sn.uhxgnzrv62d83b14c0b945d09ba1e397aba2d418(p)),c=o,s=[];for(let p of c){let d=p.aquwpwrxld78b5e52e72a402ca8948cce594e2058(),m=r.find(b=>b.mjsklv68c09ca44f214c2fb4e01bbad6493497(d));m&&(p.lzequyerbq03d4ec6743c34ccaafe3856529507e22(m.tag,m.sectionTag,m.materialTag),s.push(p))}return{triangles:s.map(p=>p.kvolyjocsp2bddffefc1b64f36a76c52a892a7686d())}}var Ce=ie(dt());var lt=(x,r,o="")=>`View3dModel-${x}-${r}${o}`,mt=x=>`Triangles-${x}`;var Z=class extends Error{constructor(r){super(r)}};function xt(x){if(x.length<3)throw new Z("At least three vertices are required to form a face.");return{vertices:[...x.filter(r=>r)],results:[]}}var se=ie(pt());var ce=x=>{let r=(x.points??"").trim().split(/\s+/).map(c=>c.split(",")),o=[];for(let[c,s]of r){let p=parseFloat(c),d=parseFloat(s);if(Number.isFinite(p)&&Number.isFinite(d))o.push({x:p,y:d});else throw new Z("Invalid vertex coordinates")}return{vertices:o}};function bt(x){let r=0,o=0,c=0,s=x.length;for(let p=0;p<s;p++){let{x:d,y:m}=x[p],{x:b,y:l}=x[(p+1)%s],g=d*l-b*m;r+=g,o+=(d+b)*g,c+=(m+l)*g}return r*=.5,r===0?{x:0,y:0}:(o/=6*r,c/=6*r,{x:o,y:c})}function*vt(x,r){let o=[...new Set(r.rectangles.map(u=>u.name).concat(r.polygons.map(u=>u.name)))],c=[];for(let u of x){let y=u.points.map(N=>Ln(N)),S=xt(y);if(o.indexOf(u.name)===-1)throw new Z(`Geometry name ${u.name} not found in geometry rectangles or polygons.`);c.push(S)}let s=r.supports.map(u=>Bn(u)),p=x.flatMap(u=>u.points).map(u=>u.x).reduce((u,y)=>Math.max(u,y),-1/0),d=x.flatMap(u=>u.points).map(u=>u.x).reduce((u,y)=>Math.min(u,y),1/0),m=x.flatMap(u=>u.points).map(u=>u.y).reduce((u,y)=>Math.max(u,y),-1/0),b=x.flatMap(u=>u.points).map(u=>u.y).reduce((u,y)=>Math.min(u,y),1/0),l=p-d,g=m-b,D=[...r.polygons.map(u=>ce(u)),...r.rectangles.map(u=>fe(u))].map(u=>u.vertices.map(y=>({x:y.x,y:y.y}))).map(u=>({points:u}));for(let u of r.loadCases)yield{faces:c,wireframeFaces:[],supports:s,borders:D,loads:Mn(u,r),loadCaseTag:u.name,width:l,height:g}}function Mn(x,r){let o=[];for(let c of x.pointLoads)(0,se.default)(c.fx,0)||o.push({x:c.x,y:c.y,z:0,valueX:c.fx,valueY:0,valueZ:0,type:"point"}),(0,se.default)(c.fy,0)||o.push({x:c.x,y:c.y,z:0,valueY:c.fy,valueZ:0,valueX:0,type:"point"});for(let c of x.distributedLoads){let s=r.polygons.filter(m=>m.name===c.geometryName).map(m=>ce(m)),p=r.rectangles.filter(m=>m.name===c.geometryName).map(m=>fe(m)),d=[...s,...p];for(let m of d){let b=bt(m.vertices);(0,se.default)(c.fx,0)||o.push({x:b.x,y:b.y,z:0,valueX:c.fx,valueY:0,valueZ:0,type:"distributed"}),(0,se.default)(c.fy,0)||o.push({x:b.x,y:b.y,z:0,valueX:0,valueY:c.fy,valueZ:0,type:"distributed"})}}return o}function Ln(x){return{x:x.x,y:x.y,z:0,ux:0,uy:0,uz:0,value:0}}function Bn(x){return{x:x.x,y:x.y,z:0,ux:x.fixedX,uy:x.fixedY,uz:!1}}addEventListener("message",({data:x})=>{Cn(x)});var Cn=async x=>{let{geometry:r,uuid:o,baseTriangles:c}=x,s=r.loadCases.flatMap(S=>S.pointLoads).map(S=>({x:S.x,y:S.y})),p=r.supports.map(S=>({x:S.x,y:S.y})),d=r.resultPoints.map(S=>({x:S.x,y:S.y})),m=r.rectangles.map(S=>qn(S)),b=r.polygons.map(S=>jn(S)),l=m.concat(b),g={maxTriangleArea:r.meshingConfiguration.maxTriangleArea,refinementPoints:r.meshingConfiguration.refinementPoints.map(S=>Vn(S))},u=st({polygons:l,extraPoints:s.concat(p).concat(d),meshingConfiguration:g,baseTriangles:c.map(S=>kn(S))}).triangles.map(S=>On(S));await Ce.setItem(mt(o),u);for(let S of vt(u,r))await Ce.setItem(lt(o,S.loadCaseTag),S);postMessage({uuid:o})},Vn=x=>({radius:x.radius,maxTriangleArea:x.maxArea,center:{x:x.x,y:x.y}}),zn=x=>({x:x.x,y:x.y}),On=x=>({points:x.points.map(o=>zn(o)),name:x.tag,sectionTag:x.sectionTag,materialTag:x.materialTag}),qn=x=>({points:fe(x).vertices.map(o=>({x:o.x,y:o.y})),tag:x.name,sectionTag:x.sectionName,materialTag:x.materialName}),jn=x=>({points:ce(x).vertices.map(o=>({x:o.x,y:o.y})),tag:x.name,sectionTag:x.sectionName,materialTag:x.materialName}),kn=x=>({points:x.points.map(o=>({x:o.x,y:o.y}))});
