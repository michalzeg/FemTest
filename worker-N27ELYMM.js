var sn=Object.create;var He=Object.defineProperty;var cn=Object.getOwnPropertyDescriptor;var fn=Object.getOwnPropertyNames;var un=Object.getPrototypeOf,dn=Object.prototype.hasOwnProperty;var ae=(c=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(c,{get:(a,s)=>(typeof require<"u"?require:a)[s]}):c)(function(c){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+c+'" is not supported')});var ln=(c,a)=>()=>(a||c((a={exports:{}}).exports,a),a.exports);var hn=(c,a,s,u)=>{if(a&&typeof a=="object"||typeof a=="function")for(let p of fn(a))!dn.call(c,p)&&p!==s&&He(c,p,{get:()=>a[p],enumerable:!(u=cn(a,p))||u.enumerable});return c};var mn=(c,a,s)=>(s=c!=null?sn(un(c)):{},hn(a||!c||!c.__esModule?He(s,"default",{value:c,enumerable:!0}):s,c));var tt=ln((et,Ee)=>{"use strict";(function(c){if(typeof et=="object"&&typeof Ee<"u")Ee.exports=c();else if(typeof define=="function"&&define.amd)define([],c);else{var a;typeof window<"u"?a=window:typeof global<"u"?a=global:typeof self<"u"?a=self:a=this,a.localforage=c()}})(function(){var c,a,s;return function u(p,y,w){function g(I,N){if(!y[I]){if(!p[I]){var f=typeof ae=="function"&&ae;if(!N&&f)return f(I,!0);if(v)return v(I,!0);var T=new Error("Cannot find module '"+I+"'");throw T.code="MODULE_NOT_FOUND",T}var S=y[I]={exports:{}};p[I][0].call(S.exports,function(L){var Y=p[I][1][L];return g(Y||L)},S,S.exports,u,p,y,w)}return y[I].exports}for(var v=typeof ae=="function"&&ae,P=0;P<w.length;P++)g(w[P]);return g}({1:[function(u,p,y){(function(w){"use strict";var g=w.MutationObserver||w.WebKitMutationObserver,v;if(g){var P=0,I=new g(L),N=w.document.createTextNode("");I.observe(N,{characterData:!0}),v=function(){N.data=P=++P%2}}else if(!w.setImmediate&&typeof w.MessageChannel<"u"){var f=new w.MessageChannel;f.port1.onmessage=L,v=function(){f.port2.postMessage(0)}}else"document"in w&&"onreadystatechange"in w.document.createElement("script")?v=function(){var O=w.document.createElement("script");O.onreadystatechange=function(){L(),O.onreadystatechange=null,O.parentNode.removeChild(O),O=null},w.document.documentElement.appendChild(O)}:v=function(){setTimeout(L,0)};var T,S=[];function L(){T=!0;for(var O,j,V=S.length;V;){for(j=S,S=[],O=-1;++O<V;)j[O]();V=S.length}T=!1}p.exports=Y;function Y(O){S.push(O)===1&&!T&&v()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(u,p,y){"use strict";var w=u(1);function g(){}var v={},P=["REJECTED"],I=["FULFILLED"],N=["PENDING"];p.exports=f;function f(x){if(typeof x!="function")throw new TypeError("resolver must be a function");this.state=N,this.queue=[],this.outcome=void 0,x!==g&&Y(this,x)}f.prototype.catch=function(x){return this.then(null,x)},f.prototype.then=function(x,D){if(typeof x!="function"&&this.state===I||typeof D!="function"&&this.state===P)return this;var R=new this.constructor(g);if(this.state!==N){var C=this.state===I?x:D;S(R,C,this.outcome)}else this.queue.push(new T(R,x,D));return R};function T(x,D,R){this.promise=x,typeof D=="function"&&(this.onFulfilled=D,this.callFulfilled=this.otherCallFulfilled),typeof R=="function"&&(this.onRejected=R,this.callRejected=this.otherCallRejected)}T.prototype.callFulfilled=function(x){v.resolve(this.promise,x)},T.prototype.otherCallFulfilled=function(x){S(this.promise,this.onFulfilled,x)},T.prototype.callRejected=function(x){v.reject(this.promise,x)},T.prototype.otherCallRejected=function(x){S(this.promise,this.onRejected,x)};function S(x,D,R){w(function(){var C;try{C=D(R)}catch(F){return v.reject(x,F)}C===x?v.reject(x,new TypeError("Cannot resolve promise with itself")):v.resolve(x,C)})}v.resolve=function(x,D){var R=O(L,D);if(R.status==="error")return v.reject(x,R.value);var C=R.value;if(C)Y(x,C);else{x.state=I,x.outcome=D;for(var F=-1,G=x.queue.length;++F<G;)x.queue[F].callFulfilled(D)}return x},v.reject=function(x,D){x.state=P,x.outcome=D;for(var R=-1,C=x.queue.length;++R<C;)x.queue[R].callRejected(D);return x};function L(x){var D=x&&x.then;if(x&&(typeof x=="object"||typeof x=="function")&&typeof D=="function")return function(){D.apply(x,arguments)}}function Y(x,D){var R=!1;function C($){R||(R=!0,v.reject(x,$))}function F($){R||(R=!0,v.resolve(x,$))}function G(){D(F,C)}var W=O(G);W.status==="error"&&C(W.value)}function O(x,D){var R={};try{R.value=x(D),R.status="success"}catch(C){R.status="error",R.value=C}return R}f.resolve=j;function j(x){return x instanceof this?x:v.resolve(new this(g),x)}f.reject=V;function V(x){var D=new this(g);return v.reject(D,x)}f.all=he;function he(x){var D=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var R=x.length,C=!1;if(!R)return this.resolve([]);for(var F=new Array(R),G=0,W=-1,$=new this(g);++W<R;)X(x[W],W);return $;function X(ne,fe){D.resolve(ne).then(me,function(ee){C||(C=!0,v.reject($,ee))});function me(ee){F[fe]=ee,++G===R&&!C&&(C=!0,v.resolve($,F))}}}f.race=J;function J(x){var D=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var R=x.length,C=!1;if(!R)return this.resolve([]);for(var F=-1,G=new this(g);++F<R;)W(x[F]);return G;function W($){D.resolve($).then(function(X){C||(C=!0,v.resolve(G,X))},function(X){C||(C=!0,v.reject(G,X))})}}},{1:1}],3:[function(u,p,y){(function(w){"use strict";typeof w.Promise!="function"&&(w.Promise=u(2))}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(u,p,y){"use strict";var w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function g(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function v(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var P=v();function I(){try{if(!P||!P.open)return!1;var e=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),n=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!e||n)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function N(e,n){e=e||[],n=n||{};try{return new Blob(e,n)}catch(r){if(r.name!=="TypeError")throw r;for(var t=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,o=new t,i=0;i<e.length;i+=1)o.append(e[i]);return o.getBlob(n.type)}}typeof Promise>"u"&&u(3);var f=Promise;function T(e,n){n&&e.then(function(t){n(null,t)},function(t){n(t)})}function S(e,n,t){typeof n=="function"&&e.then(n),typeof t=="function"&&e.catch(t)}function L(e){return typeof e!="string"&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function Y(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var O="local-forage-detect-blob-support",j=void 0,V={},he=Object.prototype.toString,J="readonly",x="readwrite";function D(e){for(var n=e.length,t=new ArrayBuffer(n),o=new Uint8Array(t),i=0;i<n;i++)o[i]=e.charCodeAt(i);return t}function R(e){return new f(function(n){var t=e.transaction(O,x),o=N([""]);t.objectStore(O).put(o,"key"),t.onabort=function(i){i.preventDefault(),i.stopPropagation(),n(!1)},t.oncomplete=function(){var i=navigator.userAgent.match(/Chrome\/(\d+)/),r=navigator.userAgent.match(/Edge\//);n(r||!i||parseInt(i[1],10)>=43)}}).catch(function(){return!1})}function C(e){return typeof j=="boolean"?f.resolve(j):R(e).then(function(n){return j=n,j})}function F(e){var n=V[e.name],t={};t.promise=new f(function(o,i){t.resolve=o,t.reject=i}),n.deferredOperations.push(t),n.dbReady?n.dbReady=n.dbReady.then(function(){return t.promise}):n.dbReady=t.promise}function G(e){var n=V[e.name],t=n.deferredOperations.pop();if(t)return t.resolve(),t.promise}function W(e,n){var t=V[e.name],o=t.deferredOperations.pop();if(o)return o.reject(n),o.promise}function $(e,n){return new f(function(t,o){if(V[e.name]=V[e.name]||Me(),e.db)if(n)F(e),e.db.close();else return t(e.db);var i=[e.name];n&&i.push(e.version);var r=P.open.apply(P,i);n&&(r.onupgradeneeded=function(d){var l=r.result;try{l.createObjectStore(e.storeName),d.oldVersion<=1&&l.createObjectStore(O)}catch(h){if(h.name==="ConstraintError")console.warn('The database "'+e.name+'" has been upgraded from version '+d.oldVersion+" to version "+d.newVersion+', but the storage "'+e.storeName+'" already exists.');else throw h}}),r.onerror=function(d){d.preventDefault(),o(r.error)},r.onsuccess=function(){var d=r.result;d.onversionchange=function(l){l.target.close()},t(d),G(e)}})}function X(e){return $(e,!1)}function ne(e){return $(e,!0)}function fe(e,n){if(!e.db)return!0;var t=!e.db.objectStoreNames.contains(e.storeName),o=e.version<e.db.version,i=e.version>e.db.version;if(o&&(e.version!==n&&console.warn('The database "'+e.name+`" can't be downgraded from version `+e.db.version+" to version "+e.version+"."),e.version=e.db.version),i||t){if(t){var r=e.db.version+1;r>e.version&&(e.version=r)}return!0}return!1}function me(e){return new f(function(n,t){var o=new FileReader;o.onerror=t,o.onloadend=function(i){var r=btoa(i.target.result||"");n({__local_forage_encoded_blob:!0,data:r,type:e.type})},o.readAsBinaryString(e)})}function ee(e){var n=D(atob(e.data));return N([n],{type:e.type})}function De(e){return e&&e.__local_forage_encoded_blob}function st(e){var n=this,t=n._initReady().then(function(){var o=V[n._dbInfo.name];if(o&&o.dbReady)return o.dbReady});return S(t,e,e),t}function ct(e){F(e);for(var n=V[e.name],t=n.forages,o=0;o<t.length;o++){var i=t[o];i._dbInfo.db&&(i._dbInfo.db.close(),i._dbInfo.db=null)}return e.db=null,X(e).then(function(r){return e.db=r,fe(e)?ne(e):r}).then(function(r){e.db=n.db=r;for(var d=0;d<t.length;d++)t[d]._dbInfo.db=r}).catch(function(r){throw W(e,r),r})}function K(e,n,t,o){o===void 0&&(o=1);try{var i=e.db.transaction(e.storeName,n);t(null,i)}catch(r){if(o>0&&(!e.db||r.name==="InvalidStateError"||r.name==="NotFoundError"))return f.resolve().then(function(){if(!e.db||r.name==="NotFoundError"&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),ne(e)}).then(function(){return ct(e).then(function(){K(e,n,t,o-1)})}).catch(t);t(r)}}function Me(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function ft(e){var n=this,t={db:null};if(e)for(var o in e)t[o]=e[o];var i=V[t.name];i||(i=Me(),V[t.name]=i),i.forages.push(n),n._initReady||(n._initReady=n.ready,n.ready=st);var r=[];function d(){return f.resolve()}for(var l=0;l<i.forages.length;l++){var h=i.forages[l];h!==n&&r.push(h._initReady().catch(d))}var m=i.forages.slice(0);return f.all(r).then(function(){return t.db=i.db,X(t)}).then(function(b){return t.db=b,fe(t,n._defaultConfig.version)?ne(t):b}).then(function(b){t.db=i.db=b,n._dbInfo=t;for(var _=0;_<m.length;_++){var E=m[_];E!==n&&(E._dbInfo.db=t.db,E._dbInfo.version=t.version)}})}function ut(e,n){var t=this;e=L(e);var o=new f(function(i,r){t.ready().then(function(){K(t._dbInfo,J,function(d,l){if(d)return r(d);try{var h=l.objectStore(t._dbInfo.storeName),m=h.get(e);m.onsuccess=function(){var b=m.result;b===void 0&&(b=null),De(b)&&(b=ee(b)),i(b)},m.onerror=function(){r(m.error)}}catch(b){r(b)}})}).catch(r)});return T(o,n),o}function dt(e,n){var t=this,o=new f(function(i,r){t.ready().then(function(){K(t._dbInfo,J,function(d,l){if(d)return r(d);try{var h=l.objectStore(t._dbInfo.storeName),m=h.openCursor(),b=1;m.onsuccess=function(){var _=m.result;if(_){var E=_.value;De(E)&&(E=ee(E));var M=e(E,_.key,b++);M!==void 0?i(M):_.continue()}else i()},m.onerror=function(){r(m.error)}}catch(_){r(_)}})}).catch(r)});return T(o,n),o}function lt(e,n,t){var o=this;e=L(e);var i=new f(function(r,d){var l;o.ready().then(function(){return l=o._dbInfo,he.call(n)==="[object Blob]"?C(l.db).then(function(h){return h?n:me(n)}):n}).then(function(h){K(o._dbInfo,x,function(m,b){if(m)return d(m);try{var _=b.objectStore(o._dbInfo.storeName);h===null&&(h=void 0);var E=_.put(h,e);b.oncomplete=function(){h===void 0&&(h=null),r(h)},b.onabort=b.onerror=function(){var M=E.error?E.error:E.transaction.error;d(M)}}catch(M){d(M)}})}).catch(d)});return T(i,t),i}function ht(e,n){var t=this;e=L(e);var o=new f(function(i,r){t.ready().then(function(){K(t._dbInfo,x,function(d,l){if(d)return r(d);try{var h=l.objectStore(t._dbInfo.storeName),m=h.delete(e);l.oncomplete=function(){i()},l.onerror=function(){r(m.error)},l.onabort=function(){var b=m.error?m.error:m.transaction.error;r(b)}}catch(b){r(b)}})}).catch(r)});return T(o,n),o}function mt(e){var n=this,t=new f(function(o,i){n.ready().then(function(){K(n._dbInfo,x,function(r,d){if(r)return i(r);try{var l=d.objectStore(n._dbInfo.storeName),h=l.clear();d.oncomplete=function(){o()},d.onabort=d.onerror=function(){var m=h.error?h.error:h.transaction.error;i(m)}}catch(m){i(m)}})}).catch(i)});return T(t,e),t}function pt(e){var n=this,t=new f(function(o,i){n.ready().then(function(){K(n._dbInfo,J,function(r,d){if(r)return i(r);try{var l=d.objectStore(n._dbInfo.storeName),h=l.count();h.onsuccess=function(){o(h.result)},h.onerror=function(){i(h.error)}}catch(m){i(m)}})}).catch(i)});return T(t,e),t}function bt(e,n){var t=this,o=new f(function(i,r){if(e<0){i(null);return}t.ready().then(function(){K(t._dbInfo,J,function(d,l){if(d)return r(d);try{var h=l.objectStore(t._dbInfo.storeName),m=!1,b=h.openKeyCursor();b.onsuccess=function(){var _=b.result;if(!_){i(null);return}e===0||m?i(_.key):(m=!0,_.advance(e))},b.onerror=function(){r(b.error)}}catch(_){r(_)}})}).catch(r)});return T(o,n),o}function yt(e){var n=this,t=new f(function(o,i){n.ready().then(function(){K(n._dbInfo,J,function(r,d){if(r)return i(r);try{var l=d.objectStore(n._dbInfo.storeName),h=l.openKeyCursor(),m=[];h.onsuccess=function(){var b=h.result;if(!b){o(m);return}m.push(b.key),b.continue()},h.onerror=function(){i(h.error)}}catch(b){i(b)}})}).catch(i)});return T(t,e),t}function gt(e,n){n=Y.apply(this,arguments);var t=this.config();e=typeof e!="function"&&e||{},e.name||(e.name=e.name||t.name,e.storeName=e.storeName||t.storeName);var o=this,i;if(!e.name)i=f.reject("Invalid arguments");else{var r=e.name===t.name&&o._dbInfo.db,d=r?f.resolve(o._dbInfo.db):X(e).then(function(l){var h=V[e.name],m=h.forages;h.db=l;for(var b=0;b<m.length;b++)m[b]._dbInfo.db=l;return l});e.storeName?i=d.then(function(l){if(l.objectStoreNames.contains(e.storeName)){var h=l.version+1;F(e);var m=V[e.name],b=m.forages;l.close();for(var _=0;_<b.length;_++){var E=b[_];E._dbInfo.db=null,E._dbInfo.version=h}var M=new f(function(A,z){var B=P.open(e.name,h);B.onerror=function(k){var oe=B.result;oe.close(),z(k)},B.onupgradeneeded=function(){var k=B.result;k.deleteObjectStore(e.storeName)},B.onsuccess=function(){var k=B.result;k.close(),A(k)}});return M.then(function(A){m.db=A;for(var z=0;z<b.length;z++){var B=b[z];B._dbInfo.db=A,G(B._dbInfo)}}).catch(function(A){throw(W(e,A)||f.resolve()).catch(function(){}),A})}}):i=d.then(function(l){F(e);var h=V[e.name],m=h.forages;l.close();for(var b=0;b<m.length;b++){var _=m[b];_._dbInfo.db=null}var E=new f(function(M,A){var z=P.deleteDatabase(e.name);z.onerror=function(){var B=z.result;B&&B.close(),A(z.error)},z.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},z.onsuccess=function(){var B=z.result;B&&B.close(),M(B)}});return E.then(function(M){h.db=M;for(var A=0;A<m.length;A++){var z=m[A];G(z._dbInfo)}}).catch(function(M){throw(W(e,M)||f.resolve()).catch(function(){}),M})})}return T(i,n),i}var vt={_driver:"asyncStorage",_initStorage:ft,_support:I(),iterate:dt,getItem:ut,setItem:lt,removeItem:ht,clear:mt,length:pt,key:bt,keys:yt,dropInstance:gt};function xt(){return typeof openDatabase=="function"}var H="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",wt="~~local_forage_type~",Ae=/^~~local_forage_type~([^~]+)~/,ue="__lfsc__:",pe=ue.length,be="arbf",ye="blob",Ne="si08",Ce="ui08",Be="uic8",Le="si16",ze="si32",Oe="ur16",Ve="ui32",Fe="fl32",Ye="fl64",Ge=pe+be.length,Ue=Object.prototype.toString;function We(e){var n=e.length*.75,t=e.length,o,i=0,r,d,l,h;e[e.length-1]==="="&&(n--,e[e.length-2]==="="&&n--);var m=new ArrayBuffer(n),b=new Uint8Array(m);for(o=0;o<t;o+=4)r=H.indexOf(e[o]),d=H.indexOf(e[o+1]),l=H.indexOf(e[o+2]),h=H.indexOf(e[o+3]),b[i++]=r<<2|d>>4,b[i++]=(d&15)<<4|l>>2,b[i++]=(l&3)<<6|h&63;return m}function ge(e){var n=new Uint8Array(e),t="",o;for(o=0;o<n.length;o+=3)t+=H[n[o]>>2],t+=H[(n[o]&3)<<4|n[o+1]>>4],t+=H[(n[o+1]&15)<<2|n[o+2]>>6],t+=H[n[o+2]&63];return n.length%3===2?t=t.substring(0,t.length-1)+"=":n.length%3===1&&(t=t.substring(0,t.length-2)+"=="),t}function _t(e,n){var t="";if(e&&(t=Ue.call(e)),e&&(t==="[object ArrayBuffer]"||e.buffer&&Ue.call(e.buffer)==="[object ArrayBuffer]")){var o,i=ue;e instanceof ArrayBuffer?(o=e,i+=be):(o=e.buffer,t==="[object Int8Array]"?i+=Ne:t==="[object Uint8Array]"?i+=Ce:t==="[object Uint8ClampedArray]"?i+=Be:t==="[object Int16Array]"?i+=Le:t==="[object Uint16Array]"?i+=Oe:t==="[object Int32Array]"?i+=ze:t==="[object Uint32Array]"?i+=Ve:t==="[object Float32Array]"?i+=Fe:t==="[object Float64Array]"?i+=Ye:n(new Error("Failed to get type for BinaryArray"))),n(i+ge(o))}else if(t==="[object Blob]"){var r=new FileReader;r.onload=function(){var d=wt+e.type+"~"+ge(this.result);n(ue+ye+d)},r.readAsArrayBuffer(e)}else try{n(JSON.stringify(e))}catch(d){console.error("Couldn't convert value into a JSON string: ",e),n(null,d)}}function Tt(e){if(e.substring(0,pe)!==ue)return JSON.parse(e);var n=e.substring(Ge),t=e.substring(pe,Ge),o;if(t===ye&&Ae.test(n)){var i=n.match(Ae);o=i[1],n=n.substring(i[0].length)}var r=We(n);switch(t){case be:return r;case ye:return N([r],{type:o});case Ne:return new Int8Array(r);case Ce:return new Uint8Array(r);case Be:return new Uint8ClampedArray(r);case Le:return new Int16Array(r);case Oe:return new Uint16Array(r);case ze:return new Int32Array(r);case Ve:return new Uint32Array(r);case Fe:return new Float32Array(r);case Ye:return new Float64Array(r);default:throw new Error("Unkown type: "+t)}}var ve={serialize:_t,deserialize:Tt,stringToBuffer:We,bufferToString:ge};function $e(e,n,t,o){e.executeSql("CREATE TABLE IF NOT EXISTS "+n.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],t,o)}function Pt(e){var n=this,t={db:null};if(e)for(var o in e)t[o]=typeof e[o]!="string"?e[o].toString():e[o];var i=new f(function(r,d){try{t.db=openDatabase(t.name,String(t.version),t.description,t.size)}catch(l){return d(l)}t.db.transaction(function(l){$e(l,t,function(){n._dbInfo=t,r()},function(h,m){d(m)})},d)});return t.serializer=ve,i}function Q(e,n,t,o,i,r){e.executeSql(t,o,i,function(d,l){l.code===l.SYNTAX_ERR?d.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[n.storeName],function(h,m){m.rows.length?r(h,l):$e(h,n,function(){h.executeSql(t,o,i,r)},r)},r):r(d,l)},r)}function St(e,n){var t=this;e=L(e);var o=new f(function(i,r){t.ready().then(function(){var d=t._dbInfo;d.db.transaction(function(l){Q(l,d,"SELECT * FROM "+d.storeName+" WHERE key = ? LIMIT 1",[e],function(h,m){var b=m.rows.length?m.rows.item(0).value:null;b&&(b=d.serializer.deserialize(b)),i(b)},function(h,m){r(m)})})}).catch(r)});return T(o,n),o}function It(e,n){var t=this,o=new f(function(i,r){t.ready().then(function(){var d=t._dbInfo;d.db.transaction(function(l){Q(l,d,"SELECT * FROM "+d.storeName,[],function(h,m){for(var b=m.rows,_=b.length,E=0;E<_;E++){var M=b.item(E),A=M.value;if(A&&(A=d.serializer.deserialize(A)),A=e(A,M.key,E+1),A!==void 0){i(A);return}}i()},function(h,m){r(m)})})}).catch(r)});return T(o,n),o}function ke(e,n,t,o){var i=this;e=L(e);var r=new f(function(d,l){i.ready().then(function(){n===void 0&&(n=null);var h=n,m=i._dbInfo;m.serializer.serialize(n,function(b,_){_?l(_):m.db.transaction(function(E){Q(E,m,"INSERT OR REPLACE INTO "+m.storeName+" (key, value) VALUES (?, ?)",[e,b],function(){d(h)},function(M,A){l(A)})},function(E){if(E.code===E.QUOTA_ERR){if(o>0){d(ke.apply(i,[e,h,t,o-1]));return}l(E)}})})}).catch(l)});return T(r,t),r}function Et(e,n,t){return ke.apply(this,[e,n,t,1])}function Rt(e,n){var t=this;e=L(e);var o=new f(function(i,r){t.ready().then(function(){var d=t._dbInfo;d.db.transaction(function(l){Q(l,d,"DELETE FROM "+d.storeName+" WHERE key = ?",[e],function(){i()},function(h,m){r(m)})})}).catch(r)});return T(o,n),o}function Dt(e){var n=this,t=new f(function(o,i){n.ready().then(function(){var r=n._dbInfo;r.db.transaction(function(d){Q(d,r,"DELETE FROM "+r.storeName,[],function(){o()},function(l,h){i(h)})})}).catch(i)});return T(t,e),t}function Mt(e){var n=this,t=new f(function(o,i){n.ready().then(function(){var r=n._dbInfo;r.db.transaction(function(d){Q(d,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],function(l,h){var m=h.rows.item(0).c;o(m)},function(l,h){i(h)})})}).catch(i)});return T(t,e),t}function At(e,n){var t=this,o=new f(function(i,r){t.ready().then(function(){var d=t._dbInfo;d.db.transaction(function(l){Q(l,d,"SELECT key FROM "+d.storeName+" WHERE id = ? LIMIT 1",[e+1],function(h,m){var b=m.rows.length?m.rows.item(0).key:null;i(b)},function(h,m){r(m)})})}).catch(r)});return T(o,n),o}function Nt(e){var n=this,t=new f(function(o,i){n.ready().then(function(){var r=n._dbInfo;r.db.transaction(function(d){Q(d,r,"SELECT key FROM "+r.storeName,[],function(l,h){for(var m=[],b=0;b<h.rows.length;b++)m.push(h.rows.item(b).key);o(m)},function(l,h){i(h)})})}).catch(i)});return T(t,e),t}function Ct(e){return new f(function(n,t){e.transaction(function(o){o.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(i,r){for(var d=[],l=0;l<r.rows.length;l++)d.push(r.rows.item(l).name);n({db:e,storeNames:d})},function(i,r){t(r)})},function(o){t(o)})})}function Bt(e,n){n=Y.apply(this,arguments);var t=this.config();e=typeof e!="function"&&e||{},e.name||(e.name=e.name||t.name,e.storeName=e.storeName||t.storeName);var o=this,i;return e.name?i=new f(function(r){var d;e.name===t.name?d=o._dbInfo.db:d=openDatabase(e.name,"","",0),e.storeName?r({db:d,storeNames:[e.storeName]}):r(Ct(d))}).then(function(r){return new f(function(d,l){r.db.transaction(function(h){function m(M){return new f(function(A,z){h.executeSql("DROP TABLE IF EXISTS "+M,[],function(){A()},function(B,k){z(k)})})}for(var b=[],_=0,E=r.storeNames.length;_<E;_++)b.push(m(r.storeNames[_]));f.all(b).then(function(){d()}).catch(function(M){l(M)})},function(h){l(h)})})}):i=f.reject("Invalid arguments"),T(i,n),i}var Lt={_driver:"webSQLStorage",_initStorage:Pt,_support:xt(),iterate:It,getItem:St,setItem:Et,removeItem:Rt,clear:Dt,length:Mt,key:At,keys:Nt,dropInstance:Bt};function zt(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function qe(e,n){var t=e.name+"/";return e.storeName!==n.storeName&&(t+=e.storeName+"/"),t}function Ot(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch{return!0}}function Vt(){return!Ot()||localStorage.length>0}function Ft(e){var n=this,t={};if(e)for(var o in e)t[o]=e[o];return t.keyPrefix=qe(e,n._defaultConfig),Vt()?(n._dbInfo=t,t.serializer=ve,f.resolve()):f.reject()}function Yt(e){var n=this,t=n.ready().then(function(){for(var o=n._dbInfo.keyPrefix,i=localStorage.length-1;i>=0;i--){var r=localStorage.key(i);r.indexOf(o)===0&&localStorage.removeItem(r)}});return T(t,e),t}function Gt(e,n){var t=this;e=L(e);var o=t.ready().then(function(){var i=t._dbInfo,r=localStorage.getItem(i.keyPrefix+e);return r&&(r=i.serializer.deserialize(r)),r});return T(o,n),o}function Ut(e,n){var t=this,o=t.ready().then(function(){for(var i=t._dbInfo,r=i.keyPrefix,d=r.length,l=localStorage.length,h=1,m=0;m<l;m++){var b=localStorage.key(m);if(b.indexOf(r)===0){var _=localStorage.getItem(b);if(_&&(_=i.serializer.deserialize(_)),_=e(_,b.substring(d),h++),_!==void 0)return _}}});return T(o,n),o}function Wt(e,n){var t=this,o=t.ready().then(function(){var i=t._dbInfo,r;try{r=localStorage.key(e)}catch{r=null}return r&&(r=r.substring(i.keyPrefix.length)),r});return T(o,n),o}function $t(e){var n=this,t=n.ready().then(function(){for(var o=n._dbInfo,i=localStorage.length,r=[],d=0;d<i;d++){var l=localStorage.key(d);l.indexOf(o.keyPrefix)===0&&r.push(l.substring(o.keyPrefix.length))}return r});return T(t,e),t}function kt(e){var n=this,t=n.keys().then(function(o){return o.length});return T(t,e),t}function qt(e,n){var t=this;e=L(e);var o=t.ready().then(function(){var i=t._dbInfo;localStorage.removeItem(i.keyPrefix+e)});return T(o,n),o}function jt(e,n,t){var o=this;e=L(e);var i=o.ready().then(function(){n===void 0&&(n=null);var r=n;return new f(function(d,l){var h=o._dbInfo;h.serializer.serialize(n,function(m,b){if(b)l(b);else try{localStorage.setItem(h.keyPrefix+e,m),d(r)}catch(_){(_.name==="QuotaExceededError"||_.name==="NS_ERROR_DOM_QUOTA_REACHED")&&l(_),l(_)}})})});return T(i,t),i}function Xt(e,n){if(n=Y.apply(this,arguments),e=typeof e!="function"&&e||{},!e.name){var t=this.config();e.name=e.name||t.name,e.storeName=e.storeName||t.storeName}var o=this,i;return e.name?i=new f(function(r){e.storeName?r(qe(e,o._defaultConfig)):r(e.name+"/")}).then(function(r){for(var d=localStorage.length-1;d>=0;d--){var l=localStorage.key(d);l.indexOf(r)===0&&localStorage.removeItem(l)}}):i=f.reject("Invalid arguments"),T(i,n),i}var Kt={_driver:"localStorageWrapper",_initStorage:Ft,_support:zt(),iterate:Ut,getItem:Gt,setItem:jt,removeItem:qt,clear:Yt,length:kt,key:Wt,keys:$t,dropInstance:Xt},Ht=function(n,t){return n===t||typeof n=="number"&&typeof t=="number"&&isNaN(n)&&isNaN(t)},Qt=function(n,t){for(var o=n.length,i=0;i<o;){if(Ht(n[i],t))return!0;i++}return!1},je=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},re={},Xe={},te={INDEXEDDB:vt,WEBSQL:Lt,LOCALSTORAGE:Kt},Zt=[te.INDEXEDDB._driver,te.WEBSQL._driver,te.LOCALSTORAGE._driver],de=["dropInstance"],xe=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(de),Jt={description:"",driver:Zt.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function en(e,n){e[n]=function(){var t=arguments;return e.ready().then(function(){return e[n].apply(e,t)})}}function we(){for(var e=1;e<arguments.length;e++){var n=arguments[e];if(n)for(var t in n)n.hasOwnProperty(t)&&(je(n[t])?arguments[0][t]=n[t].slice():arguments[0][t]=n[t])}return arguments[0]}var tn=function(){function e(n){g(this,e);for(var t in te)if(te.hasOwnProperty(t)){var o=te[t],i=o._driver;this[t]=i,re[i]||this.defineDriver(o)}this._defaultConfig=we({},Jt),this._config=we({},this._defaultConfig,n),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return e.prototype.config=function(t){if((typeof t>"u"?"undefined":w(t))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var o in t){if(o==="storeName"&&(t[o]=t[o].replace(/\W/g,"_")),o==="version"&&typeof t[o]!="number")return new Error("Database version must be a number.");this._config[o]=t[o]}return"driver"in t&&t.driver?this.setDriver(this._config.driver):!0}else return typeof t=="string"?this._config[t]:this._config},e.prototype.defineDriver=function(t,o,i){var r=new f(function(d,l){try{var h=t._driver,m=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!t._driver){l(m);return}for(var b=xe.concat("_initStorage"),_=0,E=b.length;_<E;_++){var M=b[_],A=!Qt(de,M);if((A||t[M])&&typeof t[M]!="function"){l(m);return}}var z=function(){for(var oe=function(on){return function(){var an=new Error("Method "+on+" is not implemented by the current driver"),Ke=f.reject(an);return T(Ke,arguments[arguments.length-1]),Ke}},_e=0,rn=de.length;_e<rn;_e++){var Te=de[_e];t[Te]||(t[Te]=oe(Te))}};z();var B=function(oe){re[h]&&console.info("Redefining LocalForage driver: "+h),re[h]=t,Xe[h]=oe,d()};"_support"in t?t._support&&typeof t._support=="function"?t._support().then(B,l):B(!!t._support):B(!0)}catch(k){l(k)}});return S(r,o,i),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(t,o,i){var r=re[t]?f.resolve(re[t]):f.reject(new Error("Driver not found."));return S(r,o,i),r},e.prototype.getSerializer=function(t){var o=f.resolve(ve);return S(o,t),o},e.prototype.ready=function(t){var o=this,i=o._driverSet.then(function(){return o._ready===null&&(o._ready=o._initDriver()),o._ready});return S(i,t,t),i},e.prototype.setDriver=function(t,o,i){var r=this;je(t)||(t=[t]);var d=this._getSupportedDrivers(t);function l(){r._config.driver=r.driver()}function h(_){return r._extend(_),l(),r._ready=r._initStorage(r._config),r._ready}function m(_){return function(){var E=0;function M(){for(;E<_.length;){var A=_[E];return E++,r._dbInfo=null,r._ready=null,r.getDriver(A).then(h).catch(M)}l();var z=new Error("No available storage method found.");return r._driverSet=f.reject(z),r._driverSet}return M()}}var b=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=b.then(function(){var _=d[0];return r._dbInfo=null,r._ready=null,r.getDriver(_).then(function(E){r._driver=E._driver,l(),r._wrapLibraryMethodsWithReady(),r._initDriver=m(d)})}).catch(function(){l();var _=new Error("No available storage method found.");return r._driverSet=f.reject(_),r._driverSet}),S(this._driverSet,o,i),this._driverSet},e.prototype.supports=function(t){return!!Xe[t]},e.prototype._extend=function(t){we(this,t)},e.prototype._getSupportedDrivers=function(t){for(var o=[],i=0,r=t.length;i<r;i++){var d=t[i];this.supports(d)&&o.push(d)}return o},e.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,o=xe.length;t<o;t++)en(this,xe[t])},e.prototype.createInstance=function(t){return new e(t)},e}(),nn=new tn;p.exports=nn},{3:3}]},{},[4])(4)})});var ie=c=>({vertices:[{x:c.x,y:c.y},{x:c.x+c.width,y:c.y},{x:c.x+c.width,y:c.y+c.height},{x:c.x,y:c.y+c.height}]});function Pe(c,a){for(var s=c.length,u=c[s-1],p=a[0],y=a[1],w=u[0],g=u[1],v,P,I=!1,N=0;N<s;++N)u=c[N],v=u[0],P=u[1],P>y!=g>y&&p<(w-v)*(y-P)/(g-P)+v&&(I=!I),w=v,g=P;return I}var pn=2220446049250313e-31;function le(c,a,s,u){let p=Math.abs(c-a);return s==null&&(s=pn),u==null&&(u=s),p<=s||p<=u*Math.min(Math.abs(c),Math.abs(a))?!0:c===a}var q=class Ie{constructor(a,s){this.x=a,this.y=s}static wozbxhhlx2ee94dfc07674bdf9cb0a6c82c323b9c(a){return new Ie(a.x,a.y)}zvmtl9245d871a3d241eea91d5cf7d07e4dc2(){return{x:this.x,y:this.y}}zyrqeereas4625bc46abc04492b25f60c4fbb774ed(a){return le(this.x,a.x)&&le(this.y,a.y)}aevau0ddacbf55377407db69cb39f156b2c8a(){return[this.x,this.y]}angxs238e28ac7ad743cd94c5ed6562287be6(a){let s=(this.x+a.x)/2,u=(this.y+a.y)/2;return new Ie(s,u)}usbbaexgan1840e5b7d8a24849b98918b336caa008(a){let s=a.x-this.x,u=a.y-this.y;return Math.sqrt(s*s+u*u)}};function Se(c,a,s){let u={x:c.x-a.x,y:c.y-a.y},p={x:s.x-a.x,y:s.y-a.y},y=u.x*p.x+u.y*p.y,w=Math.hypot(u.x,u.y),g=Math.hypot(p.x,p.y);if(w===0||g===0)return 0;let v=Math.min(1,Math.max(-1,y/(w*g)));return Math.acos(v)}var Qe=class{static vafdpjk4232a13378dc478e99326763f5c34a99(c,a,s){let u=a.angxs238e28ac7ad743cd94c5ed6562287be6(s),p=a.usbbaexgan1840e5b7d8a24849b98918b336caa008(s)/2;return u.usbbaexgan1840e5b7d8a24849b98918b336caa008(c)<=p}},bn=class U{constructor(a){this.points=a,U.avpcfygan42615613086e4dcca052c234c17692b9(a)||this.points.reverse()}tag="";sectionTag="";materialTag="";static wozbxhhlx2ee94dfc07674bdf9cb0a6c82c323b9c(a){return new U(a.points.map(s=>q.wozbxhhlx2ee94dfc07674bdf9cb0a6c82c323b9c(s)))}zvmtl9245d871a3d241eea91d5cf7d07e4dc2(){return{points:this.points.map(a=>a.zvmtl9245d871a3d241eea91d5cf7d07e4dc2()),tag:this.tag,sectionTag:this.sectionTag,materialTag:this.materialTag}}static avpcfygan42615613086e4dcca052c234c17692b9(a){let[s,u,p]=a;return(u.x-s.x)*(p.y-s.y)-(u.y-s.y)*(p.x-s.x)>0}klpse91c8167b912c4a0586f3dfb638c310b8(a,s,u){this.tag=a,this.sectionTag=s,this.materialTag=u}boglo935e66d5ad104fe7b68ea4920c78fbce(){let[a,s,u]=this.points,p=(a.x+s.x+u.x)/3,y=(a.y+s.y+u.y)/3;return new q(p,y)}ypafirpcab0b75c37c3fc4eaa8eddd83b7a71e772(a=.1){let s=this.boglo935e66d5ad104fe7b68ea4920c78fbce(),u=this.points.map(g=>{let v=s.x-g.x,P=s.y-g.y;return Math.sqrt(v*v+P*P)}),y=Math.max(...u)*a;return this.points.map(g=>{let v=s.x-g.x,P=s.y-g.y,I=Math.sqrt(v*v+P*P),N=y/I;return new q(g.x+v*N,g.y+P*N)})}rhzeyce3cb7dc5fb13046e19c37bf46e93c9a0d(){let a=this.boglo935e66d5ad104fe7b68ea4920c78fbce();return[new U([this.points[0],this.points[1],a]),new U([this.points[1],this.points[2],a]),new U([this.points[2],this.points[0],a])]}osvsu7d94decb4a674944804c719cc748b858(){let[a,s,u]=this.points,p=new q((a.x+s.x)/2,(a.y+s.y)/2),y=new q((s.x+u.x)/2,(s.y+u.y)/2),w=new q((u.x+a.x)/2,(u.y+a.y)/2);return[new U([a,p,w]),new U([p,s,y]),new U([w,y,u]),new U([p,y,w])]}xdbnvqab28e450710064471baaa5857ef2ac8cb(){let[a,s,u]=this.points,p=a.x,y=a.y,w=s.x,g=s.y,v=u.x,P=u.y,I=2*(p*(g-P)+w*(P-y)+v*(y-g));if(Math.abs(I)<1e-10)return null;let N=((p*p+y*y)*(g-P)+(w*w+g*g)*(P-y)+(v*v+P*P)*(y-g))/I,f=((p*p+y*y)*(v-w)+(w*w+g*g)*(p-v)+(v*v+P*P)*(w-p))/I;return new q(N,f)}jebipfvkg6182021f0dd24e38a397ff40c1e62b67(){let a=this.xdbnvqab28e450710064471baaa5857ef2ac8cb();return a===null?[]:[new U([this.points[0],this.points[1],a]),new U([this.points[1],this.points[2],a]),new U([this.points[2],this.points[0],a])]}njczvaic075e4b5f33424c8f9853c185106221c2(){let[a,s,u]=this.points,p=a.x,y=s.x,w=u.x,g=a.y,v=s.y,P=u.y;return .5*Math.abs(p*(v-P)+y*(P-g)+w*(g-v))}wdwjknd3162ebafffe40638b9fd0f5581ca118(){let a=this.njczvaic075e4b5f33424c8f9853c185106221c2();return le(a,0)}tcpjl58469ed512004f2f8ec4ad01b42c7d01(){let[a,s,u]=this.points;return[Se(s,a,u),Se(a,s,u),Se(a,u,s)]}bythonfh591b5b50c94d45a0ac9cbf76773de18a(a=15*Math.PI/180){return!!this.tcpjl58469ed512004f2f8ec4ad01b42c7d01().some(u=>u<a)}ejtaiyd817fae7e032498583d021754269b760(){let a=this.xdbnvqab28e450710064471baaa5857ef2ac8cb();if(!a)return this.rrtddhlsa162452d739a4118b5d42e780dc52bb5();for(let s=0;s<3;s++){let u=this.points[s],p=this.points[(s+1)%3];if(Qe.vafdpjk4232a13378dc478e99326763f5c34a99(a,u,p))return this.rrtddhlsa162452d739a4118b5d42e780dc52bb5()}return a}bulnfzav0d9fcc97b6f342d0870be8a49b440320(a){let[s,u,p]=this.points,y=[{p1:s,p2:u},{p1:u,p2:p},{p1:p,p2:s}],w=[];for(let g of y)for(let v of a)if(!this.points.some(P=>P.zyrqeereas4625bc46abc04492b25f60c4fbb774ed(v))&&Qe.vafdpjk4232a13378dc478e99326763f5c34a99(v,g.p1,g.p2))return w.push(g.p1.angxs238e28ac7ad743cd94c5ed6562287be6(g.p2)),w;return w}aehemlvsbdc66c6ceedaf342349e53fd9ca5dd59ec(a){let s=this.xdbnvqab28e450710064471baaa5857ef2ac8cb();return s?a.some(u=>u.shoxhynwbv2f3c5d8d94e0481b933b763135c5d7f2(s))?s:this.rrtddhlsa162452d739a4118b5d42e780dc52bb5():this.rrtddhlsa162452d739a4118b5d42e780dc52bb5()}rrtddhlsa162452d739a4118b5d42e780dc52bb5(){let[a,s,u]=this.points,p=[{p1:a,p2:s},{p1:s,p2:u},{p1:u,p2:a}],y=p[0],w=y.p1.usbbaexgan1840e5b7d8a24849b98918b336caa008(y.p2);for(let g=1;g<p.length;g++){let v=p[g].p1.usbbaexgan1840e5b7d8a24849b98918b336caa008(p[g].p2);v>w&&(w=v,y=p[g])}return y.p1.angxs238e28ac7ad743cd94c5ed6562287be6(y.p2)}};var yn=class Ze{constructor(a,s,u,p){this.points=a,this.tag=s,this.sectionTag=u,this.materialTag=p,this.d3Polygon=a.map(y=>[y.x,y.y])}d3Polygon;static wozbxhhlx2ee94dfc07674bdf9cb0a6c82c323b9c(a){return new Ze(a.points.map(s=>q.wozbxhhlx2ee94dfc07674bdf9cb0a6c82c323b9c(s)),a.tag,a.sectionTag,a.materialTag)}amgidepdpy14fb9ba0602545e39e6e421469c465ac(a){for(let s=0,u=this.points.length-1;s<this.points.length;u=s++)if(gn(a,this.points[s],this.points[u]))return!0;return!1}shoxhynwbv2f3c5d8d94e0481b933b763135c5d7f2(a){return this.amgidepdpy14fb9ba0602545e39e6e421469c465ac(a)?!0:Pe(this.d3Polygon,[a.x,a.y])}moena5cc9aec2a70a4f228fa834098143466a(a,s){let u=[];for(let p=0;p<a.length;p++){let y=a[p],w=a[(p+1)%a.length],g=w.x-y.x,v=w.y-y.y,P=Math.sqrt(g*g+v*v),I=Math.floor(P/s);u.push(new q(y.x,y.y));for(let N=1;N<I;N++){let f=N*s/P,T=y.x+f*g,S=y.y+f*v;u.push(new q(T,S))}}return u}};function gn(c,a,s){let u=(c.y-a.y)*(s.x-a.x)-(c.x-a.x)*(s.y-a.y);if(!le(Math.abs(u),0))return!1;let p=(c.x-a.x)*(s.x-a.x)+(c.y-a.y)*(s.y-a.y);if(p<0)return!1;let y=(s.x-a.x)**2+(s.y-a.y)**2;return!(p>y)}function Je(c){let a=c.polygons.map(y=>yn.wozbxhhlx2ee94dfc07674bdf9cb0a6c82c323b9c(y)),u=c.baseTriangles.map(y=>bn.wozbxhhlx2ee94dfc07674bdf9cb0a6c82c323b9c(y)),p=[];for(let y of u){let w=y.boglo935e66d5ad104fe7b68ea4920c78fbce(),g=a.find(v=>v.shoxhynwbv2f3c5d8d94e0481b933b763135c5d7f2(w));g&&(y.klpse91c8167b912c4a0586f3dfb638c310b8(g.tag,g.sectionTag,g.materialTag),p.push(y))}return{triangles:p.map(y=>y.zvmtl9245d871a3d241eea91d5cf7d07e4dc2())}}var Re=mn(tt());var nt=(c,a,s="")=>`View3dModel-${c}-${a}${s}`,rt=c=>`Triangles-${c}`;var xn=2220446049250313e-31;function se(c,a,s,u){let p=Math.abs(c-a);return s==null&&(s=xn),u==null&&(u=s),p<=s||p<=u*Math.min(Math.abs(c),Math.abs(a))?!0:c===a}var Z=class extends Error{constructor(a){super(a)}};function ot(c){if(c.length<3)throw new Z("At least three vertices are required to form a face.");return{vertices:[...c.filter(a=>a)],results:[]}}var ce=c=>{let a=(c.points??"").trim().split(/\s+/).map(u=>u.split(",")),s=[];for(let[u,p]of a){let y=parseFloat(u),w=parseFloat(p);if(Number.isFinite(y)&&Number.isFinite(w))s.push({x:y,y:w});else throw new Z("Invalid vertex coordinates")}return{vertices:s}};function at(c){let a=0,s=0,u=0,p=c.length;for(let y=0;y<p;y++){let{x:w,y:g}=c[y],{x:v,y:P}=c[(y+1)%p],I=w*P-v*g;a+=I,s+=(w+v)*I,u+=(g+P)*I}return a*=.5,a===0?{x:0,y:0}:(s/=6*a,u/=6*a,{x:s,y:u})}function*it(c,a){let s=[...new Set(a.rectangles.map(f=>f.name).concat(a.polygons.map(f=>f.name)))],u=[];for(let f of c){let T=f.points.map(Y=>Tn(Y)),S=ot(T);if(s.indexOf(f.name)===-1)throw new Z(`Geometry name ${f.name} not found in geometry rectangles or polygons.`);u.push(S)}let p=a.supports.map(f=>Pn(f)),y=c.flatMap(f=>f.points).map(f=>f.x).reduce((f,T)=>Math.max(f,T),-1/0),w=c.flatMap(f=>f.points).map(f=>f.x).reduce((f,T)=>Math.min(f,T),1/0),g=c.flatMap(f=>f.points).map(f=>f.y).reduce((f,T)=>Math.max(f,T),-1/0),v=c.flatMap(f=>f.points).map(f=>f.y).reduce((f,T)=>Math.min(f,T),1/0),P=y-w,I=g-v,N=[...a.polygons.map(f=>ce(f)),...a.rectangles.map(f=>ie(f))].map(f=>f.vertices.map(T=>({x:T.x,y:T.y}))).map(f=>({points:f}));for(let f of a.loadCases)yield{faces:u,wireframeFaces:[],supports:p,borders:N,loads:_n(f,a),loadCaseTag:f.name,width:P,height:I}}function _n(c,a){let s=[];for(let u of c.pointLoads)se(u.fx,0)||s.push({x:u.x,y:u.y,z:0,valueX:u.fx,valueY:0,valueZ:0,type:"point"}),se(u.fy,0)||s.push({x:u.x,y:u.y,z:0,valueY:u.fy,valueZ:0,valueX:0,type:"point"});for(let u of c.distributedLoads){let p=a.polygons.filter(g=>g.name===u.geometryName).map(g=>ce(g)),y=a.rectangles.filter(g=>g.name===u.geometryName).map(g=>ie(g)),w=[...p,...y];for(let g of w){let v=at(g.vertices);se(u.fx,0)||s.push({x:v.x,y:v.y,z:0,valueX:u.fx,valueY:0,valueZ:0,type:"distributed"}),se(u.fy,0)||s.push({x:v.x,y:v.y,z:0,valueX:0,valueY:u.fy,valueZ:0,type:"distributed"})}}return s}function Tn(c){return{x:c.x,y:c.y,z:0,ux:0,uy:0,uz:0,value:0}}function Pn(c){return{x:c.x,y:c.y,z:0,ux:c.fixedX,uy:c.fixedY,uz:!1}}addEventListener("message",({data:c})=>{Sn(c)});var Sn=async c=>{let{geometry:a,uuid:s,baseTriangles:u}=c,p=a.loadCases.flatMap(S=>S.pointLoads).map(S=>({x:S.x,y:S.y})),y=a.supports.map(S=>({x:S.x,y:S.y})),w=a.resultPoints.map(S=>({x:S.x,y:S.y})),g=a.rectangles.map(S=>Dn(S)),v=a.polygons.map(S=>Mn(S)),P=g.concat(v),I={maxTriangleArea:a.meshingConfiguration.maxMeshArea,refinementPoints:a.meshingConfiguration.refinementPoints.map(S=>In(S))},f=Je({polygons:P,extraPoints:p.concat(y).concat(w),meshingConfiguration:I,baseTriangles:u.map(S=>An(S))}).triangles.map(S=>Rn(S));await Re.setItem(rt(s),f);for(let S of it(f,a))await Re.setItem(nt(s,S.loadCaseTag),S);postMessage({uuid:s})},In=c=>({radius:c.radius,maxTriangleArea:c.maxArea,center:{x:c.x,y:c.y}}),En=c=>({x:c.x,y:c.y}),Rn=c=>({points:c.points.map(s=>En(s)),name:c.tag,sectionTag:c.sectionTag,materialTag:c.materialTag}),Dn=c=>({points:ie(c).vertices.map(s=>({x:s.x,y:s.y})),tag:c.name,sectionTag:c.sectionName,materialTag:c.materialName}),Mn=c=>({points:ce(c).vertices.map(s=>({x:s.x,y:s.y})),tag:c.name,sectionTag:c.sectionName,materialTag:c.materialName}),An=c=>({points:c.points.map(s=>({x:s.x,y:s.y}))});
