var sn=Object.create;var He=Object.defineProperty;var fn=Object.getOwnPropertyDescriptor;var cn=Object.getOwnPropertyNames;var un=Object.getPrototypeOf,dn=Object.prototype.hasOwnProperty;var ae=(f=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(f,{get:(a,s)=>(typeof require<"u"?require:a)[s]}):f)(function(f){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+f+'" is not supported')});var ln=(f,a)=>()=>(a||f((a={exports:{}}).exports,a),a.exports);var mn=(f,a,s,u)=>{if(a&&typeof a=="object"||typeof a=="function")for(let p of cn(a))!dn.call(f,p)&&p!==s&&He(f,p,{get:()=>a[p],enumerable:!(u=fn(a,p))||u.enumerable});return f};var hn=(f,a,s)=>(s=f!=null?sn(un(f)):{},mn(a||!f||!f.__esModule?He(s,"default",{value:f,enumerable:!0}):s,f));var tt=ln((et,Ee)=>{"use strict";(function(f){if(typeof et=="object"&&typeof Ee<"u")Ee.exports=f();else if(typeof define=="function"&&define.amd)define([],f);else{var a;typeof window<"u"?a=window:typeof global<"u"?a=global:typeof self<"u"?a=self:a=this,a.localforage=f()}})(function(){var f,a,s;return function u(p,g,w){function v(I,N){if(!g[I]){if(!p[I]){var c=typeof ae=="function"&&ae;if(!N&&c)return c(I,!0);if(b)return b(I,!0);var T=new Error("Cannot find module '"+I+"'");throw T.code="MODULE_NOT_FOUND",T}var S=g[I]={exports:{}};p[I][0].call(S.exports,function(L){var F=p[I][1][L];return v(F||L)},S,S.exports,u,p,g,w)}return g[I].exports}for(var b=typeof ae=="function"&&ae,P=0;P<w.length;P++)v(w[P]);return v}({1:[function(u,p,g){(function(w){"use strict";var v=w.MutationObserver||w.WebKitMutationObserver,b;if(v){var P=0,I=new v(L),N=w.document.createTextNode("");I.observe(N,{characterData:!0}),b=function(){N.data=P=++P%2}}else if(!w.setImmediate&&typeof w.MessageChannel<"u"){var c=new w.MessageChannel;c.port1.onmessage=L,b=function(){c.port2.postMessage(0)}}else"document"in w&&"onreadystatechange"in w.document.createElement("script")?b=function(){var V=w.document.createElement("script");V.onreadystatechange=function(){L(),V.onreadystatechange=null,V.parentNode.removeChild(V),V=null},w.document.documentElement.appendChild(V)}:b=function(){setTimeout(L,0)};var T,S=[];function L(){T=!0;for(var V,$,z=S.length;z;){for($=S,S=[],V=-1;++V<z;)$[V]();z=S.length}T=!1}p.exports=F;function F(V){S.push(V)===1&&!T&&b()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(u,p,g){"use strict";var w=u(1);function v(){}var b={},P=["REJECTED"],I=["FULFILLED"],N=["PENDING"];p.exports=c;function c(x){if(typeof x!="function")throw new TypeError("resolver must be a function");this.state=N,this.queue=[],this.outcome=void 0,x!==v&&F(this,x)}c.prototype.catch=function(x){return this.then(null,x)},c.prototype.then=function(x,D){if(typeof x!="function"&&this.state===I||typeof D!="function"&&this.state===P)return this;var R=new this.constructor(v);if(this.state!==N){var C=this.state===I?x:D;S(R,C,this.outcome)}else this.queue.push(new T(R,x,D));return R};function T(x,D,R){this.promise=x,typeof D=="function"&&(this.onFulfilled=D,this.callFulfilled=this.otherCallFulfilled),typeof R=="function"&&(this.onRejected=R,this.callRejected=this.otherCallRejected)}T.prototype.callFulfilled=function(x){b.resolve(this.promise,x)},T.prototype.otherCallFulfilled=function(x){S(this.promise,this.onFulfilled,x)},T.prototype.callRejected=function(x){b.reject(this.promise,x)},T.prototype.otherCallRejected=function(x){S(this.promise,this.onRejected,x)};function S(x,D,R){w(function(){var C;try{C=D(R)}catch(q){return b.reject(x,q)}C===x?b.reject(x,new TypeError("Cannot resolve promise with itself")):b.resolve(x,C)})}b.resolve=function(x,D){var R=V(L,D);if(R.status==="error")return b.reject(x,R.value);var C=R.value;if(C)F(x,C);else{x.state=I,x.outcome=D;for(var q=-1,k=x.queue.length;++q<k;)x.queue[q].callFulfilled(D)}return x},b.reject=function(x,D){x.state=P,x.outcome=D;for(var R=-1,C=x.queue.length;++R<C;)x.queue[R].callRejected(D);return x};function L(x){var D=x&&x.then;if(x&&(typeof x=="object"||typeof x=="function")&&typeof D=="function")return function(){D.apply(x,arguments)}}function F(x,D){var R=!1;function C(U){R||(R=!0,b.reject(x,U))}function q(U){R||(R=!0,b.resolve(x,U))}function k(){D(q,C)}var G=V(k);G.status==="error"&&C(G.value)}function V(x,D){var R={};try{R.value=x(D),R.status="success"}catch(C){R.status="error",R.value=C}return R}c.resolve=$;function $(x){return x instanceof this?x:b.resolve(new this(v),x)}c.reject=z;function z(x){var D=new this(v);return b.reject(D,x)}c.all=me;function me(x){var D=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var R=x.length,C=!1;if(!R)return this.resolve([]);for(var q=new Array(R),k=0,G=-1,U=new this(v);++G<R;)X(x[G],G);return U;function X(ne,ce){D.resolve(ne).then(he,function(ee){C||(C=!0,b.reject(U,ee))});function he(ee){q[ce]=ee,++k===R&&!C&&(C=!0,b.resolve(U,q))}}}c.race=J;function J(x){var D=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var R=x.length,C=!1;if(!R)return this.resolve([]);for(var q=-1,k=new this(v);++q<R;)G(x[q]);return k;function G(U){D.resolve(U).then(function(X){C||(C=!0,b.resolve(k,X))},function(X){C||(C=!0,b.reject(k,X))})}}},{1:1}],3:[function(u,p,g){(function(w){"use strict";typeof w.Promise!="function"&&(w.Promise=u(2))}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(u,p,g){"use strict";var w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function v(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function b(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var P=b();function I(){try{if(!P||!P.open)return!1;var e=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),n=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!e||n)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function N(e,n){e=e||[],n=n||{};try{return new Blob(e,n)}catch(r){if(r.name!=="TypeError")throw r;for(var t=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,o=new t,i=0;i<e.length;i+=1)o.append(e[i]);return o.getBlob(n.type)}}typeof Promise>"u"&&u(3);var c=Promise;function T(e,n){n&&e.then(function(t){n(null,t)},function(t){n(t)})}function S(e,n,t){typeof n=="function"&&e.then(n),typeof t=="function"&&e.catch(t)}function L(e){return typeof e!="string"&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function F(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var V="local-forage-detect-blob-support",$=void 0,z={},me=Object.prototype.toString,J="readonly",x="readwrite";function D(e){for(var n=e.length,t=new ArrayBuffer(n),o=new Uint8Array(t),i=0;i<n;i++)o[i]=e.charCodeAt(i);return t}function R(e){return new c(function(n){var t=e.transaction(V,x),o=N([""]);t.objectStore(V).put(o,"key"),t.onabort=function(i){i.preventDefault(),i.stopPropagation(),n(!1)},t.oncomplete=function(){var i=navigator.userAgent.match(/Chrome\/(\d+)/),r=navigator.userAgent.match(/Edge\//);n(r||!i||parseInt(i[1],10)>=43)}}).catch(function(){return!1})}function C(e){return typeof $=="boolean"?c.resolve($):R(e).then(function(n){return $=n,$})}function q(e){var n=z[e.name],t={};t.promise=new c(function(o,i){t.resolve=o,t.reject=i}),n.deferredOperations.push(t),n.dbReady?n.dbReady=n.dbReady.then(function(){return t.promise}):n.dbReady=t.promise}function k(e){var n=z[e.name],t=n.deferredOperations.pop();if(t)return t.resolve(),t.promise}function G(e,n){var t=z[e.name],o=t.deferredOperations.pop();if(o)return o.reject(n),o.promise}function U(e,n){return new c(function(t,o){if(z[e.name]=z[e.name]||Me(),e.db)if(n)q(e),e.db.close();else return t(e.db);var i=[e.name];n&&i.push(e.version);var r=P.open.apply(P,i);n&&(r.onupgradeneeded=function(d){var l=r.result;try{l.createObjectStore(e.storeName),d.oldVersion<=1&&l.createObjectStore(V)}catch(m){if(m.name==="ConstraintError")console.warn('The database "'+e.name+'" has been upgraded from version '+d.oldVersion+" to version "+d.newVersion+', but the storage "'+e.storeName+'" already exists.');else throw m}}),r.onerror=function(d){d.preventDefault(),o(r.error)},r.onsuccess=function(){var d=r.result;d.onversionchange=function(l){l.target.close()},t(d),k(e)}})}function X(e){return U(e,!1)}function ne(e){return U(e,!0)}function ce(e,n){if(!e.db)return!0;var t=!e.db.objectStoreNames.contains(e.storeName),o=e.version<e.db.version,i=e.version>e.db.version;if(o&&(e.version!==n&&console.warn('The database "'+e.name+`" can't be downgraded from version `+e.db.version+" to version "+e.version+"."),e.version=e.db.version),i||t){if(t){var r=e.db.version+1;r>e.version&&(e.version=r)}return!0}return!1}function he(e){return new c(function(n,t){var o=new FileReader;o.onerror=t,o.onloadend=function(i){var r=btoa(i.target.result||"");n({__local_forage_encoded_blob:!0,data:r,type:e.type})},o.readAsBinaryString(e)})}function ee(e){var n=D(atob(e.data));return N([n],{type:e.type})}function De(e){return e&&e.__local_forage_encoded_blob}function st(e){var n=this,t=n._initReady().then(function(){var o=z[n._dbInfo.name];if(o&&o.dbReady)return o.dbReady});return S(t,e,e),t}function ft(e){q(e);for(var n=z[e.name],t=n.forages,o=0;o<t.length;o++){var i=t[o];i._dbInfo.db&&(i._dbInfo.db.close(),i._dbInfo.db=null)}return e.db=null,X(e).then(function(r){return e.db=r,ce(e)?ne(e):r}).then(function(r){e.db=n.db=r;for(var d=0;d<t.length;d++)t[d]._dbInfo.db=r}).catch(function(r){throw G(e,r),r})}function K(e,n,t,o){o===void 0&&(o=1);try{var i=e.db.transaction(e.storeName,n);t(null,i)}catch(r){if(o>0&&(!e.db||r.name==="InvalidStateError"||r.name==="NotFoundError"))return c.resolve().then(function(){if(!e.db||r.name==="NotFoundError"&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),ne(e)}).then(function(){return ft(e).then(function(){K(e,n,t,o-1)})}).catch(t);t(r)}}function Me(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function ct(e){var n=this,t={db:null};if(e)for(var o in e)t[o]=e[o];var i=z[t.name];i||(i=Me(),z[t.name]=i),i.forages.push(n),n._initReady||(n._initReady=n.ready,n.ready=st);var r=[];function d(){return c.resolve()}for(var l=0;l<i.forages.length;l++){var m=i.forages[l];m!==n&&r.push(m._initReady().catch(d))}var h=i.forages.slice(0);return c.all(r).then(function(){return t.db=i.db,X(t)}).then(function(y){return t.db=y,ce(t,n._defaultConfig.version)?ne(t):y}).then(function(y){t.db=i.db=y,n._dbInfo=t;for(var _=0;_<h.length;_++){var E=h[_];E!==n&&(E._dbInfo.db=t.db,E._dbInfo.version=t.version)}})}function ut(e,n){var t=this;e=L(e);var o=new c(function(i,r){t.ready().then(function(){K(t._dbInfo,J,function(d,l){if(d)return r(d);try{var m=l.objectStore(t._dbInfo.storeName),h=m.get(e);h.onsuccess=function(){var y=h.result;y===void 0&&(y=null),De(y)&&(y=ee(y)),i(y)},h.onerror=function(){r(h.error)}}catch(y){r(y)}})}).catch(r)});return T(o,n),o}function dt(e,n){var t=this,o=new c(function(i,r){t.ready().then(function(){K(t._dbInfo,J,function(d,l){if(d)return r(d);try{var m=l.objectStore(t._dbInfo.storeName),h=m.openCursor(),y=1;h.onsuccess=function(){var _=h.result;if(_){var E=_.value;De(E)&&(E=ee(E));var M=e(E,_.key,y++);M!==void 0?i(M):_.continue()}else i()},h.onerror=function(){r(h.error)}}catch(_){r(_)}})}).catch(r)});return T(o,n),o}function lt(e,n,t){var o=this;e=L(e);var i=new c(function(r,d){var l;o.ready().then(function(){return l=o._dbInfo,me.call(n)==="[object Blob]"?C(l.db).then(function(m){return m?n:he(n)}):n}).then(function(m){K(o._dbInfo,x,function(h,y){if(h)return d(h);try{var _=y.objectStore(o._dbInfo.storeName);m===null&&(m=void 0);var E=_.put(m,e);y.oncomplete=function(){m===void 0&&(m=null),r(m)},y.onabort=y.onerror=function(){var M=E.error?E.error:E.transaction.error;d(M)}}catch(M){d(M)}})}).catch(d)});return T(i,t),i}function mt(e,n){var t=this;e=L(e);var o=new c(function(i,r){t.ready().then(function(){K(t._dbInfo,x,function(d,l){if(d)return r(d);try{var m=l.objectStore(t._dbInfo.storeName),h=m.delete(e);l.oncomplete=function(){i()},l.onerror=function(){r(h.error)},l.onabort=function(){var y=h.error?h.error:h.transaction.error;r(y)}}catch(y){r(y)}})}).catch(r)});return T(o,n),o}function ht(e){var n=this,t=new c(function(o,i){n.ready().then(function(){K(n._dbInfo,x,function(r,d){if(r)return i(r);try{var l=d.objectStore(n._dbInfo.storeName),m=l.clear();d.oncomplete=function(){o()},d.onabort=d.onerror=function(){var h=m.error?m.error:m.transaction.error;i(h)}}catch(h){i(h)}})}).catch(i)});return T(t,e),t}function pt(e){var n=this,t=new c(function(o,i){n.ready().then(function(){K(n._dbInfo,J,function(r,d){if(r)return i(r);try{var l=d.objectStore(n._dbInfo.storeName),m=l.count();m.onsuccess=function(){o(m.result)},m.onerror=function(){i(m.error)}}catch(h){i(h)}})}).catch(i)});return T(t,e),t}function yt(e,n){var t=this,o=new c(function(i,r){if(e<0){i(null);return}t.ready().then(function(){K(t._dbInfo,J,function(d,l){if(d)return r(d);try{var m=l.objectStore(t._dbInfo.storeName),h=!1,y=m.openKeyCursor();y.onsuccess=function(){var _=y.result;if(!_){i(null);return}e===0||h?i(_.key):(h=!0,_.advance(e))},y.onerror=function(){r(y.error)}}catch(_){r(_)}})}).catch(r)});return T(o,n),o}function gt(e){var n=this,t=new c(function(o,i){n.ready().then(function(){K(n._dbInfo,J,function(r,d){if(r)return i(r);try{var l=d.objectStore(n._dbInfo.storeName),m=l.openKeyCursor(),h=[];m.onsuccess=function(){var y=m.result;if(!y){o(h);return}h.push(y.key),y.continue()},m.onerror=function(){i(m.error)}}catch(y){i(y)}})}).catch(i)});return T(t,e),t}function vt(e,n){n=F.apply(this,arguments);var t=this.config();e=typeof e!="function"&&e||{},e.name||(e.name=e.name||t.name,e.storeName=e.storeName||t.storeName);var o=this,i;if(!e.name)i=c.reject("Invalid arguments");else{var r=e.name===t.name&&o._dbInfo.db,d=r?c.resolve(o._dbInfo.db):X(e).then(function(l){var m=z[e.name],h=m.forages;m.db=l;for(var y=0;y<h.length;y++)h[y]._dbInfo.db=l;return l});e.storeName?i=d.then(function(l){if(l.objectStoreNames.contains(e.storeName)){var m=l.version+1;q(e);var h=z[e.name],y=h.forages;l.close();for(var _=0;_<y.length;_++){var E=y[_];E._dbInfo.db=null,E._dbInfo.version=m}var M=new c(function(A,O){var B=P.open(e.name,m);B.onerror=function(W){var oe=B.result;oe.close(),O(W)},B.onupgradeneeded=function(){var W=B.result;W.deleteObjectStore(e.storeName)},B.onsuccess=function(){var W=B.result;W.close(),A(W)}});return M.then(function(A){h.db=A;for(var O=0;O<y.length;O++){var B=y[O];B._dbInfo.db=A,k(B._dbInfo)}}).catch(function(A){throw(G(e,A)||c.resolve()).catch(function(){}),A})}}):i=d.then(function(l){q(e);var m=z[e.name],h=m.forages;l.close();for(var y=0;y<h.length;y++){var _=h[y];_._dbInfo.db=null}var E=new c(function(M,A){var O=P.deleteDatabase(e.name);O.onerror=function(){var B=O.result;B&&B.close(),A(O.error)},O.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},O.onsuccess=function(){var B=O.result;B&&B.close(),M(B)}});return E.then(function(M){m.db=M;for(var A=0;A<h.length;A++){var O=h[A];k(O._dbInfo)}}).catch(function(M){throw(G(e,M)||c.resolve()).catch(function(){}),M})})}return T(i,n),i}var bt={_driver:"asyncStorage",_initStorage:ct,_support:I(),iterate:dt,getItem:ut,setItem:lt,removeItem:mt,clear:ht,length:pt,key:yt,keys:gt,dropInstance:vt};function xt(){return typeof openDatabase=="function"}var H="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",wt="~~local_forage_type~",Ae=/^~~local_forage_type~([^~]+)~/,ue="__lfsc__:",pe=ue.length,ye="arbf",ge="blob",Ne="si08",Ce="ui08",Be="uic8",Le="si16",Oe="si32",Ve="ur16",ze="ui32",qe="fl32",Fe="fl64",ke=pe+ye.length,Ye=Object.prototype.toString;function Ge(e){var n=e.length*.75,t=e.length,o,i=0,r,d,l,m;e[e.length-1]==="="&&(n--,e[e.length-2]==="="&&n--);var h=new ArrayBuffer(n),y=new Uint8Array(h);for(o=0;o<t;o+=4)r=H.indexOf(e[o]),d=H.indexOf(e[o+1]),l=H.indexOf(e[o+2]),m=H.indexOf(e[o+3]),y[i++]=r<<2|d>>4,y[i++]=(d&15)<<4|l>>2,y[i++]=(l&3)<<6|m&63;return h}function ve(e){var n=new Uint8Array(e),t="",o;for(o=0;o<n.length;o+=3)t+=H[n[o]>>2],t+=H[(n[o]&3)<<4|n[o+1]>>4],t+=H[(n[o+1]&15)<<2|n[o+2]>>6],t+=H[n[o+2]&63];return n.length%3===2?t=t.substring(0,t.length-1)+"=":n.length%3===1&&(t=t.substring(0,t.length-2)+"=="),t}function _t(e,n){var t="";if(e&&(t=Ye.call(e)),e&&(t==="[object ArrayBuffer]"||e.buffer&&Ye.call(e.buffer)==="[object ArrayBuffer]")){var o,i=ue;e instanceof ArrayBuffer?(o=e,i+=ye):(o=e.buffer,t==="[object Int8Array]"?i+=Ne:t==="[object Uint8Array]"?i+=Ce:t==="[object Uint8ClampedArray]"?i+=Be:t==="[object Int16Array]"?i+=Le:t==="[object Uint16Array]"?i+=Ve:t==="[object Int32Array]"?i+=Oe:t==="[object Uint32Array]"?i+=ze:t==="[object Float32Array]"?i+=qe:t==="[object Float64Array]"?i+=Fe:n(new Error("Failed to get type for BinaryArray"))),n(i+ve(o))}else if(t==="[object Blob]"){var r=new FileReader;r.onload=function(){var d=wt+e.type+"~"+ve(this.result);n(ue+ge+d)},r.readAsArrayBuffer(e)}else try{n(JSON.stringify(e))}catch(d){console.error("Couldn't convert value into a JSON string: ",e),n(null,d)}}function Tt(e){if(e.substring(0,pe)!==ue)return JSON.parse(e);var n=e.substring(ke),t=e.substring(pe,ke),o;if(t===ge&&Ae.test(n)){var i=n.match(Ae);o=i[1],n=n.substring(i[0].length)}var r=Ge(n);switch(t){case ye:return r;case ge:return N([r],{type:o});case Ne:return new Int8Array(r);case Ce:return new Uint8Array(r);case Be:return new Uint8ClampedArray(r);case Le:return new Int16Array(r);case Ve:return new Uint16Array(r);case Oe:return new Int32Array(r);case ze:return new Uint32Array(r);case qe:return new Float32Array(r);case Fe:return new Float64Array(r);default:throw new Error("Unkown type: "+t)}}var be={serialize:_t,deserialize:Tt,stringToBuffer:Ge,bufferToString:ve};function Ue(e,n,t,o){e.executeSql("CREATE TABLE IF NOT EXISTS "+n.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],t,o)}function Pt(e){var n=this,t={db:null};if(e)for(var o in e)t[o]=typeof e[o]!="string"?e[o].toString():e[o];var i=new c(function(r,d){try{t.db=openDatabase(t.name,String(t.version),t.description,t.size)}catch(l){return d(l)}t.db.transaction(function(l){Ue(l,t,function(){n._dbInfo=t,r()},function(m,h){d(h)})},d)});return t.serializer=be,i}function Q(e,n,t,o,i,r){e.executeSql(t,o,i,function(d,l){l.code===l.SYNTAX_ERR?d.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[n.storeName],function(m,h){h.rows.length?r(m,l):Ue(m,n,function(){m.executeSql(t,o,i,r)},r)},r):r(d,l)},r)}function St(e,n){var t=this;e=L(e);var o=new c(function(i,r){t.ready().then(function(){var d=t._dbInfo;d.db.transaction(function(l){Q(l,d,"SELECT * FROM "+d.storeName+" WHERE key = ? LIMIT 1",[e],function(m,h){var y=h.rows.length?h.rows.item(0).value:null;y&&(y=d.serializer.deserialize(y)),i(y)},function(m,h){r(h)})})}).catch(r)});return T(o,n),o}function It(e,n){var t=this,o=new c(function(i,r){t.ready().then(function(){var d=t._dbInfo;d.db.transaction(function(l){Q(l,d,"SELECT * FROM "+d.storeName,[],function(m,h){for(var y=h.rows,_=y.length,E=0;E<_;E++){var M=y.item(E),A=M.value;if(A&&(A=d.serializer.deserialize(A)),A=e(A,M.key,E+1),A!==void 0){i(A);return}}i()},function(m,h){r(h)})})}).catch(r)});return T(o,n),o}function We(e,n,t,o){var i=this;e=L(e);var r=new c(function(d,l){i.ready().then(function(){n===void 0&&(n=null);var m=n,h=i._dbInfo;h.serializer.serialize(n,function(y,_){_?l(_):h.db.transaction(function(E){Q(E,h,"INSERT OR REPLACE INTO "+h.storeName+" (key, value) VALUES (?, ?)",[e,y],function(){d(m)},function(M,A){l(A)})},function(E){if(E.code===E.QUOTA_ERR){if(o>0){d(We.apply(i,[e,m,t,o-1]));return}l(E)}})})}).catch(l)});return T(r,t),r}function Et(e,n,t){return We.apply(this,[e,n,t,1])}function Rt(e,n){var t=this;e=L(e);var o=new c(function(i,r){t.ready().then(function(){var d=t._dbInfo;d.db.transaction(function(l){Q(l,d,"DELETE FROM "+d.storeName+" WHERE key = ?",[e],function(){i()},function(m,h){r(h)})})}).catch(r)});return T(o,n),o}function Dt(e){var n=this,t=new c(function(o,i){n.ready().then(function(){var r=n._dbInfo;r.db.transaction(function(d){Q(d,r,"DELETE FROM "+r.storeName,[],function(){o()},function(l,m){i(m)})})}).catch(i)});return T(t,e),t}function Mt(e){var n=this,t=new c(function(o,i){n.ready().then(function(){var r=n._dbInfo;r.db.transaction(function(d){Q(d,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],function(l,m){var h=m.rows.item(0).c;o(h)},function(l,m){i(m)})})}).catch(i)});return T(t,e),t}function At(e,n){var t=this,o=new c(function(i,r){t.ready().then(function(){var d=t._dbInfo;d.db.transaction(function(l){Q(l,d,"SELECT key FROM "+d.storeName+" WHERE id = ? LIMIT 1",[e+1],function(m,h){var y=h.rows.length?h.rows.item(0).key:null;i(y)},function(m,h){r(h)})})}).catch(r)});return T(o,n),o}function Nt(e){var n=this,t=new c(function(o,i){n.ready().then(function(){var r=n._dbInfo;r.db.transaction(function(d){Q(d,r,"SELECT key FROM "+r.storeName,[],function(l,m){for(var h=[],y=0;y<m.rows.length;y++)h.push(m.rows.item(y).key);o(h)},function(l,m){i(m)})})}).catch(i)});return T(t,e),t}function Ct(e){return new c(function(n,t){e.transaction(function(o){o.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(i,r){for(var d=[],l=0;l<r.rows.length;l++)d.push(r.rows.item(l).name);n({db:e,storeNames:d})},function(i,r){t(r)})},function(o){t(o)})})}function Bt(e,n){n=F.apply(this,arguments);var t=this.config();e=typeof e!="function"&&e||{},e.name||(e.name=e.name||t.name,e.storeName=e.storeName||t.storeName);var o=this,i;return e.name?i=new c(function(r){var d;e.name===t.name?d=o._dbInfo.db:d=openDatabase(e.name,"","",0),e.storeName?r({db:d,storeNames:[e.storeName]}):r(Ct(d))}).then(function(r){return new c(function(d,l){r.db.transaction(function(m){function h(M){return new c(function(A,O){m.executeSql("DROP TABLE IF EXISTS "+M,[],function(){A()},function(B,W){O(W)})})}for(var y=[],_=0,E=r.storeNames.length;_<E;_++)y.push(h(r.storeNames[_]));c.all(y).then(function(){d()}).catch(function(M){l(M)})},function(m){l(m)})})}):i=c.reject("Invalid arguments"),T(i,n),i}var Lt={_driver:"webSQLStorage",_initStorage:Pt,_support:xt(),iterate:It,getItem:St,setItem:Et,removeItem:Rt,clear:Dt,length:Mt,key:At,keys:Nt,dropInstance:Bt};function Ot(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function je(e,n){var t=e.name+"/";return e.storeName!==n.storeName&&(t+=e.storeName+"/"),t}function Vt(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch{return!0}}function zt(){return!Vt()||localStorage.length>0}function qt(e){var n=this,t={};if(e)for(var o in e)t[o]=e[o];return t.keyPrefix=je(e,n._defaultConfig),zt()?(n._dbInfo=t,t.serializer=be,c.resolve()):c.reject()}function Ft(e){var n=this,t=n.ready().then(function(){for(var o=n._dbInfo.keyPrefix,i=localStorage.length-1;i>=0;i--){var r=localStorage.key(i);r.indexOf(o)===0&&localStorage.removeItem(r)}});return T(t,e),t}function kt(e,n){var t=this;e=L(e);var o=t.ready().then(function(){var i=t._dbInfo,r=localStorage.getItem(i.keyPrefix+e);return r&&(r=i.serializer.deserialize(r)),r});return T(o,n),o}function Yt(e,n){var t=this,o=t.ready().then(function(){for(var i=t._dbInfo,r=i.keyPrefix,d=r.length,l=localStorage.length,m=1,h=0;h<l;h++){var y=localStorage.key(h);if(y.indexOf(r)===0){var _=localStorage.getItem(y);if(_&&(_=i.serializer.deserialize(_)),_=e(_,y.substring(d),m++),_!==void 0)return _}}});return T(o,n),o}function Gt(e,n){var t=this,o=t.ready().then(function(){var i=t._dbInfo,r;try{r=localStorage.key(e)}catch{r=null}return r&&(r=r.substring(i.keyPrefix.length)),r});return T(o,n),o}function Ut(e){var n=this,t=n.ready().then(function(){for(var o=n._dbInfo,i=localStorage.length,r=[],d=0;d<i;d++){var l=localStorage.key(d);l.indexOf(o.keyPrefix)===0&&r.push(l.substring(o.keyPrefix.length))}return r});return T(t,e),t}function Wt(e){var n=this,t=n.keys().then(function(o){return o.length});return T(t,e),t}function jt(e,n){var t=this;e=L(e);var o=t.ready().then(function(){var i=t._dbInfo;localStorage.removeItem(i.keyPrefix+e)});return T(o,n),o}function $t(e,n,t){var o=this;e=L(e);var i=o.ready().then(function(){n===void 0&&(n=null);var r=n;return new c(function(d,l){var m=o._dbInfo;m.serializer.serialize(n,function(h,y){if(y)l(y);else try{localStorage.setItem(m.keyPrefix+e,h),d(r)}catch(_){(_.name==="QuotaExceededError"||_.name==="NS_ERROR_DOM_QUOTA_REACHED")&&l(_),l(_)}})})});return T(i,t),i}function Xt(e,n){if(n=F.apply(this,arguments),e=typeof e!="function"&&e||{},!e.name){var t=this.config();e.name=e.name||t.name,e.storeName=e.storeName||t.storeName}var o=this,i;return e.name?i=new c(function(r){e.storeName?r(je(e,o._defaultConfig)):r(e.name+"/")}).then(function(r){for(var d=localStorage.length-1;d>=0;d--){var l=localStorage.key(d);l.indexOf(r)===0&&localStorage.removeItem(l)}}):i=c.reject("Invalid arguments"),T(i,n),i}var Kt={_driver:"localStorageWrapper",_initStorage:qt,_support:Ot(),iterate:Yt,getItem:kt,setItem:$t,removeItem:jt,clear:Ft,length:Wt,key:Gt,keys:Ut,dropInstance:Xt},Ht=function(n,t){return n===t||typeof n=="number"&&typeof t=="number"&&isNaN(n)&&isNaN(t)},Qt=function(n,t){for(var o=n.length,i=0;i<o;){if(Ht(n[i],t))return!0;i++}return!1},$e=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},re={},Xe={},te={INDEXEDDB:bt,WEBSQL:Lt,LOCALSTORAGE:Kt},Zt=[te.INDEXEDDB._driver,te.WEBSQL._driver,te.LOCALSTORAGE._driver],de=["dropInstance"],xe=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(de),Jt={description:"",driver:Zt.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function en(e,n){e[n]=function(){var t=arguments;return e.ready().then(function(){return e[n].apply(e,t)})}}function we(){for(var e=1;e<arguments.length;e++){var n=arguments[e];if(n)for(var t in n)n.hasOwnProperty(t)&&($e(n[t])?arguments[0][t]=n[t].slice():arguments[0][t]=n[t])}return arguments[0]}var tn=function(){function e(n){v(this,e);for(var t in te)if(te.hasOwnProperty(t)){var o=te[t],i=o._driver;this[t]=i,re[i]||this.defineDriver(o)}this._defaultConfig=we({},Jt),this._config=we({},this._defaultConfig,n),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return e.prototype.config=function(t){if((typeof t>"u"?"undefined":w(t))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var o in t){if(o==="storeName"&&(t[o]=t[o].replace(/\W/g,"_")),o==="version"&&typeof t[o]!="number")return new Error("Database version must be a number.");this._config[o]=t[o]}return"driver"in t&&t.driver?this.setDriver(this._config.driver):!0}else return typeof t=="string"?this._config[t]:this._config},e.prototype.defineDriver=function(t,o,i){var r=new c(function(d,l){try{var m=t._driver,h=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!t._driver){l(h);return}for(var y=xe.concat("_initStorage"),_=0,E=y.length;_<E;_++){var M=y[_],A=!Qt(de,M);if((A||t[M])&&typeof t[M]!="function"){l(h);return}}var O=function(){for(var oe=function(on){return function(){var an=new Error("Method "+on+" is not implemented by the current driver"),Ke=c.reject(an);return T(Ke,arguments[arguments.length-1]),Ke}},_e=0,rn=de.length;_e<rn;_e++){var Te=de[_e];t[Te]||(t[Te]=oe(Te))}};O();var B=function(oe){re[m]&&console.info("Redefining LocalForage driver: "+m),re[m]=t,Xe[m]=oe,d()};"_support"in t?t._support&&typeof t._support=="function"?t._support().then(B,l):B(!!t._support):B(!0)}catch(W){l(W)}});return S(r,o,i),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(t,o,i){var r=re[t]?c.resolve(re[t]):c.reject(new Error("Driver not found."));return S(r,o,i),r},e.prototype.getSerializer=function(t){var o=c.resolve(be);return S(o,t),o},e.prototype.ready=function(t){var o=this,i=o._driverSet.then(function(){return o._ready===null&&(o._ready=o._initDriver()),o._ready});return S(i,t,t),i},e.prototype.setDriver=function(t,o,i){var r=this;$e(t)||(t=[t]);var d=this._getSupportedDrivers(t);function l(){r._config.driver=r.driver()}function m(_){return r._extend(_),l(),r._ready=r._initStorage(r._config),r._ready}function h(_){return function(){var E=0;function M(){for(;E<_.length;){var A=_[E];return E++,r._dbInfo=null,r._ready=null,r.getDriver(A).then(m).catch(M)}l();var O=new Error("No available storage method found.");return r._driverSet=c.reject(O),r._driverSet}return M()}}var y=this._driverSet!==null?this._driverSet.catch(function(){return c.resolve()}):c.resolve();return this._driverSet=y.then(function(){var _=d[0];return r._dbInfo=null,r._ready=null,r.getDriver(_).then(function(E){r._driver=E._driver,l(),r._wrapLibraryMethodsWithReady(),r._initDriver=h(d)})}).catch(function(){l();var _=new Error("No available storage method found.");return r._driverSet=c.reject(_),r._driverSet}),S(this._driverSet,o,i),this._driverSet},e.prototype.supports=function(t){return!!Xe[t]},e.prototype._extend=function(t){we(this,t)},e.prototype._getSupportedDrivers=function(t){for(var o=[],i=0,r=t.length;i<r;i++){var d=t[i];this.supports(d)&&o.push(d)}return o},e.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,o=xe.length;t<o;t++)en(this,xe[t])},e.prototype.createInstance=function(t){return new e(t)},e}(),nn=new tn;p.exports=nn},{3:3}]},{},[4])(4)})});var ie=f=>({vertices:[{x:f.x,y:f.y},{x:f.x+f.width,y:f.y},{x:f.x+f.width,y:f.y+f.height},{x:f.x,y:f.y+f.height}]});function Pe(f,a){for(var s=f.length,u=f[s-1],p=a[0],g=a[1],w=u[0],v=u[1],b,P,I=!1,N=0;N<s;++N)u=f[N],b=u[0],P=u[1],P>g!=v>g&&p<(w-b)*(g-P)/(v-P)+b&&(I=!I),w=b,v=P;return I}var pn=2220446049250313e-31;function le(f,a,s,u){let p=Math.abs(f-a);return s==null&&(s=pn),u==null&&(u=s),p<=s||p<=u*Math.min(Math.abs(f),Math.abs(a))?!0:f===a}var j=class Ie{constructor(a,s){this.x=a,this.y=s}static mfbsdumhab96ba2742e5f470781d72a318c61119f(a){return new Ie(a.x,a.y)}zkepaik9f89cc8055b246098ea01991068ac6fe(){return{x:this.x,y:this.y}}oqfkefbiygf74085358f814df6b5e5b3762e1ddf97(a){return le(this.x,a.x)&&le(this.y,a.y)}ccdma0a6746d7e1de4580816b628d3071e286(){return[this.x,this.y]}vpfrtyfd2d5c30734dc9467fa9473d040cd3745d(a){let s=(this.x+a.x)/2,u=(this.y+a.y)/2;return new Ie(s,u)}vrvllne6d644fa7920342308f6a99d12873981b(a){let s=a.x-this.x,u=a.y-this.y;return Math.sqrt(s*s+u*u)}};function Se(f,a,s){let u={x:f.x-a.x,y:f.y-a.y},p={x:s.x-a.x,y:s.y-a.y},g=u.x*p.x+u.y*p.y,w=Math.hypot(u.x,u.y),v=Math.hypot(p.x,p.y);if(w===0||v===0)return 0;let b=Math.min(1,Math.max(-1,g/(w*v)));return Math.acos(b)}var Qe=class{static sveit4794e58b9a414301aa08711ea43a21db(f,a,s){let u=a.vpfrtyfd2d5c30734dc9467fa9473d040cd3745d(s),p=a.vrvllne6d644fa7920342308f6a99d12873981b(s)/2;return u.vrvllne6d644fa7920342308f6a99d12873981b(f)<=p}},yn=class Y{constructor(a){this.points=a,Y.mrmfz4efb83bbcaf64655b691a6c29f1ea6d3(a)||this.points.reverse()}tag="";sectionTag="";materialTag="";static mfbsdumhab96ba2742e5f470781d72a318c61119f(a){return new Y(a.points.map(s=>j.mfbsdumhab96ba2742e5f470781d72a318c61119f(s)))}zkepaik9f89cc8055b246098ea01991068ac6fe(){return{points:this.points.map(a=>a.zkepaik9f89cc8055b246098ea01991068ac6fe()),tag:this.tag,sectionTag:this.sectionTag,materialTag:this.materialTag}}static mrmfz4efb83bbcaf64655b691a6c29f1ea6d3(a){let[s,u,p]=a;return(u.x-s.x)*(p.y-s.y)-(u.y-s.y)*(p.x-s.x)>0}gmmzfa770da20a00f4a9785b95b02a79d802f(a,s,u){this.tag=a,this.sectionTag=s,this.materialTag=u}xxurzqg0f75f54f89bd48cb85e466dd2c807d8c(){let[a,s,u]=this.points,p=(a.x+s.x+u.x)/3,g=(a.y+s.y+u.y)/3;return new j(p,g)}qpkfllfa278be84bcc4542977b757a85a57148(a=.1){let s=this.xxurzqg0f75f54f89bd48cb85e466dd2c807d8c(),u=this.points.map(v=>{let b=s.x-v.x,P=s.y-v.y;return Math.sqrt(b*b+P*P)}),g=Math.max(...u)*a;return this.points.map(v=>{let b=s.x-v.x,P=s.y-v.y,I=Math.sqrt(b*b+P*P),N=g/I;return new j(v.x+b*N,v.y+P*N)})}ijnif29e61883e337402abcfd015cbf1de790(){let a=this.xxurzqg0f75f54f89bd48cb85e466dd2c807d8c();return[new Y([this.points[0],this.points[1],a]),new Y([this.points[1],this.points[2],a]),new Y([this.points[2],this.points[0],a])]}rjprbme03e3cec8bb94d1491266f5d5ce133ac(){let[a,s,u]=this.points,p=new j((a.x+s.x)/2,(a.y+s.y)/2),g=new j((s.x+u.x)/2,(s.y+u.y)/2),w=new j((u.x+a.x)/2,(u.y+a.y)/2);return[new Y([a,p,w]),new Y([p,s,g]),new Y([w,g,u]),new Y([p,g,w])]}rvqqk3be39e9fe5a242f08aa73f27d9b9a235(){let[a,s,u]=this.points,p=a.x,g=a.y,w=s.x,v=s.y,b=u.x,P=u.y,I=2*(p*(v-P)+w*(P-g)+b*(g-v));if(Math.abs(I)<1e-10)return null;let N=((p*p+g*g)*(v-P)+(w*w+v*v)*(P-g)+(b*b+P*P)*(g-v))/I,c=((p*p+g*g)*(b-w)+(w*w+v*v)*(p-b)+(b*b+P*P)*(w-p))/I;return new j(N,c)}vtcedo7b9892d701144d81bb95220baa58c3c4(){let a=this.rvqqk3be39e9fe5a242f08aa73f27d9b9a235();return a===null?[]:[new Y([this.points[0],this.points[1],a]),new Y([this.points[1],this.points[2],a]),new Y([this.points[2],this.points[0],a])]}ttfrxv076932c853744188a2c7e5281d1187f4(){let[a,s,u]=this.points,p=a.x,g=s.x,w=u.x,v=a.y,b=s.y,P=u.y;return .5*Math.abs(p*(b-P)+g*(P-v)+w*(v-b))}lttcpoesfcc8075e8d144b64be687146ab970d0a(){let a=this.ttfrxv076932c853744188a2c7e5281d1187f4();return le(a,0)}fzouirensude9d3fab80fa473d88f2bcc491e9679b(){let[a,s,u]=this.points;return[Se(s,a,u),Se(a,s,u),Se(a,u,s)]}glsjwhi1d62fd2daa7e4c1dbd1114ccfcae3c2d(a=15*Math.PI/180){return!!this.fzouirensude9d3fab80fa473d88f2bcc491e9679b().some(u=>u<a)}jswiy2c0e69767a2c400d8e5b62905b817bda(){let a=this.rvqqk3be39e9fe5a242f08aa73f27d9b9a235();if(!a)return this.hyqeay6a05f2f99e11467794713cb9c410a695();for(let s=0;s<3;s++){let u=this.points[s],p=this.points[(s+1)%3];if(Qe.sveit4794e58b9a414301aa08711ea43a21db(a,u,p))return this.hyqeay6a05f2f99e11467794713cb9c410a695()}return a}biadgq5137f9ae2eae4408aae180a348ee7d76(a){let[s,u,p]=this.points,g=[{p1:s,p2:u},{p1:u,p2:p},{p1:p,p2:s}],w=[];for(let v of g)for(let b of a)if(!this.points.some(P=>P.oqfkefbiygf74085358f814df6b5e5b3762e1ddf97(b))&&Qe.sveit4794e58b9a414301aa08711ea43a21db(b,v.p1,v.p2))return w.push(v.p1.vpfrtyfd2d5c30734dc9467fa9473d040cd3745d(v.p2)),w;return w}xkkzrffh463b908ecbe949a194e6c924a74e92e3(a){let s=this.rvqqk3be39e9fe5a242f08aa73f27d9b9a235();return s?a.some(u=>u.jwhaehkqc2c4257f91de14533ac411a6a86c3ad24(s))?s:this.hyqeay6a05f2f99e11467794713cb9c410a695():this.hyqeay6a05f2f99e11467794713cb9c410a695()}hyqeay6a05f2f99e11467794713cb9c410a695(){let[a,s,u]=this.points,p=[{p1:a,p2:s},{p1:s,p2:u},{p1:u,p2:a}],g=p[0],w=g.p1.vrvllne6d644fa7920342308f6a99d12873981b(g.p2);for(let v=1;v<p.length;v++){let b=p[v].p1.vrvllne6d644fa7920342308f6a99d12873981b(p[v].p2);b>w&&(w=b,g=p[v])}return g.p1.vpfrtyfd2d5c30734dc9467fa9473d040cd3745d(g.p2)}};var gn=class Ze{constructor(a,s,u,p){this.points=a,this.tag=s,this.sectionTag=u,this.materialTag=p,this.d3Polygon=a.map(g=>[g.x,g.y])}d3Polygon;static mfbsdumhab96ba2742e5f470781d72a318c61119f(a){return new Ze(a.points.map(s=>j.mfbsdumhab96ba2742e5f470781d72a318c61119f(s)),a.tag,a.sectionTag,a.materialTag)}pfnmcezmjs472e73e8a93d4c89b2e9dadaae59c1e3(a){for(let s=0,u=this.points.length-1;s<this.points.length;u=s++)if(vn(a,this.points[s],this.points[u]))return!0;return!1}jwhaehkqc2c4257f91de14533ac411a6a86c3ad24(a){return this.pfnmcezmjs472e73e8a93d4c89b2e9dadaae59c1e3(a)?!0:Pe(this.d3Polygon,[a.x,a.y])}eyfbkq30e163efaeaa42968b7e57d58d41d47d(a,s){let u=[];for(let p=0;p<a.length;p++){let g=a[p],w=a[(p+1)%a.length],v=w.x-g.x,b=w.y-g.y,P=Math.sqrt(v*v+b*b),I=Math.floor(P/s);u.push(new j(g.x,g.y));for(let N=1;N<I;N++){let c=N*s/P,T=g.x+c*v,S=g.y+c*b;u.push(new j(T,S))}}return u}};function vn(f,a,s){let u=(f.y-a.y)*(s.x-a.x)-(f.x-a.x)*(s.y-a.y);if(!le(Math.abs(u),0))return!1;let p=(f.x-a.x)*(s.x-a.x)+(f.y-a.y)*(s.y-a.y);if(p<0)return!1;let g=(s.x-a.x)**2+(s.y-a.y)**2;return!(p>g)}function Je(f){let a=f.polygons.map(g=>gn.mfbsdumhab96ba2742e5f470781d72a318c61119f(g)),u=f.baseTriangles.map(g=>yn.mfbsdumhab96ba2742e5f470781d72a318c61119f(g)),p=[];for(let g of u){let w=g.xxurzqg0f75f54f89bd48cb85e466dd2c807d8c(),v=a.find(b=>b.jwhaehkqc2c4257f91de14533ac411a6a86c3ad24(w));v&&(g.gmmzfa770da20a00f4a9785b95b02a79d802f(v.tag,v.sectionTag,v.materialTag),p.push(g))}return{triangles:p.map(g=>g.zkepaik9f89cc8055b246098ea01991068ac6fe())}}var Re=hn(tt());var nt=(f,a,s="")=>`View3dModel-${f}-${a}${s}`,rt=f=>`Triangles-${f}`;var xn=2220446049250313e-31;function se(f,a,s,u){let p=Math.abs(f-a);return s==null&&(s=xn),u==null&&(u=s),p<=s||p<=u*Math.min(Math.abs(f),Math.abs(a))?!0:f===a}var Z=class extends Error{constructor(a){super(a)}};function ot(f){if(f.length<3)throw new Z("At least three vertices are required to form a face.");return{vertices:[...f.filter(a=>a)],results:[]}}var fe=f=>{let a=(f.points??"").trim().split(/\s+/).map(u=>u.split(",")),s=[];for(let[u,p]of a){let g=parseFloat(u),w=parseFloat(p);if(Number.isFinite(g)&&Number.isFinite(w))s.push({x:g,y:w});else throw new Z("Invalid vertex coordinates")}return{vertices:s}};function at(f){let a=0,s=0,u=0,p=f.length;for(let g=0;g<p;g++){let{x:w,y:v}=f[g],{x:b,y:P}=f[(g+1)%p],I=w*P-b*v;a+=I,s+=(w+b)*I,u+=(v+P)*I}return a*=.5,a===0?{x:0,y:0}:(s/=6*a,u/=6*a,{x:s,y:u})}function*it(f,a){let s=[...new Set(a.rectangles.map(c=>c.name).concat(a.polygons.map(c=>c.name)))],u=[];for(let c of f){let T=c.points.map(F=>Tn(F)),S=ot(T);if(s.indexOf(c.name)===-1)throw new Z(`Geometry name ${c.name} not found in geometry rectangles or polygons.`);u.push(S)}let p=a.supports.map(c=>Pn(c)),g=f.flatMap(c=>c.points).map(c=>c.x).reduce((c,T)=>Math.max(c,T),-1/0),w=f.flatMap(c=>c.points).map(c=>c.x).reduce((c,T)=>Math.min(c,T),1/0),v=f.flatMap(c=>c.points).map(c=>c.y).reduce((c,T)=>Math.max(c,T),-1/0),b=f.flatMap(c=>c.points).map(c=>c.y).reduce((c,T)=>Math.min(c,T),1/0),P=g-w,I=v-b,N=[...a.polygons.map(c=>fe(c)),...a.rectangles.map(c=>ie(c))].map(c=>c.vertices.map(T=>({x:T.x,y:T.y}))).map(c=>({points:c}));for(let c of a.loadCases)yield{faces:u,wireframeFaces:[],supports:p,borders:N,loads:_n(c,a),loadCaseTag:c.name,width:P,height:I}}function _n(f,a){let s=[];for(let u of f.pointLoads)se(u.fx,0)||s.push({x:u.x,y:u.y,z:0,valueX:u.fx,valueY:0,valueZ:0,type:"point"}),se(u.fy,0)||s.push({x:u.x,y:u.y,z:0,valueY:u.fy,valueZ:0,valueX:0,type:"point"});for(let u of f.distributedLoads){let p=a.polygons.filter(v=>v.name===u.geometryName).map(v=>fe(v)),g=a.rectangles.filter(v=>v.name===u.geometryName).map(v=>ie(v)),w=[...p,...g];for(let v of w){let b=at(v.vertices);se(u.fx,0)||s.push({x:b.x,y:b.y,z:0,valueX:u.fx,valueY:0,valueZ:0,type:"distributed"}),se(u.fy,0)||s.push({x:b.x,y:b.y,z:0,valueX:0,valueY:u.fy,valueZ:0,type:"distributed"})}}return s}function Tn(f){return{x:f.x,y:f.y,z:0,ux:0,uy:0,uz:0,value:0}}function Pn(f){return{x:f.x,y:f.y,z:0,ux:f.fixedX,uy:f.fixedY,uz:!1}}addEventListener("message",({data:f})=>{Sn(f)});var Sn=async f=>{let{geometry:a,uuid:s,baseTriangles:u}=f,p=a.loadCases.flatMap(S=>S.pointLoads).map(S=>({x:S.x,y:S.y})),g=a.supports.map(S=>({x:S.x,y:S.y})),w=a.resultPoints.map(S=>({x:S.x,y:S.y})),v=a.rectangles.map(S=>Dn(S)),b=a.polygons.map(S=>Mn(S)),P=v.concat(b),I={maxTriangleArea:a.meshingConfiguration.maxMeshArea,refinementPoints:a.meshingConfiguration.refinementPoints.map(S=>In(S))},c=Je({polygons:P,extraPoints:p.concat(g).concat(w),meshingConfiguration:I,baseTriangles:u.map(S=>An(S))}).triangles.map(S=>Rn(S));await Re.setItem(rt(s),c);for(let S of it(c,a))await Re.setItem(nt(s,S.loadCaseTag),S);postMessage({uuid:s})},In=f=>({radius:f.radius,maxTriangleArea:f.maxArea,center:{x:f.x,y:f.y}}),En=f=>({x:f.x,y:f.y}),Rn=f=>({points:f.points.map(s=>En(s)),name:f.tag,sectionTag:f.sectionTag,materialTag:f.materialTag}),Dn=f=>({points:ie(f).vertices.map(s=>({x:s.x,y:s.y})),tag:f.name,sectionTag:f.sectionName,materialTag:f.materialName}),Mn=f=>({points:fe(f).vertices.map(s=>({x:s.x,y:s.y})),tag:f.name,sectionTag:f.sectionName,materialTag:f.materialName}),An=f=>({points:f.points.map(s=>({x:s.x,y:s.y}))});
