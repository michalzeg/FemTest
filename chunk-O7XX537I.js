import{A as Nr,a as di,b as ur,c as cr,d as Up,e as Bt,f as su,g as dn,h as Kp,i as Yp,j as qp,k as jp,l as Hp,m as zp,n as au,o as Xp,p as Jp,q as Zp,r as Qp,s as em,t as ab,u as lb,v as Ps,w as Ls,y as tm,z as nm}from"./chunk-KXOVZQKQ.js";import{$ as sm,Aa as Bs,Ba as Vs,Ca as Gs,Da as at,Ea as lt,Fa as ut,Ga as ct,Ha as ft,Ia as pt,Ka as mt,La as Ws,Ma as dt,Na as mm,O as im,Oa as ht,P as Rs,Pa as $s,Q as In,Qa as gt,R as Nn,Ra as dm,S as He,Sa as _t,Ta as hm,Ua as yt,Va as gm,Wa as wt,Xa as bt,Ya as Us,Z as rm,Za as Ct,_ as om,aa as am,ba as lm,ca as ze,d as Vp,da as Xe,e as Gp,ea as ks,fa as Je,g as Wp,ga as Or,ha as Ze,ia as um,ja as Qe,ka as hi,la as et,m as $p,ma as Ds,na as tt,qa as nt,ra as Pr,sa as it,ta as cm,ua as rt,va as fm,wa as pm,xa as ot,ya as st,za as Fs}from"./chunk-DWKH7MRO.js";import{Ab as G,B as Ep,Bb as W,D as Is,Ia as Op,Ja as R,Jb as ou,Kb as Rp,Mb as B,Nb as Be,Ob as Ns,P as Ap,Q as nn,Qb as X,R as Fe,Ra as ru,Rb as J,Sb as Z,T as Ip,Tb as kp,Ub as Os,Vb as Dp,Wa as je,Ya as Pp,_ as Ae,_a as mi,a as ar,ab as mn,b as vp,bc as Fp,cc as Bp,dc as Ir,e as sb,ea as k,f as iu,fa as D,g as Se,h as N,hb as q,hc as rn,ia as pi,kb as Lp,m as Sp,mb as lr,nb as Nt,ob as Ot,pa as Np,pb as Pt,q as Mp,qb as b,r as xp,rb as w,sb as oe,v as po,wb as $e,x as Tp}from"./chunk-Y2PCDT3U.js";var ym=sb((Lr,mo)=>{"use strict";(function(){var r,i="4.17.21",n=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",l="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",d=500,h="__lodash_placeholder__",_=1,T=2,M=4,S=1,I=2,V=1,x=2,L=4,U=8,K=16,j=32,te=64,ee=128,se=256,be=512,H=30,Re="...",Mn=800,ei=16,Oe=1,ko=2,gd=3,Ji=1/0,ti=9007199254740991,_d=17976931348623157e292,Do=NaN,xn=4294967295,yd=xn-1,wd=xn>>>1,bd=[["ary",ee],["bind",V],["bindKey",x],["curry",U],["curryRight",K],["flip",be],["partial",j],["partialRight",te],["rearg",se]],dr="[object Arguments]",Fo="[object Array]",Cd="[object AsyncFunction]",Kr="[object Boolean]",Yr="[object Date]",vd="[object DOMException]",Bo="[object Error]",Vo="[object Function]",Ku="[object GeneratorFunction]",an="[object Map]",qr="[object Number]",Sd="[object Null]",Fn="[object Object]",Yu="[object Promise]",Md="[object Proxy]",jr="[object RegExp]",ln="[object Set]",Hr="[object String]",Go="[object Symbol]",xd="[object Undefined]",zr="[object WeakMap]",Td="[object WeakSet]",Xr="[object ArrayBuffer]",hr="[object DataView]",Da="[object Float32Array]",Fa="[object Float64Array]",Ba="[object Int8Array]",Va="[object Int16Array]",Ga="[object Int32Array]",Wa="[object Uint8Array]",$a="[object Uint8ClampedArray]",Ua="[object Uint16Array]",Ka="[object Uint32Array]",Ed=/\b__p \+= '';/g,Ad=/\b(__p \+=) '' \+/g,Id=/(__e\(.*?\)|\b__t\)) \+\n'';/g,qu=/&(?:amp|lt|gt|quot|#39);/g,ju=/[&<>"']/g,Nd=RegExp(qu.source),Od=RegExp(ju.source),Pd=/<%-([\s\S]+?)%>/g,Ld=/<%([\s\S]+?)%>/g,Hu=/<%=([\s\S]+?)%>/g,Rd=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,kd=/^\w*$/,Dd=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ya=/[\\^$.*+?()[\]{}|]/g,Fd=RegExp(Ya.source),qa=/^\s+/,Bd=/\s/,Vd=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Gd=/\{\n\/\* \[wrapped with (.+)\] \*/,Wd=/,? & /,$d=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ud=/[()=,{}\[\]\/\s]/,Kd=/\\(\\)?/g,Yd=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,zu=/\w*$/,qd=/^[-+]0x[0-9a-f]+$/i,jd=/^0b[01]+$/i,Hd=/^\[object .+?Constructor\]$/,zd=/^0o[0-7]+$/i,Xd=/^(?:0|[1-9]\d*)$/,Jd=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Wo=/($^)/,Zd=/['\n\r\u2028\u2029\\]/g,$o="\\ud800-\\udfff",Qd="\\u0300-\\u036f",eh="\\ufe20-\\ufe2f",th="\\u20d0-\\u20ff",Xu=Qd+eh+th,Ju="\\u2700-\\u27bf",Zu="a-z\\xdf-\\xf6\\xf8-\\xff",nh="\\xac\\xb1\\xd7\\xf7",ih="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",rh="\\u2000-\\u206f",oh=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Qu="A-Z\\xc0-\\xd6\\xd8-\\xde",ec="\\ufe0e\\ufe0f",tc=nh+ih+rh+oh,ja="['\u2019]",sh="["+$o+"]",nc="["+tc+"]",Uo="["+Xu+"]",ic="\\d+",ah="["+Ju+"]",rc="["+Zu+"]",oc="[^"+$o+tc+ic+Ju+Zu+Qu+"]",Ha="\\ud83c[\\udffb-\\udfff]",lh="(?:"+Uo+"|"+Ha+")",sc="[^"+$o+"]",za="(?:\\ud83c[\\udde6-\\uddff]){2}",Xa="[\\ud800-\\udbff][\\udc00-\\udfff]",gr="["+Qu+"]",ac="\\u200d",lc="(?:"+rc+"|"+oc+")",uh="(?:"+gr+"|"+oc+")",uc="(?:"+ja+"(?:d|ll|m|re|s|t|ve))?",cc="(?:"+ja+"(?:D|LL|M|RE|S|T|VE))?",fc=lh+"?",pc="["+ec+"]?",ch="(?:"+ac+"(?:"+[sc,za,Xa].join("|")+")"+pc+fc+")*",fh="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ph="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",mc=pc+fc+ch,mh="(?:"+[ah,za,Xa].join("|")+")"+mc,dh="(?:"+[sc+Uo+"?",Uo,za,Xa,sh].join("|")+")",hh=RegExp(ja,"g"),gh=RegExp(Uo,"g"),Ja=RegExp(Ha+"(?="+Ha+")|"+dh+mc,"g"),_h=RegExp([gr+"?"+rc+"+"+uc+"(?="+[nc,gr,"$"].join("|")+")",uh+"+"+cc+"(?="+[nc,gr+lc,"$"].join("|")+")",gr+"?"+lc+"+"+uc,gr+"+"+cc,ph,fh,ic,mh].join("|"),"g"),yh=RegExp("["+ac+$o+Xu+ec+"]"),wh=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,bh=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ch=-1,Ee={};Ee[Da]=Ee[Fa]=Ee[Ba]=Ee[Va]=Ee[Ga]=Ee[Wa]=Ee[$a]=Ee[Ua]=Ee[Ka]=!0,Ee[dr]=Ee[Fo]=Ee[Xr]=Ee[Kr]=Ee[hr]=Ee[Yr]=Ee[Bo]=Ee[Vo]=Ee[an]=Ee[qr]=Ee[Fn]=Ee[jr]=Ee[ln]=Ee[Hr]=Ee[zr]=!1;var Te={};Te[dr]=Te[Fo]=Te[Xr]=Te[hr]=Te[Kr]=Te[Yr]=Te[Da]=Te[Fa]=Te[Ba]=Te[Va]=Te[Ga]=Te[an]=Te[qr]=Te[Fn]=Te[jr]=Te[ln]=Te[Hr]=Te[Go]=Te[Wa]=Te[$a]=Te[Ua]=Te[Ka]=!0,Te[Bo]=Te[Vo]=Te[zr]=!1;var vh={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Sh={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Mh={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},xh={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Th=parseFloat,Eh=parseInt,dc=typeof global=="object"&&global&&global.Object===Object&&global,Ah=typeof self=="object"&&self&&self.Object===Object&&self,Ye=dc||Ah||Function("return this")(),Za=typeof Lr=="object"&&Lr&&!Lr.nodeType&&Lr,Zi=Za&&typeof mo=="object"&&mo&&!mo.nodeType&&mo,hc=Zi&&Zi.exports===Za,Qa=hc&&dc.process,Ht=function(){try{var C=Zi&&Zi.require&&Zi.require("util").types;return C||Qa&&Qa.binding&&Qa.binding("util")}catch{}}(),gc=Ht&&Ht.isArrayBuffer,_c=Ht&&Ht.isDate,yc=Ht&&Ht.isMap,wc=Ht&&Ht.isRegExp,bc=Ht&&Ht.isSet,Cc=Ht&&Ht.isTypedArray;function Wt(C,A,E){switch(E.length){case 0:return C.call(A);case 1:return C.call(A,E[0]);case 2:return C.call(A,E[0],E[1]);case 3:return C.call(A,E[0],E[1],E[2])}return C.apply(A,E)}function Ih(C,A,E,Y){for(var ae=-1,ye=C==null?0:C.length;++ae<ye;){var Ge=C[ae];A(Y,Ge,E(Ge),C)}return Y}function zt(C,A){for(var E=-1,Y=C==null?0:C.length;++E<Y&&A(C[E],E,C)!==!1;);return C}function Nh(C,A){for(var E=C==null?0:C.length;E--&&A(C[E],E,C)!==!1;);return C}function vc(C,A){for(var E=-1,Y=C==null?0:C.length;++E<Y;)if(!A(C[E],E,C))return!1;return!0}function ni(C,A){for(var E=-1,Y=C==null?0:C.length,ae=0,ye=[];++E<Y;){var Ge=C[E];A(Ge,E,C)&&(ye[ae++]=Ge)}return ye}function Ko(C,A){var E=C==null?0:C.length;return!!E&&_r(C,A,0)>-1}function el(C,A,E){for(var Y=-1,ae=C==null?0:C.length;++Y<ae;)if(E(A,C[Y]))return!0;return!1}function Ie(C,A){for(var E=-1,Y=C==null?0:C.length,ae=Array(Y);++E<Y;)ae[E]=A(C[E],E,C);return ae}function ii(C,A){for(var E=-1,Y=A.length,ae=C.length;++E<Y;)C[ae+E]=A[E];return C}function tl(C,A,E,Y){var ae=-1,ye=C==null?0:C.length;for(Y&&ye&&(E=C[++ae]);++ae<ye;)E=A(E,C[ae],ae,C);return E}function Oh(C,A,E,Y){var ae=C==null?0:C.length;for(Y&&ae&&(E=C[--ae]);ae--;)E=A(E,C[ae],ae,C);return E}function nl(C,A){for(var E=-1,Y=C==null?0:C.length;++E<Y;)if(A(C[E],E,C))return!0;return!1}var Ph=il("length");function Lh(C){return C.split("")}function Rh(C){return C.match($d)||[]}function Sc(C,A,E){var Y;return E(C,function(ae,ye,Ge){if(A(ae,ye,Ge))return Y=ye,!1}),Y}function Yo(C,A,E,Y){for(var ae=C.length,ye=E+(Y?1:-1);Y?ye--:++ye<ae;)if(A(C[ye],ye,C))return ye;return-1}function _r(C,A,E){return A===A?qh(C,A,E):Yo(C,Mc,E)}function kh(C,A,E,Y){for(var ae=E-1,ye=C.length;++ae<ye;)if(Y(C[ae],A))return ae;return-1}function Mc(C){return C!==C}function xc(C,A){var E=C==null?0:C.length;return E?ol(C,A)/E:Do}function il(C){return function(A){return A==null?r:A[C]}}function rl(C){return function(A){return C==null?r:C[A]}}function Tc(C,A,E,Y,ae){return ae(C,function(ye,Ge,xe){E=Y?(Y=!1,ye):A(E,ye,Ge,xe)}),E}function Dh(C,A){var E=C.length;for(C.sort(A);E--;)C[E]=C[E].value;return C}function ol(C,A){for(var E,Y=-1,ae=C.length;++Y<ae;){var ye=A(C[Y]);ye!==r&&(E=E===r?ye:E+ye)}return E}function sl(C,A){for(var E=-1,Y=Array(C);++E<C;)Y[E]=A(E);return Y}function Fh(C,A){return Ie(A,function(E){return[E,C[E]]})}function Ec(C){return C&&C.slice(0,Oc(C)+1).replace(qa,"")}function $t(C){return function(A){return C(A)}}function al(C,A){return Ie(A,function(E){return C[E]})}function Jr(C,A){return C.has(A)}function Ac(C,A){for(var E=-1,Y=C.length;++E<Y&&_r(A,C[E],0)>-1;);return E}function Ic(C,A){for(var E=C.length;E--&&_r(A,C[E],0)>-1;);return E}function Bh(C,A){for(var E=C.length,Y=0;E--;)C[E]===A&&++Y;return Y}var Vh=rl(vh),Gh=rl(Sh);function Wh(C){return"\\"+xh[C]}function $h(C,A){return C==null?r:C[A]}function yr(C){return yh.test(C)}function Uh(C){return wh.test(C)}function Kh(C){for(var A,E=[];!(A=C.next()).done;)E.push(A.value);return E}function ll(C){var A=-1,E=Array(C.size);return C.forEach(function(Y,ae){E[++A]=[ae,Y]}),E}function Nc(C,A){return function(E){return C(A(E))}}function ri(C,A){for(var E=-1,Y=C.length,ae=0,ye=[];++E<Y;){var Ge=C[E];(Ge===A||Ge===h)&&(C[E]=h,ye[ae++]=E)}return ye}function qo(C){var A=-1,E=Array(C.size);return C.forEach(function(Y){E[++A]=Y}),E}function Yh(C){var A=-1,E=Array(C.size);return C.forEach(function(Y){E[++A]=[Y,Y]}),E}function qh(C,A,E){for(var Y=E-1,ae=C.length;++Y<ae;)if(C[Y]===A)return Y;return-1}function jh(C,A,E){for(var Y=E+1;Y--;)if(C[Y]===A)return Y;return Y}function wr(C){return yr(C)?zh(C):Ph(C)}function un(C){return yr(C)?Xh(C):Lh(C)}function Oc(C){for(var A=C.length;A--&&Bd.test(C.charAt(A)););return A}var Hh=rl(Mh);function zh(C){for(var A=Ja.lastIndex=0;Ja.test(C);)++A;return A}function Xh(C){return C.match(Ja)||[]}function Jh(C){return C.match(_h)||[]}var Zh=function C(A){A=A==null?Ye:oi.defaults(Ye.Object(),A,oi.pick(Ye,bh));var E=A.Array,Y=A.Date,ae=A.Error,ye=A.Function,Ge=A.Math,xe=A.Object,ul=A.RegExp,Qh=A.String,Xt=A.TypeError,jo=E.prototype,eg=ye.prototype,br=xe.prototype,Ho=A["__core-js_shared__"],zo=eg.toString,ve=br.hasOwnProperty,tg=0,Pc=function(){var e=/[^.]+$/.exec(Ho&&Ho.keys&&Ho.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Xo=br.toString,ng=zo.call(xe),ig=Ye._,rg=ul("^"+zo.call(ve).replace(Ya,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Jo=hc?A.Buffer:r,si=A.Symbol,Zo=A.Uint8Array,Lc=Jo?Jo.allocUnsafe:r,Qo=Nc(xe.getPrototypeOf,xe),Rc=xe.create,kc=br.propertyIsEnumerable,es=jo.splice,Dc=si?si.isConcatSpreadable:r,Zr=si?si.iterator:r,Qi=si?si.toStringTag:r,ts=function(){try{var e=rr(xe,"defineProperty");return e({},"",{}),e}catch{}}(),og=A.clearTimeout!==Ye.clearTimeout&&A.clearTimeout,sg=Y&&Y.now!==Ye.Date.now&&Y.now,ag=A.setTimeout!==Ye.setTimeout&&A.setTimeout,ns=Ge.ceil,is=Ge.floor,cl=xe.getOwnPropertySymbols,lg=Jo?Jo.isBuffer:r,Fc=A.isFinite,ug=jo.join,cg=Nc(xe.keys,xe),We=Ge.max,St=Ge.min,fg=Y.now,pg=A.parseInt,Bc=Ge.random,mg=jo.reverse,fl=rr(A,"DataView"),Qr=rr(A,"Map"),pl=rr(A,"Promise"),Cr=rr(A,"Set"),eo=rr(A,"WeakMap"),to=rr(xe,"create"),rs=eo&&new eo,vr={},dg=or(fl),hg=or(Qr),gg=or(pl),_g=or(Cr),yg=or(eo),os=si?si.prototype:r,no=os?os.valueOf:r,Vc=os?os.toString:r;function p(e){if(Pe(e)&&!le(e)&&!(e instanceof de)){if(e instanceof Jt)return e;if(ve.call(e,"__wrapped__"))return Wf(e)}return new Jt(e)}var Sr=function(){function e(){}return function(t){if(!Ne(t))return{};if(Rc)return Rc(t);e.prototype=t;var a=new e;return e.prototype=r,a}}();function ss(){}function Jt(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=r}p.templateSettings={escape:Pd,evaluate:Ld,interpolate:Hu,variable:"",imports:{_:p}},p.prototype=ss.prototype,p.prototype.constructor=p,Jt.prototype=Sr(ss.prototype),Jt.prototype.constructor=Jt;function de(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=xn,this.__views__=[]}function wg(){var e=new de(this.__wrapped__);return e.__actions__=Rt(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Rt(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Rt(this.__views__),e}function bg(){if(this.__filtered__){var e=new de(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Cg(){var e=this.__wrapped__.value(),t=this.__dir__,a=le(e),u=t<0,f=a?e.length:0,m=L0(0,f,this.__views__),g=m.start,y=m.end,v=y-g,O=u?y:g-1,P=this.__iteratees__,F=P.length,$=0,z=St(v,this.__takeCount__);if(!a||!u&&f==v&&z==v)return cf(e,this.__actions__);var ie=[];e:for(;v--&&$<z;){O+=t;for(var fe=-1,re=e[O];++fe<F;){var me=P[fe],ge=me.iteratee,Yt=me.type,It=ge(re);if(Yt==ko)re=It;else if(!It){if(Yt==Oe)continue e;break e}}ie[$++]=re}return ie}de.prototype=Sr(ss.prototype),de.prototype.constructor=de;function er(e){var t=-1,a=e==null?0:e.length;for(this.clear();++t<a;){var u=e[t];this.set(u[0],u[1])}}function vg(){this.__data__=to?to(null):{},this.size=0}function Sg(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function Mg(e){var t=this.__data__;if(to){var a=t[e];return a===c?r:a}return ve.call(t,e)?t[e]:r}function xg(e){var t=this.__data__;return to?t[e]!==r:ve.call(t,e)}function Tg(e,t){var a=this.__data__;return this.size+=this.has(e)?0:1,a[e]=to&&t===r?c:t,this}er.prototype.clear=vg,er.prototype.delete=Sg,er.prototype.get=Mg,er.prototype.has=xg,er.prototype.set=Tg;function Bn(e){var t=-1,a=e==null?0:e.length;for(this.clear();++t<a;){var u=e[t];this.set(u[0],u[1])}}function Eg(){this.__data__=[],this.size=0}function Ag(e){var t=this.__data__,a=as(t,e);if(a<0)return!1;var u=t.length-1;return a==u?t.pop():es.call(t,a,1),--this.size,!0}function Ig(e){var t=this.__data__,a=as(t,e);return a<0?r:t[a][1]}function Ng(e){return as(this.__data__,e)>-1}function Og(e,t){var a=this.__data__,u=as(a,e);return u<0?(++this.size,a.push([e,t])):a[u][1]=t,this}Bn.prototype.clear=Eg,Bn.prototype.delete=Ag,Bn.prototype.get=Ig,Bn.prototype.has=Ng,Bn.prototype.set=Og;function Vn(e){var t=-1,a=e==null?0:e.length;for(this.clear();++t<a;){var u=e[t];this.set(u[0],u[1])}}function Pg(){this.size=0,this.__data__={hash:new er,map:new(Qr||Bn),string:new er}}function Lg(e){var t=ws(this,e).delete(e);return this.size-=t?1:0,t}function Rg(e){return ws(this,e).get(e)}function kg(e){return ws(this,e).has(e)}function Dg(e,t){var a=ws(this,e),u=a.size;return a.set(e,t),this.size+=a.size==u?0:1,this}Vn.prototype.clear=Pg,Vn.prototype.delete=Lg,Vn.prototype.get=Rg,Vn.prototype.has=kg,Vn.prototype.set=Dg;function tr(e){var t=-1,a=e==null?0:e.length;for(this.__data__=new Vn;++t<a;)this.add(e[t])}function Fg(e){return this.__data__.set(e,c),this}function Bg(e){return this.__data__.has(e)}tr.prototype.add=tr.prototype.push=Fg,tr.prototype.has=Bg;function cn(e){var t=this.__data__=new Bn(e);this.size=t.size}function Vg(){this.__data__=new Bn,this.size=0}function Gg(e){var t=this.__data__,a=t.delete(e);return this.size=t.size,a}function Wg(e){return this.__data__.get(e)}function $g(e){return this.__data__.has(e)}function Ug(e,t){var a=this.__data__;if(a instanceof Bn){var u=a.__data__;if(!Qr||u.length<n-1)return u.push([e,t]),this.size=++a.size,this;a=this.__data__=new Vn(u)}return a.set(e,t),this.size=a.size,this}cn.prototype.clear=Vg,cn.prototype.delete=Gg,cn.prototype.get=Wg,cn.prototype.has=$g,cn.prototype.set=Ug;function Gc(e,t){var a=le(e),u=!a&&sr(e),f=!a&&!u&&fi(e),m=!a&&!u&&!f&&Er(e),g=a||u||f||m,y=g?sl(e.length,Qh):[],v=y.length;for(var O in e)(t||ve.call(e,O))&&!(g&&(O=="length"||f&&(O=="offset"||O=="parent")||m&&(O=="buffer"||O=="byteLength"||O=="byteOffset")||Un(O,v)))&&y.push(O);return y}function Wc(e){var t=e.length;return t?e[Sl(0,t-1)]:r}function Kg(e,t){return bs(Rt(e),nr(t,0,e.length))}function Yg(e){return bs(Rt(e))}function ml(e,t,a){(a!==r&&!fn(e[t],a)||a===r&&!(t in e))&&Gn(e,t,a)}function io(e,t,a){var u=e[t];(!(ve.call(e,t)&&fn(u,a))||a===r&&!(t in e))&&Gn(e,t,a)}function as(e,t){for(var a=e.length;a--;)if(fn(e[a][0],t))return a;return-1}function qg(e,t,a,u){return ai(e,function(f,m,g){t(u,f,a(f),g)}),u}function $c(e,t){return e&&En(t,qe(t),e)}function jg(e,t){return e&&En(t,Dt(t),e)}function Gn(e,t,a){t=="__proto__"&&ts?ts(e,t,{configurable:!0,enumerable:!0,value:a,writable:!0}):e[t]=a}function dl(e,t){for(var a=-1,u=t.length,f=E(u),m=e==null;++a<u;)f[a]=m?r:Hl(e,t[a]);return f}function nr(e,t,a){return e===e&&(a!==r&&(e=e<=a?e:a),t!==r&&(e=e>=t?e:t)),e}function Zt(e,t,a,u,f,m){var g,y=t&_,v=t&T,O=t&M;if(a&&(g=f?a(e,u,f,m):a(e)),g!==r)return g;if(!Ne(e))return e;var P=le(e);if(P){if(g=k0(e),!y)return Rt(e,g)}else{var F=Mt(e),$=F==Vo||F==Ku;if(fi(e))return mf(e,y);if(F==Fn||F==dr||$&&!f){if(g=v||$?{}:Pf(e),!y)return v?M0(e,jg(g,e)):S0(e,$c(g,e))}else{if(!Te[F])return f?e:{};g=D0(e,F,y)}}m||(m=new cn);var z=m.get(e);if(z)return z;m.set(e,g),ap(e)?e.forEach(function(re){g.add(Zt(re,t,a,re,e,m))}):op(e)&&e.forEach(function(re,me){g.set(me,Zt(re,t,a,me,e,m))});var ie=O?v?Rl:Ll:v?Dt:qe,fe=P?r:ie(e);return zt(fe||e,function(re,me){fe&&(me=re,re=e[me]),io(g,me,Zt(re,t,a,me,e,m))}),g}function Hg(e){var t=qe(e);return function(a){return Uc(a,e,t)}}function Uc(e,t,a){var u=a.length;if(e==null)return!u;for(e=xe(e);u--;){var f=a[u],m=t[f],g=e[f];if(g===r&&!(f in e)||!m(g))return!1}return!0}function Kc(e,t,a){if(typeof e!="function")throw new Xt(s);return co(function(){e.apply(r,a)},t)}function ro(e,t,a,u){var f=-1,m=Ko,g=!0,y=e.length,v=[],O=t.length;if(!y)return v;a&&(t=Ie(t,$t(a))),u?(m=el,g=!1):t.length>=n&&(m=Jr,g=!1,t=new tr(t));e:for(;++f<y;){var P=e[f],F=a==null?P:a(P);if(P=u||P!==0?P:0,g&&F===F){for(var $=O;$--;)if(t[$]===F)continue e;v.push(P)}else m(t,F,u)||v.push(P)}return v}var ai=yf(Tn),Yc=yf(gl,!0);function zg(e,t){var a=!0;return ai(e,function(u,f,m){return a=!!t(u,f,m),a}),a}function ls(e,t,a){for(var u=-1,f=e.length;++u<f;){var m=e[u],g=t(m);if(g!=null&&(y===r?g===g&&!Kt(g):a(g,y)))var y=g,v=m}return v}function Xg(e,t,a,u){var f=e.length;for(a=ue(a),a<0&&(a=-a>f?0:f+a),u=u===r||u>f?f:ue(u),u<0&&(u+=f),u=a>u?0:up(u);a<u;)e[a++]=t;return e}function qc(e,t){var a=[];return ai(e,function(u,f,m){t(u,f,m)&&a.push(u)}),a}function vt(e,t,a,u,f){var m=-1,g=e.length;for(a||(a=B0),f||(f=[]);++m<g;){var y=e[m];t>0&&a(y)?t>1?vt(y,t-1,a,u,f):ii(f,y):u||(f[f.length]=y)}return f}var hl=wf(),jc=wf(!0);function Tn(e,t){return e&&hl(e,t,qe)}function gl(e,t){return e&&jc(e,t,qe)}function us(e,t){return ni(t,function(a){return Kn(e[a])})}function ir(e,t){t=ui(t,e);for(var a=0,u=t.length;e!=null&&a<u;)e=e[An(t[a++])];return a&&a==u?e:r}function Hc(e,t,a){var u=t(e);return le(e)?u:ii(u,a(e))}function Et(e){return e==null?e===r?xd:Sd:Qi&&Qi in xe(e)?P0(e):Y0(e)}function _l(e,t){return e>t}function Jg(e,t){return e!=null&&ve.call(e,t)}function Zg(e,t){return e!=null&&t in xe(e)}function Qg(e,t,a){return e>=St(t,a)&&e<We(t,a)}function yl(e,t,a){for(var u=a?el:Ko,f=e[0].length,m=e.length,g=m,y=E(m),v=1/0,O=[];g--;){var P=e[g];g&&t&&(P=Ie(P,$t(t))),v=St(P.length,v),y[g]=!a&&(t||f>=120&&P.length>=120)?new tr(g&&P):r}P=e[0];var F=-1,$=y[0];e:for(;++F<f&&O.length<v;){var z=P[F],ie=t?t(z):z;if(z=a||z!==0?z:0,!($?Jr($,ie):u(O,ie,a))){for(g=m;--g;){var fe=y[g];if(!(fe?Jr(fe,ie):u(e[g],ie,a)))continue e}$&&$.push(ie),O.push(z)}}return O}function e0(e,t,a,u){return Tn(e,function(f,m,g){t(u,a(f),m,g)}),u}function oo(e,t,a){t=ui(t,e),e=Df(e,t);var u=e==null?e:e[An(en(t))];return u==null?r:Wt(u,e,a)}function zc(e){return Pe(e)&&Et(e)==dr}function t0(e){return Pe(e)&&Et(e)==Xr}function n0(e){return Pe(e)&&Et(e)==Yr}function so(e,t,a,u,f){return e===t?!0:e==null||t==null||!Pe(e)&&!Pe(t)?e!==e&&t!==t:i0(e,t,a,u,so,f)}function i0(e,t,a,u,f,m){var g=le(e),y=le(t),v=g?Fo:Mt(e),O=y?Fo:Mt(t);v=v==dr?Fn:v,O=O==dr?Fn:O;var P=v==Fn,F=O==Fn,$=v==O;if($&&fi(e)){if(!fi(t))return!1;g=!0,P=!1}if($&&!P)return m||(m=new cn),g||Er(e)?If(e,t,a,u,f,m):N0(e,t,v,a,u,f,m);if(!(a&S)){var z=P&&ve.call(e,"__wrapped__"),ie=F&&ve.call(t,"__wrapped__");if(z||ie){var fe=z?e.value():e,re=ie?t.value():t;return m||(m=new cn),f(fe,re,a,u,m)}}return $?(m||(m=new cn),O0(e,t,a,u,f,m)):!1}function r0(e){return Pe(e)&&Mt(e)==an}function wl(e,t,a,u){var f=a.length,m=f,g=!u;if(e==null)return!m;for(e=xe(e);f--;){var y=a[f];if(g&&y[2]?y[1]!==e[y[0]]:!(y[0]in e))return!1}for(;++f<m;){y=a[f];var v=y[0],O=e[v],P=y[1];if(g&&y[2]){if(O===r&&!(v in e))return!1}else{var F=new cn;if(u)var $=u(O,P,v,e,t,F);if(!($===r?so(P,O,S|I,u,F):$))return!1}}return!0}function Xc(e){if(!Ne(e)||G0(e))return!1;var t=Kn(e)?rg:Hd;return t.test(or(e))}function o0(e){return Pe(e)&&Et(e)==jr}function s0(e){return Pe(e)&&Mt(e)==ln}function a0(e){return Pe(e)&&Ts(e.length)&&!!Ee[Et(e)]}function Jc(e){return typeof e=="function"?e:e==null?Ft:typeof e=="object"?le(e)?ef(e[0],e[1]):Qc(e):bp(e)}function bl(e){if(!uo(e))return cg(e);var t=[];for(var a in xe(e))ve.call(e,a)&&a!="constructor"&&t.push(a);return t}function l0(e){if(!Ne(e))return K0(e);var t=uo(e),a=[];for(var u in e)u=="constructor"&&(t||!ve.call(e,u))||a.push(u);return a}function Cl(e,t){return e<t}function Zc(e,t){var a=-1,u=kt(e)?E(e.length):[];return ai(e,function(f,m,g){u[++a]=t(f,m,g)}),u}function Qc(e){var t=Dl(e);return t.length==1&&t[0][2]?Rf(t[0][0],t[0][1]):function(a){return a===e||wl(a,e,t)}}function ef(e,t){return Bl(e)&&Lf(t)?Rf(An(e),t):function(a){var u=Hl(a,e);return u===r&&u===t?zl(a,e):so(t,u,S|I)}}function cs(e,t,a,u,f){e!==t&&hl(t,function(m,g){if(f||(f=new cn),Ne(m))u0(e,t,g,a,cs,u,f);else{var y=u?u(Gl(e,g),m,g+"",e,t,f):r;y===r&&(y=m),ml(e,g,y)}},Dt)}function u0(e,t,a,u,f,m,g){var y=Gl(e,a),v=Gl(t,a),O=g.get(v);if(O){ml(e,a,O);return}var P=m?m(y,v,a+"",e,t,g):r,F=P===r;if(F){var $=le(v),z=!$&&fi(v),ie=!$&&!z&&Er(v);P=v,$||z||ie?le(y)?P=y:ke(y)?P=Rt(y):z?(F=!1,P=mf(v,!0)):ie?(F=!1,P=df(v,!0)):P=[]:fo(v)||sr(v)?(P=y,sr(y)?P=cp(y):(!Ne(y)||Kn(y))&&(P=Pf(v))):F=!1}F&&(g.set(v,P),f(P,v,u,m,g),g.delete(v)),ml(e,a,P)}function tf(e,t){var a=e.length;if(a)return t+=t<0?a:0,Un(t,a)?e[t]:r}function nf(e,t,a){t.length?t=Ie(t,function(m){return le(m)?function(g){return ir(g,m.length===1?m[0]:m)}:m}):t=[Ft];var u=-1;t=Ie(t,$t(ne()));var f=Zc(e,function(m,g,y){var v=Ie(t,function(O){return O(m)});return{criteria:v,index:++u,value:m}});return Dh(f,function(m,g){return v0(m,g,a)})}function c0(e,t){return rf(e,t,function(a,u){return zl(e,u)})}function rf(e,t,a){for(var u=-1,f=t.length,m={};++u<f;){var g=t[u],y=ir(e,g);a(y,g)&&ao(m,ui(g,e),y)}return m}function f0(e){return function(t){return ir(t,e)}}function vl(e,t,a,u){var f=u?kh:_r,m=-1,g=t.length,y=e;for(e===t&&(t=Rt(t)),a&&(y=Ie(e,$t(a)));++m<g;)for(var v=0,O=t[m],P=a?a(O):O;(v=f(y,P,v,u))>-1;)y!==e&&es.call(y,v,1),es.call(e,v,1);return e}function of(e,t){for(var a=e?t.length:0,u=a-1;a--;){var f=t[a];if(a==u||f!==m){var m=f;Un(f)?es.call(e,f,1):Tl(e,f)}}return e}function Sl(e,t){return e+is(Bc()*(t-e+1))}function p0(e,t,a,u){for(var f=-1,m=We(ns((t-e)/(a||1)),0),g=E(m);m--;)g[u?m:++f]=e,e+=a;return g}function Ml(e,t){var a="";if(!e||t<1||t>ti)return a;do t%2&&(a+=e),t=is(t/2),t&&(e+=e);while(t);return a}function pe(e,t){return Wl(kf(e,t,Ft),e+"")}function m0(e){return Wc(Ar(e))}function d0(e,t){var a=Ar(e);return bs(a,nr(t,0,a.length))}function ao(e,t,a,u){if(!Ne(e))return e;t=ui(t,e);for(var f=-1,m=t.length,g=m-1,y=e;y!=null&&++f<m;){var v=An(t[f]),O=a;if(v==="__proto__"||v==="constructor"||v==="prototype")return e;if(f!=g){var P=y[v];O=u?u(P,v,y):r,O===r&&(O=Ne(P)?P:Un(t[f+1])?[]:{})}io(y,v,O),y=y[v]}return e}var sf=rs?function(e,t){return rs.set(e,t),e}:Ft,h0=ts?function(e,t){return ts(e,"toString",{configurable:!0,enumerable:!1,value:Jl(t),writable:!0})}:Ft;function g0(e){return bs(Ar(e))}function Qt(e,t,a){var u=-1,f=e.length;t<0&&(t=-t>f?0:f+t),a=a>f?f:a,a<0&&(a+=f),f=t>a?0:a-t>>>0,t>>>=0;for(var m=E(f);++u<f;)m[u]=e[u+t];return m}function _0(e,t){var a;return ai(e,function(u,f,m){return a=t(u,f,m),!a}),!!a}function fs(e,t,a){var u=0,f=e==null?u:e.length;if(typeof t=="number"&&t===t&&f<=wd){for(;u<f;){var m=u+f>>>1,g=e[m];g!==null&&!Kt(g)&&(a?g<=t:g<t)?u=m+1:f=m}return f}return xl(e,t,Ft,a)}function xl(e,t,a,u){var f=0,m=e==null?0:e.length;if(m===0)return 0;t=a(t);for(var g=t!==t,y=t===null,v=Kt(t),O=t===r;f<m;){var P=is((f+m)/2),F=a(e[P]),$=F!==r,z=F===null,ie=F===F,fe=Kt(F);if(g)var re=u||ie;else O?re=ie&&(u||$):y?re=ie&&$&&(u||!z):v?re=ie&&$&&!z&&(u||!fe):z||fe?re=!1:re=u?F<=t:F<t;re?f=P+1:m=P}return St(m,yd)}function af(e,t){for(var a=-1,u=e.length,f=0,m=[];++a<u;){var g=e[a],y=t?t(g):g;if(!a||!fn(y,v)){var v=y;m[f++]=g===0?0:g}}return m}function lf(e){return typeof e=="number"?e:Kt(e)?Do:+e}function Ut(e){if(typeof e=="string")return e;if(le(e))return Ie(e,Ut)+"";if(Kt(e))return Vc?Vc.call(e):"";var t=e+"";return t=="0"&&1/e==-Ji?"-0":t}function li(e,t,a){var u=-1,f=Ko,m=e.length,g=!0,y=[],v=y;if(a)g=!1,f=el;else if(m>=n){var O=t?null:A0(e);if(O)return qo(O);g=!1,f=Jr,v=new tr}else v=t?[]:y;e:for(;++u<m;){var P=e[u],F=t?t(P):P;if(P=a||P!==0?P:0,g&&F===F){for(var $=v.length;$--;)if(v[$]===F)continue e;t&&v.push(F),y.push(P)}else f(v,F,a)||(v!==y&&v.push(F),y.push(P))}return y}function Tl(e,t){return t=ui(t,e),e=Df(e,t),e==null||delete e[An(en(t))]}function uf(e,t,a,u){return ao(e,t,a(ir(e,t)),u)}function ps(e,t,a,u){for(var f=e.length,m=u?f:-1;(u?m--:++m<f)&&t(e[m],m,e););return a?Qt(e,u?0:m,u?m+1:f):Qt(e,u?m+1:0,u?f:m)}function cf(e,t){var a=e;return a instanceof de&&(a=a.value()),tl(t,function(u,f){return f.func.apply(f.thisArg,ii([u],f.args))},a)}function El(e,t,a){var u=e.length;if(u<2)return u?li(e[0]):[];for(var f=-1,m=E(u);++f<u;)for(var g=e[f],y=-1;++y<u;)y!=f&&(m[f]=ro(m[f]||g,e[y],t,a));return li(vt(m,1),t,a)}function ff(e,t,a){for(var u=-1,f=e.length,m=t.length,g={};++u<f;){var y=u<m?t[u]:r;a(g,e[u],y)}return g}function Al(e){return ke(e)?e:[]}function Il(e){return typeof e=="function"?e:Ft}function ui(e,t){return le(e)?e:Bl(e,t)?[e]:Gf(Ce(e))}var y0=pe;function ci(e,t,a){var u=e.length;return a=a===r?u:a,!t&&a>=u?e:Qt(e,t,a)}var pf=og||function(e){return Ye.clearTimeout(e)};function mf(e,t){if(t)return e.slice();var a=e.length,u=Lc?Lc(a):new e.constructor(a);return e.copy(u),u}function Nl(e){var t=new e.constructor(e.byteLength);return new Zo(t).set(new Zo(e)),t}function w0(e,t){var a=t?Nl(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.byteLength)}function b0(e){var t=new e.constructor(e.source,zu.exec(e));return t.lastIndex=e.lastIndex,t}function C0(e){return no?xe(no.call(e)):{}}function df(e,t){var a=t?Nl(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.length)}function hf(e,t){if(e!==t){var a=e!==r,u=e===null,f=e===e,m=Kt(e),g=t!==r,y=t===null,v=t===t,O=Kt(t);if(!y&&!O&&!m&&e>t||m&&g&&v&&!y&&!O||u&&g&&v||!a&&v||!f)return 1;if(!u&&!m&&!O&&e<t||O&&a&&f&&!u&&!m||y&&a&&f||!g&&f||!v)return-1}return 0}function v0(e,t,a){for(var u=-1,f=e.criteria,m=t.criteria,g=f.length,y=a.length;++u<g;){var v=hf(f[u],m[u]);if(v){if(u>=y)return v;var O=a[u];return v*(O=="desc"?-1:1)}}return e.index-t.index}function gf(e,t,a,u){for(var f=-1,m=e.length,g=a.length,y=-1,v=t.length,O=We(m-g,0),P=E(v+O),F=!u;++y<v;)P[y]=t[y];for(;++f<g;)(F||f<m)&&(P[a[f]]=e[f]);for(;O--;)P[y++]=e[f++];return P}function _f(e,t,a,u){for(var f=-1,m=e.length,g=-1,y=a.length,v=-1,O=t.length,P=We(m-y,0),F=E(P+O),$=!u;++f<P;)F[f]=e[f];for(var z=f;++v<O;)F[z+v]=t[v];for(;++g<y;)($||f<m)&&(F[z+a[g]]=e[f++]);return F}function Rt(e,t){var a=-1,u=e.length;for(t||(t=E(u));++a<u;)t[a]=e[a];return t}function En(e,t,a,u){var f=!a;a||(a={});for(var m=-1,g=t.length;++m<g;){var y=t[m],v=u?u(a[y],e[y],y,a,e):r;v===r&&(v=e[y]),f?Gn(a,y,v):io(a,y,v)}return a}function S0(e,t){return En(e,Fl(e),t)}function M0(e,t){return En(e,Nf(e),t)}function ms(e,t){return function(a,u){var f=le(a)?Ih:qg,m=t?t():{};return f(a,e,ne(u,2),m)}}function Mr(e){return pe(function(t,a){var u=-1,f=a.length,m=f>1?a[f-1]:r,g=f>2?a[2]:r;for(m=e.length>3&&typeof m=="function"?(f--,m):r,g&&At(a[0],a[1],g)&&(m=f<3?r:m,f=1),t=xe(t);++u<f;){var y=a[u];y&&e(t,y,u,m)}return t})}function yf(e,t){return function(a,u){if(a==null)return a;if(!kt(a))return e(a,u);for(var f=a.length,m=t?f:-1,g=xe(a);(t?m--:++m<f)&&u(g[m],m,g)!==!1;);return a}}function wf(e){return function(t,a,u){for(var f=-1,m=xe(t),g=u(t),y=g.length;y--;){var v=g[e?y:++f];if(a(m[v],v,m)===!1)break}return t}}function x0(e,t,a){var u=t&V,f=lo(e);function m(){var g=this&&this!==Ye&&this instanceof m?f:e;return g.apply(u?a:this,arguments)}return m}function bf(e){return function(t){t=Ce(t);var a=yr(t)?un(t):r,u=a?a[0]:t.charAt(0),f=a?ci(a,1).join(""):t.slice(1);return u[e]()+f}}function xr(e){return function(t){return tl(yp(_p(t).replace(hh,"")),e,"")}}function lo(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var a=Sr(e.prototype),u=e.apply(a,t);return Ne(u)?u:a}}function T0(e,t,a){var u=lo(e);function f(){for(var m=arguments.length,g=E(m),y=m,v=Tr(f);y--;)g[y]=arguments[y];var O=m<3&&g[0]!==v&&g[m-1]!==v?[]:ri(g,v);if(m-=O.length,m<a)return xf(e,t,ds,f.placeholder,r,g,O,r,r,a-m);var P=this&&this!==Ye&&this instanceof f?u:e;return Wt(P,this,g)}return f}function Cf(e){return function(t,a,u){var f=xe(t);if(!kt(t)){var m=ne(a,3);t=qe(t),a=function(y){return m(f[y],y,f)}}var g=e(t,a,u);return g>-1?f[m?t[g]:g]:r}}function vf(e){return $n(function(t){var a=t.length,u=a,f=Jt.prototype.thru;for(e&&t.reverse();u--;){var m=t[u];if(typeof m!="function")throw new Xt(s);if(f&&!g&&ys(m)=="wrapper")var g=new Jt([],!0)}for(u=g?u:a;++u<a;){m=t[u];var y=ys(m),v=y=="wrapper"?kl(m):r;v&&Vl(v[0])&&v[1]==(ee|U|j|se)&&!v[4].length&&v[9]==1?g=g[ys(v[0])].apply(g,v[3]):g=m.length==1&&Vl(m)?g[y]():g.thru(m)}return function(){var O=arguments,P=O[0];if(g&&O.length==1&&le(P))return g.plant(P).value();for(var F=0,$=a?t[F].apply(this,O):P;++F<a;)$=t[F].call(this,$);return $}})}function ds(e,t,a,u,f,m,g,y,v,O){var P=t&ee,F=t&V,$=t&x,z=t&(U|K),ie=t&be,fe=$?r:lo(e);function re(){for(var me=arguments.length,ge=E(me),Yt=me;Yt--;)ge[Yt]=arguments[Yt];if(z)var It=Tr(re),qt=Bh(ge,It);if(u&&(ge=gf(ge,u,f,z)),m&&(ge=_f(ge,m,g,z)),me-=qt,z&&me<O){var De=ri(ge,It);return xf(e,t,ds,re.placeholder,a,ge,De,y,v,O-me)}var pn=F?a:this,qn=$?pn[e]:e;return me=ge.length,y?ge=q0(ge,y):ie&&me>1&&ge.reverse(),P&&v<me&&(ge.length=v),this&&this!==Ye&&this instanceof re&&(qn=fe||lo(qn)),qn.apply(pn,ge)}return re}function Sf(e,t){return function(a,u){return e0(a,e,t(u),{})}}function hs(e,t){return function(a,u){var f;if(a===r&&u===r)return t;if(a!==r&&(f=a),u!==r){if(f===r)return u;typeof a=="string"||typeof u=="string"?(a=Ut(a),u=Ut(u)):(a=lf(a),u=lf(u)),f=e(a,u)}return f}}function Ol(e){return $n(function(t){return t=Ie(t,$t(ne())),pe(function(a){var u=this;return e(t,function(f){return Wt(f,u,a)})})})}function gs(e,t){t=t===r?" ":Ut(t);var a=t.length;if(a<2)return a?Ml(t,e):t;var u=Ml(t,ns(e/wr(t)));return yr(t)?ci(un(u),0,e).join(""):u.slice(0,e)}function E0(e,t,a,u){var f=t&V,m=lo(e);function g(){for(var y=-1,v=arguments.length,O=-1,P=u.length,F=E(P+v),$=this&&this!==Ye&&this instanceof g?m:e;++O<P;)F[O]=u[O];for(;v--;)F[O++]=arguments[++y];return Wt($,f?a:this,F)}return g}function Mf(e){return function(t,a,u){return u&&typeof u!="number"&&At(t,a,u)&&(a=u=r),t=Yn(t),a===r?(a=t,t=0):a=Yn(a),u=u===r?t<a?1:-1:Yn(u),p0(t,a,u,e)}}function _s(e){return function(t,a){return typeof t=="string"&&typeof a=="string"||(t=tn(t),a=tn(a)),e(t,a)}}function xf(e,t,a,u,f,m,g,y,v,O){var P=t&U,F=P?g:r,$=P?r:g,z=P?m:r,ie=P?r:m;t|=P?j:te,t&=~(P?te:j),t&L||(t&=~(V|x));var fe=[e,t,f,z,F,ie,$,y,v,O],re=a.apply(r,fe);return Vl(e)&&Ff(re,fe),re.placeholder=u,Bf(re,e,t)}function Pl(e){var t=Ge[e];return function(a,u){if(a=tn(a),u=u==null?0:St(ue(u),292),u&&Fc(a)){var f=(Ce(a)+"e").split("e"),m=t(f[0]+"e"+(+f[1]+u));return f=(Ce(m)+"e").split("e"),+(f[0]+"e"+(+f[1]-u))}return t(a)}}var A0=Cr&&1/qo(new Cr([,-0]))[1]==Ji?function(e){return new Cr(e)}:eu;function Tf(e){return function(t){var a=Mt(t);return a==an?ll(t):a==ln?Yh(t):Fh(t,e(t))}}function Wn(e,t,a,u,f,m,g,y){var v=t&x;if(!v&&typeof e!="function")throw new Xt(s);var O=u?u.length:0;if(O||(t&=~(j|te),u=f=r),g=g===r?g:We(ue(g),0),y=y===r?y:ue(y),O-=f?f.length:0,t&te){var P=u,F=f;u=f=r}var $=v?r:kl(e),z=[e,t,a,u,f,P,F,m,g,y];if($&&U0(z,$),e=z[0],t=z[1],a=z[2],u=z[3],f=z[4],y=z[9]=z[9]===r?v?0:e.length:We(z[9]-O,0),!y&&t&(U|K)&&(t&=~(U|K)),!t||t==V)var ie=x0(e,t,a);else t==U||t==K?ie=T0(e,t,y):(t==j||t==(V|j))&&!f.length?ie=E0(e,t,a,u):ie=ds.apply(r,z);var fe=$?sf:Ff;return Bf(fe(ie,z),e,t)}function Ef(e,t,a,u){return e===r||fn(e,br[a])&&!ve.call(u,a)?t:e}function Af(e,t,a,u,f,m){return Ne(e)&&Ne(t)&&(m.set(t,e),cs(e,t,r,Af,m),m.delete(t)),e}function I0(e){return fo(e)?r:e}function If(e,t,a,u,f,m){var g=a&S,y=e.length,v=t.length;if(y!=v&&!(g&&v>y))return!1;var O=m.get(e),P=m.get(t);if(O&&P)return O==t&&P==e;var F=-1,$=!0,z=a&I?new tr:r;for(m.set(e,t),m.set(t,e);++F<y;){var ie=e[F],fe=t[F];if(u)var re=g?u(fe,ie,F,t,e,m):u(ie,fe,F,e,t,m);if(re!==r){if(re)continue;$=!1;break}if(z){if(!nl(t,function(me,ge){if(!Jr(z,ge)&&(ie===me||f(ie,me,a,u,m)))return z.push(ge)})){$=!1;break}}else if(!(ie===fe||f(ie,fe,a,u,m))){$=!1;break}}return m.delete(e),m.delete(t),$}function N0(e,t,a,u,f,m,g){switch(a){case hr:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Xr:return!(e.byteLength!=t.byteLength||!m(new Zo(e),new Zo(t)));case Kr:case Yr:case qr:return fn(+e,+t);case Bo:return e.name==t.name&&e.message==t.message;case jr:case Hr:return e==t+"";case an:var y=ll;case ln:var v=u&S;if(y||(y=qo),e.size!=t.size&&!v)return!1;var O=g.get(e);if(O)return O==t;u|=I,g.set(e,t);var P=If(y(e),y(t),u,f,m,g);return g.delete(e),P;case Go:if(no)return no.call(e)==no.call(t)}return!1}function O0(e,t,a,u,f,m){var g=a&S,y=Ll(e),v=y.length,O=Ll(t),P=O.length;if(v!=P&&!g)return!1;for(var F=v;F--;){var $=y[F];if(!(g?$ in t:ve.call(t,$)))return!1}var z=m.get(e),ie=m.get(t);if(z&&ie)return z==t&&ie==e;var fe=!0;m.set(e,t),m.set(t,e);for(var re=g;++F<v;){$=y[F];var me=e[$],ge=t[$];if(u)var Yt=g?u(ge,me,$,t,e,m):u(me,ge,$,e,t,m);if(!(Yt===r?me===ge||f(me,ge,a,u,m):Yt)){fe=!1;break}re||(re=$=="constructor")}if(fe&&!re){var It=e.constructor,qt=t.constructor;It!=qt&&"constructor"in e&&"constructor"in t&&!(typeof It=="function"&&It instanceof It&&typeof qt=="function"&&qt instanceof qt)&&(fe=!1)}return m.delete(e),m.delete(t),fe}function $n(e){return Wl(kf(e,r,Kf),e+"")}function Ll(e){return Hc(e,qe,Fl)}function Rl(e){return Hc(e,Dt,Nf)}var kl=rs?function(e){return rs.get(e)}:eu;function ys(e){for(var t=e.name+"",a=vr[t],u=ve.call(vr,t)?a.length:0;u--;){var f=a[u],m=f.func;if(m==null||m==e)return f.name}return t}function Tr(e){var t=ve.call(p,"placeholder")?p:e;return t.placeholder}function ne(){var e=p.iteratee||Zl;return e=e===Zl?Jc:e,arguments.length?e(arguments[0],arguments[1]):e}function ws(e,t){var a=e.__data__;return V0(t)?a[typeof t=="string"?"string":"hash"]:a.map}function Dl(e){for(var t=qe(e),a=t.length;a--;){var u=t[a],f=e[u];t[a]=[u,f,Lf(f)]}return t}function rr(e,t){var a=$h(e,t);return Xc(a)?a:r}function P0(e){var t=ve.call(e,Qi),a=e[Qi];try{e[Qi]=r;var u=!0}catch{}var f=Xo.call(e);return u&&(t?e[Qi]=a:delete e[Qi]),f}var Fl=cl?function(e){return e==null?[]:(e=xe(e),ni(cl(e),function(t){return kc.call(e,t)}))}:tu,Nf=cl?function(e){for(var t=[];e;)ii(t,Fl(e)),e=Qo(e);return t}:tu,Mt=Et;(fl&&Mt(new fl(new ArrayBuffer(1)))!=hr||Qr&&Mt(new Qr)!=an||pl&&Mt(pl.resolve())!=Yu||Cr&&Mt(new Cr)!=ln||eo&&Mt(new eo)!=zr)&&(Mt=function(e){var t=Et(e),a=t==Fn?e.constructor:r,u=a?or(a):"";if(u)switch(u){case dg:return hr;case hg:return an;case gg:return Yu;case _g:return ln;case yg:return zr}return t});function L0(e,t,a){for(var u=-1,f=a.length;++u<f;){var m=a[u],g=m.size;switch(m.type){case"drop":e+=g;break;case"dropRight":t-=g;break;case"take":t=St(t,e+g);break;case"takeRight":e=We(e,t-g);break}}return{start:e,end:t}}function R0(e){var t=e.match(Gd);return t?t[1].split(Wd):[]}function Of(e,t,a){t=ui(t,e);for(var u=-1,f=t.length,m=!1;++u<f;){var g=An(t[u]);if(!(m=e!=null&&a(e,g)))break;e=e[g]}return m||++u!=f?m:(f=e==null?0:e.length,!!f&&Ts(f)&&Un(g,f)&&(le(e)||sr(e)))}function k0(e){var t=e.length,a=new e.constructor(t);return t&&typeof e[0]=="string"&&ve.call(e,"index")&&(a.index=e.index,a.input=e.input),a}function Pf(e){return typeof e.constructor=="function"&&!uo(e)?Sr(Qo(e)):{}}function D0(e,t,a){var u=e.constructor;switch(t){case Xr:return Nl(e);case Kr:case Yr:return new u(+e);case hr:return w0(e,a);case Da:case Fa:case Ba:case Va:case Ga:case Wa:case $a:case Ua:case Ka:return df(e,a);case an:return new u;case qr:case Hr:return new u(e);case jr:return b0(e);case ln:return new u;case Go:return C0(e)}}function F0(e,t){var a=t.length;if(!a)return e;var u=a-1;return t[u]=(a>1?"& ":"")+t[u],t=t.join(a>2?", ":" "),e.replace(Vd,`{
/* [wrapped with `+t+`] */
`)}function B0(e){return le(e)||sr(e)||!!(Dc&&e&&e[Dc])}function Un(e,t){var a=typeof e;return t=t??ti,!!t&&(a=="number"||a!="symbol"&&Xd.test(e))&&e>-1&&e%1==0&&e<t}function At(e,t,a){if(!Ne(a))return!1;var u=typeof t;return(u=="number"?kt(a)&&Un(t,a.length):u=="string"&&t in a)?fn(a[t],e):!1}function Bl(e,t){if(le(e))return!1;var a=typeof e;return a=="number"||a=="symbol"||a=="boolean"||e==null||Kt(e)?!0:kd.test(e)||!Rd.test(e)||t!=null&&e in xe(t)}function V0(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Vl(e){var t=ys(e),a=p[t];if(typeof a!="function"||!(t in de.prototype))return!1;if(e===a)return!0;var u=kl(a);return!!u&&e===u[0]}function G0(e){return!!Pc&&Pc in e}var W0=Ho?Kn:nu;function uo(e){var t=e&&e.constructor,a=typeof t=="function"&&t.prototype||br;return e===a}function Lf(e){return e===e&&!Ne(e)}function Rf(e,t){return function(a){return a==null?!1:a[e]===t&&(t!==r||e in xe(a))}}function $0(e){var t=Ms(e,function(u){return a.size===d&&a.clear(),u}),a=t.cache;return t}function U0(e,t){var a=e[1],u=t[1],f=a|u,m=f<(V|x|ee),g=u==ee&&a==U||u==ee&&a==se&&e[7].length<=t[8]||u==(ee|se)&&t[7].length<=t[8]&&a==U;if(!(m||g))return e;u&V&&(e[2]=t[2],f|=a&V?0:L);var y=t[3];if(y){var v=e[3];e[3]=v?gf(v,y,t[4]):y,e[4]=v?ri(e[3],h):t[4]}return y=t[5],y&&(v=e[5],e[5]=v?_f(v,y,t[6]):y,e[6]=v?ri(e[5],h):t[6]),y=t[7],y&&(e[7]=y),u&ee&&(e[8]=e[8]==null?t[8]:St(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=f,e}function K0(e){var t=[];if(e!=null)for(var a in xe(e))t.push(a);return t}function Y0(e){return Xo.call(e)}function kf(e,t,a){return t=We(t===r?e.length-1:t,0),function(){for(var u=arguments,f=-1,m=We(u.length-t,0),g=E(m);++f<m;)g[f]=u[t+f];f=-1;for(var y=E(t+1);++f<t;)y[f]=u[f];return y[t]=a(g),Wt(e,this,y)}}function Df(e,t){return t.length<2?e:ir(e,Qt(t,0,-1))}function q0(e,t){for(var a=e.length,u=St(t.length,a),f=Rt(e);u--;){var m=t[u];e[u]=Un(m,a)?f[m]:r}return e}function Gl(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var Ff=Vf(sf),co=ag||function(e,t){return Ye.setTimeout(e,t)},Wl=Vf(h0);function Bf(e,t,a){var u=t+"";return Wl(e,F0(u,j0(R0(u),a)))}function Vf(e){var t=0,a=0;return function(){var u=fg(),f=ei-(u-a);if(a=u,f>0){if(++t>=Mn)return arguments[0]}else t=0;return e.apply(r,arguments)}}function bs(e,t){var a=-1,u=e.length,f=u-1;for(t=t===r?u:t;++a<t;){var m=Sl(a,f),g=e[m];e[m]=e[a],e[a]=g}return e.length=t,e}var Gf=$0(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Dd,function(a,u,f,m){t.push(f?m.replace(Kd,"$1"):u||a)}),t});function An(e){if(typeof e=="string"||Kt(e))return e;var t=e+"";return t=="0"&&1/e==-Ji?"-0":t}function or(e){if(e!=null){try{return zo.call(e)}catch{}try{return e+""}catch{}}return""}function j0(e,t){return zt(bd,function(a){var u="_."+a[0];t&a[1]&&!Ko(e,u)&&e.push(u)}),e.sort()}function Wf(e){if(e instanceof de)return e.clone();var t=new Jt(e.__wrapped__,e.__chain__);return t.__actions__=Rt(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function H0(e,t,a){(a?At(e,t,a):t===r)?t=1:t=We(ue(t),0);var u=e==null?0:e.length;if(!u||t<1)return[];for(var f=0,m=0,g=E(ns(u/t));f<u;)g[m++]=Qt(e,f,f+=t);return g}function z0(e){for(var t=-1,a=e==null?0:e.length,u=0,f=[];++t<a;){var m=e[t];m&&(f[u++]=m)}return f}function X0(){var e=arguments.length;if(!e)return[];for(var t=E(e-1),a=arguments[0],u=e;u--;)t[u-1]=arguments[u];return ii(le(a)?Rt(a):[a],vt(t,1))}var J0=pe(function(e,t){return ke(e)?ro(e,vt(t,1,ke,!0)):[]}),Z0=pe(function(e,t){var a=en(t);return ke(a)&&(a=r),ke(e)?ro(e,vt(t,1,ke,!0),ne(a,2)):[]}),Q0=pe(function(e,t){var a=en(t);return ke(a)&&(a=r),ke(e)?ro(e,vt(t,1,ke,!0),r,a):[]});function e_(e,t,a){var u=e==null?0:e.length;return u?(t=a||t===r?1:ue(t),Qt(e,t<0?0:t,u)):[]}function t_(e,t,a){var u=e==null?0:e.length;return u?(t=a||t===r?1:ue(t),t=u-t,Qt(e,0,t<0?0:t)):[]}function n_(e,t){return e&&e.length?ps(e,ne(t,3),!0,!0):[]}function i_(e,t){return e&&e.length?ps(e,ne(t,3),!0):[]}function r_(e,t,a,u){var f=e==null?0:e.length;return f?(a&&typeof a!="number"&&At(e,t,a)&&(a=0,u=f),Xg(e,t,a,u)):[]}function $f(e,t,a){var u=e==null?0:e.length;if(!u)return-1;var f=a==null?0:ue(a);return f<0&&(f=We(u+f,0)),Yo(e,ne(t,3),f)}function Uf(e,t,a){var u=e==null?0:e.length;if(!u)return-1;var f=u-1;return a!==r&&(f=ue(a),f=a<0?We(u+f,0):St(f,u-1)),Yo(e,ne(t,3),f,!0)}function Kf(e){var t=e==null?0:e.length;return t?vt(e,1):[]}function o_(e){var t=e==null?0:e.length;return t?vt(e,Ji):[]}function s_(e,t){var a=e==null?0:e.length;return a?(t=t===r?1:ue(t),vt(e,t)):[]}function a_(e){for(var t=-1,a=e==null?0:e.length,u={};++t<a;){var f=e[t];u[f[0]]=f[1]}return u}function Yf(e){return e&&e.length?e[0]:r}function l_(e,t,a){var u=e==null?0:e.length;if(!u)return-1;var f=a==null?0:ue(a);return f<0&&(f=We(u+f,0)),_r(e,t,f)}function u_(e){var t=e==null?0:e.length;return t?Qt(e,0,-1):[]}var c_=pe(function(e){var t=Ie(e,Al);return t.length&&t[0]===e[0]?yl(t):[]}),f_=pe(function(e){var t=en(e),a=Ie(e,Al);return t===en(a)?t=r:a.pop(),a.length&&a[0]===e[0]?yl(a,ne(t,2)):[]}),p_=pe(function(e){var t=en(e),a=Ie(e,Al);return t=typeof t=="function"?t:r,t&&a.pop(),a.length&&a[0]===e[0]?yl(a,r,t):[]});function m_(e,t){return e==null?"":ug.call(e,t)}function en(e){var t=e==null?0:e.length;return t?e[t-1]:r}function d_(e,t,a){var u=e==null?0:e.length;if(!u)return-1;var f=u;return a!==r&&(f=ue(a),f=f<0?We(u+f,0):St(f,u-1)),t===t?jh(e,t,f):Yo(e,Mc,f,!0)}function h_(e,t){return e&&e.length?tf(e,ue(t)):r}var g_=pe(qf);function qf(e,t){return e&&e.length&&t&&t.length?vl(e,t):e}function __(e,t,a){return e&&e.length&&t&&t.length?vl(e,t,ne(a,2)):e}function y_(e,t,a){return e&&e.length&&t&&t.length?vl(e,t,r,a):e}var w_=$n(function(e,t){var a=e==null?0:e.length,u=dl(e,t);return of(e,Ie(t,function(f){return Un(f,a)?+f:f}).sort(hf)),u});function b_(e,t){var a=[];if(!(e&&e.length))return a;var u=-1,f=[],m=e.length;for(t=ne(t,3);++u<m;){var g=e[u];t(g,u,e)&&(a.push(g),f.push(u))}return of(e,f),a}function $l(e){return e==null?e:mg.call(e)}function C_(e,t,a){var u=e==null?0:e.length;return u?(a&&typeof a!="number"&&At(e,t,a)?(t=0,a=u):(t=t==null?0:ue(t),a=a===r?u:ue(a)),Qt(e,t,a)):[]}function v_(e,t){return fs(e,t)}function S_(e,t,a){return xl(e,t,ne(a,2))}function M_(e,t){var a=e==null?0:e.length;if(a){var u=fs(e,t);if(u<a&&fn(e[u],t))return u}return-1}function x_(e,t){return fs(e,t,!0)}function T_(e,t,a){return xl(e,t,ne(a,2),!0)}function E_(e,t){var a=e==null?0:e.length;if(a){var u=fs(e,t,!0)-1;if(fn(e[u],t))return u}return-1}function A_(e){return e&&e.length?af(e):[]}function I_(e,t){return e&&e.length?af(e,ne(t,2)):[]}function N_(e){var t=e==null?0:e.length;return t?Qt(e,1,t):[]}function O_(e,t,a){return e&&e.length?(t=a||t===r?1:ue(t),Qt(e,0,t<0?0:t)):[]}function P_(e,t,a){var u=e==null?0:e.length;return u?(t=a||t===r?1:ue(t),t=u-t,Qt(e,t<0?0:t,u)):[]}function L_(e,t){return e&&e.length?ps(e,ne(t,3),!1,!0):[]}function R_(e,t){return e&&e.length?ps(e,ne(t,3)):[]}var k_=pe(function(e){return li(vt(e,1,ke,!0))}),D_=pe(function(e){var t=en(e);return ke(t)&&(t=r),li(vt(e,1,ke,!0),ne(t,2))}),F_=pe(function(e){var t=en(e);return t=typeof t=="function"?t:r,li(vt(e,1,ke,!0),r,t)});function B_(e){return e&&e.length?li(e):[]}function V_(e,t){return e&&e.length?li(e,ne(t,2)):[]}function G_(e,t){return t=typeof t=="function"?t:r,e&&e.length?li(e,r,t):[]}function Ul(e){if(!(e&&e.length))return[];var t=0;return e=ni(e,function(a){if(ke(a))return t=We(a.length,t),!0}),sl(t,function(a){return Ie(e,il(a))})}function jf(e,t){if(!(e&&e.length))return[];var a=Ul(e);return t==null?a:Ie(a,function(u){return Wt(t,r,u)})}var W_=pe(function(e,t){return ke(e)?ro(e,t):[]}),$_=pe(function(e){return El(ni(e,ke))}),U_=pe(function(e){var t=en(e);return ke(t)&&(t=r),El(ni(e,ke),ne(t,2))}),K_=pe(function(e){var t=en(e);return t=typeof t=="function"?t:r,El(ni(e,ke),r,t)}),Y_=pe(Ul);function q_(e,t){return ff(e||[],t||[],io)}function j_(e,t){return ff(e||[],t||[],ao)}var H_=pe(function(e){var t=e.length,a=t>1?e[t-1]:r;return a=typeof a=="function"?(e.pop(),a):r,jf(e,a)});function Hf(e){var t=p(e);return t.__chain__=!0,t}function z_(e,t){return t(e),e}function Cs(e,t){return t(e)}var X_=$n(function(e){var t=e.length,a=t?e[0]:0,u=this.__wrapped__,f=function(m){return dl(m,e)};return t>1||this.__actions__.length||!(u instanceof de)||!Un(a)?this.thru(f):(u=u.slice(a,+a+(t?1:0)),u.__actions__.push({func:Cs,args:[f],thisArg:r}),new Jt(u,this.__chain__).thru(function(m){return t&&!m.length&&m.push(r),m}))});function J_(){return Hf(this)}function Z_(){return new Jt(this.value(),this.__chain__)}function Q_(){this.__values__===r&&(this.__values__=lp(this.value()));var e=this.__index__>=this.__values__.length,t=e?r:this.__values__[this.__index__++];return{done:e,value:t}}function ey(){return this}function ty(e){for(var t,a=this;a instanceof ss;){var u=Wf(a);u.__index__=0,u.__values__=r,t?f.__wrapped__=u:t=u;var f=u;a=a.__wrapped__}return f.__wrapped__=e,t}function ny(){var e=this.__wrapped__;if(e instanceof de){var t=e;return this.__actions__.length&&(t=new de(this)),t=t.reverse(),t.__actions__.push({func:Cs,args:[$l],thisArg:r}),new Jt(t,this.__chain__)}return this.thru($l)}function iy(){return cf(this.__wrapped__,this.__actions__)}var ry=ms(function(e,t,a){ve.call(e,a)?++e[a]:Gn(e,a,1)});function oy(e,t,a){var u=le(e)?vc:zg;return a&&At(e,t,a)&&(t=r),u(e,ne(t,3))}function sy(e,t){var a=le(e)?ni:qc;return a(e,ne(t,3))}var ay=Cf($f),ly=Cf(Uf);function uy(e,t){return vt(vs(e,t),1)}function cy(e,t){return vt(vs(e,t),Ji)}function fy(e,t,a){return a=a===r?1:ue(a),vt(vs(e,t),a)}function zf(e,t){var a=le(e)?zt:ai;return a(e,ne(t,3))}function Xf(e,t){var a=le(e)?Nh:Yc;return a(e,ne(t,3))}var py=ms(function(e,t,a){ve.call(e,a)?e[a].push(t):Gn(e,a,[t])});function my(e,t,a,u){e=kt(e)?e:Ar(e),a=a&&!u?ue(a):0;var f=e.length;return a<0&&(a=We(f+a,0)),Es(e)?a<=f&&e.indexOf(t,a)>-1:!!f&&_r(e,t,a)>-1}var dy=pe(function(e,t,a){var u=-1,f=typeof t=="function",m=kt(e)?E(e.length):[];return ai(e,function(g){m[++u]=f?Wt(t,g,a):oo(g,t,a)}),m}),hy=ms(function(e,t,a){Gn(e,a,t)});function vs(e,t){var a=le(e)?Ie:Zc;return a(e,ne(t,3))}function gy(e,t,a,u){return e==null?[]:(le(t)||(t=t==null?[]:[t]),a=u?r:a,le(a)||(a=a==null?[]:[a]),nf(e,t,a))}var _y=ms(function(e,t,a){e[a?0:1].push(t)},function(){return[[],[]]});function yy(e,t,a){var u=le(e)?tl:Tc,f=arguments.length<3;return u(e,ne(t,4),a,f,ai)}function wy(e,t,a){var u=le(e)?Oh:Tc,f=arguments.length<3;return u(e,ne(t,4),a,f,Yc)}function by(e,t){var a=le(e)?ni:qc;return a(e,xs(ne(t,3)))}function Cy(e){var t=le(e)?Wc:m0;return t(e)}function vy(e,t,a){(a?At(e,t,a):t===r)?t=1:t=ue(t);var u=le(e)?Kg:d0;return u(e,t)}function Sy(e){var t=le(e)?Yg:g0;return t(e)}function My(e){if(e==null)return 0;if(kt(e))return Es(e)?wr(e):e.length;var t=Mt(e);return t==an||t==ln?e.size:bl(e).length}function xy(e,t,a){var u=le(e)?nl:_0;return a&&At(e,t,a)&&(t=r),u(e,ne(t,3))}var Ty=pe(function(e,t){if(e==null)return[];var a=t.length;return a>1&&At(e,t[0],t[1])?t=[]:a>2&&At(t[0],t[1],t[2])&&(t=[t[0]]),nf(e,vt(t,1),[])}),Ss=sg||function(){return Ye.Date.now()};function Ey(e,t){if(typeof t!="function")throw new Xt(s);return e=ue(e),function(){if(--e<1)return t.apply(this,arguments)}}function Jf(e,t,a){return t=a?r:t,t=e&&t==null?e.length:t,Wn(e,ee,r,r,r,r,t)}function Zf(e,t){var a;if(typeof t!="function")throw new Xt(s);return e=ue(e),function(){return--e>0&&(a=t.apply(this,arguments)),e<=1&&(t=r),a}}var Kl=pe(function(e,t,a){var u=V;if(a.length){var f=ri(a,Tr(Kl));u|=j}return Wn(e,u,t,a,f)}),Qf=pe(function(e,t,a){var u=V|x;if(a.length){var f=ri(a,Tr(Qf));u|=j}return Wn(t,u,e,a,f)});function ep(e,t,a){t=a?r:t;var u=Wn(e,U,r,r,r,r,r,t);return u.placeholder=ep.placeholder,u}function tp(e,t,a){t=a?r:t;var u=Wn(e,K,r,r,r,r,r,t);return u.placeholder=tp.placeholder,u}function np(e,t,a){var u,f,m,g,y,v,O=0,P=!1,F=!1,$=!0;if(typeof e!="function")throw new Xt(s);t=tn(t)||0,Ne(a)&&(P=!!a.leading,F="maxWait"in a,m=F?We(tn(a.maxWait)||0,t):m,$="trailing"in a?!!a.trailing:$);function z(De){var pn=u,qn=f;return u=f=r,O=De,g=e.apply(qn,pn),g}function ie(De){return O=De,y=co(me,t),P?z(De):g}function fe(De){var pn=De-v,qn=De-O,Cp=t-pn;return F?St(Cp,m-qn):Cp}function re(De){var pn=De-v,qn=De-O;return v===r||pn>=t||pn<0||F&&qn>=m}function me(){var De=Ss();if(re(De))return ge(De);y=co(me,fe(De))}function ge(De){return y=r,$&&u?z(De):(u=f=r,g)}function Yt(){y!==r&&pf(y),O=0,u=v=f=y=r}function It(){return y===r?g:ge(Ss())}function qt(){var De=Ss(),pn=re(De);if(u=arguments,f=this,v=De,pn){if(y===r)return ie(v);if(F)return pf(y),y=co(me,t),z(v)}return y===r&&(y=co(me,t)),g}return qt.cancel=Yt,qt.flush=It,qt}var Ay=pe(function(e,t){return Kc(e,1,t)}),Iy=pe(function(e,t,a){return Kc(e,tn(t)||0,a)});function Ny(e){return Wn(e,be)}function Ms(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new Xt(s);var a=function(){var u=arguments,f=t?t.apply(this,u):u[0],m=a.cache;if(m.has(f))return m.get(f);var g=e.apply(this,u);return a.cache=m.set(f,g)||m,g};return a.cache=new(Ms.Cache||Vn),a}Ms.Cache=Vn;function xs(e){if(typeof e!="function")throw new Xt(s);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Oy(e){return Zf(2,e)}var Py=y0(function(e,t){t=t.length==1&&le(t[0])?Ie(t[0],$t(ne())):Ie(vt(t,1),$t(ne()));var a=t.length;return pe(function(u){for(var f=-1,m=St(u.length,a);++f<m;)u[f]=t[f].call(this,u[f]);return Wt(e,this,u)})}),Yl=pe(function(e,t){var a=ri(t,Tr(Yl));return Wn(e,j,r,t,a)}),ip=pe(function(e,t){var a=ri(t,Tr(ip));return Wn(e,te,r,t,a)}),Ly=$n(function(e,t){return Wn(e,se,r,r,r,t)});function Ry(e,t){if(typeof e!="function")throw new Xt(s);return t=t===r?t:ue(t),pe(e,t)}function ky(e,t){if(typeof e!="function")throw new Xt(s);return t=t==null?0:We(ue(t),0),pe(function(a){var u=a[t],f=ci(a,0,t);return u&&ii(f,u),Wt(e,this,f)})}function Dy(e,t,a){var u=!0,f=!0;if(typeof e!="function")throw new Xt(s);return Ne(a)&&(u="leading"in a?!!a.leading:u,f="trailing"in a?!!a.trailing:f),np(e,t,{leading:u,maxWait:t,trailing:f})}function Fy(e){return Jf(e,1)}function By(e,t){return Yl(Il(t),e)}function Vy(){if(!arguments.length)return[];var e=arguments[0];return le(e)?e:[e]}function Gy(e){return Zt(e,M)}function Wy(e,t){return t=typeof t=="function"?t:r,Zt(e,M,t)}function $y(e){return Zt(e,_|M)}function Uy(e,t){return t=typeof t=="function"?t:r,Zt(e,_|M,t)}function Ky(e,t){return t==null||Uc(e,t,qe(t))}function fn(e,t){return e===t||e!==e&&t!==t}var Yy=_s(_l),qy=_s(function(e,t){return e>=t}),sr=zc(function(){return arguments}())?zc:function(e){return Pe(e)&&ve.call(e,"callee")&&!kc.call(e,"callee")},le=E.isArray,jy=gc?$t(gc):t0;function kt(e){return e!=null&&Ts(e.length)&&!Kn(e)}function ke(e){return Pe(e)&&kt(e)}function Hy(e){return e===!0||e===!1||Pe(e)&&Et(e)==Kr}var fi=lg||nu,zy=_c?$t(_c):n0;function Xy(e){return Pe(e)&&e.nodeType===1&&!fo(e)}function Jy(e){if(e==null)return!0;if(kt(e)&&(le(e)||typeof e=="string"||typeof e.splice=="function"||fi(e)||Er(e)||sr(e)))return!e.length;var t=Mt(e);if(t==an||t==ln)return!e.size;if(uo(e))return!bl(e).length;for(var a in e)if(ve.call(e,a))return!1;return!0}function Zy(e,t){return so(e,t)}function Qy(e,t,a){a=typeof a=="function"?a:r;var u=a?a(e,t):r;return u===r?so(e,t,r,a):!!u}function ql(e){if(!Pe(e))return!1;var t=Et(e);return t==Bo||t==vd||typeof e.message=="string"&&typeof e.name=="string"&&!fo(e)}function e1(e){return typeof e=="number"&&Fc(e)}function Kn(e){if(!Ne(e))return!1;var t=Et(e);return t==Vo||t==Ku||t==Cd||t==Md}function rp(e){return typeof e=="number"&&e==ue(e)}function Ts(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=ti}function Ne(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function Pe(e){return e!=null&&typeof e=="object"}var op=yc?$t(yc):r0;function t1(e,t){return e===t||wl(e,t,Dl(t))}function n1(e,t,a){return a=typeof a=="function"?a:r,wl(e,t,Dl(t),a)}function i1(e){return sp(e)&&e!=+e}function r1(e){if(W0(e))throw new ae(o);return Xc(e)}function o1(e){return e===null}function s1(e){return e==null}function sp(e){return typeof e=="number"||Pe(e)&&Et(e)==qr}function fo(e){if(!Pe(e)||Et(e)!=Fn)return!1;var t=Qo(e);if(t===null)return!0;var a=ve.call(t,"constructor")&&t.constructor;return typeof a=="function"&&a instanceof a&&zo.call(a)==ng}var jl=wc?$t(wc):o0;function a1(e){return rp(e)&&e>=-ti&&e<=ti}var ap=bc?$t(bc):s0;function Es(e){return typeof e=="string"||!le(e)&&Pe(e)&&Et(e)==Hr}function Kt(e){return typeof e=="symbol"||Pe(e)&&Et(e)==Go}var Er=Cc?$t(Cc):a0;function l1(e){return e===r}function u1(e){return Pe(e)&&Mt(e)==zr}function c1(e){return Pe(e)&&Et(e)==Td}var f1=_s(Cl),p1=_s(function(e,t){return e<=t});function lp(e){if(!e)return[];if(kt(e))return Es(e)?un(e):Rt(e);if(Zr&&e[Zr])return Kh(e[Zr]());var t=Mt(e),a=t==an?ll:t==ln?qo:Ar;return a(e)}function Yn(e){if(!e)return e===0?e:0;if(e=tn(e),e===Ji||e===-Ji){var t=e<0?-1:1;return t*_d}return e===e?e:0}function ue(e){var t=Yn(e),a=t%1;return t===t?a?t-a:t:0}function up(e){return e?nr(ue(e),0,xn):0}function tn(e){if(typeof e=="number")return e;if(Kt(e))return Do;if(Ne(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Ne(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Ec(e);var a=jd.test(e);return a||zd.test(e)?Eh(e.slice(2),a?2:8):qd.test(e)?Do:+e}function cp(e){return En(e,Dt(e))}function m1(e){return e?nr(ue(e),-ti,ti):e===0?e:0}function Ce(e){return e==null?"":Ut(e)}var d1=Mr(function(e,t){if(uo(t)||kt(t)){En(t,qe(t),e);return}for(var a in t)ve.call(t,a)&&io(e,a,t[a])}),fp=Mr(function(e,t){En(t,Dt(t),e)}),As=Mr(function(e,t,a,u){En(t,Dt(t),e,u)}),h1=Mr(function(e,t,a,u){En(t,qe(t),e,u)}),g1=$n(dl);function _1(e,t){var a=Sr(e);return t==null?a:$c(a,t)}var y1=pe(function(e,t){e=xe(e);var a=-1,u=t.length,f=u>2?t[2]:r;for(f&&At(t[0],t[1],f)&&(u=1);++a<u;)for(var m=t[a],g=Dt(m),y=-1,v=g.length;++y<v;){var O=g[y],P=e[O];(P===r||fn(P,br[O])&&!ve.call(e,O))&&(e[O]=m[O])}return e}),w1=pe(function(e){return e.push(r,Af),Wt(pp,r,e)});function b1(e,t){return Sc(e,ne(t,3),Tn)}function C1(e,t){return Sc(e,ne(t,3),gl)}function v1(e,t){return e==null?e:hl(e,ne(t,3),Dt)}function S1(e,t){return e==null?e:jc(e,ne(t,3),Dt)}function M1(e,t){return e&&Tn(e,ne(t,3))}function x1(e,t){return e&&gl(e,ne(t,3))}function T1(e){return e==null?[]:us(e,qe(e))}function E1(e){return e==null?[]:us(e,Dt(e))}function Hl(e,t,a){var u=e==null?r:ir(e,t);return u===r?a:u}function A1(e,t){return e!=null&&Of(e,t,Jg)}function zl(e,t){return e!=null&&Of(e,t,Zg)}var I1=Sf(function(e,t,a){t!=null&&typeof t.toString!="function"&&(t=Xo.call(t)),e[t]=a},Jl(Ft)),N1=Sf(function(e,t,a){t!=null&&typeof t.toString!="function"&&(t=Xo.call(t)),ve.call(e,t)?e[t].push(a):e[t]=[a]},ne),O1=pe(oo);function qe(e){return kt(e)?Gc(e):bl(e)}function Dt(e){return kt(e)?Gc(e,!0):l0(e)}function P1(e,t){var a={};return t=ne(t,3),Tn(e,function(u,f,m){Gn(a,t(u,f,m),u)}),a}function L1(e,t){var a={};return t=ne(t,3),Tn(e,function(u,f,m){Gn(a,f,t(u,f,m))}),a}var R1=Mr(function(e,t,a){cs(e,t,a)}),pp=Mr(function(e,t,a,u){cs(e,t,a,u)}),k1=$n(function(e,t){var a={};if(e==null)return a;var u=!1;t=Ie(t,function(m){return m=ui(m,e),u||(u=m.length>1),m}),En(e,Rl(e),a),u&&(a=Zt(a,_|T|M,I0));for(var f=t.length;f--;)Tl(a,t[f]);return a});function D1(e,t){return mp(e,xs(ne(t)))}var F1=$n(function(e,t){return e==null?{}:c0(e,t)});function mp(e,t){if(e==null)return{};var a=Ie(Rl(e),function(u){return[u]});return t=ne(t),rf(e,a,function(u,f){return t(u,f[0])})}function B1(e,t,a){t=ui(t,e);var u=-1,f=t.length;for(f||(f=1,e=r);++u<f;){var m=e==null?r:e[An(t[u])];m===r&&(u=f,m=a),e=Kn(m)?m.call(e):m}return e}function V1(e,t,a){return e==null?e:ao(e,t,a)}function G1(e,t,a,u){return u=typeof u=="function"?u:r,e==null?e:ao(e,t,a,u)}var dp=Tf(qe),hp=Tf(Dt);function W1(e,t,a){var u=le(e),f=u||fi(e)||Er(e);if(t=ne(t,4),a==null){var m=e&&e.constructor;f?a=u?new m:[]:Ne(e)?a=Kn(m)?Sr(Qo(e)):{}:a={}}return(f?zt:Tn)(e,function(g,y,v){return t(a,g,y,v)}),a}function $1(e,t){return e==null?!0:Tl(e,t)}function U1(e,t,a){return e==null?e:uf(e,t,Il(a))}function K1(e,t,a,u){return u=typeof u=="function"?u:r,e==null?e:uf(e,t,Il(a),u)}function Ar(e){return e==null?[]:al(e,qe(e))}function Y1(e){return e==null?[]:al(e,Dt(e))}function q1(e,t,a){return a===r&&(a=t,t=r),a!==r&&(a=tn(a),a=a===a?a:0),t!==r&&(t=tn(t),t=t===t?t:0),nr(tn(e),t,a)}function j1(e,t,a){return t=Yn(t),a===r?(a=t,t=0):a=Yn(a),e=tn(e),Qg(e,t,a)}function H1(e,t,a){if(a&&typeof a!="boolean"&&At(e,t,a)&&(t=a=r),a===r&&(typeof t=="boolean"?(a=t,t=r):typeof e=="boolean"&&(a=e,e=r)),e===r&&t===r?(e=0,t=1):(e=Yn(e),t===r?(t=e,e=0):t=Yn(t)),e>t){var u=e;e=t,t=u}if(a||e%1||t%1){var f=Bc();return St(e+f*(t-e+Th("1e-"+((f+"").length-1))),t)}return Sl(e,t)}var z1=xr(function(e,t,a){return t=t.toLowerCase(),e+(a?gp(t):t)});function gp(e){return Xl(Ce(e).toLowerCase())}function _p(e){return e=Ce(e),e&&e.replace(Jd,Vh).replace(gh,"")}function X1(e,t,a){e=Ce(e),t=Ut(t);var u=e.length;a=a===r?u:nr(ue(a),0,u);var f=a;return a-=t.length,a>=0&&e.slice(a,f)==t}function J1(e){return e=Ce(e),e&&Od.test(e)?e.replace(ju,Gh):e}function Z1(e){return e=Ce(e),e&&Fd.test(e)?e.replace(Ya,"\\$&"):e}var Q1=xr(function(e,t,a){return e+(a?"-":"")+t.toLowerCase()}),ew=xr(function(e,t,a){return e+(a?" ":"")+t.toLowerCase()}),tw=bf("toLowerCase");function nw(e,t,a){e=Ce(e),t=ue(t);var u=t?wr(e):0;if(!t||u>=t)return e;var f=(t-u)/2;return gs(is(f),a)+e+gs(ns(f),a)}function iw(e,t,a){e=Ce(e),t=ue(t);var u=t?wr(e):0;return t&&u<t?e+gs(t-u,a):e}function rw(e,t,a){e=Ce(e),t=ue(t);var u=t?wr(e):0;return t&&u<t?gs(t-u,a)+e:e}function ow(e,t,a){return a||t==null?t=0:t&&(t=+t),pg(Ce(e).replace(qa,""),t||0)}function sw(e,t,a){return(a?At(e,t,a):t===r)?t=1:t=ue(t),Ml(Ce(e),t)}function aw(){var e=arguments,t=Ce(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var lw=xr(function(e,t,a){return e+(a?"_":"")+t.toLowerCase()});function uw(e,t,a){return a&&typeof a!="number"&&At(e,t,a)&&(t=a=r),a=a===r?xn:a>>>0,a?(e=Ce(e),e&&(typeof t=="string"||t!=null&&!jl(t))&&(t=Ut(t),!t&&yr(e))?ci(un(e),0,a):e.split(t,a)):[]}var cw=xr(function(e,t,a){return e+(a?" ":"")+Xl(t)});function fw(e,t,a){return e=Ce(e),a=a==null?0:nr(ue(a),0,e.length),t=Ut(t),e.slice(a,a+t.length)==t}function pw(e,t,a){var u=p.templateSettings;a&&At(e,t,a)&&(t=r),e=Ce(e),t=As({},t,u,Ef);var f=As({},t.imports,u.imports,Ef),m=qe(f),g=al(f,m),y,v,O=0,P=t.interpolate||Wo,F="__p += '",$=ul((t.escape||Wo).source+"|"+P.source+"|"+(P===Hu?Yd:Wo).source+"|"+(t.evaluate||Wo).source+"|$","g"),z="//# sourceURL="+(ve.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ch+"]")+`
`;e.replace($,function(re,me,ge,Yt,It,qt){return ge||(ge=Yt),F+=e.slice(O,qt).replace(Zd,Wh),me&&(y=!0,F+=`' +
__e(`+me+`) +
'`),It&&(v=!0,F+=`';
`+It+`;
__p += '`),ge&&(F+=`' +
((__t = (`+ge+`)) == null ? '' : __t) +
'`),O=qt+re.length,re}),F+=`';
`;var ie=ve.call(t,"variable")&&t.variable;if(!ie)F=`with (obj) {
`+F+`
}
`;else if(Ud.test(ie))throw new ae(l);F=(v?F.replace(Ed,""):F).replace(Ad,"$1").replace(Id,"$1;"),F="function("+(ie||"obj")+`) {
`+(ie?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(y?", __e = _.escape":"")+(v?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+F+`return __p
}`;var fe=wp(function(){return ye(m,z+"return "+F).apply(r,g)});if(fe.source=F,ql(fe))throw fe;return fe}function mw(e){return Ce(e).toLowerCase()}function dw(e){return Ce(e).toUpperCase()}function hw(e,t,a){if(e=Ce(e),e&&(a||t===r))return Ec(e);if(!e||!(t=Ut(t)))return e;var u=un(e),f=un(t),m=Ac(u,f),g=Ic(u,f)+1;return ci(u,m,g).join("")}function gw(e,t,a){if(e=Ce(e),e&&(a||t===r))return e.slice(0,Oc(e)+1);if(!e||!(t=Ut(t)))return e;var u=un(e),f=Ic(u,un(t))+1;return ci(u,0,f).join("")}function _w(e,t,a){if(e=Ce(e),e&&(a||t===r))return e.replace(qa,"");if(!e||!(t=Ut(t)))return e;var u=un(e),f=Ac(u,un(t));return ci(u,f).join("")}function yw(e,t){var a=H,u=Re;if(Ne(t)){var f="separator"in t?t.separator:f;a="length"in t?ue(t.length):a,u="omission"in t?Ut(t.omission):u}e=Ce(e);var m=e.length;if(yr(e)){var g=un(e);m=g.length}if(a>=m)return e;var y=a-wr(u);if(y<1)return u;var v=g?ci(g,0,y).join(""):e.slice(0,y);if(f===r)return v+u;if(g&&(y+=v.length-y),jl(f)){if(e.slice(y).search(f)){var O,P=v;for(f.global||(f=ul(f.source,Ce(zu.exec(f))+"g")),f.lastIndex=0;O=f.exec(P);)var F=O.index;v=v.slice(0,F===r?y:F)}}else if(e.indexOf(Ut(f),y)!=y){var $=v.lastIndexOf(f);$>-1&&(v=v.slice(0,$))}return v+u}function ww(e){return e=Ce(e),e&&Nd.test(e)?e.replace(qu,Hh):e}var bw=xr(function(e,t,a){return e+(a?" ":"")+t.toUpperCase()}),Xl=bf("toUpperCase");function yp(e,t,a){return e=Ce(e),t=a?r:t,t===r?Uh(e)?Jh(e):Rh(e):e.match(t)||[]}var wp=pe(function(e,t){try{return Wt(e,r,t)}catch(a){return ql(a)?a:new ae(a)}}),Cw=$n(function(e,t){return zt(t,function(a){a=An(a),Gn(e,a,Kl(e[a],e))}),e});function vw(e){var t=e==null?0:e.length,a=ne();return e=t?Ie(e,function(u){if(typeof u[1]!="function")throw new Xt(s);return[a(u[0]),u[1]]}):[],pe(function(u){for(var f=-1;++f<t;){var m=e[f];if(Wt(m[0],this,u))return Wt(m[1],this,u)}})}function Sw(e){return Hg(Zt(e,_))}function Jl(e){return function(){return e}}function Mw(e,t){return e==null||e!==e?t:e}var xw=vf(),Tw=vf(!0);function Ft(e){return e}function Zl(e){return Jc(typeof e=="function"?e:Zt(e,_))}function Ew(e){return Qc(Zt(e,_))}function Aw(e,t){return ef(e,Zt(t,_))}var Iw=pe(function(e,t){return function(a){return oo(a,e,t)}}),Nw=pe(function(e,t){return function(a){return oo(e,a,t)}});function Ql(e,t,a){var u=qe(t),f=us(t,u);a==null&&!(Ne(t)&&(f.length||!u.length))&&(a=t,t=e,e=this,f=us(t,qe(t)));var m=!(Ne(a)&&"chain"in a)||!!a.chain,g=Kn(e);return zt(f,function(y){var v=t[y];e[y]=v,g&&(e.prototype[y]=function(){var O=this.__chain__;if(m||O){var P=e(this.__wrapped__),F=P.__actions__=Rt(this.__actions__);return F.push({func:v,args:arguments,thisArg:e}),P.__chain__=O,P}return v.apply(e,ii([this.value()],arguments))})}),e}function Ow(){return Ye._===this&&(Ye._=ig),this}function eu(){}function Pw(e){return e=ue(e),pe(function(t){return tf(t,e)})}var Lw=Ol(Ie),Rw=Ol(vc),kw=Ol(nl);function bp(e){return Bl(e)?il(An(e)):f0(e)}function Dw(e){return function(t){return e==null?r:ir(e,t)}}var Fw=Mf(),Bw=Mf(!0);function tu(){return[]}function nu(){return!1}function Vw(){return{}}function Gw(){return""}function Ww(){return!0}function $w(e,t){if(e=ue(e),e<1||e>ti)return[];var a=xn,u=St(e,xn);t=ne(t),e-=xn;for(var f=sl(u,t);++a<e;)t(a);return f}function Uw(e){return le(e)?Ie(e,An):Kt(e)?[e]:Rt(Gf(Ce(e)))}function Kw(e){var t=++tg;return Ce(e)+t}var Yw=hs(function(e,t){return e+t},0),qw=Pl("ceil"),jw=hs(function(e,t){return e/t},1),Hw=Pl("floor");function zw(e){return e&&e.length?ls(e,Ft,_l):r}function Xw(e,t){return e&&e.length?ls(e,ne(t,2),_l):r}function Jw(e){return xc(e,Ft)}function Zw(e,t){return xc(e,ne(t,2))}function Qw(e){return e&&e.length?ls(e,Ft,Cl):r}function eb(e,t){return e&&e.length?ls(e,ne(t,2),Cl):r}var tb=hs(function(e,t){return e*t},1),nb=Pl("round"),ib=hs(function(e,t){return e-t},0);function rb(e){return e&&e.length?ol(e,Ft):0}function ob(e,t){return e&&e.length?ol(e,ne(t,2)):0}return p.after=Ey,p.ary=Jf,p.assign=d1,p.assignIn=fp,p.assignInWith=As,p.assignWith=h1,p.at=g1,p.before=Zf,p.bind=Kl,p.bindAll=Cw,p.bindKey=Qf,p.castArray=Vy,p.chain=Hf,p.chunk=H0,p.compact=z0,p.concat=X0,p.cond=vw,p.conforms=Sw,p.constant=Jl,p.countBy=ry,p.create=_1,p.curry=ep,p.curryRight=tp,p.debounce=np,p.defaults=y1,p.defaultsDeep=w1,p.defer=Ay,p.delay=Iy,p.difference=J0,p.differenceBy=Z0,p.differenceWith=Q0,p.drop=e_,p.dropRight=t_,p.dropRightWhile=n_,p.dropWhile=i_,p.fill=r_,p.filter=sy,p.flatMap=uy,p.flatMapDeep=cy,p.flatMapDepth=fy,p.flatten=Kf,p.flattenDeep=o_,p.flattenDepth=s_,p.flip=Ny,p.flow=xw,p.flowRight=Tw,p.fromPairs=a_,p.functions=T1,p.functionsIn=E1,p.groupBy=py,p.initial=u_,p.intersection=c_,p.intersectionBy=f_,p.intersectionWith=p_,p.invert=I1,p.invertBy=N1,p.invokeMap=dy,p.iteratee=Zl,p.keyBy=hy,p.keys=qe,p.keysIn=Dt,p.map=vs,p.mapKeys=P1,p.mapValues=L1,p.matches=Ew,p.matchesProperty=Aw,p.memoize=Ms,p.merge=R1,p.mergeWith=pp,p.method=Iw,p.methodOf=Nw,p.mixin=Ql,p.negate=xs,p.nthArg=Pw,p.omit=k1,p.omitBy=D1,p.once=Oy,p.orderBy=gy,p.over=Lw,p.overArgs=Py,p.overEvery=Rw,p.overSome=kw,p.partial=Yl,p.partialRight=ip,p.partition=_y,p.pick=F1,p.pickBy=mp,p.property=bp,p.propertyOf=Dw,p.pull=g_,p.pullAll=qf,p.pullAllBy=__,p.pullAllWith=y_,p.pullAt=w_,p.range=Fw,p.rangeRight=Bw,p.rearg=Ly,p.reject=by,p.remove=b_,p.rest=Ry,p.reverse=$l,p.sampleSize=vy,p.set=V1,p.setWith=G1,p.shuffle=Sy,p.slice=C_,p.sortBy=Ty,p.sortedUniq=A_,p.sortedUniqBy=I_,p.split=uw,p.spread=ky,p.tail=N_,p.take=O_,p.takeRight=P_,p.takeRightWhile=L_,p.takeWhile=R_,p.tap=z_,p.throttle=Dy,p.thru=Cs,p.toArray=lp,p.toPairs=dp,p.toPairsIn=hp,p.toPath=Uw,p.toPlainObject=cp,p.transform=W1,p.unary=Fy,p.union=k_,p.unionBy=D_,p.unionWith=F_,p.uniq=B_,p.uniqBy=V_,p.uniqWith=G_,p.unset=$1,p.unzip=Ul,p.unzipWith=jf,p.update=U1,p.updateWith=K1,p.values=Ar,p.valuesIn=Y1,p.without=W_,p.words=yp,p.wrap=By,p.xor=$_,p.xorBy=U_,p.xorWith=K_,p.zip=Y_,p.zipObject=q_,p.zipObjectDeep=j_,p.zipWith=H_,p.entries=dp,p.entriesIn=hp,p.extend=fp,p.extendWith=As,Ql(p,p),p.add=Yw,p.attempt=wp,p.camelCase=z1,p.capitalize=gp,p.ceil=qw,p.clamp=q1,p.clone=Gy,p.cloneDeep=$y,p.cloneDeepWith=Uy,p.cloneWith=Wy,p.conformsTo=Ky,p.deburr=_p,p.defaultTo=Mw,p.divide=jw,p.endsWith=X1,p.eq=fn,p.escape=J1,p.escapeRegExp=Z1,p.every=oy,p.find=ay,p.findIndex=$f,p.findKey=b1,p.findLast=ly,p.findLastIndex=Uf,p.findLastKey=C1,p.floor=Hw,p.forEach=zf,p.forEachRight=Xf,p.forIn=v1,p.forInRight=S1,p.forOwn=M1,p.forOwnRight=x1,p.get=Hl,p.gt=Yy,p.gte=qy,p.has=A1,p.hasIn=zl,p.head=Yf,p.identity=Ft,p.includes=my,p.indexOf=l_,p.inRange=j1,p.invoke=O1,p.isArguments=sr,p.isArray=le,p.isArrayBuffer=jy,p.isArrayLike=kt,p.isArrayLikeObject=ke,p.isBoolean=Hy,p.isBuffer=fi,p.isDate=zy,p.isElement=Xy,p.isEmpty=Jy,p.isEqual=Zy,p.isEqualWith=Qy,p.isError=ql,p.isFinite=e1,p.isFunction=Kn,p.isInteger=rp,p.isLength=Ts,p.isMap=op,p.isMatch=t1,p.isMatchWith=n1,p.isNaN=i1,p.isNative=r1,p.isNil=s1,p.isNull=o1,p.isNumber=sp,p.isObject=Ne,p.isObjectLike=Pe,p.isPlainObject=fo,p.isRegExp=jl,p.isSafeInteger=a1,p.isSet=ap,p.isString=Es,p.isSymbol=Kt,p.isTypedArray=Er,p.isUndefined=l1,p.isWeakMap=u1,p.isWeakSet=c1,p.join=m_,p.kebabCase=Q1,p.last=en,p.lastIndexOf=d_,p.lowerCase=ew,p.lowerFirst=tw,p.lt=f1,p.lte=p1,p.max=zw,p.maxBy=Xw,p.mean=Jw,p.meanBy=Zw,p.min=Qw,p.minBy=eb,p.stubArray=tu,p.stubFalse=nu,p.stubObject=Vw,p.stubString=Gw,p.stubTrue=Ww,p.multiply=tb,p.nth=h_,p.noConflict=Ow,p.noop=eu,p.now=Ss,p.pad=nw,p.padEnd=iw,p.padStart=rw,p.parseInt=ow,p.random=H1,p.reduce=yy,p.reduceRight=wy,p.repeat=sw,p.replace=aw,p.result=B1,p.round=nb,p.runInContext=C,p.sample=Cy,p.size=My,p.snakeCase=lw,p.some=xy,p.sortedIndex=v_,p.sortedIndexBy=S_,p.sortedIndexOf=M_,p.sortedLastIndex=x_,p.sortedLastIndexBy=T_,p.sortedLastIndexOf=E_,p.startCase=cw,p.startsWith=fw,p.subtract=ib,p.sum=rb,p.sumBy=ob,p.template=pw,p.times=$w,p.toFinite=Yn,p.toInteger=ue,p.toLength=up,p.toLower=mw,p.toNumber=tn,p.toSafeInteger=m1,p.toString=Ce,p.toUpper=dw,p.trim=hw,p.trimEnd=gw,p.trimStart=_w,p.truncate=yw,p.unescape=ww,p.uniqueId=Kw,p.upperCase=bw,p.upperFirst=Xl,p.each=zf,p.eachRight=Xf,p.first=Yf,Ql(p,function(){var e={};return Tn(p,function(t,a){ve.call(p.prototype,a)||(e[a]=t)}),e}(),{chain:!1}),p.VERSION=i,zt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){p[e].placeholder=p}),zt(["drop","take"],function(e,t){de.prototype[e]=function(a){a=a===r?1:We(ue(a),0);var u=this.__filtered__&&!t?new de(this):this.clone();return u.__filtered__?u.__takeCount__=St(a,u.__takeCount__):u.__views__.push({size:St(a,xn),type:e+(u.__dir__<0?"Right":"")}),u},de.prototype[e+"Right"]=function(a){return this.reverse()[e](a).reverse()}}),zt(["filter","map","takeWhile"],function(e,t){var a=t+1,u=a==Oe||a==gd;de.prototype[e]=function(f){var m=this.clone();return m.__iteratees__.push({iteratee:ne(f,3),type:a}),m.__filtered__=m.__filtered__||u,m}}),zt(["head","last"],function(e,t){var a="take"+(t?"Right":"");de.prototype[e]=function(){return this[a](1).value()[0]}}),zt(["initial","tail"],function(e,t){var a="drop"+(t?"":"Right");de.prototype[e]=function(){return this.__filtered__?new de(this):this[a](1)}}),de.prototype.compact=function(){return this.filter(Ft)},de.prototype.find=function(e){return this.filter(e).head()},de.prototype.findLast=function(e){return this.reverse().find(e)},de.prototype.invokeMap=pe(function(e,t){return typeof e=="function"?new de(this):this.map(function(a){return oo(a,e,t)})}),de.prototype.reject=function(e){return this.filter(xs(ne(e)))},de.prototype.slice=function(e,t){e=ue(e);var a=this;return a.__filtered__&&(e>0||t<0)?new de(a):(e<0?a=a.takeRight(-e):e&&(a=a.drop(e)),t!==r&&(t=ue(t),a=t<0?a.dropRight(-t):a.take(t-e)),a)},de.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},de.prototype.toArray=function(){return this.take(xn)},Tn(de.prototype,function(e,t){var a=/^(?:filter|find|map|reject)|While$/.test(t),u=/^(?:head|last)$/.test(t),f=p[u?"take"+(t=="last"?"Right":""):t],m=u||/^find/.test(t);f&&(p.prototype[t]=function(){var g=this.__wrapped__,y=u?[1]:arguments,v=g instanceof de,O=y[0],P=v||le(g),F=function(me){var ge=f.apply(p,ii([me],y));return u&&$?ge[0]:ge};P&&a&&typeof O=="function"&&O.length!=1&&(v=P=!1);var $=this.__chain__,z=!!this.__actions__.length,ie=m&&!$,fe=v&&!z;if(!m&&P){g=fe?g:new de(this);var re=e.apply(g,y);return re.__actions__.push({func:Cs,args:[F],thisArg:r}),new Jt(re,$)}return ie&&fe?e.apply(this,y):(re=this.thru(F),ie?u?re.value()[0]:re.value():re)})}),zt(["pop","push","shift","sort","splice","unshift"],function(e){var t=jo[e],a=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",u=/^(?:pop|shift)$/.test(e);p.prototype[e]=function(){var f=arguments;if(u&&!this.__chain__){var m=this.value();return t.apply(le(m)?m:[],f)}return this[a](function(g){return t.apply(le(g)?g:[],f)})}}),Tn(de.prototype,function(e,t){var a=p[t];if(a){var u=a.name+"";ve.call(vr,u)||(vr[u]=[]),vr[u].push({name:t,func:a})}}),vr[ds(r,x).name]=[{name:"wrapper",func:r}],de.prototype.clone=wg,de.prototype.reverse=bg,de.prototype.value=Cg,p.prototype.at=X_,p.prototype.chain=J_,p.prototype.commit=Z_,p.prototype.next=Q_,p.prototype.plant=ty,p.prototype.reverse=ny,p.prototype.toJSON=p.prototype.valueOf=p.prototype.value=iy,p.prototype.first=p.prototype.head,Zr&&(p.prototype[Zr]=ey),p},oi=Zh();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Ye._=oi,define(function(){return oi})):Zi?((Zi.exports=oi)._=oi,Za._=oi):Ye._=oi}).call(Lr)});var Ks={name:"default-section",thickness:1};var _m={name:"default-material",modulusOfElasticity:21e10,poissonsRatio:.3,weight:78.5};var wm=iu(ym());var On=class r{destroyed$=new Sp;ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}static \u0275fac=function(n){return new(n||r)};static \u0275dir=Pp({type:r})};var Hn=class r{static stringify(i,n=""){return r._stringifyInternal(i,n,!0)}static stringifyRaw(i,n=""){return r._stringifyInternal(i,n,!1)}static parse(i){return r._parseInternal(i,!0)}static parseRaw(i){return r._parseInternal(i,!1)}static _stringifyInternal(i,n,o){let s=[];for(let l of Object.keys(i)){let c=i[l],d=n?`${n}[${l}]`:l;if(Array.isArray(c))c.forEach((h,_)=>{let T=`${d}[${_}]`;if(h!==null&&typeof h=="object")s.push(r._stringifyInternal(h,T,o));else{let M=o?encodeURIComponent(T):T,S=o?encodeURIComponent(String(h)):String(h);s.push(`${M}=${S}`)}});else if(c!==null&&typeof c=="object")s.push(r._stringifyInternal(c,d,o));else{let h=o?encodeURIComponent(d):d,_=o?encodeURIComponent(String(c)):String(c);s.push(`${h}=${_}`)}}return s.join(`&
`)}static _parseInternal(i,n){let o={};if(!i)return o;let l=i.replace(/(\r\n|\n|\r)/gm,"").split("&").map(c=>c.trim()).filter(c=>c);for(let c of l){let[d,h]=c.split("=");if(!d)continue;let _=n?decodeURIComponent(d):d,T=n?decodeURIComponent(h||""):h||"";r.assignNested(o,_,T)}return o}static assignNested(i,n,o){let s=n.split(/\[|\]/).filter(c=>c!==""),l=i;for(let c=0;c<s.length;c++){let d=s[c],h=c===s.length-1,_=isNaN(Number(d))?d:Number(d);h?l[_]=r.parseValue(o):(_ in l||(l[_]=typeof s[c+1]=="number"||!isNaN(Number(s[c+1]))?[]:{}),l=l[_])}}static parseValue(i){return i==="true"?!0:i==="false"?!1:!isNaN(Number(i))&&i.trim()!==""?Number(i):i}};var Ys=class r{value=0;disabled=!1;onChange=i=>{};onTouched=()=>{};writeValue(i){this.value=i??""}registerOnChange(i){this.onChange=i}registerOnTouched(i){this.onTouched=i}setDisabledState(i){this.disabled=i}onInput(i){let n=i.target;if(!n)return;let o=Number.parseFloat(n.value);isNaN(o)||(this.value=o,this.onChange(this.value))}static \u0275fac=function(n){return new(n||r)};static \u0275cmp=je({type:r,selectors:[["app-input-number"]],features:[kp([{provide:im,useExisting:Ip(()=>r),multi:!0}])],decls:1,vars:1,consts:[["type","number","step","0.01","pInputText","",3,"input","value"]],template:function(n,o){n&1&&(b(0,"input",0),G("input",function(l){return o.onInput(l)}),w()),n&2&&q("value",o.value)},dependencies:[ze,Xe,Ze,ot,Je,ks,tt,st,He,at,nt,lt,ut,it,et,ct,ft,pt,mt,dt,ht,rt,gt,_t,yt,wt,Qe,bt,Ct],encapsulation:2})};var ub=()=>["0","1","2","3","4","5","6","7","8"];function cb(r,i){if(r&1){let n=$e();oe(0,"div",14),b(1,"div",3)(2,"p-inputnumber",27),Z("ngModelChange",function(s){let l=k(n).$implicit;return J(l.x,s)||(l.x=s),D(s)}),G("ngModelChange",function(){k(n);let s=W();return D(s.onChange())}),w()(),b(3,"div",3)(4,"p-inputnumber",27),Z("ngModelChange",function(s){let l=k(n).$implicit;return J(l.y,s)||(l.y=s),D(s)}),G("ngModelChange",function(){k(n);let s=W();return D(s.onChange())}),w()(),b(5,"div",3)(6,"p-inputnumber",27),Z("ngModelChange",function(s){let l=k(n).$implicit;return J(l.radius,s)||(l.radius=s),D(s)}),G("ngModelChange",function(){k(n);let s=W();return D(s.onChange())}),w()(),b(7,"div",3)(8,"p-inputnumber",27),Z("ngModelChange",function(s){let l=k(n).$implicit;return J(l.maxArea,s)||(l.maxArea=s),D(s)}),G("ngModelChange",function(){k(n);let s=W();return D(s.onChange())}),w()(),oe(9,"div",3),b(10,"div",14)(11,"p-button",28),G("onClick",function(){let s=k(n).$index,l=W();return D(l.removeRefinementPoint(s))}),w()()}if(r&2){let n=i.$implicit;R(2),X("ngModel",n.x),q("minFractionDigits",0)("maxFractionDigits",5)("showButtons",!1),R(2),X("ngModel",n.y),q("minFractionDigits",0)("maxFractionDigits",5)("showButtons",!1),R(2),X("ngModel",n.radius),q("minFractionDigits",0)("maxFractionDigits",5)("showButtons",!1),R(2),X("ngModel",n.maxArea),q("minFractionDigits",0)("maxFractionDigits",5)("showButtons",!1),R(3),q("outlined",!0)}}function fb(r,i){if(r&1){let n=$e();b(0,"div",14)(1,"p-inputnumber",27),Z("ngModelChange",function(s){let l=k(n).$implicit;return J(l.x,s)||(l.x=s),D(s)}),G("ngModelChange",function(){k(n);let s=W();return D(s.onChange())}),w()(),b(2,"div",14)(3,"p-inputnumber",27),Z("ngModelChange",function(s){let l=k(n).$implicit;return J(l.y,s)||(l.y=s),D(s)}),G("ngModelChange",function(){k(n);let s=W();return D(s.onChange())}),w()(),b(4,"div",3)(5,"input",29),Z("ngModelChange",function(s){let l=k(n).$implicit;return J(l.name,s)||(l.name=s),D(s)}),G("ngModelChange",function(){k(n);let s=W();return D(s.onChange())}),w()(),oe(6,"div",22),b(7,"div",14)(8,"p-button",28),G("onClick",function(){let s=k(n).$index,l=W();return D(l.removeResultPoint(s))}),w()()}if(r&2){let n=i.$implicit;R(),X("ngModel",n.x),q("minFractionDigits",0)("maxFractionDigits",5)("showButtons",!1),R(2),X("ngModel",n.y),q("minFractionDigits",0)("maxFractionDigits",5)("showButtons",!1),R(2),X("ngModel",n.name),R(3),q("outlined",!0)}}function pb(r,i){if(r&1){let n=$e();b(0,"div",3)(1,"input",29),Z("ngModelChange",function(s){let l=k(n).$implicit;return J(l.name,s)||(l.name=s),D(s)}),G("ngModelChange",function(){k(n);let s=W();return D(s.onChange())}),w()(),b(2,"div",15)(3,"p-inputnumber",30),Z("ngModelChange",function(s){let l=k(n).$implicit;return J(l.modulusOfElasticity,s)||(l.modulusOfElasticity=s),D(s)}),G("ngModelChange",function(){k(n);let s=W();return D(s.onChange())}),w()(),b(4,"div",3)(5,"p-inputnumber",30),Z("ngModelChange",function(s){let l=k(n).$implicit;return J(l.weight,s)||(l.weight=s),D(s)}),G("ngModelChange",function(){k(n);let s=W();return D(s.onChange())}),w()(),b(6,"div",3)(7,"p-inputnumber",31),Z("ngModelChange",function(s){let l=k(n).$implicit;return J(l.poissonsRatio,s)||(l.poissonsRatio=s),D(s)}),G("ngModelChange",function(){k(n);let s=W();return D(s.onChange())}),w()(),oe(8,"div",3),b(9,"div",14)(10,"p-button",32),G("onClick",function(){let s=k(n).$index,l=W();return D(l.removeMaterialAndThickeness(s))}),w()()}if(r&2){let n=i.$implicit,o=W();R(),X("ngModel",n.name),R(2),X("ngModel",n.modulusOfElasticity),q("minFractionDigits",0)("maxFractionDigits",5)("showButtons",!1)("min",1e-5),R(2),X("ngModel",n.weight),q("minFractionDigits",0)("maxFractionDigits",5)("showButtons",!1)("min",1e-5),R(2),X("ngModel",n.poissonsRatio),q("showButtons",!1)("min",1e-5)("minFractionDigits",1)("max",1)("step",.1),R(3),q("outlined",!0)("disabled",o.model.materials.length<=1)}}function mb(r,i){if(r&1){let n=$e();b(0,"div",3)(1,"p-inputnumber",30),Z("ngModelChange",function(s){let l=k(n).$implicit;return J(l.thickness,s)||(l.thickness=s),D(s)}),G("ngModelChange",function(){k(n);let s=W();return D(s.onChange())}),w()(),b(2,"div",3)(3,"input",29),Z("ngModelChange",function(s){let l=k(n).$implicit;return J(l.name,s)||(l.name=s),D(s)}),G("ngModelChange",function(){k(n);let s=W();return D(s.onChange())}),w()(),oe(4,"div",22),b(5,"div",14)(6,"p-button",32),G("onClick",function(){let s=k(n).$index,l=W();return D(l.removeMaterialAndThickeness(s))}),w()()}if(r&2){let n=i.$implicit,o=W();R(),X("ngModel",n.thickness),q("minFractionDigits",0)("maxFractionDigits",5)("showButtons",!1)("min",1e-5),R(2),X("ngModel",n.name),R(3),q("outlined",!0)("disabled",o.model.sectionProperties.length<=1)}}function db(r,i){if(r&1){let n=$e();b(0,"div",14)(1,"p-inputnumber",27),Z("ngModelChange",function(s){let l=k(n).$implicit;return J(l.x,s)||(l.x=s),D(s)}),G("ngModelChange",function(){k(n);let s=W();return D(s.onChange())}),w()(),b(2,"div",14)(3,"p-inputnumber",27),Z("ngModelChange",function(s){let l=k(n).$implicit;return J(l.y,s)||(l.y=s),D(s)}),G("ngModelChange",function(){k(n);let s=W();return D(s.onChange())}),w()(),b(4,"div",14)(5,"p-inputnumber",30),Z("ngModelChange",function(s){let l=k(n).$implicit;return J(l.width,s)||(l.width=s),D(s)}),G("ngModelChange",function(){k(n);let s=W();return D(s.onChange())}),w()(),b(6,"div",14)(7,"p-inputnumber",33),Z("ngModelChange",function(s){let l=k(n).$implicit;return J(l.height,s)||(l.height=s),D(s)}),G("ngModelChange",function(){k(n);let s=W();return D(s.onChange())}),w()(),b(8,"div",3)(9,"p-select",34),Z("ngModelChange",function(s){let l=k(n).$implicit;return J(l.sectionName,s)||(l.sectionName=s),D(s)}),G("ngModelChange",function(){k(n);let s=W();return D(s.onChange())}),w()(),b(10,"div",3)(11,"p-select",34),Z("ngModelChange",function(s){let l=k(n).$implicit;return J(l.materialName,s)||(l.materialName=s),D(s)}),G("ngModelChange",function(){k(n);let s=W();return D(s.onChange())}),w()(),b(12,"div",3)(13,"input",29),Z("ngModelChange",function(s){let l=k(n).$implicit;return J(l.name,s)||(l.name=s),D(s)}),G("ngModelChange",function(){k(n);let s=W();return D(s.onChange())}),w()(),oe(14,"div",14),b(15,"div",14)(16,"p-button",28),G("onClick",function(){let s=k(n).$index,l=W();return D(l.removeRectangleGeometry(s))}),w()()}if(r&2){let n=i.$implicit,o=W();R(),X("ngModel",n.x),q("minFractionDigits",0)("maxFractionDigits",5)("showButtons",!1),R(2),X("ngModel",n.y),q("minFractionDigits",0)("maxFractionDigits",5)("showButtons",!1),R(2),X("ngModel",n.width),q("minFractionDigits",0)("maxFractionDigits",5)("showButtons",!1)("min",1e-5),R(2),X("ngModel",n.height),q("minFractionDigits",0)("maxFractionDigits",5)("showButtons",!1)("min",1e-5),R(2),q("options",o.model.sectionProperties),X("ngModel",n.sectionName),R(2),q("options",o.model.materials),X("ngModel",n.materialName),R(2),X("ngModel",n.name),R(3),q("outlined",!0)}}function hb(r,i){if(r&1){let n=$e();b(0,"div",5)(1,"input",29),Z("ngModelChange",function(s){let l=k(n).$implicit;return J(l.points,s)||(l.points=s),D(s)}),G("ngModelChange",function(){k(n);let s=W();return D(s.onChange())}),w()(),b(2,"div",3)(3,"p-select",34),Z("ngModelChange",function(s){let l=k(n).$implicit;return J(l.sectionName,s)||(l.sectionName=s),D(s)}),G("ngModelChange",function(){k(n);let s=W();return D(s.onChange())}),w()(),b(4,"div",3)(5,"p-select",34),Z("ngModelChange",function(s){let l=k(n).$implicit;return J(l.materialName,s)||(l.materialName=s),D(s)}),G("ngModelChange",function(){k(n);let s=W();return D(s.onChange())}),w()(),b(6,"div",3)(7,"input",29),Z("ngModelChange",function(s){let l=k(n).$implicit;return J(l.name,s)||(l.name=s),D(s)}),G("ngModelChange",function(){k(n);let s=W();return D(s.onChange())}),w()(),oe(8,"div",14),b(9,"div",14)(10,"p-button",28),G("onClick",function(){let s=k(n).$index,l=W();return D(l.removePolygonGeometry(s))}),w()()}if(r&2){let n=i.$implicit,o=W();R(),X("ngModel",n.points),R(2),q("options",o.model.sectionProperties),X("ngModel",n.sectionName),R(2),q("options",o.model.materials),X("ngModel",n.materialName),R(2),X("ngModel",n.name),R(3),q("outlined",!0)}}function gb(r,i){if(r&1){let n=$e();b(0,"div",3)(1,"p-inputnumber",27),Z("ngModelChange",function(s){let l=k(n).$implicit;return J(l.x,s)||(l.x=s),D(s)}),G("ngModelChange",function(){k(n);let s=W();return D(s.onChange())}),w()(),b(2,"div",3)(3,"p-inputnumber",27),Z("ngModelChange",function(s){let l=k(n).$implicit;return J(l.y,s)||(l.y=s),D(s)}),G("ngModelChange",function(){k(n);let s=W();return D(s.onChange())}),w()(),b(4,"div",14)(5,"p-checkbox",35),Z("ngModelChange",function(s){let l=k(n).$implicit;return J(l.fixedX,s)||(l.fixedX=s),D(s)}),G("ngModelChange",function(){k(n);let s=W();return D(s.onChange())}),w()(),b(6,"div",14)(7,"p-checkbox",35),Z("ngModelChange",function(s){let l=k(n).$implicit;return J(l.fixedY,s)||(l.fixedY=s),D(s)}),G("ngModelChange",function(){k(n);let s=W();return D(s.onChange())}),w()(),oe(8,"div",25),b(9,"div",14)(10,"p-button",32),G("onClick",function(){let s=k(n).$index,l=W();return D(l.removeRestraint(s))}),w()()}if(r&2){let n=i.$implicit,o=W();R(),X("ngModel",n.x),q("minFractionDigits",0)("maxFractionDigits",5)("showButtons",!1),R(2),X("ngModel",n.y),q("minFractionDigits",0)("maxFractionDigits",5)("showButtons",!1),R(2),X("ngModel",n.fixedX),q("binary",!0),R(2),X("ngModel",n.fixedY),q("binary",!0),R(3),q("outlined",!0)("disabled",o.model.supports.length<=1)}}function _b(r,i){if(r&1){let n=$e();b(0,"div",41)(1,"p-inputnumber",27),Z("ngModelChange",function(s){let l=k(n).$implicit;return J(l.x,s)||(l.x=s),D(s)}),G("ngModelChange",function(){k(n);let s=W(2);return D(s.onChange())}),w()(),b(2,"div",3)(3,"p-inputnumber",27),Z("ngModelChange",function(s){let l=k(n).$implicit;return J(l.y,s)||(l.y=s),D(s)}),G("ngModelChange",function(){k(n);let s=W(2);return D(s.onChange())}),w()(),b(4,"div",3)(5,"p-inputnumber",27),Z("ngModelChange",function(s){let l=k(n).$implicit;return J(l.fx,s)||(l.fx=s),D(s)}),G("ngModelChange",function(){k(n);let s=W(2);return D(s.onChange())}),w()(),b(6,"div",3)(7,"p-inputnumber",27),Z("ngModelChange",function(s){let l=k(n).$implicit;return J(l.fy,s)||(l.fy=s),D(s)}),G("ngModelChange",function(){k(n);let s=W(2);return D(s.onChange())}),w()(),oe(8,"div",3),b(9,"div",14)(10,"p-button",28),G("onClick",function(){let s=k(n).$index,l=W().$index,c=W();return D(c.removePointLoad(l,s))}),w()()}if(r&2){let n=i.$implicit;R(),X("ngModel",n.x),q("minFractionDigits",0)("maxFractionDigits",5)("showButtons",!1),R(2),X("ngModel",n.y),q("minFractionDigits",0)("maxFractionDigits",5)("showButtons",!1),R(2),X("ngModel",n.fx),q("minFractionDigits",0)("maxFractionDigits",5)("showButtons",!1),R(2),X("ngModel",n.fy),q("minFractionDigits",0)("maxFractionDigits",5)("showButtons",!1),R(3),q("outlined",!0)}}function yb(r,i){if(r&1){let n=$e();b(0,"div",42)(1,"p-select",45),Z("ngModelChange",function(s){let l=k(n).$implicit;return J(l.geometryName,s)||(l.geometryName=s),D(s)}),G("ngModelChange",function(){k(n);let s=W(2);return D(s.onChange())}),w()(),b(2,"div",3)(3,"p-inputnumber",27),Z("ngModelChange",function(s){let l=k(n).$implicit;return J(l.fx,s)||(l.fx=s),D(s)}),G("ngModelChange",function(){k(n);let s=W(2);return D(s.onChange())}),w()(),b(4,"div",3)(5,"p-inputnumber",27),Z("ngModelChange",function(s){let l=k(n).$implicit;return J(l.fy,s)||(l.fy=s),D(s)}),G("ngModelChange",function(){k(n);let s=W(2);return D(s.onChange())}),w()(),oe(6,"div",15),b(7,"div",14)(8,"p-button",28),G("onClick",function(){let s=k(n).$index,l=W().$index,c=W();return D(c.removeDistributedLoad(l,s))}),w()()}if(r&2){let n=i.$implicit,o=W(2);R(),q("options",o.geometries),X("ngModel",n.geometryName),R(2),X("ngModel",n.fx),q("minFractionDigits",0)("maxFractionDigits",5)("showButtons",!1),R(2),X("ngModel",n.fy),q("minFractionDigits",0)("maxFractionDigits",5)("showButtons",!1),R(3),q("outlined",!0)}}function wb(r,i){if(r&1){let n=$e();b(0,"div",15)(1,"input",29),Z("ngModelChange",function(s){let l=k(n).$implicit;return J(l.name,s)||(l.name=s),D(s)}),G("ngModelChange",function(){k(n);let s=W();return D(s.onChange())}),w()(),oe(2,"div",12),b(3,"div",14)(4,"p-button",32),G("onClick",function(){let s=k(n).$index,l=W();return D(l.removeLoadCase(s))}),w()(),b(5,"div",36)(6,"div",37)(7,"p",4),B(8,"Dead Load"),w()(),b(9,"div",14)(10,"p-toggleswitch",38),Z("ngModelChange",function(s){let l=k(n).$implicit;return J(l.includeDeadLoad,s)||(l.includeDeadLoad=s),D(s)}),G("ngModelChange",function(){k(n);let s=W();return D(s.onChange())}),w()(),oe(11,"div",12),b(12,"div",39)(13,"p",4),B(14,"Point loads"),w()(),oe(15,"div",40),b(16,"div",41)(17,"p",4),B(18,"X"),w()(),b(19,"div",3)(20,"p",4),B(21,"Y"),w()(),b(22,"div",3)(23,"p",4),B(24,"FX"),w()(),b(25,"div",3)(26,"p",4),B(27,"FY"),w()(),oe(28,"div",5),Ot(29,_b,11,17,null,null,Nt),b(31,"div",42)(32,"p-button",43),G("onClick",function(){let s=k(n).$index,l=W();return D(l.addPointLoad(s))}),w()()(),b(33,"div",36)(34,"div",39)(35,"p",4),B(36,"Distributed loads"),w()(),oe(37,"div",40),b(38,"div",42)(39,"p",4),B(40,"Geometry name"),w()(),b(41,"div",3)(42,"p",4),B(43,"FX"),w()(),b(44,"div",3)(45,"p",4),B(46,"FY"),w()(),oe(47,"div",15),Ot(48,yb,9,11,null,null,Nt),b(50,"div",42)(51,"p-button",44),G("onClick",function(){let s=k(n).$index,l=W();return D(l.addDistributedLoad(s))}),w()()()}if(r&2){let n=i.$implicit,o=W();R(),X("ngModel",n.name),R(3),q("outlined",!0)("disabled",o.model.loadCases.length<=1),R(6),X("ngModel",n.includeDeadLoad),R(19),Pt(n.pointLoads),R(19),Pt(n.distributedLoads)}}var qs=class r extends On{membraneMessageService=Ae(di);membraneService=Ae(Nr);detector=Ae(rn);route=Ae($p);ngOnInit(){this.membraneMessageService.updateGeometry(this.model),this.membraneMessageService.geometryChanged.pipe(nn(this.destroyed$)).subscribe(i=>{this.model=i,this.detector.detectChanges()}),this.route.queryParamMap.subscribe(i=>{if(i.keys.length===0)return;let n=i.keys.map(s=>`${s}=${i.get(s)}`).join("&"),o=Hn.parseRaw(n||"");this.membraneService.updateGeometry(o)})}rectangles=["0,0,300,100,rec1","300,300,100,100,rec2"];model={solverConfiguration:{solverType:"lusolve"},meshingConfiguration:{maxMeshArea:.05,refinementPoints:[{x:0,y:0,radius:.4,maxArea:.01},{x:1.5,y:0,radius:.4,maxArea:.01},{x:2,y:1,radius:.4,maxArea:.005}]},resultPoints:[{x:1,y:.5,name:"p1"}],sectionProperties:[ar({},Ks),vp(ar({},Ks),{name:"thickness-2",thickness:.5})],materials:[ar({},_m)],rectangles:[{name:"geo1",x:0,y:0,width:2,height:1,sectionName:"default-section",materialName:"default-material"},{name:"geo2",x:3,y:1,width:2,height:2,sectionName:"default-section",materialName:"default-material"},{name:"geo3",x:6,y:0,width:2,height:1,sectionName:"default-section",materialName:"default-material"},{name:"geo4",x:3.45,y:3,width:1,height:.28,sectionName:"default-section",materialName:"default-material"}],polygons:[{name:"pol1",points:"2,0 3,1 3,3 2,1",sectionName:"default-section",materialName:"default-material"},{name:"pol2",points:"5,1 6,0 6,1 5,3",sectionName:"default-section",materialName:"default-material"}],supports:[{x:2,y:0,fixedX:!0,fixedY:!0},{x:6,y:0,fixedX:!1,fixedY:!0}],loadCases:[{name:"loadCase1",includeDeadLoad:!1,pointLoads:[{x:1,y:.48,fx:0,fy:0},{x:2,y:0,fx:0,fy:-1}],distributedLoads:[{geometryName:"geo1",fx:0,fy:-.5}]},{name:"loadCase2",includeDeadLoad:!1,pointLoads:[{x:.72,y:.5,fx:0,fy:0},{x:.5,y:.54,fx:0,fy:0}],distributedLoads:[{geometryName:"geo2",fx:0,fy:-1},{geometryName:"geo2",fx:0,fy:-1}]}]};get geometries(){let i=this.model.rectangles.map(o=>o.name),n=this.model.polygons?.map(o=>o.name)??[];return wm.uniq([...i,...n])}removeMaterialAndThickeness(i){return Se(this,null,function*(){this.model.sectionProperties.splice(i,1),yield this.onChange()})}addMaterialAndThickeness(){return Se(this,null,function*(){this.model.sectionProperties.push(ar({},Ks)),yield this.onChange()})}addResultPoint(){return Se(this,null,function*(){this.model.resultPoints.push({x:0,y:0,name:`p${this.model.resultPoints.length+1}`}),yield this.onChange()})}removeRectangleGeometry(i){return Se(this,null,function*(){this.model.rectangles.splice(i,1),yield this.onChange()})}removePolygonGeometry(i){return Se(this,null,function*(){this.model.polygons.splice(i,1),yield this.onChange()})}removeResultPoint(i){return Se(this,null,function*(){this.model.resultPoints.splice(i,1),yield this.onChange()})}addRectangleGeometry(){return Se(this,null,function*(){this.model.rectangles.push(ar({},nm)),yield this.onChange()})}addPolygonGeometry(){return Se(this,null,function*(){this.model.polygons.push(ar({},tm)),yield this.onChange()})}removeRestraint(i){return Se(this,null,function*(){this.model.supports.splice(i,1),yield this.onChange()})}removeRefinementPoint(i){return Se(this,null,function*(){this.model.meshingConfiguration.refinementPoints.splice(i,1),yield this.onChange()})}addRefinementPoint(){return Se(this,null,function*(){this.model.meshingConfiguration.refinementPoints.push({x:0,y:0,radius:.1,maxArea:.001}),yield this.onChange()})}addRestraint(){return Se(this,null,function*(){this.model.supports.push({x:0,y:0,fixedX:!0,fixedY:!0}),yield this.onChange()})}addLoadCase(){return Se(this,null,function*(){this.model.loadCases.push({name:`loadCase${this.model.loadCases.length+1}`,pointLoads:[],distributedLoads:[],includeDeadLoad:!1}),yield this.onChange()})}removeLoadCase(i){return Se(this,null,function*(){this.model.loadCases.splice(i,1),yield this.onChange()})}addPointLoad(i){return Se(this,null,function*(){this.model.loadCases[i].pointLoads.push({x:0,y:0,fx:0,fy:0}),yield this.onChange()})}removePointLoad(i,n){return Se(this,null,function*(){this.model.loadCases[i].pointLoads.splice(n,1),yield this.onChange()})}addDistributedLoad(i){return Se(this,null,function*(){this.model.loadCases[i].distributedLoads.push({geometryName:"",fx:0,fy:0}),yield this.onChange()})}removeDistributedLoad(i,n){return Se(this,null,function*(){this.model.loadCases[i].distributedLoads.splice(n,1),yield this.onChange()})}onChange(){return Se(this,null,function*(){yield Promise.resolve(),this.membraneService.updateGeometry(this.model),this.detector.detectChanges()})}static \u0275fac=(()=>{let i;return function(o){return(i||(i=pi(r)))(o||r)}})();static \u0275cmp=je({type:r,selectors:[["app-geometry"]],features:[mi],decls:210,vars:6,consts:[[3,"value","multiple"],["value","0"],[1,"grid","grid-cols-12","gap-2","auto-rows-max","mt-1","mb-1"],[1,"col-span-2"],[1,"font-semibold"],[1,"col-span-4"],["name","lusolve1","value","lusolve","inputId","lusolve1",3,"ngModelChange","ngModel"],["for","lusolve1",1,"ml-2"],["name","iterative1","value","iterative","inputId","iterative",3,"ngModelChange","ngModel"],["for","iterative1",1,"ml-2"],["value","1"],["type","number","step","0.01",3,"ngModelChange","ngModel"],[1,"col-span-8"],[1,"col-span-12"],[1,"col-span-1"],[1,"col-span-3"],[1,"col-span-1","col-start-2"],["severity","secondary","size","small","icon","pi pi-plus","label","Add",3,"onClick"],["value","5"],[1,"mt-2"],["value","3"],["value","4"],[1,"col-span-7"],["value","6"],["value","7"],[1,"col-span-5"],["value","8"],["mode","decimal",3,"ngModelChange","ngModel","minFractionDigits","maxFractionDigits","showButtons"],["severity","secondary","icon","pi pi-times","severity","danger",3,"onClick","outlined"],["type","text","pInputText","",3,"ngModelChange","ngModel"],["mode","decimal",3,"ngModelChange","ngModel","minFractionDigits","maxFractionDigits","showButtons","min"],["mode","decimal",3,"ngModelChange","ngModel","showButtons","min","minFractionDigits","max","step"],["severity","secondary","icon","pi pi-times","severity","danger",3,"onClick","outlined","disabled"],[3,"ngModelChange","ngModel","minFractionDigits","maxFractionDigits","showButtons","min"],["optionLabel","name","placeholder","Select material and thickness","optionValue","name",3,"ngModelChange","options","ngModel"],[3,"ngModelChange","ngModel","binary"],[1,"col-span-12","grid","grid-cols-subgrid","gap-2"],[1,"col-start-2","col-span-2"],[3,"ngModelChange","ngModel"],[1,"col-span-4","col-start-2"],[1,"col-span-6"],[1,"col-span-2","col-start-2"],[1,"col-span-3","col-start-2"],["severity","secondary","icon","pi pi-plus","size","small","label","Add point load",3,"onClick"],["severity","secondary","size","small","icon","pi pi-plus","label","Add distributed load",3,"onClick"],["placeholder","Select geometry",3,"ngModelChange","options","ngModel"]],template:function(n,o){n&1&&(b(0,"p-accordion",0)(1,"p-accordion-panel",1)(2,"p-accordion-header"),B(3,"Solver Configuration"),w(),b(4,"p-accordion-content")(5,"p-fluid")(6,"div",2)(7,"div",3)(8,"p",4),B(9,"Solver type"),w()(),b(10,"div",5)(11,"p-radiobutton",6),Z("ngModelChange",function(l){return J(o.model.solverConfiguration.solverType,l)||(o.model.solverConfiguration.solverType=l),l}),G("ngModelChange",function(){return o.onChange()}),w(),b(12,"label",7),B(13,"Lu Solve"),w()(),b(14,"div",5)(15,"p-radiobutton",8),Z("ngModelChange",function(l){return J(o.model.solverConfiguration.solverType,l)||(o.model.solverConfiguration.solverType=l),l}),G("ngModelChange",function(){return o.onChange()}),w(),b(16,"label",9),B(17,"Iterative"),w()(),oe(18,"div",3),w()()()(),b(19,"p-accordion-panel",10)(20,"p-accordion-header"),B(21,"Meshing Configuration"),w(),b(22,"p-accordion-content")(23,"p-fluid")(24,"div",2)(25,"div",3)(26,"p",4),B(27,"Max mesh area"),w()(),b(28,"div",3)(29,"app-input-number",11),Z("ngModelChange",function(l){return J(o.model.meshingConfiguration.maxMeshArea,l)||(o.model.meshingConfiguration.maxMeshArea=l),l}),G("ngModelChange",function(){return o.onChange()}),w()(),oe(30,"div",12),b(31,"div",13)(32,"p",4),B(33,"Refinement Points"),w()(),oe(34,"div",14),b(35,"div",3)(36,"p",4),B(37,"X"),w()(),b(38,"div",3)(39,"p",4),B(40,"Y"),w()(),b(41,"div",3)(42,"p",4),B(43,"Radious"),w()(),b(44,"div",3)(45,"p",4),B(46,"Max mesh size"),w()(),oe(47,"div",15),Ot(48,cb,12,17,null,null,Nt),b(50,"div",16)(51,"p-button",17),G("onClick",function(){return o.addRefinementPoint()}),w()()()()()(),b(52,"p-accordion-panel",18)(53,"p-accordion-header"),B(54,"Result points"),w(),b(55,"p-accordion-content")(56,"p-fluid")(57,"div",2)(58,"div",14)(59,"p",4),B(60,"x"),w()(),b(61,"div",14)(62,"p",4),B(63,"y"),w()(),b(64,"div",3)(65,"p",4),B(66,"Name"),w()(),oe(67,"div",12),Ot(68,fb,9,10,null,null,Nt),w()(),b(70,"div",19)(71,"p-button",17),G("onClick",function(){return o.addResultPoint()}),w()()()(),b(72,"p-accordion-panel",20)(73,"p-accordion-header"),B(74,"Material"),w(),b(75,"p-accordion-content")(76,"p-fluid")(77,"div",2)(78,"div",3)(79,"p",4),B(80,"Name"),w()(),b(81,"div",15)(82,"p",4),B(83,"Modulus of elasticity"),w()(),b(84,"div",3)(85,"p",4),B(86,"Weight"),w()(),b(87,"div",3)(88,"p",4),B(89,"Poison's ratio"),w()(),oe(90,"div",3)(91,"div",14),Ot(92,pb,11,19,null,null,Nt),w()(),b(94,"div",19)(95,"p-button",17),G("onClick",function(){return o.addMaterialAndThickeness()}),w()()()(),b(96,"p-accordion-panel",21)(97,"p-accordion-header"),B(98,"Section"),w(),b(99,"p-accordion-content")(100,"p-fluid")(101,"div",2)(102,"div",3)(103,"p",4),B(104,"Thickness"),w()(),b(105,"div",3)(106,"p",4),B(107,"Name"),w()(),oe(108,"div",22)(109,"div",14),Ot(110,mb,7,8,null,null,Nt),w()(),b(112,"div",19)(113,"p-button",17),G("onClick",function(){return o.addMaterialAndThickeness()}),w()()()(),b(114,"p-accordion-panel",18)(115,"p-accordion-header"),B(116,"Rectangle geometry"),w(),b(117,"p-accordion-content")(118,"p-fluid")(119,"div",2)(120,"div",14)(121,"p",4),B(122,"x0"),w()(),b(123,"div",14)(124,"p",4),B(125,"y0"),w()(),b(126,"div",14)(127,"p",4),B(128,"Width"),w()(),b(129,"div",14)(130,"p",4),B(131,"Height"),w()(),b(132,"div",3)(133,"p",4),B(134,"Section"),w()(),b(135,"div",3)(136,"p",4),B(137,"Material"),w()(),b(138,"div",3)(139,"p",4),B(140,"Name"),w()(),oe(141,"div",14)(142,"div",14),Ot(143,db,17,24,null,null,Nt),w()(),b(145,"div",19)(146,"p-button",17),G("onClick",function(){return o.addRectangleGeometry()}),w()()()(),b(147,"p-accordion-panel",23)(148,"p-accordion-header"),B(149,"Polygon geometry"),w(),b(150,"p-accordion-content")(151,"p-fluid")(152,"div",2)(153,"div",5)(154,"p",4),B(155,"Coordinates (x1,y1 x2,y2 ..)"),w()(),b(156,"div",3)(157,"p",4),B(158,"Section"),w()(),b(159,"div",3)(160,"p",4),B(161,"Material"),w()(),b(162,"div",3)(163,"p",4),B(164,"Name"),w()(),oe(165,"div",14)(166,"div",14),Ot(167,hb,11,7,null,null,Nt),w()(),b(169,"div",19)(170,"p-button",17),G("onClick",function(){return o.addPolygonGeometry()}),w()()()(),b(171,"p-accordion-panel",24)(172,"p-accordion-header"),B(173,"Supports"),w(),b(174,"p-accordion-content")(175,"p-fluid")(176,"div",2)(177,"div",3)(178,"p",4),B(179,"X"),w()(),b(180,"div",3)(181,"p",4),B(182,"Y"),w()(),b(183,"div",14)(184,"p",4),B(185,"Fixed X"),w()(),b(186,"div",14)(187,"p",4),B(188,"Fixed Y"),w()(),oe(189,"div",25)(190,"div",14),Ot(191,gb,11,14,null,null,Nt),w()(),b(193,"div",19)(194,"p-button",17),G("onClick",function(){return o.addRestraint()}),w()()()(),b(195,"p-accordion-panel",26)(196,"p-accordion-header"),B(197,"Load cases"),w(),b(198,"p-accordion-content")(199,"p-fluid")(200,"div",2)(201,"div",15)(202,"p",4),B(203,"Name"),w()(),oe(204,"div",12)(205,"div",14),Ot(206,wb,52,4,null,null,Nt),w()(),b(208,"div",19)(209,"p-button",17),G("onClick",function(){return o.addLoadCase()}),w()()()()()),n&2&&(q("value",Os(5,ub))("multiple",!0),R(11),X("ngModel",o.model.solverConfiguration.solverType),R(4),X("ngModel",o.model.solverConfiguration.solverType),R(14),X("ngModel",o.model.meshingConfiguration.maxMeshArea),R(19),Pt(o.model.meshingConfiguration.refinementPoints),R(20),Pt(o.model.resultPoints),R(24),Pt(o.model.materials),R(18),Pt(o.model.sectionProperties),R(33),Pt(o.model.rectangles),R(24),Pt(o.model.polygons),R(24),Pt(o.model.supports),R(15),Pt(o.model.loadCases))},dependencies:[ze,Xe,Ze,Or,$s,ot,Je,ks,tt,Ds,st,He,Rs,In,Nn,at,Gs,Fs,Bs,Vs,nt,lt,ut,it,Pr,et,hi,ct,ft,pt,mt,dt,Ws,ht,rt,cm,gt,_t,yt,wt,Qe,bt,Ct,Ys],encapsulation:2,changeDetection:0})};var vm=iu(lb());var bb=["LoadCase","GeometryName","ElementIndex","NodeIndex","ResultPoint","NodeX","NodeY","uX","uY","ReactionX","ReactionY","Sxx","Syy","Sxy"];function bm(r){if(!r||r.length===0)return"";let i=r.flatMap(n=>n.details.map(o=>[n.loadCase,o.geometryName??"",o.elementIndex,o.nodeIndex,o.resultPointName,o.nodeX,o.nodeY,o.uX,o.uY,o.reactionX===0?"":o.reactionX,o.reactionY===0?"":o.reactionY,o.sxx,o.syy,o.sxy]));return[bb.join(","),...i.map(n=>n.join(","))].join(`
`)}var lu=iu(ab()),Cb=(r,i)=>(0,lu.default)(r.x,i.x)&&(0,lu.default)(r.y,i.y);var Cm=(r,i)=>r.some(n=>Cb(n,i));var vb=()=>({width:"100%"});function Sb(r,i){r&1&&(b(0,"tr"),oe(1,"th",10),b(2,"th"),B(3,"Geometry Name"),w(),b(4,"th"),B(5,"Node index"),w(),b(6,"th"),B(7,"Result Point Name"),w(),b(8,"th"),B(9,"NodeX"),w(),b(10,"th"),B(11,"NodeY"),w()())}function Mb(r,i){if(r&1&&(b(0,"tr")(1,"td"),oe(2,"p-button",11),w(),b(3,"td"),B(4),w(),b(5,"td"),B(6),w(),b(7,"td"),B(8),w(),b(9,"td"),B(10),w(),b(11,"td"),B(12),w()()),r&2){let n=i.$implicit,o=i.expanded;R(2),q("pRowToggler",n)("text",!0)("rounded",!0)("icon",o?"pi pi-chevron-down":"pi pi-chevron-right"),R(2),Be(n.geometryName),R(2),Be(n.nodeIndex),R(2),Be(n.resultPointName),R(2),Be(n.nodeX),R(2),Be(n.nodeY)}}function xb(r,i){if(r&1&&(b(0,"tr")(1,"th"),B(2,"uX"),w(),b(3,"td"),B(4),w()(),b(5,"tr")(6,"th"),B(7,"uY"),w(),b(8,"td"),B(9),w()(),b(10,"tr")(11,"th"),B(12,"Rx"),w(),b(13,"td"),B(14),w()(),b(15,"tr")(16,"th"),B(17,"Ry"),w(),b(18,"td"),B(19),w()(),b(20,"tr")(21,"th"),B(22,"Sxx"),w(),b(23,"td"),B(24),w()(),b(25,"tr")(26,"th"),B(27,"Syy"),w(),b(28,"td"),B(29),w()(),b(30,"tr")(31,"th"),B(32,"Sxy"),w(),b(33,"td"),B(34),w()(),oe(35,"tr")),r&2){let n=i.$implicit;R(4),Be(n.uX),R(5),Be(n.uY),R(5),Be(n.reactionX),R(5),Be(n.reactionY),R(5),Be(n.sxx),R(5),Be(n.syy),R(5),Be(n.sxy)}}function Tb(r,i){if(r&1&&(b(0,"p-accordion-panel",8)(1,"p-accordion-header"),B(2),w(),b(3,"p-accordion-content")(4,"p-table",9),mn(5,Sb,12,0,"ng-template",null,0,Ir)(7,Mb,13,9,"ng-template",null,1,Ir)(9,xb,36,7,"ng-template",null,2,Ir),w()()()),r&2){let n=i.$implicit,o=i.$index,s=W(3);q("value",o),R(2),Be(n.loadCase),R(2),q("value",n.details)("expandedRowKeys",s.expandedRows)("tableStyle",Os(7,vb))("size","small")("scrollable",!0)}}function Eb(r,i){if(r&1&&(b(0,"p-accordion",8),Ot(1,Tb,11,8,"p-accordion-panel",8,Nt),w()),r&2){let n=W(2);q("value",0),R(),Pt(n.resultPointsResults)}}function Ab(r,i){if(r&1){let n=$e();b(0,"p-multiselect",3),Z("ngModelChange",function(s){k(n);let l=W();return J(l.selectedGeometries,s)||(l.selectedGeometries=s),D(s)}),G("ngModelChange",function(){k(n);let s=W();return D(s.onChange())}),w(),b(1,"p-multiselect",4),Z("ngModelChange",function(s){k(n);let l=W();return J(l.selectedLoadCases,s)||(l.selectedLoadCases=s),D(s)}),G("ngModelChange",function(){k(n);let s=W();return D(s.onChange())}),w(),b(2,"label",5),B(3,"Result Points only"),w(),b(4,"p-toggleswitch",6),Z("ngModelChange",function(s){k(n);let l=W();return J(l.resultPointsSelected,s)||(l.resultPointsSelected=s),D(s)}),G("ngModelChange",function(){k(n);let s=W();return D(s.onChange())}),w(),b(5,"p"),B(6),w(),b(7,"p-button",7),G("onClick",function(){k(n);let s=W();return D(s.exportCsv())}),w(),mn(8,Eb,3,1,"p-accordion",8)}if(r&2){let n=W();q("options",n.geometries),X("ngModel",n.selectedGeometries),R(),q("options",n.loadCases),X("ngModel",n.selectedLoadCases),R(3),X("ngModel",n.resultPointsSelected),R(2),Be(n.uuid),R(2),lr(n.resultPointsSelected?8:-1)}}var js=class r extends On{messageService=Ae(di);changeDetector=Ae(rn);expandedRows={};visible=!1;loadCases=[];selectedLoadCases=[];geometries=[];selectedGeometries=[];geometry;resultPointsSelected=!1;uuid;results=[];resultPointsResults=[];ngOnInit(){this.messageService.resultsChanged.pipe(nn(this.destroyed$),Fe(i=>this.uuid=i)).subscribe(()=>this.changeDetector.detectChanges()),this.messageService.geometryChanged.pipe(nn(this.destroyed$),Fe(i=>this.loadCases=this.selectedLoadCases=i.loadCases.map(n=>n.name)),Fe(i=>this.geometries=this.selectedGeometries=i.rectangles.map(n=>n.name)),Fe(i=>this.geometry=i)).subscribe(()=>this.changeDetector.detectChanges()),this.messageService.resultsChanged.pipe(nn(this.destroyed$),po(i=>i!==""),Fe(i=>this.visible=i)).subscribe(()=>this.changeDetector.detectChanges()),this.messageService.resultsChanged.pipe(nn(this.destroyed$),Is(i=>i!==""),Ap(i=>xp({uuid:i,loadcases:[...this.loadCases]}).pipe(Tp(n=>Ep([...n.loadcases.map(o=>Mp(vm.getItem(Qp(n.uuid,o))))])),po(n=>n.filter(o=>o).map(o=>o)))),Fe(i=>this.results=i??[])).subscribe(()=>this.changeDetector.detectChanges())}onChange(){this.resultPointsSelected&&(this.resultPointsResults=this.filterResults()),this.changeDetector.detectChanges()}exportCsv(){let i=this.resultPointsSelected?this.filterResults():this.results,n=bm(i),o=`results_${new Date().toLocaleTimeString()}_${this.uuid}.csv`,s=new Blob([n],{type:"text/csv;charset=utf-8;"}),l=URL.createObjectURL(s),c=document.createElement("a");c.href=l,c.setAttribute("download",o),document.body.appendChild(c),c.click(),document.body.removeChild(c)}filterResults(){return this.results.filter(n=>this.selectedLoadCases.includes(n.loadCase)).filter(n=>n.details.some(o=>this.selectedGeometries.includes(o.geometryName))).map(n=>({details:n.details.filter(s=>this.geometry?.resultPoints?.length===0||Cm(this.geometry.resultPoints,{x:s.nodeX,y:s.nodeY})),loadCase:n.loadCase}))}static \u0275fac=(()=>{let i;return function(o){return(i||(i=pi(r)))(o||r)}})();static \u0275cmp=je({type:r,selectors:[["app-results"]],features:[mi],decls:1,vars:1,consts:[["header",""],["body",""],["expandedrow",""],["placeholder","Select geometry",1,"w-full","md:w-80",3,"ngModelChange","options","ngModel"],["placeholder","Select load cases",1,"w-full","md:w-80",3,"ngModelChange","options","ngModel"],["for","resultPointsToggle",1,"p-mr-2"],["id","resultPointsToggle",3,"ngModelChange","ngModel"],["label","Export to csv",3,"onClick"],[3,"value"],["dataKey","resultIdentity","scrollHeight","400px",3,"value","expandedRowKeys","tableStyle","size","scrollable"],[2,"width","5rem"],["type","button","pRipple","","severity","secondary",3,"pRowToggler","text","rounded","icon"]],template:function(n,o){n&1&&mn(0,Ab,9,7),n&2&&lr(o.visible?0:-1)},dependencies:[ze,Xe,Ze,ot,fm,pm,Je,tt,st,He,In,Nn,at,Gs,Fs,Bs,Vs,nt,lt,ut,it,et,hi,ct,ft,pt,mt,dt,Ws,ht,rt,gt,_t,dm,yt,wt,Qe,bt,Ct],styles:["canvas[_ngcontent-%COMP%]{width:800px;height:600px;border:1px solid black}"],changeDetection:0})};var Sm={type:"change"},cu={type:"start"},xm={type:"end"},Hs=new Kp,Mm=new Hp,Ib=Math.cos(70*Up.DEG2RAD),Ue=new dn,Vt=2*Math.PI,Me={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},uu=1e-6,zs=class extends Jp{constructor(i,n=null){super(i,n),this.state=Me.NONE,this.target=new dn,this.cursor=new dn,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:ur.ROTATE,MIDDLE:ur.DOLLY,RIGHT:ur.PAN},this.touches={ONE:cr.ROTATE,TWO:cr.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new dn,this._lastQuaternion=new su,this._lastTargetPosition=new dn,this._quat=new su().setFromUnitVectors(i.up,new dn(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new au,this._sphericalDelta=new au,this._scale=1,this._panOffset=new dn,this._rotateStart=new Bt,this._rotateEnd=new Bt,this._rotateDelta=new Bt,this._panStart=new Bt,this._panEnd=new Bt,this._panDelta=new Bt,this._dollyStart=new Bt,this._dollyEnd=new Bt,this._dollyDelta=new Bt,this._dollyDirection=new dn,this._mouse=new Bt,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=Ob.bind(this),this._onPointerDown=Nb.bind(this),this._onPointerUp=Pb.bind(this),this._onContextMenu=Vb.bind(this),this._onMouseWheel=kb.bind(this),this._onKeyDown=Db.bind(this),this._onTouchStart=Fb.bind(this),this._onTouchMove=Bb.bind(this),this._onMouseDown=Lb.bind(this),this._onMouseMove=Rb.bind(this),this._interceptControlDown=Gb.bind(this),this._interceptControlUp=Wb.bind(this),this.domElement!==null&&this.connect(this.domElement),this.update()}connect(i){super.connect(i),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(i){i.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=i}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(Sm),this.update(),this.state=Me.NONE}update(i=null){let n=this.object.position;Ue.copy(n).sub(this.target),Ue.applyQuaternion(this._quat),this._spherical.setFromVector3(Ue),this.autoRotate&&this.state===Me.NONE&&this._rotateLeft(this._getAutoRotationAngle(i)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let o=this.minAzimuthAngle,s=this.maxAzimuthAngle;isFinite(o)&&isFinite(s)&&(o<-Math.PI?o+=Vt:o>Math.PI&&(o-=Vt),s<-Math.PI?s+=Vt:s>Math.PI&&(s-=Vt),o<=s?this._spherical.theta=Math.max(o,Math.min(s,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(o+s)/2?Math.max(o,this._spherical.theta):Math.min(s,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let l=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{let c=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),l=c!=this._spherical.radius}if(Ue.setFromSpherical(this._spherical),Ue.applyQuaternion(this._quatInverse),n.copy(this.target).add(Ue),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let c=null;if(this.object.isPerspectiveCamera){let d=Ue.length();c=this._clampDistance(d*this._scale);let h=d-c;this.object.position.addScaledVector(this._dollyDirection,h),this.object.updateMatrixWorld(),l=!!h}else if(this.object.isOrthographicCamera){let d=new dn(this._mouse.x,this._mouse.y,0);d.unproject(this.object);let h=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),l=h!==this.object.zoom;let _=new dn(this._mouse.x,this._mouse.y,0);_.unproject(this.object),this.object.position.sub(_).add(d),this.object.updateMatrixWorld(),c=Ue.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;c!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(c).add(this.object.position):(Hs.origin.copy(this.object.position),Hs.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(Hs.direction))<Ib?this.object.lookAt(this.target):(Mm.setFromNormalAndCoplanarPoint(this.object.up,this.target),Hs.intersectPlane(Mm,this.target))))}else if(this.object.isOrthographicCamera){let c=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),c!==this.object.zoom&&(this.object.updateProjectionMatrix(),l=!0)}return this._scale=1,this._performCursorZoom=!1,l||this._lastPosition.distanceToSquared(this.object.position)>uu||8*(1-this._lastQuaternion.dot(this.object.quaternion))>uu||this._lastTargetPosition.distanceToSquared(this.target)>uu?(this.dispatchEvent(Sm),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(i){return i!==null?Vt/60*this.autoRotateSpeed*i:Vt/60/60*this.autoRotateSpeed}_getZoomScale(i){let n=Math.abs(i*.01);return Math.pow(.95,this.zoomSpeed*n)}_rotateLeft(i){this._sphericalDelta.theta-=i}_rotateUp(i){this._sphericalDelta.phi-=i}_panLeft(i,n){Ue.setFromMatrixColumn(n,0),Ue.multiplyScalar(-i),this._panOffset.add(Ue)}_panUp(i,n){this.screenSpacePanning===!0?Ue.setFromMatrixColumn(n,1):(Ue.setFromMatrixColumn(n,0),Ue.crossVectors(this.object.up,Ue)),Ue.multiplyScalar(i),this._panOffset.add(Ue)}_pan(i,n){let o=this.domElement;if(this.object.isPerspectiveCamera){let s=this.object.position;Ue.copy(s).sub(this.target);let l=Ue.length();l*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*i*l/o.clientHeight,this.object.matrix),this._panUp(2*n*l/o.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(i*(this.object.right-this.object.left)/this.object.zoom/o.clientWidth,this.object.matrix),this._panUp(n*(this.object.top-this.object.bottom)/this.object.zoom/o.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(i){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=i:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(i){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=i:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(i,n){if(!this.zoomToCursor)return;this._performCursorZoom=!0;let o=this.domElement.getBoundingClientRect(),s=i-o.left,l=n-o.top,c=o.width,d=o.height;this._mouse.x=s/c*2-1,this._mouse.y=-(l/d)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(i){return Math.max(this.minDistance,Math.min(this.maxDistance,i))}_handleMouseDownRotate(i){this._rotateStart.set(i.clientX,i.clientY)}_handleMouseDownDolly(i){this._updateZoomParameters(i.clientX,i.clientX),this._dollyStart.set(i.clientX,i.clientY)}_handleMouseDownPan(i){this._panStart.set(i.clientX,i.clientY)}_handleMouseMoveRotate(i){this._rotateEnd.set(i.clientX,i.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);let n=this.domElement;this._rotateLeft(Vt*this._rotateDelta.x/n.clientHeight),this._rotateUp(Vt*this._rotateDelta.y/n.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(i){this._dollyEnd.set(i.clientX,i.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(i){this._panEnd.set(i.clientX,i.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(i){this._updateZoomParameters(i.clientX,i.clientY),i.deltaY<0?this._dollyIn(this._getZoomScale(i.deltaY)):i.deltaY>0&&this._dollyOut(this._getZoomScale(i.deltaY)),this.update()}_handleKeyDown(i){let n=!1;switch(i.code){case this.keys.UP:i.ctrlKey||i.metaKey||i.shiftKey?this.enableRotate&&this._rotateUp(Vt*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),n=!0;break;case this.keys.BOTTOM:i.ctrlKey||i.metaKey||i.shiftKey?this.enableRotate&&this._rotateUp(-Vt*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),n=!0;break;case this.keys.LEFT:i.ctrlKey||i.metaKey||i.shiftKey?this.enableRotate&&this._rotateLeft(Vt*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),n=!0;break;case this.keys.RIGHT:i.ctrlKey||i.metaKey||i.shiftKey?this.enableRotate&&this._rotateLeft(-Vt*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),n=!0;break}n&&(i.preventDefault(),this.update())}_handleTouchStartRotate(i){if(this._pointers.length===1)this._rotateStart.set(i.pageX,i.pageY);else{let n=this._getSecondPointerPosition(i),o=.5*(i.pageX+n.x),s=.5*(i.pageY+n.y);this._rotateStart.set(o,s)}}_handleTouchStartPan(i){if(this._pointers.length===1)this._panStart.set(i.pageX,i.pageY);else{let n=this._getSecondPointerPosition(i),o=.5*(i.pageX+n.x),s=.5*(i.pageY+n.y);this._panStart.set(o,s)}}_handleTouchStartDolly(i){let n=this._getSecondPointerPosition(i),o=i.pageX-n.x,s=i.pageY-n.y,l=Math.sqrt(o*o+s*s);this._dollyStart.set(0,l)}_handleTouchStartDollyPan(i){this.enableZoom&&this._handleTouchStartDolly(i),this.enablePan&&this._handleTouchStartPan(i)}_handleTouchStartDollyRotate(i){this.enableZoom&&this._handleTouchStartDolly(i),this.enableRotate&&this._handleTouchStartRotate(i)}_handleTouchMoveRotate(i){if(this._pointers.length==1)this._rotateEnd.set(i.pageX,i.pageY);else{let o=this._getSecondPointerPosition(i),s=.5*(i.pageX+o.x),l=.5*(i.pageY+o.y);this._rotateEnd.set(s,l)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);let n=this.domElement;this._rotateLeft(Vt*this._rotateDelta.x/n.clientHeight),this._rotateUp(Vt*this._rotateDelta.y/n.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(i){if(this._pointers.length===1)this._panEnd.set(i.pageX,i.pageY);else{let n=this._getSecondPointerPosition(i),o=.5*(i.pageX+n.x),s=.5*(i.pageY+n.y);this._panEnd.set(o,s)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(i){let n=this._getSecondPointerPosition(i),o=i.pageX-n.x,s=i.pageY-n.y,l=Math.sqrt(o*o+s*s);this._dollyEnd.set(0,l),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);let c=(i.pageX+n.x)*.5,d=(i.pageY+n.y)*.5;this._updateZoomParameters(c,d)}_handleTouchMoveDollyPan(i){this.enableZoom&&this._handleTouchMoveDolly(i),this.enablePan&&this._handleTouchMovePan(i)}_handleTouchMoveDollyRotate(i){this.enableZoom&&this._handleTouchMoveDolly(i),this.enableRotate&&this._handleTouchMoveRotate(i)}_addPointer(i){this._pointers.push(i.pointerId)}_removePointer(i){delete this._pointerPositions[i.pointerId];for(let n=0;n<this._pointers.length;n++)if(this._pointers[n]==i.pointerId){this._pointers.splice(n,1);return}}_isTrackingPointer(i){for(let n=0;n<this._pointers.length;n++)if(this._pointers[n]==i.pointerId)return!0;return!1}_trackPointer(i){let n=this._pointerPositions[i.pointerId];n===void 0&&(n=new Bt,this._pointerPositions[i.pointerId]=n),n.set(i.pageX,i.pageY)}_getSecondPointerPosition(i){let n=i.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[n]}_customWheelEvent(i){let n=i.deltaMode,o={clientX:i.clientX,clientY:i.clientY,deltaY:i.deltaY};switch(n){case 1:o.deltaY*=16;break;case 2:o.deltaY*=100;break}return i.ctrlKey&&!this._controlActive&&(o.deltaY*=10),o}};function Nb(r){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(r.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(r)&&(this._addPointer(r),r.pointerType==="touch"?this._onTouchStart(r):this._onMouseDown(r)))}function Ob(r){this.enabled!==!1&&(r.pointerType==="touch"?this._onTouchMove(r):this._onMouseMove(r))}function Pb(r){switch(this._removePointer(r),this._pointers.length){case 0:this.domElement.releasePointerCapture(r.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(xm),this.state=Me.NONE;break;case 1:let i=this._pointers[0],n=this._pointerPositions[i];this._onTouchStart({pointerId:i,pageX:n.x,pageY:n.y});break}}function Lb(r){let i;switch(r.button){case 0:i=this.mouseButtons.LEFT;break;case 1:i=this.mouseButtons.MIDDLE;break;case 2:i=this.mouseButtons.RIGHT;break;default:i=-1}switch(i){case ur.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(r),this.state=Me.DOLLY;break;case ur.ROTATE:if(r.ctrlKey||r.metaKey||r.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(r),this.state=Me.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(r),this.state=Me.ROTATE}break;case ur.PAN:if(r.ctrlKey||r.metaKey||r.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(r),this.state=Me.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(r),this.state=Me.PAN}break;default:this.state=Me.NONE}this.state!==Me.NONE&&this.dispatchEvent(cu)}function Rb(r){switch(this.state){case Me.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(r);break;case Me.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(r);break;case Me.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(r);break}}function kb(r){this.enabled===!1||this.enableZoom===!1||this.state!==Me.NONE||(r.preventDefault(),this.dispatchEvent(cu),this._handleMouseWheel(this._customWheelEvent(r)),this.dispatchEvent(xm))}function Db(r){this.enabled!==!1&&this._handleKeyDown(r)}function Fb(r){switch(this._trackPointer(r),this._pointers.length){case 1:switch(this.touches.ONE){case cr.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(r),this.state=Me.TOUCH_ROTATE;break;case cr.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(r),this.state=Me.TOUCH_PAN;break;default:this.state=Me.NONE}break;case 2:switch(this.touches.TWO){case cr.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(r),this.state=Me.TOUCH_DOLLY_PAN;break;case cr.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(r),this.state=Me.TOUCH_DOLLY_ROTATE;break;default:this.state=Me.NONE}break;default:this.state=Me.NONE}this.state!==Me.NONE&&this.dispatchEvent(cu)}function Bb(r){switch(this._trackPointer(r),this.state){case Me.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(r),this.update();break;case Me.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(r),this.update();break;case Me.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(r),this.update();break;case Me.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(r),this.update();break;default:this.state=Me.NONE}}function Vb(r){this.enabled!==!1&&r.preventDefault()}function Gb(r){r.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function Wb(r){r.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}var $b=r=>({background:r});function Ub(r,i){if(r&1){let n=$e();b(0,"div",1)(1,"div")(2,"p"),B(3),w()(),b(4,"div",2),oe(5,"div",3),b(6,"div",4)(7,"div")(8,"p-inputnumber",5),Z("ngModelChange",function(s){k(n);let l=W();return J(l.max,s)||(l.max=s),D(s)}),G("ngModelChange",function(){k(n);let s=W();return D(s.onExtermeValuesChanged())}),w()(),b(9,"div"),B(10),Fp(11,"number"),w(),b(12,"div")(13,"p-inputnumber",6),Z("ngModelChange",function(s){k(n);let l=W();return J(l.min,s)||(l.min=s),D(s)}),G("ngModelChange",function(){k(n);let s=W();return D(s.onExtermeValuesChanged())}),w()()()()()}if(r&2){let n=W();R(3),Ns("Max disp: ",n.maxDisp,""),R(2),q("ngStyle",Dp(10,$b,n.gradient)),R(3),X("ngModel",n.max),q("useGrouping",!1),R(2),Be(Bp(11,7,n.middle,"1.2-2")),R(3),X("ngModel",n.min),q("useGrouping",!1)}}var Xs=class r{subscription;legendService=Ae(em);detector=Ae(rn);gradient="";min=0;middle=0;max=0;maxDisp=0;visible=!1;constructor(){}ngOnDestroy(){this.subscription?.unsubscribe()}ngOnInit(){this.subscription=this.legendService.extremeValuesChanged.pipe(Fe(i=>this.visible=!(i.maxStress===0&&i.minStress==0)),Fe(()=>this.detector.detectChanges()),Is(i=>i.maxStress!==0&&i.minStress!==0),Fe(i=>this.max=i.maxStress),Fe(i=>this.min=i.minStress),Fe(i=>this.middle=(i.maxStress+i.minStress)/2),Fe(i=>this.maxDisp=i.maxDisp),po(()=>this.legendService.getColorRange()),Fe(i=>this.buildGradient(i)),Fe(()=>this.detector.detectChanges())).subscribe(),this.detector.detectChanges()}onExtermeValuesChanged(){Number.isFinite(this.min)&&Number.isFinite(this.max)&&this.min<this.max&&(this.middle=(this.max+this.min)/2,this.legendService.setLegendChanged(this.min,this.max))}buildGradient(i){let n=i.reverse().join(", ");this.gradient=`linear-gradient(to bottom, ${n})`}static \u0275fac=function(n){return new(n||r)};static \u0275cmp=je({type:r,selectors:[["app-legend"]],decls:1,vars:1,consts:[["class","legend",4,"ngIf"],[1,"legend"],[1,"flex"],[1,"gradient-map",3,"ngStyle"],[1,"flex","justify-between","flex-col","mx-1"],["mode","decimal","inputId","legend_max",3,"ngModelChange","ngModel","useGrouping"],["mode","decimal","inputId","legend_min",3,"ngModelChange","ngModel","useGrouping"]],template:function(n,o){n&1&&mn(0,Ub,14,12,"div",0),n&2&&q("ngIf",o.visible)},dependencies:[ze,Xe,Ze,Or,ot,Je,tt,st,He,In,Nn,at,nt,lt,ut,it,et,ct,ft,pt,mt,dt,ht,rt,gt,_t,yt,wt,Qe,bt,Ct,Wp,Gp,Vp],styles:[".legend[_ngcontent-%COMP%]{position:relative}.legend[_ngcontent-%COMP%]   .gradient-map[_ngcontent-%COMP%]{height:300px;width:50px}"],changeDetection:0})};var Js=class r{detector=Ae(rn);view3dService=Ae(Ls);sub;config;model={selectedLoadCase:this.config?.loadCases?this.config.loadCases[0]:"",selectedResultType:this.config?.resultTypes?this.config.resultTypes[0]:null,displacementScaleFactor:1};ngOnInit(){return Se(this,null,function*(){this.sub=this.view3dService.menuConfigurationChanged.subscribe(i=>{this.config=i,this.model.selectedLoadCase=this.config.loadCases[0],this.model.selectedResultType=this.config.resultTypes?this.config.resultTypes[0]:null,this.detector.detectChanges()}),yield this.onChange()})}ngOnDestroy(){this.sub?.unsubscribe()}onChange(){return Se(this,null,function*(){yield this.view3dService.setConfiguration(this.model)})}static \u0275fac=function(n){return new(n||r)};static \u0275cmp=je({type:r,selectors:[["app-view3d-menu"]],decls:16,vars:8,consts:[[1,"grid","grid-cols-12","gap-2","auto-rows-max","mt-1","mb-1"],[1,"col-span-3"],["for","in_result_type",1,"font-semibold"],["id","in_result_type","placeholder","Select result",3,"ngModelChange","options","ngModel"],["for","in_load_case",1,"font-semibold"],["id","in_load_case","placeholder","Select load case",3,"ngModelChange","options","ngModel"],[1,"font-semibold"],["id","Displacement_scale","mode","decimal","inputId","minmax-buttons",3,"ngModelChange","ngModel","showButtons","min","max"]],template:function(n,o){n&1&&(b(0,"div",0)(1,"div",1)(2,"p-fluid")(3,"p",2),B(4,"Result type"),w(),b(5,"p-select",3),Z("ngModelChange",function(l){return J(o.model.selectedResultType,l)||(o.model.selectedResultType=l),l}),G("ngModelChange",function(){return o.onChange()}),w()()(),b(6,"div",1)(7,"p-fluid")(8,"p",4),B(9,"Load Case"),w(),b(10,"p-select",5),Z("ngModelChange",function(l){return J(o.model.selectedLoadCase,l)||(o.model.selectedLoadCase=l),l}),G("ngModelChange",function(){return o.onChange()}),w()()(),b(11,"div",1)(12,"p-fluid")(13,"p",6),B(14,"Displacement scale"),w(),b(15,"p-inputnumber",7),Z("ngModelChange",function(l){return J(o.model.displacementScaleFactor,l)||(o.model.displacementScaleFactor=l),l}),G("ngModelChange",function(){return o.onChange()}),w()()()()),n&2&&(R(5),q("options",o.config==null?null:o.config.resultTypes),X("ngModel",o.model.selectedResultType),R(5),q("options",o.config==null?null:o.config.loadCases),X("ngModel",o.model.selectedLoadCase),R(5),X("ngModel",o.model.displacementScaleFactor),q("showButtons",!0)("min",0)("max",100))},dependencies:[ze,Xe,Ze,Or,$s,ot,Je,tt,st,He,In,Nn,at,nt,lt,ut,it,Pr,et,ct,ft,pt,mt,dt,ht,rt,gt,_t,yt,wt,Qe,bt,Ct],encapsulation:2,changeDetection:0})};var Kb=["canvasView3d"],Yb=["view3d_tooltip"],qb="white",Zs=class r{canvasContainer=ru("canvasView3d");tooltipRef=ru("view3d_tooltip");tooltip;view3DService=Ae(Ls);zone=Ae(Np);frameId;scene;camera;renderer;orbitControls;raycaster=new zp;ngAfterViewInit(){this.initThreeJs(),this.animate()}ngOnInit(){}ngOnDestroy(){cancelAnimationFrame(this.frameId),this.renderer?.dispose(),this.orbitControls?.dispose()}onResize(){let i=this.canvasContainer();if(!i){console.error("Canvas element not found");return}let n=i.nativeElement.clientWidth,o=i.nativeElement.clientHeight;this.camera.aspect=n/o,this.camera.updateProjectionMatrix(),this.renderer.setSize(n,o)}onMouseMove(i){i.preventDefault();let n=this.view3DService.getMeshForRaycasting();if(!n)return;let o=this.renderer.domElement.getBoundingClientRect(),s=new Bt;s.x=(i.clientX-o.left)/o.width*2-1,s.y=-((i.clientY-o.top)/o.height)*2+1,this.raycaster.setFromCamera(s,this.camera);let l=this.raycaster.intersectObject(n);if(l.length>0){let c=l[0],d=Math.floor(c.faceIndex/1),_=this.view3DService.getResults(d).map(T=>`<b>${T.nodeIndex}: ${T.value}</b><br/> `).reduce((T,M)=>`${T}${M}`,"");this.tooltip.style.display="block",this.tooltip.style.left=`${i.offsetX+8}px`,this.tooltip.style.top=`${i.offsetY+8}px`,this.tooltip.innerHTML=_}else this.tooltip.style.display="none"}initThreeJs(){this.scene=new jp;let i=this.canvasContainer();if(!i){console.error("Canvas element not found");return}let n=i.nativeElement,o=1,s=n.clientWidth-1,l=o*n.clientWidth;this.camera=new qp(75,s/l,.01,1e6),this.camera.position.z=10,this.camera.position.x=0,this.camera.position.y=0,this.renderer=new Zp,this.scene.background=new Yp(qb),this.renderer.setSize(s,l),i.nativeElement.appendChild(this.renderer.domElement);let c=new Xp(500);this.scene.add(c),this.orbitControls=new zs(this.camera,this.renderer.domElement),this.view3DService.injectScene(this.scene),this.tooltip=this.tooltipRef()?.nativeElement,this.tooltip.style.position="absolute",this.tooltip.style.background="rgba(0,0,0,0.8)",this.tooltip.style.color="#fff",this.tooltip.style.padding="4px 8px",this.tooltip.style.borderRadius="4px",this.tooltip.style.pointerEvents="none",this.tooltip.style.display="none",this.tooltip.style.fontFamily="monospace"}animate=()=>{this.frameId=this.zone.runOutsideAngular(()=>requestAnimationFrame(this.animate)),this.orbitControls.update(),this.renderer.render(this.scene,this.camera)};static \u0275fac=function(n){return new(n||r)};static \u0275cmp=je({type:r,selectors:[["app-view3d"]],viewQuery:function(n,o){n&1&&(ou(o.canvasContainer,Kb,5),ou(o.tooltipRef,Yb,5)),n&2&&Rp(2)},hostBindings:function(n,o){n&1&&G("resize",function(){return o.onResize()},!1,Op)},decls:8,vars:0,consts:[["canvasView3d",""],["view3d_tooltip",""],[1,"container",2,"width","100%","height","90vh","display","flex","position","relative",3,"mousemove"],[1,"legend"]],template:function(n,o){if(n&1){let s=$e();b(0,"div"),oe(1,"app-view3d-menu"),w(),b(2,"div",2,0),G("mousemove",function(c){return k(s),D(o.onMouseMove(c))}),b(4,"div",3),oe(5,"app-legend"),w(),oe(6,"div",null,1),w()}},dependencies:[Xs,Js,ze,Xe,Ze,ot,Je,tt,st,He,at,nt,lt,ut,it,et,ct,ft,pt,mt,dt,ht,rt,gt,_t,yt,wt,Qe,bt,Ct],styles:[".container[_ngcontent-%COMP%]{position:relative}.container[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]{position:absolute;top:0;left:0}"]})};var Qs=Symbol.for("yaml.alias"),ea=Symbol.for("yaml.document"),hn=Symbol.for("yaml.map"),fu=Symbol.for("yaml.pair"),jt=Symbol.for("yaml.scalar"),zn=Symbol.for("yaml.seq"),Lt=Symbol.for("yaml.node.type"),on=r=>!!r&&typeof r=="object"&&r[Lt]===Qs,gn=r=>!!r&&typeof r=="object"&&r[Lt]===ea,_n=r=>!!r&&typeof r=="object"&&r[Lt]===hn,he=r=>!!r&&typeof r=="object"&&r[Lt]===fu,ce=r=>!!r&&typeof r=="object"&&r[Lt]===jt,yn=r=>!!r&&typeof r=="object"&&r[Lt]===zn;function we(r){if(r&&typeof r=="object")switch(r[Lt]){case hn:case zn:return!0}return!1}function _e(r){if(r&&typeof r=="object")switch(r[Lt]){case Qs:case hn:case jt:case zn:return!0}return!1}var ta=r=>(ce(r)||we(r))&&!!r.anchor;var Gt=Symbol("break visit"),Tm=Symbol("skip children"),Pn=Symbol("remove node");function Ln(r,i){let n=Em(i);gn(r)?Rr(null,r.contents,n,Object.freeze([r]))===Pn&&(r.contents=null):Rr(null,r,n,Object.freeze([]))}Ln.BREAK=Gt;Ln.SKIP=Tm;Ln.REMOVE=Pn;function Rr(r,i,n,o){let s=Am(r,i,n,o);if(_e(s)||he(s))return Im(r,o,s),Rr(r,s,n,o);if(typeof s!="symbol"){if(we(i)){o=Object.freeze(o.concat(i));for(let l=0;l<i.items.length;++l){let c=Rr(l,i.items[l],n,o);if(typeof c=="number")l=c-1;else{if(c===Gt)return Gt;c===Pn&&(i.items.splice(l,1),l-=1)}}}else if(he(i)){o=Object.freeze(o.concat(i));let l=Rr("key",i.key,n,o);if(l===Gt)return Gt;l===Pn&&(i.key=null);let c=Rr("value",i.value,n,o);if(c===Gt)return Gt;c===Pn&&(i.value=null)}}return s}function na(r,i){return Se(this,null,function*(){let n=Em(i);gn(r)?(yield kr(null,r.contents,n,Object.freeze([r])))===Pn&&(r.contents=null):yield kr(null,r,n,Object.freeze([]))})}na.BREAK=Gt;na.SKIP=Tm;na.REMOVE=Pn;function kr(r,i,n,o){return Se(this,null,function*(){let s=yield Am(r,i,n,o);if(_e(s)||he(s))return Im(r,o,s),kr(r,s,n,o);if(typeof s!="symbol"){if(we(i)){o=Object.freeze(o.concat(i));for(let l=0;l<i.items.length;++l){let c=yield kr(l,i.items[l],n,o);if(typeof c=="number")l=c-1;else{if(c===Gt)return Gt;c===Pn&&(i.items.splice(l,1),l-=1)}}}else if(he(i)){o=Object.freeze(o.concat(i));let l=yield kr("key",i.key,n,o);if(l===Gt)return Gt;l===Pn&&(i.key=null);let c=yield kr("value",i.value,n,o);if(c===Gt)return Gt;c===Pn&&(i.value=null)}}return s})}function Em(r){return typeof r=="object"&&(r.Collection||r.Node||r.Value)?Object.assign({Alias:r.Node,Map:r.Node,Scalar:r.Node,Seq:r.Node},r.Value&&{Map:r.Value,Scalar:r.Value,Seq:r.Value},r.Collection&&{Map:r.Collection,Seq:r.Collection},r):r}function Am(r,i,n,o){if(typeof n=="function")return n(r,i,o);if(_n(i))return n.Map?.(r,i,o);if(yn(i))return n.Seq?.(r,i,o);if(he(i))return n.Pair?.(r,i,o);if(ce(i))return n.Scalar?.(r,i,o);if(on(i))return n.Alias?.(r,i,o)}function Im(r,i,n){let o=i[i.length-1];if(we(o))o.items[r]=n;else if(he(o))r==="key"?o.key=n:o.value=n;else if(gn(o))o.contents=n;else{let s=on(o)?"alias":"scalar";throw new Error(`Cannot replace node with ${s} parent`)}}var jb={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},Hb=r=>r.replace(/[!,[\]{}]/g,i=>jb[i]),Dr=(()=>{class r{constructor(n,o){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},r.defaultYaml,n),this.tags=Object.assign({},r.defaultTags,o)}clone(){let n=new r(this.yaml,this.tags);return n.docStart=this.docStart,n}atDocument(){let n=new r(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:r.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},r.defaultTags);break}return n}add(n,o){this.atNextDocument&&(this.yaml={explicit:r.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},r.defaultTags),this.atNextDocument=!1);let s=n.trim().split(/[ \t]+/),l=s.shift();switch(l){case"%TAG":{if(s.length!==2&&(o(0,"%TAG directive should contain exactly two parts"),s.length<2))return!1;let[c,d]=s;return this.tags[c]=d,!0}case"%YAML":{if(this.yaml.explicit=!0,s.length!==1)return o(0,"%YAML directive should contain exactly one part"),!1;let[c]=s;if(c==="1.1"||c==="1.2")return this.yaml.version=c,!0;{let d=/^\d+\.\d+$/.test(c);return o(6,`Unsupported YAML version ${c}`,d),!1}}default:return o(0,`Unknown directive ${l}`,!0),!1}}tagName(n,o){if(n==="!")return"!";if(n[0]!=="!")return o(`Not a valid tag: ${n}`),null;if(n[1]==="<"){let d=n.slice(2,-1);return d==="!"||d==="!!"?(o(`Verbatim tags aren't resolved, so ${n} is invalid.`),null):(n[n.length-1]!==">"&&o("Verbatim tags must end with a >"),d)}let[,s,l]=n.match(/^(.*!)([^!]*)$/s);l||o(`The ${n} tag has no suffix`);let c=this.tags[s];if(c)try{return c+decodeURIComponent(l)}catch(d){return o(String(d)),null}return s==="!"?n:(o(`Could not resolve tag: ${n}`),null)}tagString(n){for(let[o,s]of Object.entries(this.tags))if(n.startsWith(s))return o+Hb(n.substring(s.length));return n[0]==="!"?n:`!<${n}>`}toString(n){let o=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],s=Object.entries(this.tags),l;if(n&&s.length>0&&_e(n.contents)){let c={};Ln(n.contents,(d,h)=>{_e(h)&&h.tag&&(c[h.tag]=!0)}),l=Object.keys(c)}else l=[];for(let[c,d]of s)c==="!!"&&d==="tag:yaml.org,2002:"||(!n||l.some(h=>h.startsWith(d)))&&o.push(`%TAG ${c} ${d}`);return o.join(`
`)}}return r.defaultYaml={explicit:!1,version:"1.2"},r.defaultTags={"!!":"tag:yaml.org,2002:"},r})();function ia(r){if(/[\x00-\x19\s,[\]{}]/.test(r)){let n=`Anchor must not contain whitespace or control characters: ${JSON.stringify(r)}`;throw new Error(n)}return!0}function pu(r){let i=new Set;return Ln(r,{Value(n,o){o.anchor&&i.add(o.anchor)}}),i}function mu(r,i){for(let n=1;;++n){let o=`${r}${n}`;if(!i.has(o))return o}}function Nm(r,i){let n=[],o=new Map,s=null;return{onAnchor:l=>{n.push(l),s??(s=pu(r));let c=mu(i,s);return s.add(c),c},setAnchors:()=>{for(let l of n){let c=o.get(l);if(typeof c=="object"&&c.anchor&&(ce(c.node)||we(c.node)))c.node.anchor=c.anchor;else{let d=new Error("Failed to resolve repeated object (this should not happen)");throw d.source=l,d}}},sourceObjects:o}}function Yi(r,i,n,o){if(o&&typeof o=="object")if(Array.isArray(o))for(let s=0,l=o.length;s<l;++s){let c=o[s],d=Yi(r,o,String(s),c);d===void 0?delete o[s]:d!==c&&(o[s]=d)}else if(o instanceof Map)for(let s of Array.from(o.keys())){let l=o.get(s),c=Yi(r,o,s,l);c===void 0?o.delete(s):c!==l&&o.set(s,c)}else if(o instanceof Set)for(let s of Array.from(o)){let l=Yi(r,o,s,s);l===void 0?o.delete(s):l!==s&&(o.delete(s),o.add(l))}else for(let[s,l]of Object.entries(o)){let c=Yi(r,o,s,l);c===void 0?delete o[s]:c!==l&&(o[s]=c)}return r.call(i,n,o)}function Ke(r,i,n){if(Array.isArray(r))return r.map((o,s)=>Ke(o,String(s),n));if(r&&typeof r.toJSON=="function"){if(!n||!ta(r))return r.toJSON(i,n);let o={aliasCount:0,count:1,res:void 0};n.anchors.set(r,o),n.onCreate=l=>{o.res=l,delete n.onCreate};let s=r.toJSON(i,n);return n.onCreate&&n.onCreate(s),s}return typeof r=="bigint"&&!n?.keep?Number(r):r}var qi=class{constructor(i){Object.defineProperty(this,Lt,{value:i})}clone(){let i=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(i.range=this.range.slice()),i}toJS(i,{mapAsMap:n,maxAliasCount:o,onAnchor:s,reviver:l}={}){if(!gn(i))throw new TypeError("A document argument is required");let c={anchors:new Map,doc:i,keep:!0,mapAsMap:n===!0,mapKeyWarned:!1,maxAliasCount:typeof o=="number"?o:100},d=Ke(this,"",c);if(typeof s=="function")for(let{count:h,res:_}of c.anchors.values())s(_,h);return typeof l=="function"?Yi(l,{"":d},"",d):d}};var Xn=class extends qi{constructor(i){super(Qs),this.source=i,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(i,n){let o;n?.aliasResolveCache?o=n.aliasResolveCache:(o=[],Ln(i,{Node:(l,c)=>{(on(c)||ta(c))&&o.push(c)}}),n&&(n.aliasResolveCache=o));let s;for(let l of o){if(l===this)break;l.anchor===this.source&&(s=l)}return s}toJSON(i,n){if(!n)return{source:this.source};let{anchors:o,doc:s,maxAliasCount:l}=n,c=this.resolve(s,n);if(!c){let h=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(h)}let d=o.get(c);if(d||(Ke(c,null,n),d=o.get(c)),!d||d.res===void 0){let h="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(h)}if(l>=0&&(d.count+=1,d.aliasCount===0&&(d.aliasCount=ra(s,c,o)),d.count*d.aliasCount>l)){let h="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(h)}return d.res}toString(i,n,o){let s=`*${this.source}`;if(i){if(ia(this.source),i.options.verifyAliasOrder&&!i.anchors.has(this.source)){let l=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(l)}if(i.implicitKey)return`${s} `}return s}};function ra(r,i,n){if(on(i)){let o=i.resolve(r),s=n&&o&&n.get(o);return s?s.count*s.aliasCount:0}else if(we(i)){let o=0;for(let s of i.items){let l=ra(r,s,n);l>o&&(o=l)}return o}else if(he(i)){let o=ra(r,i.key,n),s=ra(r,i.value,n);return Math.max(o,s)}return 1}var oa=r=>!r||typeof r!="function"&&typeof r!="object",Q=(()=>{class r extends qi{constructor(n){super(jt),this.value=n}toJSON(n,o){return o?.keep?this.value:Ke(this.value,n,o)}toString(){return String(this.value)}}return r.BLOCK_FOLDED="BLOCK_FOLDED",r.BLOCK_LITERAL="BLOCK_LITERAL",r.PLAIN="PLAIN",r.QUOTE_DOUBLE="QUOTE_DOUBLE",r.QUOTE_SINGLE="QUOTE_SINGLE",r})();var zb="tag:yaml.org,2002:";function Xb(r,i,n){if(i){let o=n.filter(l=>l.tag===i),s=o.find(l=>!l.format)??o[0];if(!s)throw new Error(`Tag ${i} not found`);return s}return n.find(o=>o.identify?.(r)&&!o.format)}function Jn(r,i,n){if(gn(r)&&(r=r.contents),_e(r))return r;if(he(r)){let M=n.schema[hn].createNode?.(n.schema,null,n);return M.items.push(r),M}(r instanceof String||r instanceof Number||r instanceof Boolean||typeof BigInt<"u"&&r instanceof BigInt)&&(r=r.valueOf());let{aliasDuplicateObjects:o,onAnchor:s,onTagObj:l,schema:c,sourceObjects:d}=n,h;if(o&&r&&typeof r=="object"){if(h=d.get(r),h)return h.anchor??(h.anchor=s(r)),new Xn(h.anchor);h={anchor:null,node:null},d.set(r,h)}i?.startsWith("!!")&&(i=zb+i.slice(2));let _=Xb(r,i,c.tags);if(!_){if(r&&typeof r.toJSON=="function"&&(r=r.toJSON()),!r||typeof r!="object"){let M=new Q(r);return h&&(h.node=M),M}_=r instanceof Map?c[hn]:Symbol.iterator in Object(r)?c[zn]:c[hn]}l&&(l(_),delete n.onTagObj);let T=_?.createNode?_.createNode(n.schema,r,n):typeof _?.nodeClass?.from=="function"?_.nodeClass.from(n.schema,r,n):new Q(r);return i?T.tag=i:_.default||(T.tag=_.tag),h&&(h.node=T),T}function ho(r,i,n){let o=n;for(let s=i.length-1;s>=0;--s){let l=i[s];if(typeof l=="number"&&Number.isInteger(l)&&l>=0){let c=[];c[l]=o,o=c}else o=new Map([[l,o]])}return Jn(o,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:r,sourceObjects:new Map})}var Br=r=>r==null||typeof r=="object"&&!!r[Symbol.iterator]().next().done,Fr=class extends qi{constructor(i,n){super(i),Object.defineProperty(this,"schema",{value:n,configurable:!0,enumerable:!1,writable:!0})}clone(i){let n=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return i&&(n.schema=i),n.items=n.items.map(o=>_e(o)||he(o)?o.clone(i):o),this.range&&(n.range=this.range.slice()),n}addIn(i,n){if(Br(i))this.add(n);else{let[o,...s]=i,l=this.get(o,!0);if(we(l))l.addIn(s,n);else if(l===void 0&&this.schema)this.set(o,ho(this.schema,s,n));else throw new Error(`Expected YAML collection at ${o}. Remaining path: ${s}`)}}deleteIn(i){let[n,...o]=i;if(o.length===0)return this.delete(n);let s=this.get(n,!0);if(we(s))return s.deleteIn(o);throw new Error(`Expected YAML collection at ${n}. Remaining path: ${o}`)}getIn(i,n){let[o,...s]=i,l=this.get(o,!0);return s.length===0?!n&&ce(l)?l.value:l:we(l)?l.getIn(s,n):void 0}hasAllNullValues(i){return this.items.every(n=>{if(!he(n))return!1;let o=n.value;return o==null||i&&ce(o)&&o.value==null&&!o.commentBefore&&!o.comment&&!o.tag})}hasIn(i){let[n,...o]=i;if(o.length===0)return this.has(n);let s=this.get(n,!0);return we(s)?s.hasIn(o):!1}setIn(i,n){let[o,...s]=i;if(s.length===0)this.set(o,n);else{let l=this.get(o,!0);if(we(l))l.setIn(s,n);else if(l===void 0&&this.schema)this.set(o,ho(this.schema,s,n));else throw new Error(`Expected YAML collection at ${o}. Remaining path: ${s}`)}}};var Om=r=>r.replace(/^(?!$)(?: $)?/gm,"#");function sn(r,i){return/^\n+$/.test(r)?r.substring(1):i?r.replace(/^(?! *$)/gm,i):r}var Rn=(r,i,n)=>r.endsWith(`
`)?sn(n,i):n.includes(`
`)?`
`+sn(n,i):(r.endsWith(" ")?"":" ")+n;var du="flow",sa="block",go="quoted";function _o(r,i,n="flow",{indentAtStart:o,lineWidth:s=80,minContentWidth:l=20,onFold:c,onOverflow:d}={}){if(!s||s<0)return r;s<l&&(l=0);let h=Math.max(1+l,1+s-i.length);if(r.length<=h)return r;let _=[],T={},M=s-i.length;typeof o=="number"&&(o>s-Math.max(2,l)?_.push(0):M=s-o);let S,I,V=!1,x=-1,L=-1,U=-1;n===sa&&(x=Pm(r,x,i.length),x!==-1&&(M=x+h));for(let j;j=r[x+=1];){if(n===go&&j==="\\"){switch(L=x,r[x+1]){case"x":x+=3;break;case"u":x+=5;break;case"U":x+=9;break;default:x+=1}U=x}if(j===`
`)n===sa&&(x=Pm(r,x,i.length)),M=x+i.length+h,S=void 0;else{if(j===" "&&I&&I!==" "&&I!==`
`&&I!=="	"){let te=r[x+1];te&&te!==" "&&te!==`
`&&te!=="	"&&(S=x)}if(x>=M)if(S)_.push(S),M=S+h,S=void 0;else if(n===go){for(;I===" "||I==="	";)I=j,j=r[x+=1],V=!0;let te=x>U+1?x-2:L-1;if(T[te])return r;_.push(te),T[te]=!0,M=te+h,S=void 0}else V=!0}I=j}if(V&&d&&d(),_.length===0)return r;c&&c();let K=r.slice(0,_[0]);for(let j=0;j<_.length;++j){let te=_[j],ee=_[j+1]||r.length;te===0?K=`
${i}${r.slice(0,ee)}`:(n===go&&T[te]&&(K+=`${r[te]}\\`),K+=`
${i}${r.slice(te+1,ee)}`)}return K}function Pm(r,i,n){let o=i,s=i+1,l=r[s];for(;l===" "||l==="	";)if(i<s+n)l=r[++i];else{do l=r[++i];while(l&&l!==`
`);o=i,s=i+1,l=r[s]}return o}var la=(r,i)=>({indentAtStart:i?r.indent.length:r.indentAtStart,lineWidth:r.options.lineWidth,minContentWidth:r.options.minContentWidth}),ua=r=>/^(%|---|\.\.\.)/m.test(r);function Jb(r,i,n){if(!i||i<0)return!1;let o=i-n,s=r.length;if(s<=o)return!1;for(let l=0,c=0;l<s;++l)if(r[l]===`
`){if(l-c>o)return!0;if(c=l+1,s-c<=o)return!1}return!0}function yo(r,i){let n=JSON.stringify(r);if(i.options.doubleQuotedAsJSON)return n;let{implicitKey:o}=i,s=i.options.doubleQuotedMinMultiLineLength,l=i.indent||(ua(r)?"  ":""),c="",d=0;for(let h=0,_=n[h];_;_=n[++h])if(_===" "&&n[h+1]==="\\"&&n[h+2]==="n"&&(c+=n.slice(d,h)+"\\ ",h+=1,d=h,_="\\"),_==="\\")switch(n[h+1]){case"u":{c+=n.slice(d,h);let T=n.substr(h+2,4);switch(T){case"0000":c+="\\0";break;case"0007":c+="\\a";break;case"000b":c+="\\v";break;case"001b":c+="\\e";break;case"0085":c+="\\N";break;case"00a0":c+="\\_";break;case"2028":c+="\\L";break;case"2029":c+="\\P";break;default:T.substr(0,2)==="00"?c+="\\x"+T.substr(2):c+=n.substr(h,6)}h+=5,d=h+1}break;case"n":if(o||n[h+2]==='"'||n.length<s)h+=1;else{for(c+=n.slice(d,h)+`

`;n[h+2]==="\\"&&n[h+3]==="n"&&n[h+4]!=='"';)c+=`
`,h+=2;c+=l,n[h+2]===" "&&(c+="\\"),h+=1,d=h+1}break;default:h+=1}return c=d?c+n.slice(d):n,o?c:_o(c,l,go,la(i,!1))}function hu(r,i){if(i.options.singleQuote===!1||i.implicitKey&&r.includes(`
`)||/[ \t]\n|\n[ \t]/.test(r))return yo(r,i);let n=i.indent||(ua(r)?"  ":""),o="'"+r.replace(/'/g,"''").replace(/\n+/g,`$&
${n}`)+"'";return i.implicitKey?o:_o(o,n,du,la(i,!1))}function Vr(r,i){let{singleQuote:n}=i.options,o;if(n===!1)o=yo;else{let s=r.includes('"'),l=r.includes("'");s&&!l?o=hu:l&&!s?o=yo:o=n?hu:yo}return o(r,i)}var gu;try{gu=new RegExp(`(^|(?<!
))
+(?!
|$)`,"g")}catch{gu=/\n+(?!\n|$)/g}function aa({comment:r,type:i,value:n},o,s,l){let{blockQuote:c,commentString:d,lineWidth:h}=o.options;if(!c||/\n[\t ]+$/.test(n))return Vr(n,o);let _=o.indent||(o.forceBlockIndent||ua(n)?"  ":""),T=c==="literal"?!0:c==="folded"||i===Q.BLOCK_FOLDED?!1:i===Q.BLOCK_LITERAL?!0:!Jb(n,h,_.length);if(!n)return T?`|
`:`>
`;let M,S;for(S=n.length;S>0;--S){let ee=n[S-1];if(ee!==`
`&&ee!=="	"&&ee!==" ")break}let I=n.substring(S),V=I.indexOf(`
`);V===-1?M="-":n===I||V!==I.length-1?(M="+",l&&l()):M="",I&&(n=n.slice(0,-I.length),I[I.length-1]===`
`&&(I=I.slice(0,-1)),I=I.replace(gu,`$&${_}`));let x=!1,L,U=-1;for(L=0;L<n.length;++L){let ee=n[L];if(ee===" ")x=!0;else if(ee===`
`)U=L;else break}let K=n.substring(0,U<L?U+1:L);K&&(n=n.substring(K.length),K=K.replace(/\n+/g,`$&${_}`));let te=(x?_?"2":"1":"")+M;if(r&&(te+=" "+d(r.replace(/ ?[\r\n]+/g," ")),s&&s()),!T){let ee=n.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${_}`),se=!1,be=la(o,!0);c!=="folded"&&i!==Q.BLOCK_FOLDED&&(be.onOverflow=()=>{se=!0});let H=_o(`${K}${ee}${I}`,_,sa,be);if(!se)return`>${te}
${_}${H}`}return n=n.replace(/\n+/g,`$&${_}`),`|${te}
${_}${K}${n}${I}`}function Zb(r,i,n,o){let{type:s,value:l}=r,{actualString:c,implicitKey:d,indent:h,indentStep:_,inFlow:T}=i;if(d&&l.includes(`
`)||T&&/[[\]{},]/.test(l))return Vr(l,i);if(/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(l))return d||T||!l.includes(`
`)?Vr(l,i):aa(r,i,n,o);if(!d&&!T&&s!==Q.PLAIN&&l.includes(`
`))return aa(r,i,n,o);if(ua(l)){if(h==="")return i.forceBlockIndent=!0,aa(r,i,n,o);if(d&&h===_)return Vr(l,i)}let M=l.replace(/\n+/g,`$&
${h}`);if(c){let S=x=>x.default&&x.tag!=="tag:yaml.org,2002:str"&&x.test?.test(M),{compat:I,tags:V}=i.doc.schema;if(V.some(S)||I?.some(S))return Vr(l,i)}return d?M:_o(M,h,du,la(i,!1))}function fr(r,i,n,o){let{implicitKey:s,inFlow:l}=i,c=typeof r.value=="string"?r:Object.assign({},r,{value:String(r.value)}),{type:d}=r;d!==Q.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(c.value)&&(d=Q.QUOTE_DOUBLE);let h=T=>{switch(T){case Q.BLOCK_FOLDED:case Q.BLOCK_LITERAL:return s||l?Vr(c.value,i):aa(c,i,n,o);case Q.QUOTE_DOUBLE:return yo(c.value,i);case Q.QUOTE_SINGLE:return hu(c.value,i);case Q.PLAIN:return Zb(c,i,n,o);default:return null}},_=h(d);if(_===null){let{defaultKeyType:T,defaultStringType:M}=i.options,S=s&&T||M;if(_=h(S),_===null)throw new Error(`Unsupported default string type ${S}`)}return _}function ca(r,i){let n=Object.assign({blockQuote:!0,commentString:Om,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},r.schema.toStringOptions,i),o;switch(n.collectionStyle){case"block":o=!1;break;case"flow":o=!0;break;default:o=null}return{anchors:new Set,doc:r,flowCollectionPadding:n.flowCollectionPadding?" ":"",indent:"",indentStep:typeof n.indent=="number"?" ".repeat(n.indent):"  ",inFlow:o,options:n}}function Qb(r,i){if(i.tag){let s=r.filter(l=>l.tag===i.tag);if(s.length>0)return s.find(l=>l.format===i.format)??s[0]}let n,o;if(ce(i)){o=i.value;let s=r.filter(l=>l.identify?.(o));if(s.length>1){let l=s.filter(c=>c.test);l.length>0&&(s=l)}n=s.find(l=>l.format===i.format)??s.find(l=>!l.format)}else o=i,n=r.find(s=>s.nodeClass&&o instanceof s.nodeClass);if(!n){let s=o?.constructor?.name??(o===null?"null":typeof o);throw new Error(`Tag not resolved for ${s} value`)}return n}function eC(r,i,{anchors:n,doc:o}){if(!o.directives)return"";let s=[],l=(ce(r)||we(r))&&r.anchor;l&&ia(l)&&(n.add(l),s.push(`&${l}`));let c=r.tag??(i.default?null:i.tag);return c&&s.push(o.directives.tagString(c)),s.join(" ")}function Zn(r,i,n,o){if(he(r))return r.toString(i,n,o);if(on(r)){if(i.doc.directives)return r.toString(i);if(i.resolvedAliases?.has(r))throw new TypeError("Cannot stringify circular structure without alias nodes");i.resolvedAliases?i.resolvedAliases.add(r):i.resolvedAliases=new Set([r]),r=r.resolve(i.doc)}let s,l=_e(r)?r:i.doc.createNode(r,{onTagObj:h=>s=h});s??(s=Qb(i.doc.schema.tags,l));let c=eC(l,s,i);c.length>0&&(i.indentAtStart=(i.indentAtStart??0)+c.length+1);let d=typeof s.stringify=="function"?s.stringify(l,i,n,o):ce(l)?fr(l,i,n,o):l.toString(i,n,o);return c?ce(l)||d[0]==="{"||d[0]==="["?`${c} ${d}`:`${c}
${i.indent}${d}`:d}function Lm({key:r,value:i},n,o,s){let{allNullValues:l,doc:c,indent:d,indentStep:h,options:{commentString:_,indentSeq:T,simpleKeys:M}}=n,S=_e(r)&&r.comment||null;if(M){if(S)throw new Error("With simple keys, key nodes cannot have comments");if(we(r)||!_e(r)&&typeof r=="object"){let be="With simple keys, collection cannot be used as a key value";throw new Error(be)}}let I=!M&&(!r||S&&i==null&&!n.inFlow||we(r)||(ce(r)?r.type===Q.BLOCK_FOLDED||r.type===Q.BLOCK_LITERAL:typeof r=="object"));n=Object.assign({},n,{allNullValues:!1,implicitKey:!I&&(M||!l),indent:d+h});let V=!1,x=!1,L=Zn(r,n,()=>V=!0,()=>x=!0);if(!I&&!n.inFlow&&L.length>1024){if(M)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");I=!0}if(n.inFlow){if(l||i==null)return V&&o&&o(),L===""?"?":I?`? ${L}`:L}else if(l&&!M||i==null&&I)return L=`? ${L}`,S&&!V?L+=Rn(L,n.indent,_(S)):x&&s&&s(),L;V&&(S=null),I?(S&&(L+=Rn(L,n.indent,_(S))),L=`? ${L}
${d}:`):(L=`${L}:`,S&&(L+=Rn(L,n.indent,_(S))));let U,K,j;_e(i)?(U=!!i.spaceBefore,K=i.commentBefore,j=i.comment):(U=!1,K=null,j=null,i&&typeof i=="object"&&(i=c.createNode(i))),n.implicitKey=!1,!I&&!S&&ce(i)&&(n.indentAtStart=L.length+1),x=!1,!T&&h.length>=2&&!n.inFlow&&!I&&yn(i)&&!i.flow&&!i.tag&&!i.anchor&&(n.indent=n.indent.substring(2));let te=!1,ee=Zn(i,n,()=>te=!0,()=>x=!0),se=" ";if(S||U||K){if(se=U?`
`:"",K){let be=_(K);se+=`
${sn(be,n.indent)}`}ee===""&&!n.inFlow?se===`
`&&(se=`

`):se+=`
${n.indent}`}else if(!I&&we(i)){let be=ee[0],H=ee.indexOf(`
`),Re=H!==-1,Mn=n.inFlow??i.flow??i.items.length===0;if(Re||!Mn){let ei=!1;if(Re&&(be==="&"||be==="!")){let Oe=ee.indexOf(" ");be==="&"&&Oe!==-1&&Oe<H&&ee[Oe+1]==="!"&&(Oe=ee.indexOf(" ",Oe+1)),(Oe===-1||H<Oe)&&(ei=!0)}ei||(se=`
${n.indent}`)}}else(ee===""||ee[0]===`
`)&&(se="");return L+=se+ee,n.inFlow?te&&o&&o():j&&!te?L+=Rn(L,n.indent,_(j)):x&&s&&s(),L}function fa(r,i){(r==="debug"||r==="warn")&&console.warn(i)}var pa="<<",wn={identify:r=>r===pa||typeof r=="symbol"&&r.description===pa,default:"key",tag:"tag:yaml.org,2002:merge",test:/^<<$/,resolve:()=>Object.assign(new Q(Symbol(pa)),{addToJSMap:yu}),stringify:()=>pa},Rm=(r,i)=>(wn.identify(i)||ce(i)&&(!i.type||i.type===Q.PLAIN)&&wn.identify(i.value))&&r?.doc.schema.tags.some(n=>n.tag===wn.tag&&n.default);function yu(r,i,n){if(n=r&&on(n)?n.resolve(r.doc):n,yn(n))for(let o of n.items)_u(r,i,o);else if(Array.isArray(n))for(let o of n)_u(r,i,o);else _u(r,i,n)}function _u(r,i,n){let o=r&&on(n)?n.resolve(r.doc):n;if(!_n(o))throw new Error("Merge sources must be maps or map aliases");let s=o.toJSON(null,r,Map);for(let[l,c]of s)i instanceof Map?i.has(l)||i.set(l,c):i instanceof Set?i.add(l):Object.prototype.hasOwnProperty.call(i,l)||Object.defineProperty(i,l,{value:c,writable:!0,enumerable:!0,configurable:!0});return i}function ma(r,i,{key:n,value:o}){if(_e(n)&&n.addToJSMap)n.addToJSMap(r,i,o);else if(Rm(r,n))yu(r,i,o);else{let s=Ke(n,"",r);if(i instanceof Map)i.set(s,Ke(o,s,r));else if(i instanceof Set)i.add(s);else{let l=tC(n,s,r),c=Ke(o,l,r);l in i?Object.defineProperty(i,l,{value:c,writable:!0,enumerable:!0,configurable:!0}):i[l]=c}}return i}function tC(r,i,n){if(i===null)return"";if(typeof i!="object")return String(i);if(_e(r)&&n?.doc){let o=ca(n.doc,{});o.anchors=new Set;for(let l of n.anchors.keys())o.anchors.add(l.anchor);o.inFlow=!0,o.inStringifyKey=!0;let s=r.toString(o);if(!n.mapKeyWarned){let l=JSON.stringify(s);l.length>40&&(l=l.substring(0,36)+'..."'),fa(n.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${l}. Set mapAsMap: true to use object keys.`),n.mapKeyWarned=!0}return s}return JSON.stringify(i)}function Gr(r,i,n){let o=Jn(r,void 0,n),s=Jn(i,void 0,n);return new Le(o,s)}var Le=class r{constructor(i,n=null){Object.defineProperty(this,Lt,{value:fu}),this.key=i,this.value=n}clone(i){let{key:n,value:o}=this;return _e(n)&&(n=n.clone(i)),_e(o)&&(o=o.clone(i)),new r(n,o)}toJSON(i,n){let o=n?.mapAsMap?new Map:{};return ma(n,o,this)}toString(i,n,o){return i?.doc?Lm(this,i,n,o):JSON.stringify(this)}};function ha(r,i,n){return(i.inFlow??r.flow?iC:nC)(r,i,n)}function nC({comment:r,items:i},n,{blockItemPrefix:o,flowChars:s,itemIndent:l,onChompKeep:c,onComment:d}){let{indent:h,options:{commentString:_}}=n,T=Object.assign({},n,{indent:l,type:null}),M=!1,S=[];for(let V=0;V<i.length;++V){let x=i[V],L=null;if(_e(x))!M&&x.spaceBefore&&S.push(""),da(n,S,x.commentBefore,M),x.comment&&(L=x.comment);else if(he(x)){let K=_e(x.key)?x.key:null;K&&(!M&&K.spaceBefore&&S.push(""),da(n,S,K.commentBefore,M))}M=!1;let U=Zn(x,T,()=>L=null,()=>M=!0);L&&(U+=Rn(U,l,_(L))),M&&L&&(M=!1),S.push(o+U)}let I;if(S.length===0)I=s.start+s.end;else{I=S[0];for(let V=1;V<S.length;++V){let x=S[V];I+=x?`
${h}${x}`:`
`}}return r?(I+=`
`+sn(_(r),h),d&&d()):M&&c&&c(),I}function iC({items:r},i,{flowChars:n,itemIndent:o}){let{indent:s,indentStep:l,flowCollectionPadding:c,options:{commentString:d}}=i;o+=l;let h=Object.assign({},i,{indent:o,inFlow:!0,type:null}),_=!1,T=0,M=[];for(let V=0;V<r.length;++V){let x=r[V],L=null;if(_e(x))x.spaceBefore&&M.push(""),da(i,M,x.commentBefore,!1),x.comment&&(L=x.comment);else if(he(x)){let K=_e(x.key)?x.key:null;K&&(K.spaceBefore&&M.push(""),da(i,M,K.commentBefore,!1),K.comment&&(_=!0));let j=_e(x.value)?x.value:null;j?(j.comment&&(L=j.comment),j.commentBefore&&(_=!0)):x.value==null&&K?.comment&&(L=K.comment)}L&&(_=!0);let U=Zn(x,h,()=>L=null);V<r.length-1&&(U+=","),L&&(U+=Rn(U,o,d(L))),!_&&(M.length>T||U.includes(`
`))&&(_=!0),M.push(U),T=M.length}let{start:S,end:I}=n;if(M.length===0)return S+I;if(!_){let V=M.reduce((x,L)=>x+L.length+2,2);_=i.options.lineWidth>0&&V>i.options.lineWidth}if(_){let V=S;for(let x of M)V+=x?`
${l}${s}${x}`:`
`;return`${V}
${s}${I}`}else return`${S}${c}${M.join(" ")}${c}${I}`}function da({indent:r,options:{commentString:i}},n,o,s){if(o&&s&&(o=o.replace(/^\n+/,"")),o){let l=sn(i(o),r);n.push(l.trimStart())}}function ji(r,i){let n=ce(i)?i.value:i;for(let o of r)if(he(o)&&(o.key===i||o.key===n||ce(o.key)&&o.key.value===n))return o}var Ve=class extends Fr{static get tagName(){return"tag:yaml.org,2002:map"}constructor(i){super(hn,i),this.items=[]}static from(i,n,o){let{keepUndefined:s,replacer:l}=o,c=new this(i),d=(h,_)=>{if(typeof l=="function")_=l.call(n,h,_);else if(Array.isArray(l)&&!l.includes(h))return;(_!==void 0||s)&&c.items.push(Gr(h,_,o))};if(n instanceof Map)for(let[h,_]of n)d(h,_);else if(n&&typeof n=="object")for(let h of Object.keys(n))d(h,n[h]);return typeof i.sortMapEntries=="function"&&c.items.sort(i.sortMapEntries),c}add(i,n){let o;he(i)?o=i:!i||typeof i!="object"||!("key"in i)?o=new Le(i,i?.value):o=new Le(i.key,i.value);let s=ji(this.items,o.key),l=this.schema?.sortMapEntries;if(s){if(!n)throw new Error(`Key ${o.key} already set`);ce(s.value)&&oa(o.value)?s.value.value=o.value:s.value=o.value}else if(l){let c=this.items.findIndex(d=>l(o,d)<0);c===-1?this.items.push(o):this.items.splice(c,0,o)}else this.items.push(o)}delete(i){let n=ji(this.items,i);return n?this.items.splice(this.items.indexOf(n),1).length>0:!1}get(i,n){let s=ji(this.items,i)?.value;return(!n&&ce(s)?s.value:s)??void 0}has(i){return!!ji(this.items,i)}set(i,n){this.add(new Le(i,n),!0)}toJSON(i,n,o){let s=o?new o:n?.mapAsMap?new Map:{};n?.onCreate&&n.onCreate(s);for(let l of this.items)ma(n,s,l);return s}toString(i,n,o){if(!i)return JSON.stringify(this);for(let s of this.items)if(!he(s))throw new Error(`Map items must all be pairs; found ${JSON.stringify(s)} instead`);return!i.allNullValues&&this.hasAllNullValues(!1)&&(i=Object.assign({},i,{allNullValues:!0})),ha(this,i,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:i.indent||"",onChompKeep:o,onComment:n})}};var bn={collection:"map",default:!0,nodeClass:Ve,tag:"tag:yaml.org,2002:map",resolve(r,i){return _n(r)||i("Expected a mapping for this tag"),r},createNode:(r,i,n)=>Ve.from(r,i,n)};var xt=class extends Fr{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(i){super(zn,i),this.items=[]}add(i){this.items.push(i)}delete(i){let n=ga(i);return typeof n!="number"?!1:this.items.splice(n,1).length>0}get(i,n){let o=ga(i);if(typeof o!="number")return;let s=this.items[o];return!n&&ce(s)?s.value:s}has(i){let n=ga(i);return typeof n=="number"&&n<this.items.length}set(i,n){let o=ga(i);if(typeof o!="number")throw new Error(`Expected a valid index, not ${i}.`);let s=this.items[o];ce(s)&&oa(n)?s.value=n:this.items[o]=n}toJSON(i,n){let o=[];n?.onCreate&&n.onCreate(o);let s=0;for(let l of this.items)o.push(Ke(l,String(s++),n));return o}toString(i,n,o){return i?ha(this,i,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(i.indent||"")+"  ",onChompKeep:o,onComment:n}):JSON.stringify(this)}static from(i,n,o){let{replacer:s}=o,l=new this(i);if(n&&Symbol.iterator in Object(n)){let c=0;for(let d of n){if(typeof s=="function"){let h=n instanceof Set?d:String(c++);d=s.call(n,h,d)}l.items.push(Jn(d,void 0,o))}}return l}};function ga(r){let i=ce(r)?r.value:r;return i&&typeof i=="string"&&(i=Number(i)),typeof i=="number"&&Number.isInteger(i)&&i>=0?i:null}var Cn={collection:"seq",default:!0,nodeClass:xt,tag:"tag:yaml.org,2002:seq",resolve(r,i){return yn(r)||i("Expected a sequence for this tag"),r},createNode:(r,i,n)=>xt.from(r,i,n)};var Hi={identify:r=>typeof r=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:r=>r,stringify(r,i,n,o){return i=Object.assign({actualString:!0},i),fr(r,i,n,o)}};var pr={identify:r=>r==null,createNode:()=>new Q(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new Q(null),stringify:({source:r},i)=>typeof r=="string"&&pr.test.test(r)?r:i.options.nullStr};var wo={identify:r=>typeof r=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:r=>new Q(r[0]==="t"||r[0]==="T"),stringify({source:r,value:i},n){if(r&&wo.test.test(r)){let o=r[0]==="t"||r[0]==="T";if(i===o)return r}return i?n.options.trueStr:n.options.falseStr}};function Tt({format:r,minFractionDigits:i,tag:n,value:o}){if(typeof o=="bigint")return String(o);let s=typeof o=="number"?o:Number(o);if(!isFinite(s))return isNaN(s)?".nan":s<0?"-.inf":".inf";let l=JSON.stringify(o);if(!r&&i&&(!n||n==="tag:yaml.org,2002:float")&&/^\d/.test(l)){let c=l.indexOf(".");c<0&&(c=l.length,l+=".");let d=i-(l.length-c-1);for(;d-- >0;)l+="0"}return l}var _a={identify:r=>typeof r=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:r=>r.slice(-3).toLowerCase()==="nan"?NaN:r[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Tt},ya={identify:r=>typeof r=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:r=>parseFloat(r),stringify(r){let i=Number(r.value);return isFinite(i)?i.toExponential():Tt(r)}},wa={identify:r=>typeof r=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(r){let i=new Q(parseFloat(r)),n=r.indexOf(".");return n!==-1&&r[r.length-1]==="0"&&(i.minFractionDigits=r.length-n-1),i},stringify:Tt};var ba=r=>typeof r=="bigint"||Number.isInteger(r),wu=(r,i,n,{intAsBigInt:o})=>o?BigInt(r):parseInt(r.substring(i),n);function km(r,i,n){let{value:o}=r;return ba(o)&&o>=0?n+o.toString(i):Tt(r)}var Ca={identify:r=>ba(r)&&r>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(r,i,n)=>wu(r,2,8,n),stringify:r=>km(r,8,"0o")},va={identify:ba,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(r,i,n)=>wu(r,0,10,n),stringify:Tt},Sa={identify:r=>ba(r)&&r>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(r,i,n)=>wu(r,2,16,n),stringify:r=>km(r,16,"0x")};var Dm=[bn,Cn,Hi,pr,wo,Ca,va,Sa,_a,ya,wa];function Fm(r){return typeof r=="bigint"||Number.isInteger(r)}var Ma=({value:r})=>JSON.stringify(r),rC=[{identify:r=>typeof r=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:r=>r,stringify:Ma},{identify:r=>r==null,createNode:()=>new Q(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:Ma},{identify:r=>typeof r=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^true$|^false$/,resolve:r=>r==="true",stringify:Ma},{identify:Fm,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(r,i,{intAsBigInt:n})=>n?BigInt(r):parseInt(r,10),stringify:({value:r})=>Fm(r)?r.toString():JSON.stringify(r)},{identify:r=>typeof r=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:r=>parseFloat(r),stringify:Ma}],oC={default:!0,tag:"",test:/^/,resolve(r,i){return i(`Unresolved plain scalar ${JSON.stringify(r)}`),r}},Bm=[bn,Cn].concat(rC,oC);var bo={identify:r=>r instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(r,i){if(typeof atob=="function"){let n=atob(r.replace(/[\n\r]/g,"")),o=new Uint8Array(n.length);for(let s=0;s<n.length;++s)o[s]=n.charCodeAt(s);return o}else return i("This environment does not support reading binary tags; either Buffer or atob is required"),r},stringify({comment:r,type:i,value:n},o,s,l){if(!n)return"";let c=n,d;if(typeof btoa=="function"){let h="";for(let _=0;_<c.length;++_)h+=String.fromCharCode(c[_]);d=btoa(h)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(i??(i=Q.BLOCK_LITERAL),i!==Q.QUOTE_DOUBLE){let h=Math.max(o.options.lineWidth-o.indent.length,o.options.minContentWidth),_=Math.ceil(d.length/h),T=new Array(_);for(let M=0,S=0;M<_;++M,S+=h)T[M]=d.substr(S,h);d=T.join(i===Q.BLOCK_LITERAL?`
`:" ")}return fr({comment:r,type:i,value:d},o,s,l)}};function bu(r,i){if(yn(r))for(let n=0;n<r.items.length;++n){let o=r.items[n];if(!he(o)){if(_n(o)){o.items.length>1&&i("Each pair must have its own sequence indicator");let s=o.items[0]||new Le(new Q(null));if(o.commentBefore&&(s.key.commentBefore=s.key.commentBefore?`${o.commentBefore}
${s.key.commentBefore}`:o.commentBefore),o.comment){let l=s.value??s.key;l.comment=l.comment?`${o.comment}
${l.comment}`:o.comment}o=s}r.items[n]=he(o)?o:new Le(o)}}else i("Expected a sequence for this tag");return r}function Cu(r,i,n){let{replacer:o}=n,s=new xt(r);s.tag="tag:yaml.org,2002:pairs";let l=0;if(i&&Symbol.iterator in Object(i))for(let c of i){typeof o=="function"&&(c=o.call(i,String(l++),c));let d,h;if(Array.isArray(c))if(c.length===2)d=c[0],h=c[1];else throw new TypeError(`Expected [key, value] tuple: ${c}`);else if(c&&c instanceof Object){let _=Object.keys(c);if(_.length===1)d=_[0],h=c[d];else throw new TypeError(`Expected tuple with one key, not ${_.length} keys`)}else d=c;s.items.push(Gr(d,h,n))}return s}var Co={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:bu,createNode:Cu};var vu=(()=>{class r extends xt{constructor(){super(),this.add=Ve.prototype.add.bind(this),this.delete=Ve.prototype.delete.bind(this),this.get=Ve.prototype.get.bind(this),this.has=Ve.prototype.has.bind(this),this.set=Ve.prototype.set.bind(this),this.tag=r.tag}toJSON(n,o){if(!o)return super.toJSON(n);let s=new Map;o?.onCreate&&o.onCreate(s);for(let l of this.items){let c,d;if(he(l)?(c=Ke(l.key,"",o),d=Ke(l.value,c,o)):c=Ke(l,"",o),s.has(c))throw new Error("Ordered maps must not include duplicate keys");s.set(c,d)}return s}static from(n,o,s){let l=Cu(n,o,s),c=new this;return c.items=l.items,c}}return r.tag="tag:yaml.org,2002:omap",r})(),vo={collection:"seq",identify:r=>r instanceof Map,nodeClass:vu,default:!1,tag:"tag:yaml.org,2002:omap",resolve(r,i){let n=bu(r,i),o=[];for(let{key:s}of n.items)ce(s)&&(o.includes(s.value)?i(`Ordered maps must not include duplicate keys: ${s.value}`):o.push(s.value));return Object.assign(new vu,n)},createNode:(r,i,n)=>vu.from(r,i,n)};function Vm({value:r,source:i},n){return i&&(r?Su:Mu).test.test(i)?i:r?n.options.trueStr:n.options.falseStr}var Su={identify:r=>r===!0,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new Q(!0),stringify:Vm},Mu={identify:r=>r===!1,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/,resolve:()=>new Q(!1),stringify:Vm};var Gm={identify:r=>typeof r=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:r=>r.slice(-3).toLowerCase()==="nan"?NaN:r[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Tt},Wm={identify:r=>typeof r=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:r=>parseFloat(r.replace(/_/g,"")),stringify(r){let i=Number(r.value);return isFinite(i)?i.toExponential():Tt(r)}},$m={identify:r=>typeof r=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(r){let i=new Q(parseFloat(r.replace(/_/g,""))),n=r.indexOf(".");if(n!==-1){let o=r.substring(n+1).replace(/_/g,"");o[o.length-1]==="0"&&(i.minFractionDigits=o.length)}return i},stringify:Tt};var So=r=>typeof r=="bigint"||Number.isInteger(r);function xa(r,i,n,{intAsBigInt:o}){let s=r[0];if((s==="-"||s==="+")&&(i+=1),r=r.substring(i).replace(/_/g,""),o){switch(n){case 2:r=`0b${r}`;break;case 8:r=`0o${r}`;break;case 16:r=`0x${r}`;break}let c=BigInt(r);return s==="-"?BigInt(-1)*c:c}let l=parseInt(r,n);return s==="-"?-1*l:l}function xu(r,i,n){let{value:o}=r;if(So(o)){let s=o.toString(i);return o<0?"-"+n+s.substr(1):n+s}return Tt(r)}var Um={identify:So,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(r,i,n)=>xa(r,2,2,n),stringify:r=>xu(r,2,"0b")},Km={identify:So,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(r,i,n)=>xa(r,1,8,n),stringify:r=>xu(r,8,"0")},Ym={identify:So,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(r,i,n)=>xa(r,0,10,n),stringify:Tt},qm={identify:So,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(r,i,n)=>xa(r,2,16,n),stringify:r=>xu(r,16,"0x")};var Tu=(()=>{class r extends Ve{constructor(n){super(n),this.tag=r.tag}add(n){let o;he(n)?o=n:n&&typeof n=="object"&&"key"in n&&"value"in n&&n.value===null?o=new Le(n.key,null):o=new Le(n,null),ji(this.items,o.key)||this.items.push(o)}get(n,o){let s=ji(this.items,n);return!o&&he(s)?ce(s.key)?s.key.value:s.key:s}set(n,o){if(typeof o!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof o}`);let s=ji(this.items,n);s&&!o?this.items.splice(this.items.indexOf(s),1):!s&&o&&this.items.push(new Le(n))}toJSON(n,o){return super.toJSON(n,o,Set)}toString(n,o,s){if(!n)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},n,{allNullValues:!0}),o,s);throw new Error("Set items must all have null values")}static from(n,o,s){let{replacer:l}=s,c=new this(n);if(o&&Symbol.iterator in Object(o))for(let d of o)typeof l=="function"&&(d=l.call(o,d,d)),c.items.push(Gr(d,null,s));return c}}return r.tag="tag:yaml.org,2002:set",r})(),Mo={collection:"map",identify:r=>r instanceof Set,nodeClass:Tu,default:!1,tag:"tag:yaml.org,2002:set",createNode:(r,i,n)=>Tu.from(r,i,n),resolve(r,i){if(_n(r)){if(r.hasAllNullValues(!0))return Object.assign(new Tu,r);i("Set items must all have null values")}else i("Expected a mapping for this tag");return r}};function Eu(r,i){let n=r[0],o=n==="-"||n==="+"?r.substring(1):r,s=c=>i?BigInt(c):Number(c),l=o.replace(/_/g,"").split(":").reduce((c,d)=>c*s(60)+s(d),s(0));return n==="-"?s(-1)*l:l}function jm(r){let{value:i}=r,n=c=>c;if(typeof i=="bigint")n=c=>BigInt(c);else if(isNaN(i)||!isFinite(i))return Tt(r);let o="";i<0&&(o="-",i*=n(-1));let s=n(60),l=[i%s];return i<60?l.unshift(0):(i=(i-l[0])/s,l.unshift(i%s),i>=60&&(i=(i-l[0])/s,l.unshift(i))),o+l.map(c=>String(c).padStart(2,"0")).join(":").replace(/000000\d*$/,"")}var Ta={identify:r=>typeof r=="bigint"||Number.isInteger(r),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(r,i,{intAsBigInt:n})=>Eu(r,n),stringify:jm},Ea={identify:r=>typeof r=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:r=>Eu(r,!1),stringify:jm},Wr={identify:r=>r instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(r){let i=r.match(Wr.test);if(!i)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");let[,n,o,s,l,c,d]=i.map(Number),h=i[7]?Number((i[7]+"00").substr(1,3)):0,_=Date.UTC(n,o-1,s,l||0,c||0,d||0,h),T=i[8];if(T&&T!=="Z"){let M=Eu(T,!1);Math.abs(M)<30&&(M*=60),_-=6e4*M}return new Date(_)},stringify:({value:r})=>r?.toISOString().replace(/(T00:00:00)?\.000Z$/,"")??""};var Au=[bn,Cn,Hi,pr,Su,Mu,Um,Km,Ym,qm,Gm,Wm,$m,bo,wn,vo,Co,Mo,Ta,Ea,Wr];var Hm=new Map([["core",Dm],["failsafe",[bn,Cn,Hi]],["json",Bm],["yaml11",Au],["yaml-1.1",Au]]),zm={binary:bo,bool:wo,float:wa,floatExp:ya,floatNaN:_a,floatTime:Ea,int:va,intHex:Sa,intOct:Ca,intTime:Ta,map:bn,merge:wn,null:pr,omap:vo,pairs:Co,seq:Cn,set:Mo,timestamp:Wr},Xm={"tag:yaml.org,2002:binary":bo,"tag:yaml.org,2002:merge":wn,"tag:yaml.org,2002:omap":vo,"tag:yaml.org,2002:pairs":Co,"tag:yaml.org,2002:set":Mo,"tag:yaml.org,2002:timestamp":Wr};function Aa(r,i,n){let o=Hm.get(i);if(o&&!r)return n&&!o.includes(wn)?o.concat(wn):o.slice();let s=o;if(!s)if(Array.isArray(r))s=[];else{let l=Array.from(Hm.keys()).filter(c=>c!=="yaml11").map(c=>JSON.stringify(c)).join(", ");throw new Error(`Unknown schema "${i}"; use one of ${l} or define customTags array`)}if(Array.isArray(r))for(let l of r)s=s.concat(l);else typeof r=="function"&&(s=r(s.slice()));return n&&(s=s.concat(wn)),s.reduce((l,c)=>{let d=typeof c=="string"?zm[c]:c;if(!d){let h=JSON.stringify(c),_=Object.keys(zm).map(T=>JSON.stringify(T)).join(", ");throw new Error(`Unknown custom tag ${h}; use one of ${_}`)}return l.includes(d)||l.push(d),l},[])}var sC=(r,i)=>r.key<i.key?-1:r.key>i.key?1:0,xo=class r{constructor({compat:i,customTags:n,merge:o,resolveKnownTags:s,schema:l,sortMapEntries:c,toStringDefaults:d}){this.compat=Array.isArray(i)?Aa(i,"compat"):i?Aa(null,i):null,this.name=typeof l=="string"&&l||"core",this.knownTags=s?Xm:{},this.tags=Aa(n,this.name,o),this.toStringOptions=d??null,Object.defineProperty(this,hn,{value:bn}),Object.defineProperty(this,jt,{value:Hi}),Object.defineProperty(this,zn,{value:Cn}),this.sortMapEntries=typeof c=="function"?c:c===!0?sC:null}clone(){let i=Object.create(r.prototype,Object.getOwnPropertyDescriptors(this));return i.tags=this.tags.slice(),i}};function Jm(r,i){let n=[],o=i.directives===!0;if(i.directives!==!1&&r.directives){let h=r.directives.toString(r);h?(n.push(h),o=!0):r.directives.docStart&&(o=!0)}o&&n.push("---");let s=ca(r,i),{commentString:l}=s.options;if(r.commentBefore){n.length!==1&&n.unshift("");let h=l(r.commentBefore);n.unshift(sn(h,""))}let c=!1,d=null;if(r.contents){if(_e(r.contents)){if(r.contents.spaceBefore&&o&&n.push(""),r.contents.commentBefore){let T=l(r.contents.commentBefore);n.push(sn(T,""))}s.forceBlockIndent=!!r.comment,d=r.contents.comment}let h=d?void 0:()=>c=!0,_=Zn(r.contents,s,()=>d=null,h);d&&(_+=Rn(_,"",l(d))),(_[0]==="|"||_[0]===">")&&n[n.length-1]==="---"?n[n.length-1]=`--- ${_}`:n.push(_)}else n.push(Zn(r.contents,s));if(r.directives?.docEnd)if(r.comment){let h=l(r.comment);h.includes(`
`)?(n.push("..."),n.push(sn(h,""))):n.push(`... ${h}`)}else n.push("...");else{let h=r.comment;h&&c&&(h=h.replace(/^\n+/,"")),h&&((!c||d)&&n[n.length-1]!==""&&n.push(""),n.push(sn(l(h),"")))}return n.join(`
`)+`
`}var Qn=class r{constructor(i,n,o){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,Lt,{value:ea});let s=null;typeof n=="function"||Array.isArray(n)?s=n:o===void 0&&n&&(o=n,n=void 0);let l=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,stringKeys:!1,uniqueKeys:!0,version:"1.2"},o);this.options=l;let{version:c}=l;o?._directives?(this.directives=o._directives.atDocument(),this.directives.yaml.explicit&&(c=this.directives.yaml.version)):this.directives=new Dr({version:c}),this.setSchema(c,o),this.contents=i===void 0?null:this.createNode(i,s,o)}clone(){let i=Object.create(r.prototype,{[Lt]:{value:ea}});return i.commentBefore=this.commentBefore,i.comment=this.comment,i.errors=this.errors.slice(),i.warnings=this.warnings.slice(),i.options=Object.assign({},this.options),this.directives&&(i.directives=this.directives.clone()),i.schema=this.schema.clone(),i.contents=_e(this.contents)?this.contents.clone(i.schema):this.contents,this.range&&(i.range=this.range.slice()),i}add(i){$r(this.contents)&&this.contents.add(i)}addIn(i,n){$r(this.contents)&&this.contents.addIn(i,n)}createAlias(i,n){if(!i.anchor){let o=pu(this);i.anchor=!n||o.has(n)?mu(n||"a",o):n}return new Xn(i.anchor)}createNode(i,n,o){let s;if(typeof n=="function")i=n.call({"":i},"",i),s=n;else if(Array.isArray(n)){let L=K=>typeof K=="number"||K instanceof String||K instanceof Number,U=n.filter(L).map(String);U.length>0&&(n=n.concat(U)),s=n}else o===void 0&&n&&(o=n,n=void 0);let{aliasDuplicateObjects:l,anchorPrefix:c,flow:d,keepUndefined:h,onTagObj:_,tag:T}=o??{},{onAnchor:M,setAnchors:S,sourceObjects:I}=Nm(this,c||"a"),V={aliasDuplicateObjects:l??!0,keepUndefined:h??!1,onAnchor:M,onTagObj:_,replacer:s,schema:this.schema,sourceObjects:I},x=Jn(i,T,V);return d&&we(x)&&(x.flow=!0),S(),x}createPair(i,n,o={}){let s=this.createNode(i,null,o),l=this.createNode(n,null,o);return new Le(s,l)}delete(i){return $r(this.contents)?this.contents.delete(i):!1}deleteIn(i){return Br(i)?this.contents==null?!1:(this.contents=null,!0):$r(this.contents)?this.contents.deleteIn(i):!1}get(i,n){return we(this.contents)?this.contents.get(i,n):void 0}getIn(i,n){return Br(i)?!n&&ce(this.contents)?this.contents.value:this.contents:we(this.contents)?this.contents.getIn(i,n):void 0}has(i){return we(this.contents)?this.contents.has(i):!1}hasIn(i){return Br(i)?this.contents!==void 0:we(this.contents)?this.contents.hasIn(i):!1}set(i,n){this.contents==null?this.contents=ho(this.schema,[i],n):$r(this.contents)&&this.contents.set(i,n)}setIn(i,n){Br(i)?this.contents=n:this.contents==null?this.contents=ho(this.schema,Array.from(i),n):$r(this.contents)&&this.contents.setIn(i,n)}setSchema(i,n={}){typeof i=="number"&&(i=String(i));let o;switch(i){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new Dr({version:"1.1"}),o={resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=i:this.directives=new Dr({version:i}),o={resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,o=null;break;default:{let s=JSON.stringify(i);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${s}`)}}if(n.schema instanceof Object)this.schema=n.schema;else if(o)this.schema=new xo(Object.assign(o,n));else throw new Error("With a null YAML version, the { schema: Schema } option is required")}toJS({json:i,jsonArg:n,mapAsMap:o,maxAliasCount:s,onAnchor:l,reviver:c}={}){let d={anchors:new Map,doc:this,keep:!i,mapAsMap:o===!0,mapKeyWarned:!1,maxAliasCount:typeof s=="number"?s:100},h=Ke(this.contents,n??"",d);if(typeof l=="function")for(let{count:_,res:T}of d.anchors.values())l(T,_);return typeof c=="function"?Yi(c,{"":h},"",h):h}toJSON(i,n){return this.toJS({json:!0,jsonArg:i,mapAsMap:!1,onAnchor:n})}toString(i={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in i&&(!Number.isInteger(i.indent)||Number(i.indent)<=0)){let n=JSON.stringify(i.indent);throw new Error(`"indent" option must be a positive integer, not ${n}`)}return Jm(this,i)}};function $r(r){if(we(r))return!0;throw new Error("Expected a YAML collection as document contents")}var To=class extends Error{constructor(i,n,o,s){super(),this.name=i,this.code=o,this.message=s,this.pos=n}},vn=class extends To{constructor(i,n,o){super("YAMLParseError",i,n,o)}},Eo=class extends To{constructor(i,n,o){super("YAMLWarning",i,n,o)}},Iu=(r,i)=>n=>{if(n.pos[0]===-1)return;n.linePos=n.pos.map(d=>i.linePos(d));let{line:o,col:s}=n.linePos[0];n.message+=` at line ${o}, column ${s}`;let l=s-1,c=r.substring(i.lineStarts[o-1],i.lineStarts[o]).replace(/[\n\r]+$/,"");if(l>=60&&c.length>80){let d=Math.min(l-39,c.length-79);c="\u2026"+c.substring(d),l-=d-1}if(c.length>80&&(c=c.substring(0,79)+"\u2026"),o>1&&/^ *$/.test(c.substring(0,l))){let d=r.substring(i.lineStarts[o-2],i.lineStarts[o-1]);d.length>80&&(d=d.substring(0,79)+`\u2026
`),c=d+c}if(/[^ ]/.test(c)){let d=1,h=n.linePos[1];h&&h.line===o&&h.col>s&&(d=Math.max(1,Math.min(h.col-s,80-l)));let _=" ".repeat(l)+"^".repeat(d);n.message+=`:

${c}
${_}
`}};function kn(r,{flow:i,indicator:n,next:o,offset:s,onError:l,parentIndent:c,startOnNewline:d}){let h=!1,_=d,T=d,M="",S="",I=!1,V=!1,x=null,L=null,U=null,K=null,j=null,te=null,ee=null;for(let H of r)switch(V&&(H.type!=="space"&&H.type!=="newline"&&H.type!=="comma"&&l(H.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),V=!1),x&&(_&&H.type!=="comment"&&H.type!=="newline"&&l(x,"TAB_AS_INDENT","Tabs are not allowed as indentation"),x=null),H.type){case"space":!i&&(n!=="doc-start"||o?.type!=="flow-collection")&&H.source.includes("	")&&(x=H),T=!0;break;case"comment":{T||l(H,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");let Re=H.source.substring(1)||" ";M?M+=S+Re:M=Re,S="",_=!1;break}case"newline":_?M?M+=H.source:(!te||n!=="seq-item-ind")&&(h=!0):S+=H.source,_=!0,I=!0,(L||U)&&(K=H),T=!0;break;case"anchor":L&&l(H,"MULTIPLE_ANCHORS","A node can have at most one anchor"),H.source.endsWith(":")&&l(H.offset+H.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),L=H,ee??(ee=H.offset),_=!1,T=!1,V=!0;break;case"tag":{U&&l(H,"MULTIPLE_TAGS","A node can have at most one tag"),U=H,ee??(ee=H.offset),_=!1,T=!1,V=!0;break}case n:(L||U)&&l(H,"BAD_PROP_ORDER",`Anchors and tags must be after the ${H.source} indicator`),te&&l(H,"UNEXPECTED_TOKEN",`Unexpected ${H.source} in ${i??"collection"}`),te=H,_=n==="seq-item-ind"||n==="explicit-key-ind",T=!1;break;case"comma":if(i){j&&l(H,"UNEXPECTED_TOKEN",`Unexpected , in ${i}`),j=H,_=!1,T=!1;break}default:l(H,"UNEXPECTED_TOKEN",`Unexpected ${H.type} token`),_=!1,T=!1}let se=r[r.length-1],be=se?se.offset+se.source.length:s;return V&&o&&o.type!=="space"&&o.type!=="newline"&&o.type!=="comma"&&(o.type!=="scalar"||o.source!=="")&&l(o.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),x&&(_&&x.indent<=c||o?.type==="block-map"||o?.type==="block-seq")&&l(x,"TAB_AS_INDENT","Tabs are not allowed as indentation"),{comma:j,found:te,spaceBefore:h,comment:M,hasNewline:I,anchor:L,tag:U,newlineAfterProp:K,end:be,start:ee??be}}function zi(r){if(!r)return null;switch(r.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(r.source.includes(`
`))return!0;if(r.end){for(let i of r.end)if(i.type==="newline")return!0}return!1;case"flow-collection":for(let i of r.items){for(let n of i.start)if(n.type==="newline")return!0;if(i.sep){for(let n of i.sep)if(n.type==="newline")return!0}if(zi(i.key)||zi(i.value))return!0}return!1;default:return!0}}function Ao(r,i,n){if(i?.type==="flow-collection"){let o=i.end[0];o.indent===r&&(o.source==="]"||o.source==="}")&&zi(i)&&n(o,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}function Ia(r,i,n){let{uniqueKeys:o}=r.options;if(o===!1)return!1;let s=typeof o=="function"?o:(l,c)=>l===c||ce(l)&&ce(c)&&l.value===c.value;return i.some(l=>s(l.key,n))}var Zm="All mapping items must start at the same column";function Qm({composeNode:r,composeEmptyNode:i},n,o,s,l){let c=l?.nodeClass??Ve,d=new c(n.schema);n.atRoot&&(n.atRoot=!1);let h=o.offset,_=null;for(let T of o.items){let{start:M,key:S,sep:I,value:V}=T,x=kn(M,{indicator:"explicit-key-ind",next:S??I?.[0],offset:h,onError:s,parentIndent:o.indent,startOnNewline:!0}),L=!x.found;if(L){if(S&&(S.type==="block-seq"?s(h,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in S&&S.indent!==o.indent&&s(h,"BAD_INDENT",Zm)),!x.anchor&&!x.tag&&!I){_=x.end,x.comment&&(d.comment?d.comment+=`
`+x.comment:d.comment=x.comment);continue}(x.newlineAfterProp||zi(S))&&s(S??M[M.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}else x.found?.indent!==o.indent&&s(h,"BAD_INDENT",Zm);n.atKey=!0;let U=x.end,K=S?r(n,S,x,s):i(n,U,M,null,x,s);n.schema.compat&&Ao(o.indent,S,s),n.atKey=!1,Ia(n,d.items,K)&&s(U,"DUPLICATE_KEY","Map keys must be unique");let j=kn(I??[],{indicator:"map-value-ind",next:V,offset:K.range[2],onError:s,parentIndent:o.indent,startOnNewline:!S||S.type==="block-scalar"});if(h=j.end,j.found){L&&(V?.type==="block-map"&&!j.hasNewline&&s(h,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),n.options.strict&&x.start<j.found.offset-1024&&s(K.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));let te=V?r(n,V,j,s):i(n,h,I,null,j,s);n.schema.compat&&Ao(o.indent,V,s),h=te.range[2];let ee=new Le(K,te);n.options.keepSourceTokens&&(ee.srcToken=T),d.items.push(ee)}else{L&&s(K.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),j.comment&&(K.comment?K.comment+=`
`+j.comment:K.comment=j.comment);let te=new Le(K);n.options.keepSourceTokens&&(te.srcToken=T),d.items.push(te)}}return _&&_<h&&s(_,"IMPOSSIBLE","Map comment with trailing content"),d.range=[o.offset,h,_??h],d}function ed({composeNode:r,composeEmptyNode:i},n,o,s,l){let c=l?.nodeClass??xt,d=new c(n.schema);n.atRoot&&(n.atRoot=!1),n.atKey&&(n.atKey=!1);let h=o.offset,_=null;for(let{start:T,value:M}of o.items){let S=kn(T,{indicator:"seq-item-ind",next:M,offset:h,onError:s,parentIndent:o.indent,startOnNewline:!0});if(!S.found)if(S.anchor||S.tag||M)M&&M.type==="block-seq"?s(S.end,"BAD_INDENT","All sequence items must start at the same column"):s(h,"MISSING_CHAR","Sequence item without - indicator");else{_=S.end,S.comment&&(d.comment=S.comment);continue}let I=M?r(n,M,S,s):i(n,S.end,T,null,S,s);n.schema.compat&&Ao(o.indent,M,s),h=I.range[2],d.items.push(I)}return d.range=[o.offset,h,_??h],d}function Dn(r,i,n,o){let s="";if(r){let l=!1,c="";for(let d of r){let{source:h,type:_}=d;switch(_){case"space":l=!0;break;case"comment":{n&&!l&&o(d,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");let T=h.substring(1)||" ";s?s+=c+T:s=T,c="";break}case"newline":s&&(c+=h),l=!0;break;default:o(d,"UNEXPECTED_TOKEN",`Unexpected ${_} at node end`)}i+=h.length}}return{comment:s,offset:i}}var Nu="Block collections are not allowed within flow collections",Ou=r=>r&&(r.type==="block-map"||r.type==="block-seq");function td({composeNode:r,composeEmptyNode:i},n,o,s,l){let c=o.start.source==="{",d=c?"flow map":"flow sequence",h=l?.nodeClass??(c?Ve:xt),_=new h(n.schema);_.flow=!0;let T=n.atRoot;T&&(n.atRoot=!1),n.atKey&&(n.atKey=!1);let M=o.offset+o.start.source.length;for(let L=0;L<o.items.length;++L){let U=o.items[L],{start:K,key:j,sep:te,value:ee}=U,se=kn(K,{flow:d,indicator:"explicit-key-ind",next:j??te?.[0],offset:M,onError:s,parentIndent:o.indent,startOnNewline:!1});if(!se.found){if(!se.anchor&&!se.tag&&!te&&!ee){L===0&&se.comma?s(se.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${d}`):L<o.items.length-1&&s(se.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${d}`),se.comment&&(_.comment?_.comment+=`
`+se.comment:_.comment=se.comment),M=se.end;continue}!c&&n.options.strict&&zi(j)&&s(j,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(L===0)se.comma&&s(se.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${d}`);else if(se.comma||s(se.start,"MISSING_CHAR",`Missing , between ${d} items`),se.comment){let be="";e:for(let H of K)switch(H.type){case"comma":case"space":break;case"comment":be=H.source.substring(1);break e;default:break e}if(be){let H=_.items[_.items.length-1];he(H)&&(H=H.value??H.key),H.comment?H.comment+=`
`+be:H.comment=be,se.comment=se.comment.substring(be.length+1)}}if(!c&&!te&&!se.found){let be=ee?r(n,ee,se,s):i(n,se.end,te,null,se,s);_.items.push(be),M=be.range[2],Ou(ee)&&s(be.range,"BLOCK_IN_FLOW",Nu)}else{n.atKey=!0;let be=se.end,H=j?r(n,j,se,s):i(n,be,K,null,se,s);Ou(j)&&s(H.range,"BLOCK_IN_FLOW",Nu),n.atKey=!1;let Re=kn(te??[],{flow:d,indicator:"map-value-ind",next:ee,offset:H.range[2],onError:s,parentIndent:o.indent,startOnNewline:!1});if(Re.found){if(!c&&!se.found&&n.options.strict){if(te)for(let Oe of te){if(Oe===Re.found)break;if(Oe.type==="newline"){s(Oe,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}se.start<Re.found.offset-1024&&s(Re.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else ee&&("source"in ee&&ee.source&&ee.source[0]===":"?s(ee,"MISSING_CHAR",`Missing space after : in ${d}`):s(Re.start,"MISSING_CHAR",`Missing , or : between ${d} items`));let Mn=ee?r(n,ee,Re,s):Re.found?i(n,Re.end,te,null,Re,s):null;Mn?Ou(ee)&&s(Mn.range,"BLOCK_IN_FLOW",Nu):Re.comment&&(H.comment?H.comment+=`
`+Re.comment:H.comment=Re.comment);let ei=new Le(H,Mn);if(n.options.keepSourceTokens&&(ei.srcToken=U),c){let Oe=_;Ia(n,Oe.items,H)&&s(be,"DUPLICATE_KEY","Map keys must be unique"),Oe.items.push(ei)}else{let Oe=new Ve(n.schema);Oe.flow=!0,Oe.items.push(ei);let ko=(Mn??H).range;Oe.range=[H.range[0],ko[1],ko[2]],_.items.push(Oe)}M=Mn?Mn.range[2]:Re.end}}let S=c?"}":"]",[I,...V]=o.end,x=M;if(I&&I.source===S)x=I.offset+I.source.length;else{let L=d[0].toUpperCase()+d.substring(1),U=T?`${L} must end with a ${S}`:`${L} in block collection must be sufficiently indented and end with a ${S}`;s(M,T?"MISSING_CHAR":"BAD_INDENT",U),I&&I.source.length!==1&&V.unshift(I)}if(V.length>0){let L=Dn(V,x,n.options.strict,s);L.comment&&(_.comment?_.comment+=`
`+L.comment:_.comment=L.comment),_.range=[o.offset,x,L.offset]}else _.range=[o.offset,x,x];return _}function Pu(r,i,n,o,s,l){let c=n.type==="block-map"?Qm(r,i,n,o,l):n.type==="block-seq"?ed(r,i,n,o,l):td(r,i,n,o,l),d=c.constructor;return s==="!"||s===d.tagName?(c.tag=d.tagName,c):(s&&(c.tag=s),c)}function nd(r,i,n,o,s){let l=o.tag,c=l?i.directives.tagName(l.source,S=>s(l,"TAG_RESOLVE_FAILED",S)):null;if(n.type==="block-seq"){let{anchor:S,newlineAfterProp:I}=o,V=S&&l?S.offset>l.offset?S:l:S??l;V&&(!I||I.offset<V.offset)&&s(V,"MISSING_CHAR","Missing newline after block sequence props")}let d=n.type==="block-map"?"map":n.type==="block-seq"?"seq":n.start.source==="{"?"map":"seq";if(!l||!c||c==="!"||c===Ve.tagName&&d==="map"||c===xt.tagName&&d==="seq")return Pu(r,i,n,s,c);let h=i.schema.tags.find(S=>S.tag===c&&S.collection===d);if(!h){let S=i.schema.knownTags[c];if(S&&S.collection===d)i.schema.tags.push(Object.assign({},S,{default:!1})),h=S;else return S?s(l,"BAD_COLLECTION_TYPE",`${S.tag} used for ${d} collection, but expects ${S.collection??"scalar"}`,!0):s(l,"TAG_RESOLVE_FAILED",`Unresolved tag: ${c}`,!0),Pu(r,i,n,s,c)}let _=Pu(r,i,n,s,c,h),T=h.resolve?.(_,S=>s(l,"TAG_RESOLVE_FAILED",S),i.options)??_,M=_e(T)?T:new Q(T);return M.range=_.range,M.tag=c,h?.format&&(M.format=h.format),M}function Lu(r,i,n){let o=i.offset,s=aC(i,r.options.strict,n);if(!s)return{value:"",type:null,comment:"",range:[o,o,o]};let l=s.mode===">"?Q.BLOCK_FOLDED:Q.BLOCK_LITERAL,c=i.source?lC(i.source):[],d=c.length;for(let x=c.length-1;x>=0;--x){let L=c[x][1];if(L===""||L==="\r")d=x;else break}if(d===0){let x=s.chomp==="+"&&c.length>0?`
`.repeat(Math.max(1,c.length-1)):"",L=o+s.length;return i.source&&(L+=i.source.length),{value:x,type:l,comment:s.comment,range:[o,L,L]}}let h=i.indent+s.indent,_=i.offset+s.length,T=0;for(let x=0;x<d;++x){let[L,U]=c[x];if(U===""||U==="\r")s.indent===0&&L.length>h&&(h=L.length);else{L.length<h&&n(_+L.length,"MISSING_CHAR","Block scalars with more-indented leading empty lines must use an explicit indentation indicator"),s.indent===0&&(h=L.length),T=x,h===0&&!r.atRoot&&n(_,"BAD_INDENT","Block scalar values in collections must be indented");break}_+=L.length+U.length+1}for(let x=c.length-1;x>=d;--x)c[x][0].length>h&&(d=x+1);let M="",S="",I=!1;for(let x=0;x<T;++x)M+=c[x][0].slice(h)+`
`;for(let x=T;x<d;++x){let[L,U]=c[x];_+=L.length+U.length+1;let K=U[U.length-1]==="\r";if(K&&(U=U.slice(0,-1)),U&&L.length<h){let te=`Block scalar lines must not be less indented than their ${s.indent?"explicit indentation indicator":"first line"}`;n(_-U.length-(K?2:1),"BAD_INDENT",te),L=""}l===Q.BLOCK_LITERAL?(M+=S+L.slice(h)+U,S=`
`):L.length>h||U[0]==="	"?(S===" "?S=`
`:!I&&S===`
`&&(S=`

`),M+=S+L.slice(h)+U,S=`
`,I=!0):U===""?S===`
`?M+=`
`:S=`
`:(M+=S+U,S=" ",I=!1)}switch(s.chomp){case"-":break;case"+":for(let x=d;x<c.length;++x)M+=`
`+c[x][0].slice(h);M[M.length-1]!==`
`&&(M+=`
`);break;default:M+=`
`}let V=o+s.length+i.source.length;return{value:M,type:l,comment:s.comment,range:[o,V,V]}}function aC({offset:r,props:i},n,o){if(i[0].type!=="block-scalar-header")return o(i[0],"IMPOSSIBLE","Block scalar header not found"),null;let{source:s}=i[0],l=s[0],c=0,d="",h=-1;for(let S=1;S<s.length;++S){let I=s[S];if(!d&&(I==="-"||I==="+"))d=I;else{let V=Number(I);!c&&V?c=V:h===-1&&(h=r+S)}}h!==-1&&o(h,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${s}`);let _=!1,T="",M=s.length;for(let S=1;S<i.length;++S){let I=i[S];switch(I.type){case"space":_=!0;case"newline":M+=I.source.length;break;case"comment":n&&!_&&o(I,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),M+=I.source.length,T=I.source.substring(1);break;case"error":o(I,"UNEXPECTED_TOKEN",I.message),M+=I.source.length;break;default:{let V=`Unexpected token in block scalar header: ${I.type}`;o(I,"UNEXPECTED_TOKEN",V);let x=I.source;x&&typeof x=="string"&&(M+=x.length)}}}return{mode:l,indent:c,chomp:d,comment:T,length:M}}function lC(r){let i=r.split(/\n( *)/),n=i[0],o=n.match(/^( *)/),l=[o?.[1]?[o[1],n.slice(o[1].length)]:["",n]];for(let c=1;c<i.length;c+=2)l.push([i[c],i[c+1]]);return l}function Ru(r,i,n){let{offset:o,type:s,source:l,end:c}=r,d,h,_=(S,I,V)=>n(o+S,I,V);switch(s){case"scalar":d=Q.PLAIN,h=uC(l,_);break;case"single-quoted-scalar":d=Q.QUOTE_SINGLE,h=cC(l,_);break;case"double-quoted-scalar":d=Q.QUOTE_DOUBLE,h=fC(l,_);break;default:return n(r,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${s}`),{value:"",type:null,comment:"",range:[o,o+l.length,o+l.length]}}let T=o+l.length,M=Dn(c,T,i,n);return{value:h,type:d,comment:M.comment,range:[o,T,M.offset]}}function uC(r,i){let n="";switch(r[0]){case"	":n="a tab character";break;case",":n="flow indicator character ,";break;case"%":n="directive indicator character %";break;case"|":case">":{n=`block scalar indicator ${r[0]}`;break}case"@":case"`":{n=`reserved character ${r[0]}`;break}}return n&&i(0,"BAD_SCALAR_START",`Plain value cannot start with ${n}`),id(r)}function cC(r,i){return(r[r.length-1]!=="'"||r.length===1)&&i(r.length,"MISSING_CHAR","Missing closing 'quote"),id(r.slice(1,-1)).replace(/''/g,"'")}function id(r){let i,n;try{i=new RegExp(`(.*?)(?<![ 	])[ 	]*\r?
`,"sy"),n=new RegExp(`[ 	]*(.*?)(?:(?<![ 	])[ 	]*)?\r?
`,"sy")}catch{i=/(.*?)[ \t]*\r?\n/sy,n=/[ \t]*(.*?)[ \t]*\r?\n/sy}let o=i.exec(r);if(!o)return r;let s=o[1],l=" ",c=i.lastIndex;for(n.lastIndex=c;o=n.exec(r);)o[1]===""?l===`
`?s+=l:l=`
`:(s+=l+o[1],l=" "),c=n.lastIndex;let d=/[ \t]*(.*)/sy;return d.lastIndex=c,o=d.exec(r),s+l+(o?.[1]??"")}function fC(r,i){let n="";for(let o=1;o<r.length-1;++o){let s=r[o];if(!(s==="\r"&&r[o+1]===`
`))if(s===`
`){let{fold:l,offset:c}=pC(r,o);n+=l,o=c}else if(s==="\\"){let l=r[++o],c=mC[l];if(c)n+=c;else if(l===`
`)for(l=r[o+1];l===" "||l==="	";)l=r[++o+1];else if(l==="\r"&&r[o+1]===`
`)for(l=r[++o+1];l===" "||l==="	";)l=r[++o+1];else if(l==="x"||l==="u"||l==="U"){let d={x:2,u:4,U:8}[l];n+=dC(r,o+1,d,i),o+=d}else{let d=r.substr(o-1,2);i(o-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${d}`),n+=d}}else if(s===" "||s==="	"){let l=o,c=r[o+1];for(;c===" "||c==="	";)c=r[++o+1];c!==`
`&&!(c==="\r"&&r[o+2]===`
`)&&(n+=o>l?r.slice(l,o+1):s)}else n+=s}return(r[r.length-1]!=='"'||r.length===1)&&i(r.length,"MISSING_CHAR",'Missing closing "quote'),n}function pC(r,i){let n="",o=r[i+1];for(;(o===" "||o==="	"||o===`
`||o==="\r")&&!(o==="\r"&&r[i+2]!==`
`);)o===`
`&&(n+=`
`),i+=1,o=r[i+1];return n||(n=" "),{fold:n,offset:i}}var mC={0:"\0",a:"\x07",b:"\b",e:"\x1B",f:"\f",n:`
`,r:"\r",t:"	",v:"\v",N:"\x85",_:"\xA0",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","	":"	"};function dC(r,i,n,o){let s=r.substr(i,n),c=s.length===n&&/^[0-9a-fA-F]+$/.test(s)?parseInt(s,16):NaN;if(isNaN(c)){let d=r.substr(i-2,n+2);return o(i-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${d}`),d}return String.fromCodePoint(c)}function ku(r,i,n,o){let{value:s,type:l,comment:c,range:d}=i.type==="block-scalar"?Lu(r,i,o):Ru(i,r.options.strict,o),h=n?r.directives.tagName(n.source,M=>o(n,"TAG_RESOLVE_FAILED",M)):null,_;r.options.stringKeys&&r.atKey?_=r.schema[jt]:h?_=hC(r.schema,s,h,n,o):i.type==="scalar"?_=gC(r,s,i,o):_=r.schema[jt];let T;try{let M=_.resolve(s,S=>o(n??i,"TAG_RESOLVE_FAILED",S),r.options);T=ce(M)?M:new Q(M)}catch(M){let S=M instanceof Error?M.message:String(M);o(n??i,"TAG_RESOLVE_FAILED",S),T=new Q(s)}return T.range=d,T.source=s,l&&(T.type=l),h&&(T.tag=h),_.format&&(T.format=_.format),c&&(T.comment=c),T}function hC(r,i,n,o,s){if(n==="!")return r[jt];let l=[];for(let d of r.tags)if(!d.collection&&d.tag===n)if(d.default&&d.test)l.push(d);else return d;for(let d of l)if(d.test?.test(i))return d;let c=r.knownTags[n];return c&&!c.collection?(r.tags.push(Object.assign({},c,{default:!1,test:void 0})),c):(s(o,"TAG_RESOLVE_FAILED",`Unresolved tag: ${n}`,n!=="tag:yaml.org,2002:str"),r[jt])}function gC({atKey:r,directives:i,schema:n},o,s,l){let c=n.tags.find(d=>(d.default===!0||r&&d.default==="key")&&d.test?.test(o))||n[jt];if(n.compat){let d=n.compat.find(h=>h.default&&h.test?.test(o))??n[jt];if(c.tag!==d.tag){let h=i.tagString(c.tag),_=i.tagString(d.tag),T=`Value may be parsed as either ${h} or ${_}`;l(s,"TAG_RESOLVE_FAILED",T,!0)}}return c}function rd(r,i,n){if(i){n??(n=i.length);for(let o=n-1;o>=0;--o){let s=i[o];switch(s.type){case"space":case"comment":case"newline":r-=s.source.length;continue}for(s=i[++o];s?.type==="space";)r+=s.source.length,s=i[++o];break}}return r}var _C={composeNode:Du,composeEmptyNode:Na};function Du(r,i,n,o){let s=r.atKey,{spaceBefore:l,comment:c,anchor:d,tag:h}=n,_,T=!0;switch(i.type){case"alias":_=yC(r,i,o),(d||h)&&o(i,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":_=ku(r,i,h,o),d&&(_.anchor=d.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":_=nd(_C,r,i,n,o),d&&(_.anchor=d.source.substring(1));break;default:{let M=i.type==="error"?i.message:`Unsupported token (type: ${i.type})`;o(i,"UNEXPECTED_TOKEN",M),_=Na(r,i.offset,void 0,null,n,o),T=!1}}return d&&_.anchor===""&&o(d,"BAD_ALIAS","Anchor cannot be an empty string"),s&&r.options.stringKeys&&(!ce(_)||typeof _.value!="string"||_.tag&&_.tag!=="tag:yaml.org,2002:str")&&o(h??i,"NON_STRING_KEY","With stringKeys, all keys must be strings"),l&&(_.spaceBefore=!0),c&&(i.type==="scalar"&&i.source===""?_.comment=c:_.commentBefore=c),r.options.keepSourceTokens&&T&&(_.srcToken=i),_}function Na(r,i,n,o,{spaceBefore:s,comment:l,anchor:c,tag:d,end:h},_){let T={type:"scalar",offset:rd(i,n,o),indent:-1,source:""},M=ku(r,T,d,_);return c&&(M.anchor=c.source.substring(1),M.anchor===""&&_(c,"BAD_ALIAS","Anchor cannot be an empty string")),s&&(M.spaceBefore=!0),l&&(M.comment=l,M.range[2]=h),M}function yC({options:r},{offset:i,source:n,end:o},s){let l=new Xn(n.substring(1));l.source===""&&s(i,"BAD_ALIAS","Alias cannot be an empty string"),l.source.endsWith(":")&&s(i+n.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",!0);let c=i+n.length,d=Dn(o,c,r.strict,s);return l.range=[i,c,d.offset],d.comment&&(l.comment=d.comment),l}function od(r,i,{offset:n,start:o,value:s,end:l},c){let d=Object.assign({_directives:i},r),h=new Qn(void 0,d),_={atKey:!1,atRoot:!0,directives:h.directives,options:h.options,schema:h.schema},T=kn(o,{indicator:"doc-start",next:s??l?.[0],offset:n,onError:c,parentIndent:0,startOnNewline:!0});T.found&&(h.directives.docStart=!0,s&&(s.type==="block-map"||s.type==="block-seq")&&!T.hasNewline&&c(T.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),h.contents=s?Du(_,s,T,c):Na(_,T.end,o,null,T,c);let M=h.contents.range[2],S=Dn(l,M,!1,c);return S.comment&&(h.comment=S.comment),h.range=[n,M,S.offset],h}function Io(r){if(typeof r=="number")return[r,r+1];if(Array.isArray(r))return r.length===2?r:[r[0],r[1]];let{offset:i,source:n}=r;return[i,i+(typeof n=="string"?n.length:1)]}function sd(r){let i="",n=!1,o=!1;for(let s=0;s<r.length;++s){let l=r[s];switch(l[0]){case"#":i+=(i===""?"":o?`

`:`
`)+(l.substring(1)||" "),n=!0,o=!1;break;case"%":r[s+1]?.[0]!=="#"&&(s+=1),n=!1;break;default:n||(o=!0),n=!1}}return{comment:i,afterEmptyLine:o}}var No=class{constructor(i={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(n,o,s,l)=>{let c=Io(n);l?this.warnings.push(new Eo(c,o,s)):this.errors.push(new vn(c,o,s))},this.directives=new Dr({version:i.version||"1.2"}),this.options=i}decorate(i,n){let{comment:o,afterEmptyLine:s}=sd(this.prelude);if(o){let l=i.contents;if(n)i.comment=i.comment?`${i.comment}
${o}`:o;else if(s||i.directives.docStart||!l)i.commentBefore=o;else if(we(l)&&!l.flow&&l.items.length>0){let c=l.items[0];he(c)&&(c=c.key);let d=c.commentBefore;c.commentBefore=d?`${o}
${d}`:o}else{let c=l.commentBefore;l.commentBefore=c?`${o}
${c}`:o}}n?(Array.prototype.push.apply(i.errors,this.errors),Array.prototype.push.apply(i.warnings,this.warnings)):(i.errors=this.errors,i.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:sd(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(i,n=!1,o=-1){for(let s of i)yield*N(this.next(s));yield*N(this.end(n,o))}*next(i){switch(i.type){case"directive":this.directives.add(i.source,(n,o,s)=>{let l=Io(i);l[0]+=n,this.onError(l,"BAD_DIRECTIVE",o,s)}),this.prelude.push(i.source),this.atDirectives=!0;break;case"document":{let n=od(this.options,this.directives,i,this.onError);this.atDirectives&&!n.directives.docStart&&this.onError(i,"MISSING_CHAR","Missing directives-end/doc-start indicator line"),this.decorate(n,!1),this.doc&&(yield this.doc),this.doc=n,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(i.source);break;case"error":{let n=i.source?`${i.message}: ${JSON.stringify(i.source)}`:i.message,o=new vn(Io(i),"UNEXPECTED_TOKEN",n);this.atDirectives||!this.doc?this.errors.push(o):this.doc.errors.push(o);break}case"doc-end":{if(!this.doc){let o="Unexpected doc-end without preceding document";this.errors.push(new vn(Io(i),"UNEXPECTED_TOKEN",o));break}this.doc.directives.docEnd=!0;let n=Dn(i.end,i.offset+i.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),n.comment){let o=this.doc.comment;this.doc.comment=o?`${o}
${n.comment}`:n.comment}this.doc.range[2]=n.offset;break}default:this.errors.push(new vn(Io(i),"UNEXPECTED_TOKEN",`Unsupported token ${i.type}`))}}*end(i=!1,n=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(i){let o=Object.assign({_directives:this.directives},this.options),s=new Qn(void 0,o);this.atDirectives&&this.onError(n,"MISSING_CHAR","Missing directives-end indicator line"),s.range=[0,n,n],this.decorate(s,!1),yield s}}};var Fu=Symbol("break visit"),wC=Symbol("skip children"),ad=Symbol("remove item");function mr(r,i){"type"in r&&r.type==="document"&&(r={start:r.start,value:r.value}),ld(Object.freeze([]),r,i)}mr.BREAK=Fu;mr.SKIP=wC;mr.REMOVE=ad;mr.itemAtPath=(r,i)=>{let n=r;for(let[o,s]of i){let l=n?.[o];if(l&&"items"in l)n=l.items[s];else return}return n};mr.parentCollection=(r,i)=>{let n=mr.itemAtPath(r,i.slice(0,-1)),o=i[i.length-1][0],s=n?.[o];if(s&&"items"in s)return s;throw new Error("Parent collection not found")};function ld(r,i,n){let o=n(i,r);if(typeof o=="symbol")return o;for(let s of["key","value"]){let l=i[s];if(l&&"items"in l){for(let c=0;c<l.items.length;++c){let d=ld(Object.freeze(r.concat([[s,c]])),l.items[c],n);if(typeof d=="number")c=d-1;else{if(d===Fu)return Fu;d===ad&&(l.items.splice(c,1),c-=1)}}typeof o=="function"&&s==="key"&&(o=o(i,r))}}return typeof o=="function"?o(i,r):o}var Bu="\uFEFF",Vu="",Gu="",Oa="";function ud(r){switch(r){case Bu:return"byte-order-mark";case Vu:return"doc-mode";case Gu:return"flow-error-end";case Oa:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case`
`:case`\r
`:return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(r[0]){case" ":case"	":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}function Sn(r){switch(r){case void 0:case" ":case`
`:case"\r":case"	":return!0;default:return!1}}var cd=new Set("0123456789ABCDEFabcdef"),CC=new Set("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()"),Pa=new Set(",[]{}"),vC=new Set(` ,[]{}
\r	`),Wu=r=>!r||vC.has(r),Oo=class{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(i,n=!1){if(i){if(typeof i!="string")throw TypeError("source is not a string");this.buffer=this.buffer?this.buffer+i:i,this.lineEndPos=null}this.atEnd=!n;let o=this.next??"stream";for(;o&&(n||this.hasChars(1));)o=yield*N(this.parseNext(o))}atLineEnd(){let i=this.pos,n=this.buffer[i];for(;n===" "||n==="	";)n=this.buffer[++i];return!n||n==="#"||n===`
`?!0:n==="\r"?this.buffer[i+1]===`
`:!1}charAt(i){return this.buffer[this.pos+i]}continueScalar(i){let n=this.buffer[i];if(this.indentNext>0){let o=0;for(;n===" ";)n=this.buffer[++o+i];if(n==="\r"){let s=this.buffer[o+i+1];if(s===`
`||!s&&!this.atEnd)return i+o+1}return n===`
`||o>=this.indentNext||!n&&!this.atEnd?i+o:-1}if(n==="-"||n==="."){let o=this.buffer.substr(i,3);if((o==="---"||o==="...")&&Sn(this.buffer[i+3]))return-1}return i}getLine(){let i=this.lineEndPos;return(typeof i!="number"||i!==-1&&i<this.pos)&&(i=this.buffer.indexOf(`
`,this.pos),this.lineEndPos=i),i===-1?this.atEnd?this.buffer.substring(this.pos):null:(this.buffer[i-1]==="\r"&&(i-=1),this.buffer.substring(this.pos,i))}hasChars(i){return this.pos+i<=this.buffer.length}setNext(i){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=i,null}peek(i){return this.buffer.substr(this.pos,i)}*parseNext(i){switch(i){case"stream":return yield*N(this.parseStream());case"line-start":return yield*N(this.parseLineStart());case"block-start":return yield*N(this.parseBlockStart());case"doc":return yield*N(this.parseDocument());case"flow":return yield*N(this.parseFlowCollection());case"quoted-scalar":return yield*N(this.parseQuotedScalar());case"block-scalar":return yield*N(this.parseBlockScalar());case"plain-scalar":return yield*N(this.parsePlainScalar())}}*parseStream(){let i=this.getLine();if(i===null)return this.setNext("stream");if(i[0]===Bu&&(yield*N(this.pushCount(1)),i=i.substring(1)),i[0]==="%"){let n=i.length,o=i.indexOf("#");for(;o!==-1;){let l=i[o-1];if(l===" "||l==="	"){n=o-1;break}else o=i.indexOf("#",o+1)}for(;;){let l=i[n-1];if(l===" "||l==="	")n-=1;else break}let s=(yield*N(this.pushCount(n)))+(yield*N(this.pushSpaces(!0)));return yield*N(this.pushCount(i.length-s)),this.pushNewline(),"stream"}if(this.atLineEnd()){let n=yield*N(this.pushSpaces(!0));return yield*N(this.pushCount(i.length-n)),yield*N(this.pushNewline()),"stream"}return yield Vu,yield*N(this.parseLineStart())}*parseLineStart(){let i=this.charAt(0);if(!i&&!this.atEnd)return this.setNext("line-start");if(i==="-"||i==="."){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");let n=this.peek(3);if((n==="---"||n==="...")&&Sn(this.charAt(3)))return yield*N(this.pushCount(3)),this.indentValue=0,this.indentNext=0,n==="---"?"doc":"stream"}return this.indentValue=yield*N(this.pushSpaces(!1)),this.indentNext>this.indentValue&&!Sn(this.charAt(1))&&(this.indentNext=this.indentValue),yield*N(this.parseBlockStart())}*parseBlockStart(){let[i,n]=this.peek(2);if(!n&&!this.atEnd)return this.setNext("block-start");if((i==="-"||i==="?"||i===":")&&Sn(n)){let o=(yield*N(this.pushCount(1)))+(yield*N(this.pushSpaces(!0)));return this.indentNext=this.indentValue+1,this.indentValue+=o,yield*N(this.parseBlockStart())}return"doc"}*parseDocument(){yield*N(this.pushSpaces(!0));let i=this.getLine();if(i===null)return this.setNext("doc");let n=yield*N(this.pushIndicators());switch(i[n]){case"#":yield*N(this.pushCount(i.length-n));case void 0:return yield*N(this.pushNewline()),yield*N(this.parseLineStart());case"{":case"[":return yield*N(this.pushCount(1)),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*N(this.pushCount(1)),"doc";case"*":return yield*N(this.pushUntil(Wu)),"doc";case'"':case"'":return yield*N(this.parseQuotedScalar());case"|":case">":return n+=yield*N(this.parseBlockScalarHeader()),n+=yield*N(this.pushSpaces(!0)),yield*N(this.pushCount(i.length-n)),yield*N(this.pushNewline()),yield*N(this.parseBlockScalar());default:return yield*N(this.parsePlainScalar())}}*parseFlowCollection(){let i,n,o=-1;do i=yield*N(this.pushNewline()),i>0?(n=yield*N(this.pushSpaces(!1)),this.indentValue=o=n):n=0,n+=yield*N(this.pushSpaces(!0));while(i+n>0);let s=this.getLine();if(s===null)return this.setNext("flow");if((o!==-1&&o<this.indentNext&&s[0]!=="#"||o===0&&(s.startsWith("---")||s.startsWith("..."))&&Sn(s[3]))&&!(o===this.indentNext-1&&this.flowLevel===1&&(s[0]==="]"||s[0]==="}")))return this.flowLevel=0,yield Gu,yield*N(this.parseLineStart());let l=0;for(;s[l]===",";)l+=yield*N(this.pushCount(1)),l+=yield*N(this.pushSpaces(!0)),this.flowKey=!1;switch(l+=yield*N(this.pushIndicators()),s[l]){case void 0:return"flow";case"#":return yield*N(this.pushCount(s.length-l)),"flow";case"{":case"[":return yield*N(this.pushCount(1)),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*N(this.pushCount(1)),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*N(this.pushUntil(Wu)),"flow";case'"':case"'":return this.flowKey=!0,yield*N(this.parseQuotedScalar());case":":{let c=this.charAt(1);if(this.flowKey||Sn(c)||c===",")return this.flowKey=!1,yield*N(this.pushCount(1)),yield*N(this.pushSpaces(!0)),"flow"}default:return this.flowKey=!1,yield*N(this.parsePlainScalar())}}*parseQuotedScalar(){let i=this.charAt(0),n=this.buffer.indexOf(i,this.pos+1);if(i==="'")for(;n!==-1&&this.buffer[n+1]==="'";)n=this.buffer.indexOf("'",n+2);else for(;n!==-1;){let l=0;for(;this.buffer[n-1-l]==="\\";)l+=1;if(l%2===0)break;n=this.buffer.indexOf('"',n+1)}let o=this.buffer.substring(0,n),s=o.indexOf(`
`,this.pos);if(s!==-1){for(;s!==-1;){let l=this.continueScalar(s+1);if(l===-1)break;s=o.indexOf(`
`,l)}s!==-1&&(n=s-(o[s-1]==="\r"?2:1))}if(n===-1){if(!this.atEnd)return this.setNext("quoted-scalar");n=this.buffer.length}return yield*N(this.pushToIndex(n+1,!1)),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let i=this.pos;for(;;){let n=this.buffer[++i];if(n==="+")this.blockScalarKeep=!0;else if(n>"0"&&n<="9")this.blockScalarIndent=Number(n)-1;else if(n!=="-")break}return yield*N(this.pushUntil(n=>Sn(n)||n==="#"))}*parseBlockScalar(){let i=this.pos-1,n=0,o;e:for(let l=this.pos;o=this.buffer[l];++l)switch(o){case" ":n+=1;break;case`
`:i=l,n=0;break;case"\r":{let c=this.buffer[l+1];if(!c&&!this.atEnd)return this.setNext("block-scalar");if(c===`
`)break}default:break e}if(!o&&!this.atEnd)return this.setNext("block-scalar");if(n>=this.indentNext){this.blockScalarIndent===-1?this.indentNext=n:this.indentNext=this.blockScalarIndent+(this.indentNext===0?1:this.indentNext);do{let l=this.continueScalar(i+1);if(l===-1)break;i=this.buffer.indexOf(`
`,l)}while(i!==-1);if(i===-1){if(!this.atEnd)return this.setNext("block-scalar");i=this.buffer.length}}let s=i+1;for(o=this.buffer[s];o===" ";)o=this.buffer[++s];if(o==="	"){for(;o==="	"||o===" "||o==="\r"||o===`
`;)o=this.buffer[++s];i=s-1}else if(!this.blockScalarKeep)do{let l=i-1,c=this.buffer[l];c==="\r"&&(c=this.buffer[--l]);let d=l;for(;c===" ";)c=this.buffer[--l];if(c===`
`&&l>=this.pos&&l+1+n>d)i=l;else break}while(!0);return yield Oa,yield*N(this.pushToIndex(i+1,!0)),yield*N(this.parseLineStart())}*parsePlainScalar(){let i=this.flowLevel>0,n=this.pos-1,o=this.pos-1,s;for(;s=this.buffer[++o];)if(s===":"){let l=this.buffer[o+1];if(Sn(l)||i&&Pa.has(l))break;n=o}else if(Sn(s)){let l=this.buffer[o+1];if(s==="\r"&&(l===`
`?(o+=1,s=`
`,l=this.buffer[o+1]):n=o),l==="#"||i&&Pa.has(l))break;if(s===`
`){let c=this.continueScalar(o+1);if(c===-1)break;o=Math.max(o,c-2)}}else{if(i&&Pa.has(s))break;n=o}return!s&&!this.atEnd?this.setNext("plain-scalar"):(yield Oa,yield*N(this.pushToIndex(n+1,!0)),i?"flow":"doc")}*pushCount(i){return i>0?(yield this.buffer.substr(this.pos,i),this.pos+=i,i):0}*pushToIndex(i,n){let o=this.buffer.slice(this.pos,i);return o?(yield o,this.pos+=o.length,o.length):(n&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*N(this.pushTag()))+(yield*N(this.pushSpaces(!0)))+(yield*N(this.pushIndicators()));case"&":return(yield*N(this.pushUntil(Wu)))+(yield*N(this.pushSpaces(!0)))+(yield*N(this.pushIndicators()));case"-":case"?":case":":{let i=this.flowLevel>0,n=this.charAt(1);if(Sn(n)||i&&Pa.has(n))return i?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*N(this.pushCount(1)))+(yield*N(this.pushSpaces(!0)))+(yield*N(this.pushIndicators()))}}return 0}*pushTag(){if(this.charAt(1)==="<"){let i=this.pos+2,n=this.buffer[i];for(;!Sn(n)&&n!==">";)n=this.buffer[++i];return yield*N(this.pushToIndex(n===">"?i+1:i,!1))}else{let i=this.pos+1,n=this.buffer[i];for(;n;)if(CC.has(n))n=this.buffer[++i];else if(n==="%"&&cd.has(this.buffer[i+1])&&cd.has(this.buffer[i+2]))n=this.buffer[i+=3];else break;return yield*N(this.pushToIndex(i,!1))}}*pushNewline(){let i=this.buffer[this.pos];return i===`
`?yield*N(this.pushCount(1)):i==="\r"&&this.charAt(1)===`
`?yield*N(this.pushCount(2)):0}*pushSpaces(i){let n=this.pos-1,o;do o=this.buffer[++n];while(o===" "||i&&o==="	");let s=n-this.pos;return s>0&&(yield this.buffer.substr(this.pos,s),this.pos=n),s}*pushUntil(i){let n=this.pos,o=this.buffer[n];for(;!i(o);)o=this.buffer[++n];return yield*N(this.pushToIndex(n,!1))}};var Po=class{constructor(){this.lineStarts=[],this.addNewLine=i=>this.lineStarts.push(i),this.linePos=i=>{let n=0,o=this.lineStarts.length;for(;n<o;){let l=n+o>>1;this.lineStarts[l]<i?n=l+1:o=l}if(this.lineStarts[n]===i)return{line:n+1,col:1};if(n===0)return{line:0,col:i};let s=this.lineStarts[n-1];return{line:n,col:i-s+1}}}};function Xi(r,i){for(let n=0;n<r.length;++n)if(r[n].type===i)return!0;return!1}function fd(r){for(let i=0;i<r.length;++i)switch(r[i].type){case"space":case"comment":case"newline":break;default:return i}return-1}function md(r){switch(r?.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function La(r){switch(r.type){case"document":return r.start;case"block-map":{let i=r.items[r.items.length-1];return i.sep??i.start}case"block-seq":return r.items[r.items.length-1].start;default:return[]}}function Ur(r){if(r.length===0)return[];let i=r.length;e:for(;--i>=0;)switch(r[i].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;r[++i]?.type==="space";);return r.splice(i,r.length)}function pd(r){if(r.start.type==="flow-seq-start")for(let i of r.items)i.sep&&!i.value&&!Xi(i.start,"explicit-key-ind")&&!Xi(i.sep,"map-value-ind")&&(i.key&&(i.value=i.key),delete i.key,md(i.value)?i.value.end?Array.prototype.push.apply(i.value.end,i.sep):i.value.end=i.sep:Array.prototype.push.apply(i.start,i.sep),delete i.sep)}var Lo=class{constructor(i){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new Oo,this.onNewLine=i}*parse(i,n=!1){this.onNewLine&&this.offset===0&&this.onNewLine(0);for(let o of this.lexer.lex(i,n))yield*N(this.next(o));n||(yield*N(this.end()))}*next(i){if(this.source=i,this.atScalar){this.atScalar=!1,yield*N(this.step()),this.offset+=i.length;return}let n=ud(i);if(n)if(n==="scalar")this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=n,yield*N(this.step()),n){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+i.length);break;case"space":this.atNewLine&&i[0]===" "&&(this.indent+=i.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=i.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=i.length}else{let o=`Not a YAML token: ${i}`;yield*N(this.pop({type:"error",offset:this.offset,message:o,source:i})),this.offset+=i.length}}*end(){for(;this.stack.length>0;)yield*N(this.pop())}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){let i=this.peek(1);if(this.type==="doc-end"&&(!i||i.type!=="doc-end")){for(;this.stack.length>0;)yield*N(this.pop());this.stack.push({type:"doc-end",offset:this.offset,source:this.source});return}if(!i)return yield*N(this.stream());switch(i.type){case"document":return yield*N(this.document(i));case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*N(this.scalar(i));case"block-scalar":return yield*N(this.blockScalar(i));case"block-map":return yield*N(this.blockMap(i));case"block-seq":return yield*N(this.blockSequence(i));case"flow-collection":return yield*N(this.flowCollection(i));case"doc-end":return yield*N(this.documentEnd(i))}yield*N(this.pop())}peek(i){return this.stack[this.stack.length-i]}*pop(i){let n=i??this.stack.pop();if(!n)yield{type:"error",offset:this.offset,source:"",message:"Tried to pop an empty stack"};else if(this.stack.length===0)yield n;else{let o=this.peek(1);switch(n.type==="block-scalar"?n.indent="indent"in o?o.indent:0:n.type==="flow-collection"&&o.type==="document"&&(n.indent=0),n.type==="flow-collection"&&pd(n),o.type){case"document":o.value=n;break;case"block-scalar":o.props.push(n);break;case"block-map":{let s=o.items[o.items.length-1];if(s.value){o.items.push({start:[],key:n,sep:[]}),this.onKeyLine=!0;return}else if(s.sep)s.value=n;else{Object.assign(s,{key:n,sep:[]}),this.onKeyLine=!s.explicitKey;return}break}case"block-seq":{let s=o.items[o.items.length-1];s.value?o.items.push({start:[],value:n}):s.value=n;break}case"flow-collection":{let s=o.items[o.items.length-1];!s||s.value?o.items.push({start:[],key:n,sep:[]}):s.sep?s.value=n:Object.assign(s,{key:n,sep:[]});return}default:yield*N(this.pop()),yield*N(this.pop(n))}if((o.type==="document"||o.type==="block-map"||o.type==="block-seq")&&(n.type==="block-map"||n.type==="block-seq")){let s=n.items[n.items.length-1];s&&!s.sep&&!s.value&&s.start.length>0&&fd(s.start)===-1&&(n.indent===0||s.start.every(l=>l.type!=="comment"||l.indent<n.indent))&&(o.type==="document"?o.end=s.start:o.items.push({start:s.start}),n.items.splice(-1,1))}}}*stream(){switch(this.type){case"directive-line":yield{type:"directive",offset:this.offset,source:this.source};return;case"byte-order-mark":case"space":case"comment":case"newline":yield this.sourceToken;return;case"doc-mode":case"doc-start":{let i={type:"document",offset:this.offset,start:[]};this.type==="doc-start"&&i.start.push(this.sourceToken),this.stack.push(i);return}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(i){if(i.value)return yield*N(this.lineEnd(i));switch(this.type){case"doc-start":{fd(i.start)!==-1?(yield*N(this.pop()),yield*N(this.step())):i.start.push(this.sourceToken);return}case"anchor":case"tag":case"space":case"comment":case"newline":i.start.push(this.sourceToken);return}let n=this.startBlockValue(i);n?this.stack.push(n):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(i){if(this.type==="map-value-ind"){let n=La(this.peek(2)),o=Ur(n),s;i.end?(s=i.end,s.push(this.sourceToken),delete i.end):s=[this.sourceToken];let l={type:"block-map",offset:i.offset,indent:i.indent,items:[{start:o,key:i,sep:s}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=l}else yield*N(this.lineEnd(i))}*blockScalar(i){switch(this.type){case"space":case"comment":case"newline":i.props.push(this.sourceToken);return;case"scalar":if(i.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let n=this.source.indexOf(`
`)+1;for(;n!==0;)this.onNewLine(this.offset+n),n=this.source.indexOf(`
`,n)+1}yield*N(this.pop());break;default:yield*N(this.pop()),yield*N(this.step())}}*blockMap(i){let n=i.items[i.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,n.value){let o="end"in n.value?n.value.end:void 0;(Array.isArray(o)?o[o.length-1]:void 0)?.type==="comment"?o?.push(this.sourceToken):i.items.push({start:[this.sourceToken]})}else n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)i.items.push({start:[this.sourceToken]});else if(n.sep)n.sep.push(this.sourceToken);else{if(this.atIndentedComment(n.start,i.indent)){let s=i.items[i.items.length-2]?.value?.end;if(Array.isArray(s)){Array.prototype.push.apply(s,n.start),s.push(this.sourceToken),i.items.pop();return}}n.start.push(this.sourceToken)}return}if(this.indent>=i.indent){let o=!this.onKeyLine&&this.indent===i.indent,s=o&&(n.sep||n.explicitKey)&&this.type!=="seq-item-ind",l=[];if(s&&n.sep&&!n.value){let c=[];for(let d=0;d<n.sep.length;++d){let h=n.sep[d];switch(h.type){case"newline":c.push(d);break;case"space":break;case"comment":h.indent>i.indent&&(c.length=0);break;default:c.length=0}}c.length>=2&&(l=n.sep.splice(c[1]))}switch(this.type){case"anchor":case"tag":s||n.value?(l.push(this.sourceToken),i.items.push({start:l}),this.onKeyLine=!0):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"explicit-key-ind":!n.sep&&!n.explicitKey?(n.start.push(this.sourceToken),n.explicitKey=!0):s||n.value?(l.push(this.sourceToken),i.items.push({start:l,explicitKey:!0})):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken],explicitKey:!0}]}),this.onKeyLine=!0;return;case"map-value-ind":if(n.explicitKey)if(n.sep)if(n.value)i.items.push({start:[],key:null,sep:[this.sourceToken]});else if(Xi(n.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:l,key:null,sep:[this.sourceToken]}]});else if(md(n.key)&&!Xi(n.sep,"newline")){let c=Ur(n.start),d=n.key,h=n.sep;h.push(this.sourceToken),delete n.key,delete n.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:c,key:d,sep:h}]})}else l.length>0?n.sep=n.sep.concat(l,this.sourceToken):n.sep.push(this.sourceToken);else if(Xi(n.start,"newline"))Object.assign(n,{key:null,sep:[this.sourceToken]});else{let c=Ur(n.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:c,key:null,sep:[this.sourceToken]}]})}else n.sep?n.value||s?i.items.push({start:l,key:null,sep:[this.sourceToken]}):Xi(n.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):n.sep.push(this.sourceToken):Object.assign(n,{key:null,sep:[this.sourceToken]});this.onKeyLine=!0;return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{let c=this.flowScalar(this.type);s||n.value?(i.items.push({start:l,key:c,sep:[]}),this.onKeyLine=!0):n.sep?this.stack.push(c):(Object.assign(n,{key:c,sep:[]}),this.onKeyLine=!0);return}default:{let c=this.startBlockValue(i);if(c){if(c.type==="block-seq"){if(!n.explicitKey&&n.sep&&!Xi(n.sep,"newline")){yield*N(this.pop({type:"error",offset:this.offset,message:"Unexpected block-seq-ind on same line with key",source:this.source}));return}}else o&&i.items.push({start:l});this.stack.push(c);return}}}}yield*N(this.pop()),yield*N(this.step())}*blockSequence(i){let n=i.items[i.items.length-1];switch(this.type){case"newline":if(n.value){let o="end"in n.value?n.value.end:void 0;(Array.isArray(o)?o[o.length-1]:void 0)?.type==="comment"?o?.push(this.sourceToken):i.items.push({start:[this.sourceToken]})}else n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)i.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(n.start,i.indent)){let s=i.items[i.items.length-2]?.value?.end;if(Array.isArray(s)){Array.prototype.push.apply(s,n.start),s.push(this.sourceToken),i.items.pop();return}}n.start.push(this.sourceToken)}return;case"anchor":case"tag":if(n.value||this.indent<=i.indent)break;n.start.push(this.sourceToken);return;case"seq-item-ind":if(this.indent!==i.indent)break;n.value||Xi(n.start,"seq-item-ind")?i.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken);return}if(this.indent>i.indent){let o=this.startBlockValue(i);if(o){this.stack.push(o);return}}yield*N(this.pop()),yield*N(this.step())}*flowCollection(i){let n=i.items[i.items.length-1];if(this.type==="flow-error-end"){let o;do yield*N(this.pop()),o=this.peek(1);while(o&&o.type==="flow-collection")}else if(i.end.length===0){switch(this.type){case"comma":case"explicit-key-ind":!n||n.sep?i.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken);return;case"map-value-ind":!n||n.value?i.items.push({start:[],key:null,sep:[this.sourceToken]}):n.sep?n.sep.push(this.sourceToken):Object.assign(n,{key:null,sep:[this.sourceToken]});return;case"space":case"comment":case"newline":case"anchor":case"tag":!n||n.value?i.items.push({start:[this.sourceToken]}):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{let s=this.flowScalar(this.type);!n||n.value?i.items.push({start:[],key:s,sep:[]}):n.sep?this.stack.push(s):Object.assign(n,{key:s,sep:[]});return}case"flow-map-end":case"flow-seq-end":i.end.push(this.sourceToken);return}let o=this.startBlockValue(i);o?this.stack.push(o):(yield*N(this.pop()),yield*N(this.step()))}else{let o=this.peek(2);if(o.type==="block-map"&&(this.type==="map-value-ind"&&o.indent===i.indent||this.type==="newline"&&!o.items[o.items.length-1].sep))yield*N(this.pop()),yield*N(this.step());else if(this.type==="map-value-ind"&&o.type!=="flow-collection"){let s=La(o),l=Ur(s);pd(i);let c=i.end.splice(1,i.end.length);c.push(this.sourceToken);let d={type:"block-map",offset:i.offset,indent:i.indent,items:[{start:l,key:i,sep:c}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=d}else yield*N(this.lineEnd(i))}}flowScalar(i){if(this.onNewLine){let n=this.source.indexOf(`
`)+1;for(;n!==0;)this.onNewLine(this.offset+n),n=this.source.indexOf(`
`,n)+1}return{type:i,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(i){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;let n=La(i),o=Ur(n);return o.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,explicitKey:!0}]}}case"map-value-ind":{this.onKeyLine=!0;let n=La(i),o=Ur(n);return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(i,n){return this.type!=="comment"||this.indent<=n?!1:i.every(o=>o.type==="newline"||o.type==="space")}*documentEnd(i){this.type!=="doc-mode"&&(i.end?i.end.push(this.sourceToken):i.end=[this.sourceToken],this.type==="newline"&&(yield*N(this.pop())))}*lineEnd(i){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*N(this.pop()),yield*N(this.step());break;case"newline":this.onKeyLine=!1;case"space":case"comment":default:i.end?i.end.push(this.sourceToken):i.end=[this.sourceToken],this.type==="newline"&&(yield*N(this.pop()))}}};function SC(r){let i=r.prettyErrors!==!1;return{lineCounter:r.lineCounter||i&&new Po||null,prettyErrors:i}}function dd(r,i={}){let{lineCounter:n,prettyErrors:o}=SC(i),s=new Lo(n?.addNewLine),l=new No(i),c=null;for(let d of l.compose(s.parse(r),!0,r.length))if(!c)c=d;else if(c.options.logLevel!=="silent"){c.errors.push(new vn(d.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}return o&&n&&(c.errors.forEach(Iu(r,n)),c.warnings.forEach(Iu(r,n))),c}function $u(r,i,n){let o;typeof i=="function"?o=i:n===void 0&&i&&typeof i=="object"&&(n=i);let s=dd(r,n);if(!s)return null;if(s.warnings.forEach(l=>fa(s.options.logLevel,l)),s.errors.length>0){if(s.options.logLevel!=="silent")throw s.errors[0];s.errors=[]}return s.toJS(Object.assign({reviver:o},n))}function Uu(r,i,n){let o=null;if(typeof i=="function"||Array.isArray(i)?o=i:n===void 0&&i&&(n=i),typeof n=="string"&&(n=n.length),typeof n=="number"){let s=Math.round(n);n=s<1?void 0:s>8?{indent:8}:{indent:s}}if(r===void 0){let{keepUndefined:s}=n??i??{};if(!s)return}return gn(r)&&!o?r.toString(n):new Qn(r,o,n).toString(n)}var Ro=class r{static geometryToCsv(i){if(!i)return"";let n=s=>{if(s==null)return"";let l=String(s),c=/[",\n]/.test(l),d=l.replace(/"/g,'""');return c?`"${d}"`:d},o=[];o.push("SOLVER_CONFIGURATION"),o.push(["SolverType"].join(",")),o.push([n(i.solverConfiguration?.solverType)].join(",")),o.push(""),o.push("MESHING_CONFIGURATION"),o.push(["MaxTriangleArea"].join(",")),o.push([n(i.meshingConfiguration?.maxMeshArea)].join(",")),o.push(""),o.push("REFINEMENT_POINTS"),o.push(["X","Y","Radius","MaxArea"].join(","));for(let s of i.meshingConfiguration?.refinementPoints??[])o.push([n(s.x),n(s.y),n(s.radius),n(s.maxArea)].join(","));o.push(""),o.push("RESULT_POINTS"),o.push(["Name","X","Y"].join(","));for(let s of i.resultPoints??[])o.push([n(s.name),n(s.x),n(s.y)].join(","));o.push(""),o.push("MATERIALS"),o.push(["Name","ModulusOfElasticity","PoissonsRatio","Weight"].join(","));for(let s of i.materials??[])o.push([n(s.name),n(s.modulusOfElasticity),n(s.poissonsRatio),n(s.weight)].join(","));o.push(""),o.push("SECTION_PROPERTIES"),o.push(["Name","Thickness"].join(","));for(let s of i.sectionProperties??[])o.push([n(s.name),n(s.thickness)].join(","));o.push(""),o.push("RECTANGLE_GEOMETRY"),o.push(["Name","X","Y","Width","Height","SectionName","MaterialName"].join(","));for(let s of i.rectangles??[])o.push([n(s.name),n(s.x),n(s.y),n(s.width),n(s.height),n(s.sectionName),n(s.materialName)].join(","));o.push(""),o.push("POLYGONS"),o.push(["Name","Points","SectionName","MaterialName"].join(","));for(let s of i.polygons??[])o.push([n(s.name),n(s.points),n(s.sectionName),n(s.materialName)].join(","));o.push(""),o.push("SUPPORTS"),o.push(["X","Y","FixedX","FixedY"].join(","));for(let s of i.supports??[])o.push([n(s.x),n(s.y),n(s.fixedX),n(s.fixedY)].join(","));o.push(""),o.push("LOAD_CASES"),o.push(["LoadCase","Type","GeometryOrPointName","X","Y","FX","FY"].join(","));for(let s of i.loadCases??[]){for(let l of s.pointLoads??[])o.push([n(s.name),"Point","",n(l.x),n(l.y),n(l.fx),n(l.fy)].join(","));for(let l of s.distributedLoads??[])o.push([n(s.name),"Distributed",n(l.geometryName),"","",n(l.fx),n(l.fy)].join(","))}return o.push(""),o.join(`
`)}static parseCsvRow(i){let n=[],o="",s=!1;for(let l=0;l<i.length;l++){let c=i[l];s?c==='"'?l+1<i.length&&i[l+1]==='"'?(o+='"',l++):s=!1:o+=c:c==='"'?s=!0:c===","?(n.push(o),o=""):o+=c}return n.push(o),n.map(l=>l.trim())}static parseGeometryFromCsv(i){let o=(i??"").replace(/^\uFEFF/,"").split(/\r?\n/).map(T=>T.trim()),s=new Set(["SOLVER_CONFIGURATION","MESHING_CONFIGURATION","REFINEMENT_POINTS","RESULT_POINTS","MATERIALS","SECTION_PROPERTIES","RECTANGLE_GEOMETRY","POLYGONS","SUPPORTS","LOAD_CASES"]),l=0,c=()=>{for(;l<o.length&&o[l].length===0;)l++;return l<o.length?o[l]:null},d=T=>{if(c()!==T)throw new Ps(`Expected section ${T}`);l++},h=()=>{l<o.length&&o[l].length>0&&l++;let T=[];for(;l<o.length&&o[l].length>0&&!s.has(o[l]);)T.push(o[l++]);for(;l<o.length&&o[l].length===0;)l++;return T},_={sectionProperties:[],materials:[],rectangles:[],polygons:[],supports:[],loadCases:[],meshingConfiguration:{maxMeshArea:NaN,refinementPoints:[]},solverConfiguration:{solverType:"lusolve"},resultPoints:[]};if(c()==="SOLVER_CONFIGURATION"){if(d("SOLVER_CONFIGURATION"),l<o.length&&o[l].length>0&&l++,l<o.length&&o[l].length>0){let T=r.parseCsvRow(o[l++]);_.solverConfiguration={solverType:T[0]??"lusolve"}}for(;l<o.length&&o[l].length===0;)l++}if(c()==="MESHING_CONFIGURATION"){if(d("MESHING_CONFIGURATION"),l<o.length&&o[l].length>0&&l++,l<o.length&&o[l].length>0){let T=r.parseCsvRow(o[l++]);_.meshingConfiguration.maxMeshArea=parseFloat(T[0]??"0")}for(;l<o.length&&o[l].length===0;)l++}if(c()==="REFINEMENT_POINTS"){d("REFINEMENT_POINTS"),l<o.length&&o[l].length>0&&l++;let T=[];for(;l<o.length&&o[l].length>0&&!s.has(o[l]);){let M=r.parseCsvRow(o[l++]),S=parseFloat(M[0]??"0"),I=parseFloat(M[1]??"0"),V=parseFloat(M[2]??"0"),x=parseFloat(M[3]??"0");T.push({x:S,y:I,radius:V,maxArea:x})}for(_.meshingConfiguration.refinementPoints=T;l<o.length&&o[l].length===0;)l++}if(c()==="RESULT_POINTS"){for(d("RESULT_POINTS"),l<o.length&&o[l].length>0&&l++;l<o.length&&o[l].length>0&&!s.has(o[l]);){let T=r.parseCsvRow(o[l++]),M=T[0]??"",S=parseFloat(T[1]??"0"),I=parseFloat(T[2]??"0");_.resultPoints.push({name:M,x:S,y:I})}for(;l<o.length&&o[l].length===0;)l++}if(c()==="MATERIALS"){d("MATERIALS");let T=h();for(let M of T){let S=r.parseCsvRow(M),I=S[0]??"",V=parseFloat(S[1]??"0"),x=parseFloat(S[2]??"0"),L=parseFloat(S[3]??"0");_.materials.push({name:I,modulusOfElasticity:V,poissonsRatio:x,weight:L})}}if(c()==="SECTION_PROPERTIES"){d("SECTION_PROPERTIES");let T=h();for(let M of T){let S=r.parseCsvRow(M),I=S[0]??"",V=parseFloat(S[1]??"0");_.sectionProperties.push({name:I,thickness:V})}}if(c()==="RECTANGLE_GEOMETRY"){d("RECTANGLE_GEOMETRY");let T=h();for(let M of T){let S=r.parseCsvRow(M),I=S[0]??"",V=parseFloat(S[1]??"0"),x=parseFloat(S[2]??"0"),L=parseFloat(S[3]??"0"),U=parseFloat(S[4]??"0"),K=S[5]??"",j=S[6]??"";_.rectangles.push({name:I,x:V,y:x,width:L,height:U,sectionName:K,materialName:j})}}if(c()==="POLYGONS"){d("POLYGONS");let T=h();for(let M of T){let S=r.parseCsvRow(M),I=S[0]??"",V=S[1]??"",x=S[2]??"",L=S[3]??"";_.polygons.push({name:I,points:V,sectionName:x,materialName:L})}}if(c()==="SUPPORTS"){d("SUPPORTS");let T=h();for(let M of T){let S=r.parseCsvRow(M),I=parseFloat(S[0]??"0"),V=parseFloat(S[1]??"0"),x=(S[2]??"false").toLowerCase()==="true",L=(S[3]??"false").toLowerCase()==="true";_.supports.push({x:I,y:V,fixedX:x,fixedY:L})}}if(c()==="LOAD_CASES"){d("LOAD_CASES");let T=h(),M=new Map;for(let S of T){let I=r.parseCsvRow(S),V=I[0]??"",x=(I[1]??"").toLowerCase();M.has(V)||M.set(V,{name:V,pointLoads:[],distributedLoads:[],includeDeadLoad:!1});let L=M.get(V);if(x==="point"){let U=parseFloat(I[3]??"0"),K=parseFloat(I[4]??"0"),j=parseFloat(I[5]??"0"),te=parseFloat(I[6]??"0");L.pointLoads.push({x:U,y:K,fx:j,fy:te})}else if(x==="distributed"){let U=I[2]??"",K=parseFloat(I[5]??"0"),j=parseFloat(I[6]??"0");L.distributedLoads.push({geometryName:U,fx:K,fy:j})}}_.loadCases=Array.from(M.values())}return{sectionProperties:_.sectionProperties??[],materials:_.materials??[],rectangles:_.rectangles??[],polygons:_.polygons??[],supports:_.supports??[],loadCases:_.loadCases??[],meshingConfiguration:_.meshingConfiguration??{maxMeshArea:NaN,refinementPoints:[]},solverConfiguration:_.solverConfiguration??{solverType:"lusolve"},resultPoints:_.resultPoints??[]}}};function xC(r,i){if(r&1){let n=$e();b(0,"div",1)(1,"p-checkbox",4),Z("ngModelChange",function(s){k(n);let l=W();return J(l.encode,s)||(l.encode=s),D(s)}),G("onChange",function(){k(n);let s=W();return D(s.changeSerializationType())}),w(),b(2,"label",5),B(3," Encode "),w()()}if(r&2){let n=W();R(),X("ngModel",n.encode),q("binary",!0)}}var Ra=class r extends On{membraneMessageService=Ae(di);membraneService=Ae(Nr);detector=Ae(rn);serializationTypes=["yaml","json","csv","url"];selectedSerializationType="yaml";geometry;encode=!1;ngOnInit(){this.membraneMessageService.geometryChanged.pipe(nn(this.destroyed$)).subscribe(i=>{this.geometry=i,this.changeSerializationType()})}value="";rows=10;changeSerializationType(){this.value=this.serializeGeometry(this.geometry),this.rows=this.value.split(`
`).length,this.detector.detectChanges()}parse(){let i=this.parseGeometry();this.membraneService.updateGeometry(i)}copy(){let i=this.value;this.selectedSerializationType==="url"&&(i=window.location.origin+window.location.pathname+window.location.hash+"?"+this.value.split(`
`).join("")),navigator.clipboard.writeText(i)}parseGeometry(){try{switch(this.selectedSerializationType){case"yaml":return $u(this.value);case"json":return JSON.parse(this.value);case"url":return this.encode?Hn.parse(this.value):Hn.parseRaw(this.value);case"csv":return Ro.parseGeometryFromCsv(this.value);default:throw new Error("Unsupported serialization type")}}catch(i){throw this.membraneMessageService.showErrorMessage("Failed to parse geometry: "+i.message),new Ps("Failed to parse geometry: "+i.message)}}serializeGeometry(i){switch(this.selectedSerializationType){case"yaml":return Uu(i);case"json":return JSON.stringify(i,null,2);case"url":return this.encode?Hn.stringify(i):Hn.stringifyRaw(i);case"csv":return Ro.geometryToCsv(i);default:throw new Error("Unsupported serialization type")}}static \u0275fac=(()=>{let i;return function(o){return(i||(i=pi(r)))(o||r)}})();static \u0275cmp=je({type:r,selectors:[["app-raw-geometry"]],features:[mi],decls:5,vars:7,consts:[["placeholder","Select serialization",1,"w-full","md:w-56",3,"ngModelChange","options","ngModel"],[1,"flex","items-center"],["icon","pi pi-copy","label","Copy",1,"ml-2",3,"onClick","disabled"],["pTextarea","","id","description",2,"resize","vertical","width","100%","height","100%",3,"ngModelChange","ngModel","rows","spellcheck"],["inputId","encode",3,"ngModelChange","onChange","ngModel","binary"],["for","encode",1,"ml-2"]],template:function(n,o){n&1&&(b(0,"p-select",0),Z("ngModelChange",function(l){return J(o.selectedSerializationType,l)||(o.selectedSerializationType=l),l}),G("ngModelChange",function(){return o.changeSerializationType()}),w(),mn(1,xC,4,2,"div",1),b(2,"p-button",2),G("onClick",function(){return o.copy()}),w(),oe(3,"p-divider"),b(4,"textarea",3),Z("ngModelChange",function(l){return J(o.value,l)||(o.value=l),l}),G("ngModelChange",function(){return o.parse()}),w()),n&2&&(q("options",o.serializationTypes),X("ngModel",o.selectedSerializationType),R(),lr(o.selectedSerializationType==="url"?1:-1),R(),q("disabled",!o.value),R(2),X("ngModel",o.value),q("rows",o.rows)("spellcheck",!1))},dependencies:[ze,Xe,Ze,ot,Je,tt,Ds,st,He,Rs,In,Nn,at,nt,lt,ut,it,Pr,et,hi,ct,ft,pt,mt,dt,ht,mm,rt,gt,_t,yt,wt,Qe,bt,Ct,Us],encapsulation:2,changeDetection:0})};function TC(r,i){r&1&&(b(0,"div",4),oe(1,"p-tag",5),w())}function EC(r,i){if(r&1&&(b(0,"div",3),oe(1,"p-badge",6),b(2,"p",7),B(3),w()()),r&2){let n=i.$implicit;R(),q("value","!")("badgeSize","small"),R(2),Ns(" ",n," ")}}function AC(r,i){if(r&1&&(b(0,"p-fieldset"),mn(1,TC,2,0,"ng-template",null,0,Ir),Ot(3,EC,4,3,"div",3,Nt),w()),r&2){let n=W();R(3),Pt(n.errors)}}var ka=class r extends On{membraneService=Ae(Nr);membraneMessageService=Ae(di);changeDetector=Ae(rn);progress="";subProgress="";iterationProgress="";errors=[];solve(){return Se(this,null,function*(){this.errors=[],yield this.membraneService.solve()})}ngOnInit(){return Se(this,null,function*(){this.membraneMessageService.progressChanged.pipe(nn(this.destroyed$),Fe(i=>{i.message&&(this.progress=i.message)}),Fe(i=>{i.subMessage&&(this.subProgress=i.subMessage)}),Fe(i=>{i.iterationMessage&&(this.iterationProgress=i.iterationMessage)})).subscribe(()=>this.changeDetector.detectChanges()),this.membraneMessageService.errorMessageChanged.pipe(nn(this.destroyed$),Fe(i=>this.errors=[...i])).subscribe(()=>this.changeDetector.detectChanges())})}static \u0275fac=(()=>{let i;return function(o){return(i||(i=pi(r)))(o||r)}})();static \u0275cmp=je({type:r,selectors:[["app-control-panel"]],features:[mi],decls:10,vars:4,consts:[["header",""],[1,"mt-2"],["label","Solve",3,"onClick"],[1,"flex","items-center"],[1,"flex","items-center","gap-2","px-2"],["severity","danger","value","Errors"],["severity","danger",3,"value","badgeSize"],[1,"pl-1"]],template:function(n,o){n&1&&(b(0,"div",1)(1,"p-button",2),G("onClick",function(){return o.solve()}),w(),b(2,"p"),B(3),w(),b(4,"p"),B(5),w(),b(6,"p"),B(7),w()(),oe(8,"p-divider"),mn(9,AC,5,0,"p-fieldset")),n&2&&(R(3),Be(o.progress),R(2),Be(o.subProgress),R(2),Be(o.iterationProgress),R(2),lr(o.errors.length>0?9:-1))},dependencies:[ze,Xe,Ze,ot,Je,tt,st,He,at,nt,lt,ut,it,et,hi,ct,ft,pt,mt,dt,ht,rt,gt,_t,yt,hm,wt,gm,Qe,um,bt,Ct,Us],styles:[".error-container[_ngcontent-%COMP%]{background-color:var(--p-red-400)}"],changeDetection:0})};var hd=class r{static \u0275fac=function(n){return new(n||r)};static \u0275cmp=je({type:r,selectors:[["app-membrane"]],decls:21,vars:2,consts:[[1,"grid","grid-cols-2","gap-2","ml-2"],["value","0"],["value","1"],["value","2"],[1,"sticky","top-0"]],template:function(n,o){n&1&&(b(0,"div",0)(1,"div"),oe(2,"app-control-panel"),b(3,"p-tabs",1)(4,"p-tablist")(5,"p-tab",1),B(6,"Geometry"),w(),b(7,"p-tab",2),B(8,"Raw Geometry"),w(),b(9,"p-tab",3),B(10,"Results"),w()(),b(11,"p-tabpanels")(12,"p-tabpanel",1),oe(13,"app-geometry"),w(),b(14,"p-tabpanel",2),oe(15,"app-raw-geometry"),w(),b(16,"p-tabpanel",3),oe(17,"app-results"),w()()()(),b(18,"div")(19,"div",4),oe(20,"app-view3d"),w()()()),n&2&&(R(3),Lp("flex-grow:1"))},dependencies:[Zs,qs,ka,js,ze,lm,am,sm,rm,om,Xe,Ze,ot,Je,tt,st,He,at,nt,lt,ut,it,et,ct,ft,pt,mt,dt,ht,rt,gt,_t,yt,wt,Qe,bt,Ct,Ra],styles:["[_nghost-%COMP%]     p-panel div.p-panel{margin-bottom:calc(var(--spacing) * 4)}"],changeDetection:0})};export{hd as MembraneComponent};
