var kn=Object.create;var Te=Object.defineProperty;var qn=Object.getOwnPropertyDescriptor;var Gn=Object.getOwnPropertyNames;var Kn=Object.getPrototypeOf,$n=Object.prototype.hasOwnProperty;var wt=(h=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(h,{get:(t,e)=>(typeof require<"u"?require:t)[e]}):h)(function(h){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+h+'" is not supported')});var $t=(h,t)=>()=>(t||h((t={exports:{}}).exports,t),t.exports);var Xn=(h,t,e,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of Gn(t))!$n.call(h,r)&&r!==e&&Te(h,r,{get:()=>t[r],enumerable:!(n=qn(t,r))||n.enumerable});return h};var Tt=(h,t,e)=>(e=h!=null?kn(Kn(h)):{},Xn(t||!h||!h.__esModule?Te(e,"default",{value:h,enumerable:!0}):e,h));var Ct=$t((Or,Se)=>{"use strict";var Xt=Math.abs,Qn=Math.min;function Lt(h,t,e,n){var r=Xt(h-t);return e==null&&(e=Lt.DBL_EPSILON),n==null&&(n=e),r<=e||r<=n*Qn(Xt(h),Xt(t))?!0:h===t}Lt.FLT_EPSILON=11920929e-14;Lt.DBL_EPSILON=2220446049250313e-31;Se.exports=Lt});var Ve=$t((Oe,te)=>{"use strict";(function(h){if(typeof Oe=="object"&&typeof te<"u")te.exports=h();else if(typeof define=="function"&&define.amd)define([],h);else{var t;typeof window<"u"?t=window:typeof global<"u"?t=global:typeof self<"u"?t=self:t=this,t.localforage=h()}})(function(){var h,t,e;return function n(r,a,s){function i(_,g){if(!a[_]){if(!r[_]){var u=typeof wt=="function"&&wt;if(!g&&u)return u(_,!0);if(f)return f(_,!0);var b=new Error("Cannot find module '"+_+"'");throw b.code="MODULE_NOT_FOUND",b}var y=a[_]={exports:{}};r[_][0].call(y.exports,function(T){var N=r[_][1][T];return i(N||T)},y,y.exports,n,r,a,s)}return a[_].exports}for(var f=typeof wt=="function"&&wt,l=0;l<s.length;l++)i(s[l]);return i}({1:[function(n,r,a){(function(s){"use strict";var i=s.MutationObserver||s.WebKitMutationObserver,f;if(i){var l=0,_=new i(T),g=s.document.createTextNode("");_.observe(g,{characterData:!0}),f=function(){g.data=l=++l%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var u=new s.MessageChannel;u.port1.onmessage=T,f=function(){u.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?f=function(){var R=s.document.createElement("script");R.onreadystatechange=function(){T(),R.onreadystatechange=null,R.parentNode.removeChild(R),R=null},s.document.documentElement.appendChild(R)}:f=function(){setTimeout(T,0)};var b,y=[];function T(){b=!0;for(var R,B,j=y.length;j;){for(B=y,y=[],R=-1;++R<j;)B[R]();j=y.length}b=!1}r.exports=N;function N(R){y.push(R)===1&&!b&&f()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,a){"use strict";var s=n(1);function i(){}var f={},l=["REJECTED"],_=["FULFILLED"],g=["PENDING"];r.exports=u;function u(I){if(typeof I!="function")throw new TypeError("resolver must be a function");this.state=g,this.queue=[],this.outcome=void 0,I!==i&&N(this,I)}u.prototype.catch=function(I){return this.then(null,I)},u.prototype.then=function(I,V){if(typeof I!="function"&&this.state===_||typeof V!="function"&&this.state===l)return this;var D=new this.constructor(i);if(this.state!==g){var A=this.state===_?I:V;y(D,A,this.outcome)}else this.queue.push(new b(D,I,V));return D};function b(I,V,D){this.promise=I,typeof V=="function"&&(this.onFulfilled=V,this.callFulfilled=this.otherCallFulfilled),typeof D=="function"&&(this.onRejected=D,this.callRejected=this.otherCallRejected)}b.prototype.callFulfilled=function(I){f.resolve(this.promise,I)},b.prototype.otherCallFulfilled=function(I){y(this.promise,this.onFulfilled,I)},b.prototype.callRejected=function(I){f.reject(this.promise,I)},b.prototype.otherCallRejected=function(I){y(this.promise,this.onRejected,I)};function y(I,V,D){s(function(){var A;try{A=V(D)}catch(C){return f.reject(I,C)}A===I?f.reject(I,new TypeError("Cannot resolve promise with itself")):f.resolve(I,A)})}f.resolve=function(I,V){var D=R(T,V);if(D.status==="error")return f.reject(I,D.value);var A=D.value;if(A)N(I,A);else{I.state=_,I.outcome=V;for(var C=-1,O=I.queue.length;++C<O;)I.queue[C].callFulfilled(V)}return I},f.reject=function(I,V){I.state=l,I.outcome=V;for(var D=-1,A=I.queue.length;++D<A;)I.queue[D].callRejected(V);return I};function T(I){var V=I&&I.then;if(I&&(typeof I=="object"||typeof I=="function")&&typeof V=="function")return function(){V.apply(I,arguments)}}function N(I,V){var D=!1;function A(U){D||(D=!0,f.reject(I,U))}function C(U){D||(D=!0,f.resolve(I,U))}function O(){V(C,A)}var F=R(O);F.status==="error"&&A(F.value)}function R(I,V){var D={};try{D.value=I(V),D.status="success"}catch(A){D.status="error",D.value=A}return D}u.resolve=B;function B(I){return I instanceof this?I:f.resolve(new this(i),I)}u.reject=j;function j(I){var V=new this(i);return f.reject(V,I)}u.all=G;function G(I){var V=this;if(Object.prototype.toString.call(I)!=="[object Array]")return this.reject(new TypeError("must be an array"));var D=I.length,A=!1;if(!D)return this.resolve([]);for(var C=new Array(D),O=0,F=-1,U=new this(i);++F<D;)K(I[F],F);return U;function K(Z,Y){V.resolve(Z).then(Q,function(H){A||(A=!0,f.reject(U,H))});function Q(H){C[Y]=H,++O===D&&!A&&(A=!0,f.resolve(U,C))}}}u.race=q;function q(I){var V=this;if(Object.prototype.toString.call(I)!=="[object Array]")return this.reject(new TypeError("must be an array"));var D=I.length,A=!1;if(!D)return this.resolve([]);for(var C=-1,O=new this(i);++C<D;)F(I[C]);return O;function F(U){V.resolve(U).then(function(K){A||(A=!0,f.resolve(O,K))},function(K){A||(A=!0,f.reject(O,K))})}}},{1:1}],3:[function(n,r,a){(function(s){"use strict";typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,a){"use strict";var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o};function i(o,d){if(!(o instanceof d))throw new TypeError("Cannot call a class as a function")}function f(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var l=f();function _(){try{if(!l||!l.open)return!1;var o=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),d=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!o||d)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function g(o,d){o=o||[],d=d||{};try{return new Blob(o,d)}catch(m){if(m.name!=="TypeError")throw m;for(var c=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,p=new c,v=0;v<o.length;v+=1)p.append(o[v]);return p.getBlob(d.type)}}typeof Promise>"u"&&n(3);var u=Promise;function b(o,d){d&&o.then(function(c){d(null,c)},function(c){d(c)})}function y(o,d,c){typeof d=="function"&&o.then(d),typeof c=="function"&&o.catch(c)}function T(o){return typeof o!="string"&&(console.warn(o+" used as a key, but it is not a string."),o=String(o)),o}function N(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var R="local-forage-detect-blob-support",B=void 0,j={},G=Object.prototype.toString,q="readonly",I="readwrite";function V(o){for(var d=o.length,c=new ArrayBuffer(d),p=new Uint8Array(c),v=0;v<d;v++)p[v]=o.charCodeAt(v);return c}function D(o){return new u(function(d){var c=o.transaction(R,I),p=g([""]);c.objectStore(R).put(p,"key"),c.onabort=function(v){v.preventDefault(),v.stopPropagation(),d(!1)},c.oncomplete=function(){var v=navigator.userAgent.match(/Chrome\/(\d+)/),m=navigator.userAgent.match(/Edge\//);d(m||!v||parseInt(v[1],10)>=43)}}).catch(function(){return!1})}function A(o){return typeof B=="boolean"?u.resolve(B):D(o).then(function(d){return B=d,B})}function C(o){var d=j[o.name],c={};c.promise=new u(function(p,v){c.resolve=p,c.reject=v}),d.deferredOperations.push(c),d.dbReady?d.dbReady=d.dbReady.then(function(){return c.promise}):d.dbReady=c.promise}function O(o){var d=j[o.name],c=d.deferredOperations.pop();if(c)return c.resolve(),c.promise}function F(o,d){var c=j[o.name],p=c.deferredOperations.pop();if(p)return p.reject(d),p.promise}function U(o,d){return new u(function(c,p){if(j[o.name]=j[o.name]||re(),o.db)if(d)C(o),o.db.close();else return c(o.db);var v=[o.name];d&&v.push(o.version);var m=l.open.apply(l,v);d&&(m.onupgradeneeded=function(x){var S=m.result;try{S.createObjectStore(o.storeName),x.oldVersion<=1&&S.createObjectStore(R)}catch(M){if(M.name==="ConstraintError")console.warn('The database "'+o.name+'" has been upgraded from version '+x.oldVersion+" to version "+x.newVersion+', but the storage "'+o.storeName+'" already exists.');else throw M}}),m.onerror=function(x){x.preventDefault(),p(m.error)},m.onsuccess=function(){var x=m.result;x.onversionchange=function(S){S.target.close()},c(x),O(o)}})}function K(o){return U(o,!1)}function Z(o){return U(o,!0)}function Y(o,d){if(!o.db)return!0;var c=!o.db.objectStoreNames.contains(o.storeName),p=o.version<o.db.version,v=o.version>o.db.version;if(p&&(o.version!==d&&console.warn('The database "'+o.name+`" can't be downgraded from version `+o.db.version+" to version "+o.version+"."),o.version=o.db.version),v||c){if(c){var m=o.db.version+1;m>o.version&&(o.version=m)}return!0}return!1}function Q(o){return new u(function(d,c){var p=new FileReader;p.onerror=c,p.onloadend=function(v){var m=btoa(v.target.result||"");d({__local_forage_encoded_blob:!0,data:m,type:o.type})},p.readAsBinaryString(o)})}function H(o){var d=V(atob(o.data));return g([d],{type:o.type})}function et(o){return o&&o.__local_forage_encoded_blob}function ct(o){var d=this,c=d._initReady().then(function(){var p=j[d._dbInfo.name];if(p&&p.dbReady)return p.dbReady});return y(c,o,o),c}function Vt(o){C(o);for(var d=j[o.name],c=d.forages,p=0;p<c.length;p++){var v=c[p];v._dbInfo.db&&(v._dbInfo.db.close(),v._dbInfo.db=null)}return o.db=null,K(o).then(function(m){return o.db=m,Y(o)?Z(o):m}).then(function(m){o.db=d.db=m;for(var x=0;x<c.length;x++)c[x]._dbInfo.db=m}).catch(function(m){throw F(o,m),m})}function at(o,d,c,p){p===void 0&&(p=1);try{var v=o.db.transaction(o.storeName,d);c(null,v)}catch(m){if(p>0&&(!o.db||m.name==="InvalidStateError"||m.name==="NotFoundError"))return u.resolve().then(function(){if(!o.db||m.name==="NotFoundError"&&!o.db.objectStoreNames.contains(o.storeName)&&o.version<=o.db.version)return o.db&&(o.version=o.db.version+1),Z(o)}).then(function(){return Vt(o).then(function(){at(o,d,c,p-1)})}).catch(c);c(m)}}function re(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Ge(o){var d=this,c={db:null};if(o)for(var p in o)c[p]=o[p];var v=j[c.name];v||(v=re(),j[c.name]=v),v.forages.push(d),d._initReady||(d._initReady=d.ready,d.ready=ct);var m=[];function x(){return u.resolve()}for(var S=0;S<v.forages.length;S++){var M=v.forages[S];M!==d&&m.push(M._initReady().catch(x))}var P=v.forages.slice(0);return u.all(m).then(function(){return c.db=v.db,K(c)}).then(function(E){return c.db=E,Y(c,d._defaultConfig.version)?Z(c):E}).then(function(E){c.db=v.db=E,d._dbInfo=c;for(var L=0;L<P.length;L++){var W=P[L];W!==d&&(W._dbInfo.db=c.db,W._dbInfo.version=c.version)}})}function Ke(o,d){var c=this;o=T(o);var p=new u(function(v,m){c.ready().then(function(){at(c._dbInfo,q,function(x,S){if(x)return m(x);try{var M=S.objectStore(c._dbInfo.storeName),P=M.get(o);P.onsuccess=function(){var E=P.result;E===void 0&&(E=null),et(E)&&(E=H(E)),v(E)},P.onerror=function(){m(P.error)}}catch(E){m(E)}})}).catch(m)});return b(p,d),p}function $e(o,d){var c=this,p=new u(function(v,m){c.ready().then(function(){at(c._dbInfo,q,function(x,S){if(x)return m(x);try{var M=S.objectStore(c._dbInfo.storeName),P=M.openCursor(),E=1;P.onsuccess=function(){var L=P.result;if(L){var W=L.value;et(W)&&(W=H(W));var $=o(W,L.key,E++);$!==void 0?v($):L.continue()}else v()},P.onerror=function(){m(P.error)}}catch(L){m(L)}})}).catch(m)});return b(p,d),p}function Xe(o,d,c){var p=this;o=T(o);var v=new u(function(m,x){var S;p.ready().then(function(){return S=p._dbInfo,G.call(d)==="[object Blob]"?A(S.db).then(function(M){return M?d:Q(d)}):d}).then(function(M){at(p._dbInfo,I,function(P,E){if(P)return x(P);try{var L=E.objectStore(p._dbInfo.storeName);M===null&&(M=void 0);var W=L.put(M,o);E.oncomplete=function(){M===void 0&&(M=null),m(M)},E.onabort=E.onerror=function(){var $=W.error?W.error:W.transaction.error;x($)}}catch($){x($)}})}).catch(x)});return b(v,c),v}function Qe(o,d){var c=this;o=T(o);var p=new u(function(v,m){c.ready().then(function(){at(c._dbInfo,I,function(x,S){if(x)return m(x);try{var M=S.objectStore(c._dbInfo.storeName),P=M.delete(o);S.oncomplete=function(){v()},S.onerror=function(){m(P.error)},S.onabort=function(){var E=P.error?P.error:P.transaction.error;m(E)}}catch(E){m(E)}})}).catch(m)});return b(p,d),p}function Ze(o){var d=this,c=new u(function(p,v){d.ready().then(function(){at(d._dbInfo,I,function(m,x){if(m)return v(m);try{var S=x.objectStore(d._dbInfo.storeName),M=S.clear();x.oncomplete=function(){p()},x.onabort=x.onerror=function(){var P=M.error?M.error:M.transaction.error;v(P)}}catch(P){v(P)}})}).catch(v)});return b(c,o),c}function Je(o){var d=this,c=new u(function(p,v){d.ready().then(function(){at(d._dbInfo,q,function(m,x){if(m)return v(m);try{var S=x.objectStore(d._dbInfo.storeName),M=S.count();M.onsuccess=function(){p(M.result)},M.onerror=function(){v(M.error)}}catch(P){v(P)}})}).catch(v)});return b(c,o),c}function He(o,d){var c=this,p=new u(function(v,m){if(o<0){v(null);return}c.ready().then(function(){at(c._dbInfo,q,function(x,S){if(x)return m(x);try{var M=S.objectStore(c._dbInfo.storeName),P=!1,E=M.openKeyCursor();E.onsuccess=function(){var L=E.result;if(!L){v(null);return}o===0||P?v(L.key):(P=!0,L.advance(o))},E.onerror=function(){m(E.error)}}catch(L){m(L)}})}).catch(m)});return b(p,d),p}function ze(o){var d=this,c=new u(function(p,v){d.ready().then(function(){at(d._dbInfo,q,function(m,x){if(m)return v(m);try{var S=x.objectStore(d._dbInfo.storeName),M=S.openKeyCursor(),P=[];M.onsuccess=function(){var E=M.result;if(!E){p(P);return}P.push(E.key),E.continue()},M.onerror=function(){v(M.error)}}catch(E){v(E)}})}).catch(v)});return b(c,o),c}function tn(o,d){d=N.apply(this,arguments);var c=this.config();o=typeof o!="function"&&o||{},o.name||(o.name=o.name||c.name,o.storeName=o.storeName||c.storeName);var p=this,v;if(!o.name)v=u.reject("Invalid arguments");else{var m=o.name===c.name&&p._dbInfo.db,x=m?u.resolve(p._dbInfo.db):K(o).then(function(S){var M=j[o.name],P=M.forages;M.db=S;for(var E=0;E<P.length;E++)P[E]._dbInfo.db=S;return S});o.storeName?v=x.then(function(S){if(S.objectStoreNames.contains(o.storeName)){var M=S.version+1;C(o);var P=j[o.name],E=P.forages;S.close();for(var L=0;L<E.length;L++){var W=E[L];W._dbInfo.db=null,W._dbInfo.version=M}var $=new u(function(X,z){var J=l.open(o.name,M);J.onerror=function(ot){var xt=J.result;xt.close(),z(ot)},J.onupgradeneeded=function(){var ot=J.result;ot.deleteObjectStore(o.storeName)},J.onsuccess=function(){var ot=J.result;ot.close(),X(ot)}});return $.then(function(X){P.db=X;for(var z=0;z<E.length;z++){var J=E[z];J._dbInfo.db=X,O(J._dbInfo)}}).catch(function(X){throw(F(o,X)||u.resolve()).catch(function(){}),X})}}):v=x.then(function(S){C(o);var M=j[o.name],P=M.forages;S.close();for(var E=0;E<P.length;E++){var L=P[E];L._dbInfo.db=null}var W=new u(function($,X){var z=l.deleteDatabase(o.name);z.onerror=function(){var J=z.result;J&&J.close(),X(z.error)},z.onblocked=function(){console.warn('dropInstance blocked for database "'+o.name+'" until all open connections are closed')},z.onsuccess=function(){var J=z.result;J&&J.close(),$(J)}});return W.then(function($){M.db=$;for(var X=0;X<P.length;X++){var z=P[X];O(z._dbInfo)}}).catch(function($){throw(F(o,$)||u.resolve()).catch(function(){}),$})})}return b(v,d),v}var en={_driver:"asyncStorage",_initStorage:Ge,_support:_(),iterate:$e,getItem:Ke,setItem:Xe,removeItem:Qe,clear:Ze,length:Je,key:He,keys:ze,dropInstance:tn};function nn(){return typeof openDatabase=="function"}var ft="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",rn="~~local_forage_type~",oe=/^~~local_forage_type~([^~]+)~/,Dt="__lfsc__:",jt=Dt.length,Ft="arbf",Yt="blob",ie="si08",se="ui08",ae="uic8",ce="si16",fe="si32",ue="ur16",le="ui32",he="fl32",de="fl64",me=jt+Ft.length,pe=Object.prototype.toString;function be(o){var d=o.length*.75,c=o.length,p,v=0,m,x,S,M;o[o.length-1]==="="&&(d--,o[o.length-2]==="="&&d--);var P=new ArrayBuffer(d),E=new Uint8Array(P);for(p=0;p<c;p+=4)m=ft.indexOf(o[p]),x=ft.indexOf(o[p+1]),S=ft.indexOf(o[p+2]),M=ft.indexOf(o[p+3]),E[v++]=m<<2|x>>4,E[v++]=(x&15)<<4|S>>2,E[v++]=(S&3)<<6|M&63;return P}function Ut(o){var d=new Uint8Array(o),c="",p;for(p=0;p<d.length;p+=3)c+=ft[d[p]>>2],c+=ft[(d[p]&3)<<4|d[p+1]>>4],c+=ft[(d[p+1]&15)<<2|d[p+2]>>6],c+=ft[d[p+2]&63];return d.length%3===2?c=c.substring(0,c.length-1)+"=":d.length%3===1&&(c=c.substring(0,c.length-2)+"=="),c}function on(o,d){var c="";if(o&&(c=pe.call(o)),o&&(c==="[object ArrayBuffer]"||o.buffer&&pe.call(o.buffer)==="[object ArrayBuffer]")){var p,v=Dt;o instanceof ArrayBuffer?(p=o,v+=Ft):(p=o.buffer,c==="[object Int8Array]"?v+=ie:c==="[object Uint8Array]"?v+=se:c==="[object Uint8ClampedArray]"?v+=ae:c==="[object Int16Array]"?v+=ce:c==="[object Uint16Array]"?v+=ue:c==="[object Int32Array]"?v+=fe:c==="[object Uint32Array]"?v+=le:c==="[object Float32Array]"?v+=he:c==="[object Float64Array]"?v+=de:d(new Error("Failed to get type for BinaryArray"))),d(v+Ut(p))}else if(c==="[object Blob]"){var m=new FileReader;m.onload=function(){var x=rn+o.type+"~"+Ut(this.result);d(Dt+Yt+x)},m.readAsArrayBuffer(o)}else try{d(JSON.stringify(o))}catch(x){console.error("Couldn't convert value into a JSON string: ",o),d(null,x)}}function sn(o){if(o.substring(0,jt)!==Dt)return JSON.parse(o);var d=o.substring(me),c=o.substring(jt,me),p;if(c===Yt&&oe.test(d)){var v=d.match(oe);p=v[1],d=d.substring(v[0].length)}var m=be(d);switch(c){case Ft:return m;case Yt:return g([m],{type:p});case ie:return new Int8Array(m);case se:return new Uint8Array(m);case ae:return new Uint8ClampedArray(m);case ce:return new Int16Array(m);case ue:return new Uint16Array(m);case fe:return new Int32Array(m);case le:return new Uint32Array(m);case he:return new Float32Array(m);case de:return new Float64Array(m);default:throw new Error("Unkown type: "+c)}}var Wt={serialize:on,deserialize:sn,stringToBuffer:be,bufferToString:Ut};function ge(o,d,c,p){o.executeSql("CREATE TABLE IF NOT EXISTS "+d.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],c,p)}function an(o){var d=this,c={db:null};if(o)for(var p in o)c[p]=typeof o[p]!="string"?o[p].toString():o[p];var v=new u(function(m,x){try{c.db=openDatabase(c.name,String(c.version),c.description,c.size)}catch(S){return x(S)}c.db.transaction(function(S){ge(S,c,function(){d._dbInfo=c,m()},function(M,P){x(P)})},x)});return c.serializer=Wt,v}function ut(o,d,c,p,v,m){o.executeSql(c,p,v,function(x,S){S.code===S.SYNTAX_ERR?x.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[d.storeName],function(M,P){P.rows.length?m(M,S):ge(M,d,function(){M.executeSql(c,p,v,m)},m)},m):m(x,S)},m)}function cn(o,d){var c=this;o=T(o);var p=new u(function(v,m){c.ready().then(function(){var x=c._dbInfo;x.db.transaction(function(S){ut(S,x,"SELECT * FROM "+x.storeName+" WHERE key = ? LIMIT 1",[o],function(M,P){var E=P.rows.length?P.rows.item(0).value:null;E&&(E=x.serializer.deserialize(E)),v(E)},function(M,P){m(P)})})}).catch(m)});return b(p,d),p}function fn(o,d){var c=this,p=new u(function(v,m){c.ready().then(function(){var x=c._dbInfo;x.db.transaction(function(S){ut(S,x,"SELECT * FROM "+x.storeName,[],function(M,P){for(var E=P.rows,L=E.length,W=0;W<L;W++){var $=E.item(W),X=$.value;if(X&&(X=x.serializer.deserialize(X)),X=o(X,$.key,W+1),X!==void 0){v(X);return}}v()},function(M,P){m(P)})})}).catch(m)});return b(p,d),p}function ve(o,d,c,p){var v=this;o=T(o);var m=new u(function(x,S){v.ready().then(function(){d===void 0&&(d=null);var M=d,P=v._dbInfo;P.serializer.serialize(d,function(E,L){L?S(L):P.db.transaction(function(W){ut(W,P,"INSERT OR REPLACE INTO "+P.storeName+" (key, value) VALUES (?, ?)",[o,E],function(){x(M)},function($,X){S(X)})},function(W){if(W.code===W.QUOTA_ERR){if(p>0){x(ve.apply(v,[o,M,c,p-1]));return}S(W)}})})}).catch(S)});return b(m,c),m}function un(o,d,c){return ve.apply(this,[o,d,c,1])}function ln(o,d){var c=this;o=T(o);var p=new u(function(v,m){c.ready().then(function(){var x=c._dbInfo;x.db.transaction(function(S){ut(S,x,"DELETE FROM "+x.storeName+" WHERE key = ?",[o],function(){v()},function(M,P){m(P)})})}).catch(m)});return b(p,d),p}function hn(o){var d=this,c=new u(function(p,v){d.ready().then(function(){var m=d._dbInfo;m.db.transaction(function(x){ut(x,m,"DELETE FROM "+m.storeName,[],function(){p()},function(S,M){v(M)})})}).catch(v)});return b(c,o),c}function dn(o){var d=this,c=new u(function(p,v){d.ready().then(function(){var m=d._dbInfo;m.db.transaction(function(x){ut(x,m,"SELECT COUNT(key) as c FROM "+m.storeName,[],function(S,M){var P=M.rows.item(0).c;p(P)},function(S,M){v(M)})})}).catch(v)});return b(c,o),c}function mn(o,d){var c=this,p=new u(function(v,m){c.ready().then(function(){var x=c._dbInfo;x.db.transaction(function(S){ut(S,x,"SELECT key FROM "+x.storeName+" WHERE id = ? LIMIT 1",[o+1],function(M,P){var E=P.rows.length?P.rows.item(0).key:null;v(E)},function(M,P){m(P)})})}).catch(m)});return b(p,d),p}function pn(o){var d=this,c=new u(function(p,v){d.ready().then(function(){var m=d._dbInfo;m.db.transaction(function(x){ut(x,m,"SELECT key FROM "+m.storeName,[],function(S,M){for(var P=[],E=0;E<M.rows.length;E++)P.push(M.rows.item(E).key);p(P)},function(S,M){v(M)})})}).catch(v)});return b(c,o),c}function bn(o){return new u(function(d,c){o.transaction(function(p){p.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(v,m){for(var x=[],S=0;S<m.rows.length;S++)x.push(m.rows.item(S).name);d({db:o,storeNames:x})},function(v,m){c(m)})},function(p){c(p)})})}function gn(o,d){d=N.apply(this,arguments);var c=this.config();o=typeof o!="function"&&o||{},o.name||(o.name=o.name||c.name,o.storeName=o.storeName||c.storeName);var p=this,v;return o.name?v=new u(function(m){var x;o.name===c.name?x=p._dbInfo.db:x=openDatabase(o.name,"","",0),o.storeName?m({db:x,storeNames:[o.storeName]}):m(bn(x))}).then(function(m){return new u(function(x,S){m.db.transaction(function(M){function P($){return new u(function(X,z){M.executeSql("DROP TABLE IF EXISTS "+$,[],function(){X()},function(J,ot){z(ot)})})}for(var E=[],L=0,W=m.storeNames.length;L<W;L++)E.push(P(m.storeNames[L]));u.all(E).then(function(){x()}).catch(function($){S($)})},function(M){S(M)})})}):v=u.reject("Invalid arguments"),b(v,d),v}var vn={_driver:"webSQLStorage",_initStorage:an,_support:nn(),iterate:fn,getItem:cn,setItem:un,removeItem:ln,clear:hn,length:dn,key:mn,keys:pn,dropInstance:gn};function _n(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function _e(o,d){var c=o.name+"/";return o.storeName!==d.storeName&&(c+=o.storeName+"/"),c}function yn(){var o="_localforage_support_test";try{return localStorage.setItem(o,!0),localStorage.removeItem(o),!1}catch{return!0}}function xn(){return!yn()||localStorage.length>0}function wn(o){var d=this,c={};if(o)for(var p in o)c[p]=o[p];return c.keyPrefix=_e(o,d._defaultConfig),xn()?(d._dbInfo=c,c.serializer=Wt,u.resolve()):u.reject()}function Tn(o){var d=this,c=d.ready().then(function(){for(var p=d._dbInfo.keyPrefix,v=localStorage.length-1;v>=0;v--){var m=localStorage.key(v);m.indexOf(p)===0&&localStorage.removeItem(m)}});return b(c,o),c}function Sn(o,d){var c=this;o=T(o);var p=c.ready().then(function(){var v=c._dbInfo,m=localStorage.getItem(v.keyPrefix+o);return m&&(m=v.serializer.deserialize(m)),m});return b(p,d),p}function In(o,d){var c=this,p=c.ready().then(function(){for(var v=c._dbInfo,m=v.keyPrefix,x=m.length,S=localStorage.length,M=1,P=0;P<S;P++){var E=localStorage.key(P);if(E.indexOf(m)===0){var L=localStorage.getItem(E);if(L&&(L=v.serializer.deserialize(L)),L=o(L,E.substring(x),M++),L!==void 0)return L}}});return b(p,d),p}function Mn(o,d){var c=this,p=c.ready().then(function(){var v=c._dbInfo,m;try{m=localStorage.key(o)}catch{m=null}return m&&(m=m.substring(v.keyPrefix.length)),m});return b(p,d),p}function An(o){var d=this,c=d.ready().then(function(){for(var p=d._dbInfo,v=localStorage.length,m=[],x=0;x<v;x++){var S=localStorage.key(x);S.indexOf(p.keyPrefix)===0&&m.push(S.substring(p.keyPrefix.length))}return m});return b(c,o),c}function Pn(o){var d=this,c=d.keys().then(function(p){return p.length});return b(c,o),c}function En(o,d){var c=this;o=T(o);var p=c.ready().then(function(){var v=c._dbInfo;localStorage.removeItem(v.keyPrefix+o)});return b(p,d),p}function Rn(o,d,c){var p=this;o=T(o);var v=p.ready().then(function(){d===void 0&&(d=null);var m=d;return new u(function(x,S){var M=p._dbInfo;M.serializer.serialize(d,function(P,E){if(E)S(E);else try{localStorage.setItem(M.keyPrefix+o,P),x(m)}catch(L){(L.name==="QuotaExceededError"||L.name==="NS_ERROR_DOM_QUOTA_REACHED")&&S(L),S(L)}})})});return b(v,c),v}function Dn(o,d){if(d=N.apply(this,arguments),o=typeof o!="function"&&o||{},!o.name){var c=this.config();o.name=o.name||c.name,o.storeName=o.storeName||c.storeName}var p=this,v;return o.name?v=new u(function(m){o.storeName?m(_e(o,p._defaultConfig)):m(o.name+"/")}).then(function(m){for(var x=localStorage.length-1;x>=0;x--){var S=localStorage.key(x);S.indexOf(m)===0&&localStorage.removeItem(S)}}):v=u.reject("Invalid arguments"),b(v,d),v}var Nn={_driver:"localStorageWrapper",_initStorage:wn,_support:_n(),iterate:In,getItem:Sn,setItem:Rn,removeItem:En,clear:Tn,length:Pn,key:Mn,keys:An,dropInstance:Dn},Ln=function(d,c){return d===c||typeof d=="number"&&typeof c=="number"&&isNaN(d)&&isNaN(c)},Cn=function(d,c){for(var p=d.length,v=0;v<p;){if(Ln(d[v],c))return!0;v++}return!1},ye=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"},yt={},xe={},dt={INDEXEDDB:en,WEBSQL:vn,LOCALSTORAGE:Nn},Bn=[dt.INDEXEDDB._driver,dt.WEBSQL._driver,dt.LOCALSTORAGE._driver],Nt=["dropInstance"],kt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Nt),On={description:"",driver:Bn.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Vn(o,d){o[d]=function(){var c=arguments;return o.ready().then(function(){return o[d].apply(o,c)})}}function qt(){for(var o=1;o<arguments.length;o++){var d=arguments[o];if(d)for(var c in d)d.hasOwnProperty(c)&&(ye(d[c])?arguments[0][c]=d[c].slice():arguments[0][c]=d[c])}return arguments[0]}var jn=function(){function o(d){i(this,o);for(var c in dt)if(dt.hasOwnProperty(c)){var p=dt[c],v=p._driver;this[c]=v,yt[v]||this.defineDriver(p)}this._defaultConfig=qt({},On),this._config=qt({},this._defaultConfig,d),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return o.prototype.config=function(c){if((typeof c>"u"?"undefined":s(c))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var p in c){if(p==="storeName"&&(c[p]=c[p].replace(/\W/g,"_")),p==="version"&&typeof c[p]!="number")return new Error("Database version must be a number.");this._config[p]=c[p]}return"driver"in c&&c.driver?this.setDriver(this._config.driver):!0}else return typeof c=="string"?this._config[c]:this._config},o.prototype.defineDriver=function(c,p,v){var m=new u(function(x,S){try{var M=c._driver,P=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!c._driver){S(P);return}for(var E=kt.concat("_initStorage"),L=0,W=E.length;L<W;L++){var $=E[L],X=!Cn(Nt,$);if((X||c[$])&&typeof c[$]!="function"){S(P);return}}var z=function(){for(var xt=function(Un){return function(){var Wn=new Error("Method "+Un+" is not implemented by the current driver"),we=u.reject(Wn);return b(we,arguments[arguments.length-1]),we}},Gt=0,Yn=Nt.length;Gt<Yn;Gt++){var Kt=Nt[Gt];c[Kt]||(c[Kt]=xt(Kt))}};z();var J=function(xt){yt[M]&&console.info("Redefining LocalForage driver: "+M),yt[M]=c,xe[M]=xt,x()};"_support"in c?c._support&&typeof c._support=="function"?c._support().then(J,S):J(!!c._support):J(!0)}catch(ot){S(ot)}});return y(m,p,v),m},o.prototype.driver=function(){return this._driver||null},o.prototype.getDriver=function(c,p,v){var m=yt[c]?u.resolve(yt[c]):u.reject(new Error("Driver not found."));return y(m,p,v),m},o.prototype.getSerializer=function(c){var p=u.resolve(Wt);return y(p,c),p},o.prototype.ready=function(c){var p=this,v=p._driverSet.then(function(){return p._ready===null&&(p._ready=p._initDriver()),p._ready});return y(v,c,c),v},o.prototype.setDriver=function(c,p,v){var m=this;ye(c)||(c=[c]);var x=this._getSupportedDrivers(c);function S(){m._config.driver=m.driver()}function M(L){return m._extend(L),S(),m._ready=m._initStorage(m._config),m._ready}function P(L){return function(){var W=0;function $(){for(;W<L.length;){var X=L[W];return W++,m._dbInfo=null,m._ready=null,m.getDriver(X).then(M).catch($)}S();var z=new Error("No available storage method found.");return m._driverSet=u.reject(z),m._driverSet}return $()}}var E=this._driverSet!==null?this._driverSet.catch(function(){return u.resolve()}):u.resolve();return this._driverSet=E.then(function(){var L=x[0];return m._dbInfo=null,m._ready=null,m.getDriver(L).then(function(W){m._driver=W._driver,S(),m._wrapLibraryMethodsWithReady(),m._initDriver=P(x)})}).catch(function(){S();var L=new Error("No available storage method found.");return m._driverSet=u.reject(L),m._driverSet}),y(this._driverSet,p,v),this._driverSet},o.prototype.supports=function(c){return!!xe[c]},o.prototype._extend=function(c){qt(this,c)},o.prototype._getSupportedDrivers=function(c){for(var p=[],v=0,m=c.length;v<m;v++){var x=c[v];this.supports(x)&&p.push(x)}return p},o.prototype._wrapLibraryMethodsWithReady=function(){for(var c=0,p=kt.length;c<p;c++)Vn(this,kt[c])},o.prototype.createInstance=function(c){return new o(c)},o}(),Fn=new jn;r.exports=Fn},{3:3}]},{},[4])(4)})});var We=$t((Is,Ue)=>{"use strict";var ee=Math.abs,wr=Math.min;function Ot(h,t,e,n){var r=ee(h-t);return e==null&&(e=Ot.DBL_EPSILON),n==null&&(n=e),r<=e||r<=n*wr(ee(h),ee(t))?!0:h===t}Ot.FLT_EPSILON=11920929e-14;Ot.DBL_EPSILON=2220446049250313e-31;Ue.exports=Ot});var St=h=>({vertices:[{x:h.x,y:h.y},{x:h.x+h.width,y:h.y},{x:h.x+h.width,y:h.y+h.height},{x:h.x,y:h.y+h.height}]});var Ht=Tt(Ct(),1),Re=Tt(Ct(),1);var k=11102230246251565e-32,tt=134217729,It=(3+8*k)*k;function ht(h,t,e,n,r){let a,s,i,f,l=t[0],_=n[0],g=0,u=0;_>l==_>-l?(a=l,l=t[++g]):(a=_,_=n[++u]);let b=0;if(g<h&&u<e)for(_>l==_>-l?(s=l+a,i=a-(s-l),l=t[++g]):(s=_+a,i=a-(s-_),_=n[++u]),a=s,i!==0&&(r[b++]=i);g<h&&u<e;)_>l==_>-l?(s=a+l,f=s-a,i=a-(s-f)+(l-f),l=t[++g]):(s=a+_,f=s-a,i=a-(s-f)+(_-f),_=n[++u]),a=s,i!==0&&(r[b++]=i);for(;g<h;)s=a+l,f=s-a,i=a-(s-f)+(l-f),l=t[++g],a=s,i!==0&&(r[b++]=i);for(;u<e;)s=a+_,f=s-a,i=a-(s-f)+(_-f),_=n[++u],a=s,i!==0&&(r[b++]=i);return(a!==0||b===0)&&(r[b++]=a),b}function Mt(h,t){let e=t[0];for(let n=1;n<h;n++)e+=t[n];return e}function w(h){return new Float64Array(h)}var Zn=(3+16*k)*k,Jn=(2+12*k)*k,Hn=(9+64*k)*k*k,mt=w(4),Ie=w(8),Me=w(12),Ae=w(16),nt=w(4);function zn(h,t,e,n,r,a,s){let i,f,l,_,g,u,b,y,T,N,R,B,j,G,q,I,V,D,A=h-r,C=e-r,O=t-a,F=n-a;G=A*F,u=tt*A,b=u-(u-A),y=A-b,u=tt*F,T=u-(u-F),N=F-T,q=y*N-(G-b*T-y*T-b*N),I=O*C,u=tt*O,b=u-(u-O),y=O-b,u=tt*C,T=u-(u-C),N=C-T,V=y*N-(I-b*T-y*T-b*N),R=q-V,g=q-R,mt[0]=q-(R+g)+(g-V),B=G+R,g=B-G,j=G-(B-g)+(R-g),R=j-I,g=j-R,mt[1]=j-(R+g)+(g-I),D=B+R,g=D-B,mt[2]=B-(D-g)+(R-g),mt[3]=D;let U=Mt(4,mt),K=Jn*s;if(U>=K||-U>=K||(g=h-A,i=h-(A+g)+(g-r),g=e-C,l=e-(C+g)+(g-r),g=t-O,f=t-(O+g)+(g-a),g=n-F,_=n-(F+g)+(g-a),i===0&&f===0&&l===0&&_===0)||(K=Hn*s+It*Math.abs(U),U+=A*_+F*i-(O*l+C*f),U>=K||-U>=K))return U;G=i*F,u=tt*i,b=u-(u-i),y=i-b,u=tt*F,T=u-(u-F),N=F-T,q=y*N-(G-b*T-y*T-b*N),I=f*C,u=tt*f,b=u-(u-f),y=f-b,u=tt*C,T=u-(u-C),N=C-T,V=y*N-(I-b*T-y*T-b*N),R=q-V,g=q-R,nt[0]=q-(R+g)+(g-V),B=G+R,g=B-G,j=G-(B-g)+(R-g),R=j-I,g=j-R,nt[1]=j-(R+g)+(g-I),D=B+R,g=D-B,nt[2]=B-(D-g)+(R-g),nt[3]=D;let Z=ht(4,mt,4,nt,Ie);G=A*_,u=tt*A,b=u-(u-A),y=A-b,u=tt*_,T=u-(u-_),N=_-T,q=y*N-(G-b*T-y*T-b*N),I=O*l,u=tt*O,b=u-(u-O),y=O-b,u=tt*l,T=u-(u-l),N=l-T,V=y*N-(I-b*T-y*T-b*N),R=q-V,g=q-R,nt[0]=q-(R+g)+(g-V),B=G+R,g=B-G,j=G-(B-g)+(R-g),R=j-I,g=j-R,nt[1]=j-(R+g)+(g-I),D=B+R,g=D-B,nt[2]=B-(D-g)+(R-g),nt[3]=D;let Y=ht(Z,Ie,4,nt,Me);G=i*_,u=tt*i,b=u-(u-i),y=i-b,u=tt*_,T=u-(u-_),N=_-T,q=y*N-(G-b*T-y*T-b*N),I=f*l,u=tt*f,b=u-(u-f),y=f-b,u=tt*l,T=u-(u-l),N=l-T,V=y*N-(I-b*T-y*T-b*N),R=q-V,g=q-R,nt[0]=q-(R+g)+(g-V),B=G+R,g=B-G,j=G-(B-g)+(R-g),R=j-I,g=j-R,nt[1]=j-(R+g)+(g-I),D=B+R,g=D-B,nt[2]=B-(D-g)+(R-g),nt[3]=D;let Q=ht(Y,Me,4,nt,Ae);return Ae[Q-1]}function pt(h,t,e,n,r,a){let s=(t-a)*(e-r),i=(h-r)*(n-a),f=s-i,l=Math.abs(s+i);return Math.abs(f)>=Zn*l?f:-zn(h,t,e,n,r,a,l)}var Ur=(7+56*k)*k,Wr=(3+28*k)*k,kr=(26+288*k)*k*k,qr=w(4),Gr=w(4),Kr=w(4),$r=w(4),Xr=w(4),Qr=w(4),Zr=w(4),Jr=w(4),Hr=w(4),zr=w(8),to=w(8),eo=w(8),no=w(4),ro=w(8),oo=w(8),io=w(8),so=w(12),ao=w(192),co=w(192);var lo=(10+96*k)*k,ho=(4+48*k)*k,mo=(44+576*k)*k*k,po=w(4),bo=w(4),go=w(4),vo=w(4),_o=w(4),yo=w(4),xo=w(4),wo=w(4),To=w(8),So=w(8),Io=w(8),Mo=w(8),Ao=w(8),Po=w(8),Eo=w(8),Ro=w(8),Do=w(8),No=w(4),Lo=w(4),Co=w(4),Bo=w(8),Oo=w(16),Vo=w(16),jo=w(16),Fo=w(32),Yo=w(32),Uo=w(48),Wo=w(64),ko=w(1152),qo=w(1152);var Xo=(16+224*k)*k,Qo=(5+72*k)*k,Zo=(71+1408*k)*k*k,Jo=w(4),Ho=w(4),zo=w(4),ti=w(4),ei=w(4),ni=w(4),ri=w(4),oi=w(4),ii=w(4),si=w(4),ai=w(24),ci=w(24),fi=w(24),ui=w(24),li=w(24),hi=w(24),di=w(24),mi=w(24),pi=w(24),bi=w(24),gi=w(1152),vi=w(1152),_i=w(1152),yi=w(1152),xi=w(1152),wi=w(2304),Ti=w(2304),Si=w(3456),Ii=w(5760),Mi=w(8),Ai=w(8),Pi=w(8),Ei=w(16),Ri=w(24),Di=w(48),Ni=w(48),Li=w(96),Ci=w(192),Bi=w(384),Oi=w(384),Vi=w(384),ji=w(768);var Fi=w(96),Yi=w(96),Ui=w(96),Wi=w(1152);var Ee=Math.pow(2,-52),Bt=new Uint32Array(512),gt=class h{static from(t,e=ir,n=sr){let r=t.length,a=new Float64Array(r*2);for(let s=0;s<r;s++){let i=t[s];a[2*s]=e(i),a[2*s+1]=n(i)}return new h(a)}constructor(t){let e=t.length>>1;if(e>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;let n=Math.max(2*e-5,0);this._triangles=new Uint32Array(n*3),this._halfedges=new Int32Array(n*3),this._hashSize=Math.ceil(Math.sqrt(e)),this._hullPrev=new Uint32Array(e),this._hullNext=new Uint32Array(e),this._hullTri=new Uint32Array(e),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(e),this._dists=new Float64Array(e),this.update()}update(){let{coords:t,_hullPrev:e,_hullNext:n,_hullTri:r,_hullHash:a}=this,s=t.length>>1,i=1/0,f=1/0,l=-1/0,_=-1/0;for(let A=0;A<s;A++){let C=t[2*A],O=t[2*A+1];C<i&&(i=C),O<f&&(f=O),C>l&&(l=C),O>_&&(_=O),this._ids[A]=A}let g=(i+l)/2,u=(f+_)/2,b,y,T;for(let A=0,C=1/0;A<s;A++){let O=Qt(g,u,t[2*A],t[2*A+1]);O<C&&(b=A,C=O)}let N=t[2*b],R=t[2*b+1];for(let A=0,C=1/0;A<s;A++){if(A===b)continue;let O=Qt(N,R,t[2*A],t[2*A+1]);O<C&&O>0&&(y=A,C=O)}let B=t[2*y],j=t[2*y+1],G=1/0;for(let A=0;A<s;A++){if(A===b||A===y)continue;let C=rr(N,R,B,j,t[2*A],t[2*A+1]);C<G&&(T=A,G=C)}let q=t[2*T],I=t[2*T+1];if(G===1/0){for(let O=0;O<s;O++)this._dists[O]=t[2*O]-t[0]||t[2*O+1]-t[1];bt(this._ids,this._dists,0,s-1);let A=new Uint32Array(s),C=0;for(let O=0,F=-1/0;O<s;O++){let U=this._ids[O],K=this._dists[U];K>F&&(A[C++]=U,F=K)}this.hull=A.subarray(0,C),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(pt(N,R,B,j,q,I)<0){let A=y,C=B,O=j;y=T,B=q,j=I,T=A,q=C,I=O}let V=or(N,R,B,j,q,I);this._cx=V.x,this._cy=V.y;for(let A=0;A<s;A++)this._dists[A]=Qt(t[2*A],t[2*A+1],V.x,V.y);bt(this._ids,this._dists,0,s-1),this._hullStart=b;let D=3;n[b]=e[T]=y,n[y]=e[b]=T,n[T]=e[y]=b,r[b]=0,r[y]=1,r[T]=2,a.fill(-1),a[this._hashKey(N,R)]=b,a[this._hashKey(B,j)]=y,a[this._hashKey(q,I)]=T,this.trianglesLen=0,this._addTriangle(b,y,T,-1,-1,-1);for(let A=0,C,O;A<this._ids.length;A++){let F=this._ids[A],U=t[2*F],K=t[2*F+1];if(A>0&&Math.abs(U-C)<=Ee&&Math.abs(K-O)<=Ee||(C=U,O=K,F===b||F===y||F===T))continue;let Z=0;for(let ct=0,Vt=this._hashKey(U,K);ct<this._hashSize&&(Z=a[(Vt+ct)%this._hashSize],!(Z!==-1&&Z!==n[Z]));ct++);Z=e[Z];let Y=Z,Q;for(;Q=n[Y],pt(U,K,t[2*Y],t[2*Y+1],t[2*Q],t[2*Q+1])>=0;)if(Y=Q,Y===Z){Y=-1;break}if(Y===-1)continue;let H=this._addTriangle(Y,F,n[Y],-1,-1,r[Y]);r[F]=this._legalize(H+2),r[Y]=H,D++;let et=n[Y];for(;Q=n[et],pt(U,K,t[2*et],t[2*et+1],t[2*Q],t[2*Q+1])<0;)H=this._addTriangle(et,F,Q,r[F],-1,r[et]),r[F]=this._legalize(H+2),n[et]=et,D--,et=Q;if(Y===Z)for(;Q=e[Y],pt(U,K,t[2*Q],t[2*Q+1],t[2*Y],t[2*Y+1])<0;)H=this._addTriangle(Q,F,Y,-1,r[Y],r[Q]),this._legalize(H+2),r[Q]=H,n[Y]=Y,D--,Y=Q;this._hullStart=e[F]=Y,n[Y]=e[et]=F,n[F]=et,a[this._hashKey(U,K)]=F,a[this._hashKey(t[2*Y],t[2*Y+1])]=Y}this.hull=new Uint32Array(D);for(let A=0,C=this._hullStart;A<D;A++)this.hull[A]=C,C=n[C];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,e){return Math.floor(er(t-this._cx,e-this._cy)*this._hashSize)%this._hashSize}_legalize(t){let{_triangles:e,_halfedges:n,coords:r}=this,a=0,s=0;for(;;){let i=n[t],f=t-t%3;if(s=f+(t+2)%3,i===-1){if(a===0)break;t=Bt[--a];continue}let l=i-i%3,_=f+(t+1)%3,g=l+(i+2)%3,u=e[s],b=e[t],y=e[_],T=e[g];if(nr(r[2*u],r[2*u+1],r[2*b],r[2*b+1],r[2*y],r[2*y+1],r[2*T],r[2*T+1])){e[t]=T,e[i]=u;let R=n[g];if(R===-1){let j=this._hullStart;do{if(this._hullTri[j]===g){this._hullTri[j]=t;break}j=this._hullPrev[j]}while(j!==this._hullStart)}this._link(t,R),this._link(i,n[s]),this._link(s,g);let B=l+(i+1)%3;a<Bt.length&&(Bt[a++]=B)}else{if(a===0)break;t=Bt[--a]}}return s}_link(t,e){this._halfedges[t]=e,e!==-1&&(this._halfedges[e]=t)}_addTriangle(t,e,n,r,a,s){let i=this.trianglesLen;return this._triangles[i]=t,this._triangles[i+1]=e,this._triangles[i+2]=n,this._link(i,r),this._link(i+1,a),this._link(i+2,s),this.trianglesLen+=3,i}};function er(h,t){let e=h/(Math.abs(h)+Math.abs(t));return(t>0?3-e:1+e)/4}function Qt(h,t,e,n){let r=h-e,a=t-n;return r*r+a*a}function nr(h,t,e,n,r,a,s,i){let f=h-s,l=t-i,_=e-s,g=n-i,u=r-s,b=a-i,y=f*f+l*l,T=_*_+g*g,N=u*u+b*b;return f*(g*N-T*b)-l*(_*N-T*u)+y*(_*b-g*u)<0}function rr(h,t,e,n,r,a){let s=e-h,i=n-t,f=r-h,l=a-t,_=s*s+i*i,g=f*f+l*l,u=.5/(s*l-i*f),b=(l*_-i*g)*u,y=(s*g-f*_)*u;return b*b+y*y}function or(h,t,e,n,r,a){let s=e-h,i=n-t,f=r-h,l=a-t,_=s*s+i*i,g=f*f+l*l,u=.5/(s*l-i*f),b=h+(l*_-i*g)*u,y=t+(s*g-f*_)*u;return{x:b,y}}function bt(h,t,e,n){if(n-e<=20)for(let r=e+1;r<=n;r++){let a=h[r],s=t[a],i=r-1;for(;i>=e&&t[h[i]]>s;)h[i+1]=h[i--];h[i+1]=a}else{let r=e+n>>1,a=e+1,s=n;At(h,r,a),t[h[e]]>t[h[n]]&&At(h,e,n),t[h[a]]>t[h[n]]&&At(h,a,n),t[h[e]]>t[h[a]]&&At(h,e,a);let i=h[a],f=t[i];for(;;){do a++;while(t[h[a]]<f);do s--;while(t[h[s]]>f);if(s<a)break;At(h,a,s)}h[e+1]=h[s],h[s]=i,n-a+1>=s-e?(bt(h,t,a,n),bt(h,t,e,s-1)):(bt(h,t,e,s-1),bt(h,t,a,n))}}function At(h,t,e){let n=h[t];h[t]=h[e],h[e]=n}function ir(h){return h[0]}function sr(h){return h[1]}var it=class{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,e){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,e){this._+=`L${this._x1=+t},${this._y1=+e}`}arc(t,e,n){t=+t,e=+e,n=+n;let r=t+n,a=e;if(n<0)throw new Error("negative radius");this._x1===null?this._+=`M${r},${a}`:(Math.abs(this._x1-r)>1e-6||Math.abs(this._y1-a)>1e-6)&&(this._+="L"+r+","+a),n&&(this._+=`A${n},${n},0,1,1,${t-n},${e}A${n},${n},0,1,1,${this._x1=r},${this._y1=a}`)}rect(t,e,n,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${+n}v${+r}h${-n}Z`}value(){return this._||null}};var lt=class{constructor(){this._=[]}moveTo(t,e){this._.push([t,e])}closePath(){this._.push(this._[0].slice())}lineTo(t,e){this._.push([t,e])}value(){return this._.length?this._:null}};var Pt=class{constructor(t,[e,n,r,a]=[0,0,960,500]){if(!((r=+r)>=(e=+e))||!((a=+a)>=(n=+n)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=r,this.xmin=e,this.ymax=a,this.ymin=n,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){let{delaunay:{points:t,hull:e,triangles:n},vectors:r}=this,a,s,i=this.circumcenters=this._circumcenters.subarray(0,n.length/3*2);for(let T=0,N=0,R=n.length,B,j;T<R;T+=3,N+=2){let G=n[T]*2,q=n[T+1]*2,I=n[T+2]*2,V=t[G],D=t[G+1],A=t[q],C=t[q+1],O=t[I],F=t[I+1],U=A-V,K=C-D,Z=O-V,Y=F-D,Q=(U*Y-K*Z)*2;if(Math.abs(Q)<1e-9){if(a===void 0){a=s=0;for(let et of e)a+=t[et*2],s+=t[et*2+1];a/=e.length,s/=e.length}let H=1e9*Math.sign((a-V)*Y-(s-D)*Z);B=(V+O)/2-H*Y,j=(D+F)/2+H*Z}else{let H=1/Q,et=U*U+K*K,ct=Z*Z+Y*Y;B=V+(Y*et-K*ct)*H,j=D+(U*ct-Z*et)*H}i[N]=B,i[N+1]=j}let f=e[e.length-1],l,_=f*4,g,u=t[2*f],b,y=t[2*f+1];r.fill(0);for(let T=0;T<e.length;++T)f=e[T],l=_,g=u,b=y,_=f*4,u=t[2*f],y=t[2*f+1],r[l+2]=r[_]=b-y,r[l+3]=r[_+1]=u-g}render(t){let e=t==null?t=new it:void 0,{delaunay:{halfedges:n,inedges:r,hull:a},circumcenters:s,vectors:i}=this;if(a.length<=1)return null;for(let _=0,g=n.length;_<g;++_){let u=n[_];if(u<_)continue;let b=Math.floor(_/3)*2,y=Math.floor(u/3)*2,T=s[b],N=s[b+1],R=s[y],B=s[y+1];this._renderSegment(T,N,R,B,t)}let f,l=a[a.length-1];for(let _=0;_<a.length;++_){f=l,l=a[_];let g=Math.floor(r[l]/3)*2,u=s[g],b=s[g+1],y=f*4,T=this._project(u,b,i[y+2],i[y+3]);T&&this._renderSegment(u,b,T[0],T[1],t)}return e&&e.value()}renderBounds(t){let e=t==null?t=new it:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),e&&e.value()}renderCell(t,e){let n=e==null?e=new it:void 0,r=this._clip(t);if(r===null||!r.length)return;e.moveTo(r[0],r[1]);let a=r.length;for(;r[0]===r[a-2]&&r[1]===r[a-1]&&a>1;)a-=2;for(let s=2;s<a;s+=2)(r[s]!==r[s-2]||r[s+1]!==r[s-1])&&e.lineTo(r[s],r[s+1]);return e.closePath(),n&&n.value()}*cellPolygons(){let{delaunay:{points:t}}=this;for(let e=0,n=t.length/2;e<n;++e){let r=this.cellPolygon(e);r&&(r.index=e,yield r)}}cellPolygon(t){let e=new lt;return this.renderCell(t,e),e.value()}_renderSegment(t,e,n,r,a){let s,i=this._regioncode(t,e),f=this._regioncode(n,r);i===0&&f===0?(a.moveTo(t,e),a.lineTo(n,r)):(s=this._clipSegment(t,e,n,r,i,f))&&(a.moveTo(s[0],s[1]),a.lineTo(s[2],s[3]))}contains(t,e,n){return e=+e,e!==e||(n=+n,n!==n)?!1:this.delaunay._step(t,e,n)===t}*neighbors(t){let e=this._clip(t);if(e)for(let n of this.delaunay.neighbors(t)){let r=this._clip(n);if(r){t:for(let a=0,s=e.length;a<s;a+=2)for(let i=0,f=r.length;i<f;i+=2)if(e[a]===r[i]&&e[a+1]===r[i+1]&&e[(a+2)%s]===r[(i+f-2)%f]&&e[(a+3)%s]===r[(i+f-1)%f]){yield n;break t}}}}_cell(t){let{circumcenters:e,delaunay:{inedges:n,halfedges:r,triangles:a}}=this,s=n[t];if(s===-1)return null;let i=[],f=s;do{let l=Math.floor(f/3);if(i.push(e[l*2],e[l*2+1]),f=f%3===2?f-2:f+1,a[f]!==t)break;f=r[f]}while(f!==s&&f!==-1);return i}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];let e=this._cell(t);if(e===null)return null;let{vectors:n}=this,r=t*4;return this._simplify(n[r]||n[r+1]?this._clipInfinite(t,e,n[r],n[r+1],n[r+2],n[r+3]):this._clipFinite(t,e))}_clipFinite(t,e){let n=e.length,r=null,a,s,i=e[n-2],f=e[n-1],l,_=this._regioncode(i,f),g,u=0;for(let b=0;b<n;b+=2)if(a=i,s=f,i=e[b],f=e[b+1],l=_,_=this._regioncode(i,f),l===0&&_===0)g=u,u=0,r?r.push(i,f):r=[i,f];else{let y,T,N,R,B;if(l===0){if((y=this._clipSegment(a,s,i,f,l,_))===null)continue;[T,N,R,B]=y}else{if((y=this._clipSegment(i,f,a,s,_,l))===null)continue;[R,B,T,N]=y,g=u,u=this._edgecode(T,N),g&&u&&this._edge(t,g,u,r,r.length),r?r.push(T,N):r=[T,N]}g=u,u=this._edgecode(R,B),g&&u&&this._edge(t,g,u,r,r.length),r?r.push(R,B):r=[R,B]}if(r)g=u,u=this._edgecode(r[0],r[1]),g&&u&&this._edge(t,g,u,r,r.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return r}_clipSegment(t,e,n,r,a,s){let i=a<s;for(i&&([t,e,n,r,a,s]=[n,r,t,e,s,a]);;){if(a===0&&s===0)return i?[n,r,t,e]:[t,e,n,r];if(a&s)return null;let f,l,_=a||s;_&8?(f=t+(n-t)*(this.ymax-e)/(r-e),l=this.ymax):_&4?(f=t+(n-t)*(this.ymin-e)/(r-e),l=this.ymin):_&2?(l=e+(r-e)*(this.xmax-t)/(n-t),f=this.xmax):(l=e+(r-e)*(this.xmin-t)/(n-t),f=this.xmin),a?(t=f,e=l,a=this._regioncode(t,e)):(n=f,r=l,s=this._regioncode(n,r))}}_clipInfinite(t,e,n,r,a,s){let i=Array.from(e),f;if((f=this._project(i[0],i[1],n,r))&&i.unshift(f[0],f[1]),(f=this._project(i[i.length-2],i[i.length-1],a,s))&&i.push(f[0],f[1]),i=this._clipFinite(t,i))for(let l=0,_=i.length,g,u=this._edgecode(i[_-2],i[_-1]);l<_;l+=2)g=u,u=this._edgecode(i[l],i[l+1]),g&&u&&(l=this._edge(t,g,u,i,l),_=i.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(i=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return i}_edge(t,e,n,r,a){for(;e!==n;){let s,i;switch(e){case 5:e=4;continue;case 4:e=6,s=this.xmax,i=this.ymin;break;case 6:e=2;continue;case 2:e=10,s=this.xmax,i=this.ymax;break;case 10:e=8;continue;case 8:e=9,s=this.xmin,i=this.ymax;break;case 9:e=1;continue;case 1:e=5,s=this.xmin,i=this.ymin;break}(r[a]!==s||r[a+1]!==i)&&this.contains(t,s,i)&&(r.splice(a,0,s,i),a+=2)}return a}_project(t,e,n,r){let a=1/0,s,i,f;if(r<0){if(e<=this.ymin)return null;(s=(this.ymin-e)/r)<a&&(f=this.ymin,i=t+(a=s)*n)}else if(r>0){if(e>=this.ymax)return null;(s=(this.ymax-e)/r)<a&&(f=this.ymax,i=t+(a=s)*n)}if(n>0){if(t>=this.xmax)return null;(s=(this.xmax-t)/n)<a&&(i=this.xmax,f=e+(a=s)*r)}else if(n<0){if(t<=this.xmin)return null;(s=(this.xmin-t)/n)<a&&(i=this.xmin,f=e+(a=s)*r)}return[i,f]}_edgecode(t,e){return(t===this.xmin?1:t===this.xmax?2:0)|(e===this.ymin?4:e===this.ymax?8:0)}_regioncode(t,e){return(t<this.xmin?1:t>this.xmax?2:0)|(e<this.ymin?4:e>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let e=0;e<t.length;e+=2){let n=(e+2)%t.length,r=(e+4)%t.length;(t[e]===t[n]&&t[n]===t[r]||t[e+1]===t[n+1]&&t[n+1]===t[r+1])&&(t.splice(n,2),e-=2)}t.length||(t=null)}return t}};var ar=2*Math.PI,vt=Math.pow;function cr(h){return h[0]}function fr(h){return h[1]}function ur(h){let{triangles:t,coords:e}=h;for(let n=0;n<t.length;n+=3){let r=2*t[n],a=2*t[n+1],s=2*t[n+2];if((e[s]-e[r])*(e[a+1]-e[r+1])-(e[a]-e[r])*(e[s+1]-e[r+1])>1e-10)return!1}return!0}function lr(h,t,e){return[h+Math.sin(h+t)*e,t+Math.cos(h-t)*e]}var _t=class h{static from(t,e=cr,n=fr,r){return new h("length"in t?hr(t,e,n,r):Float64Array.from(dr(t,e,n,r)))}constructor(t){this._delaunator=new gt(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){let t=this._delaunator,e=this.points;if(t.hull&&t.hull.length>2&&ur(t)){this.collinear=Int32Array.from({length:e.length/2},(u,b)=>b).sort((u,b)=>e[2*u]-e[2*b]||e[2*u+1]-e[2*b+1]);let f=this.collinear[0],l=this.collinear[this.collinear.length-1],_=[e[2*f],e[2*f+1],e[2*l],e[2*l+1]],g=1e-8*Math.hypot(_[3]-_[1],_[2]-_[0]);for(let u=0,b=e.length/2;u<b;++u){let y=lr(e[2*u],e[2*u+1],g);e[2*u]=y[0],e[2*u+1]=y[1]}this._delaunator=new gt(e)}else delete this.collinear;let n=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,a=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),i=this._hullIndex.fill(-1);for(let f=0,l=n.length;f<l;++f){let _=a[f%3===2?f-2:f+1];(n[f]===-1||s[_]===-1)&&(s[_]=f)}for(let f=0,l=r.length;f<l;++f)i[r[f]]=f;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],s[r[0]]=1,r.length===2&&(s[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(t){return new Pt(this,t)}*neighbors(t){let{inedges:e,hull:n,_hullIndex:r,halfedges:a,triangles:s,collinear:i}=this;if(i){let g=i.indexOf(t);g>0&&(yield i[g-1]),g<i.length-1&&(yield i[g+1]);return}let f=e[t];if(f===-1)return;let l=f,_=-1;do{if(yield _=s[l],l=l%3===2?l-2:l+1,s[l]!==t)return;if(l=a[l],l===-1){let g=n[(r[t]+1)%n.length];g!==_&&(yield g);return}}while(l!==f)}find(t,e,n=0){if(t=+t,t!==t||(e=+e,e!==e))return-1;let r=n,a;for(;(a=this._step(n,t,e))>=0&&a!==n&&a!==r;)n=a;return a}_step(t,e,n){let{inedges:r,hull:a,_hullIndex:s,halfedges:i,triangles:f,points:l}=this;if(r[t]===-1||!l.length)return(t+1)%(l.length>>1);let _=t,g=vt(e-l[t*2],2)+vt(n-l[t*2+1],2),u=r[t],b=u;do{let y=f[b],T=vt(e-l[y*2],2)+vt(n-l[y*2+1],2);if(T<g&&(g=T,_=y),b=b%3===2?b-2:b+1,f[b]!==t)break;if(b=i[b],b===-1){if(b=a[(s[t]+1)%a.length],b!==y&&vt(e-l[b*2],2)+vt(n-l[b*2+1],2)<g)return b;break}}while(b!==u);return _}render(t){let e=t==null?t=new it:void 0,{points:n,halfedges:r,triangles:a}=this;for(let s=0,i=r.length;s<i;++s){let f=r[s];if(f<s)continue;let l=a[s]*2,_=a[f]*2;t.moveTo(n[l],n[l+1]),t.lineTo(n[_],n[_+1])}return this.renderHull(t),e&&e.value()}renderPoints(t,e){e===void 0&&(!t||typeof t.moveTo!="function")&&(e=t,t=null),e=e==null?2:+e;let n=t==null?t=new it:void 0,{points:r}=this;for(let a=0,s=r.length;a<s;a+=2){let i=r[a],f=r[a+1];t.moveTo(i+e,f),t.arc(i,f,e,0,ar)}return n&&n.value()}renderHull(t){let e=t==null?t=new it:void 0,{hull:n,points:r}=this,a=n[0]*2,s=n.length;t.moveTo(r[a],r[a+1]);for(let i=1;i<s;++i){let f=2*n[i];t.lineTo(r[f],r[f+1])}return t.closePath(),e&&e.value()}hullPolygon(){let t=new lt;return this.renderHull(t),t.value()}renderTriangle(t,e){let n=e==null?e=new it:void 0,{points:r,triangles:a}=this,s=a[t*=3]*2,i=a[t+1]*2,f=a[t+2]*2;return e.moveTo(r[s],r[s+1]),e.lineTo(r[i],r[i+1]),e.lineTo(r[f],r[f+1]),e.closePath(),n&&n.value()}*trianglePolygons(){let{triangles:t}=this;for(let e=0,n=t.length/3;e<n;++e)yield this.trianglePolygon(e)}trianglePolygon(t){let e=new lt;return this.renderTriangle(t,e),e.value()}};function hr(h,t,e,n){let r=h.length,a=new Float64Array(r*2);for(let s=0;s<r;++s){let i=h[s];a[s*2]=t.call(n,i,s,h),a[s*2+1]=e.call(n,i,s,h)}return a}function*dr(h,t,e,n){let r=0;for(let a of h)yield t.call(n,a,r,h),yield e.call(n,a,r,h),++r}function Zt(h,t){for(var e=h.length,n=h[e-1],r=t[0],a=t[1],s=n[0],i=n[1],f,l,_=!1,g=0;g<e;++g)n=h[g],f=n[0],l=n[1],l>a!=i>a&&r<(s-f)*(a-l)/(i-l)+f&&(_=!_),s=f,i=l;return _}var Ne=Tt(Ct(),1);var rt=class zt{constructor(t,e){this.x=t,this.y=e}static rpctjymv4b3bb83481ef40b4b50c76fc38cf8bae(t){return new zt(t.x,t.y)}whbgjlxppfca446166e9c41cf800bc53c732d2b60(){let t={};return t.x=this.x,t.y=this.y,t}rgvavk7187a0bb4a0448bfb155e541ffeca498(t){return(0,Ht.default)(this.x,t.x)&&(0,Ht.default)(this.y,t.y)}tdintth31bd8e4e546e447c9ebda24acdecbf50(){return[this.x,this.y]}uheigrcdbe2f5f70827947a7a095d2d99d9a50e6(t){let e={};e.RhZiK=function(s,i){return s/i},e.JiyUl=function(s,i){return s+i},e.VhiLt=function(s,i){return s/i};let n=e,r=n.RhZiK(n.JiyUl(this.x,t.x),2),a=n.VhiLt(n.JiyUl(this.y,t.y),2);return new zt(r,a)}};function Jt(h,t,e){let n={};n.jlvbY=function(g,u){return g-u},n.oriCc=function(g,u){return g-u},n.wQTiO=function(g,u){return g*u},n.tzYpt=function(g,u){return g*u},n.vtKwF=function(g,u){return g===u};let r=n,a={x:r.jlvbY(h.x,t.x),y:r.oriCc(h.y,t.y)},s={x:e.x-t.x,y:r.oriCc(e.y,t.y)},i=r.wQTiO(a.x,s.x)+r.tzYpt(a.y,s.y),f=Math.hypot(a.x,a.y),l=Math.hypot(s.x,s.y);if(r.vtKwF(f,0)||l===0)return 0;let _=Math.min(1,Math.max(-1,i/(f*l)));return Math.acos(_)}var De=class st{constructor(t){let e={};e.fWKRN="3|1|2|0|4";let n=e,r=n.fWKRN.split("|"),a=0;for(;;){switch(r[a++]){case"0":this.materialTag="";continue;case"1":this.tag="";continue;case"2":this.sectionTag="";continue;case"3":this.points=t;continue;case"4":!st.cppyod7e0e1adc35d84975a09fb37371a6f02f(t)&&this.points.reverse();continue}break}}static rpctjymv4b3bb83481ef40b4b50c76fc38cf8bae(t){return new st(t.points.map(e=>rt.rpctjymv4b3bb83481ef40b4b50c76fc38cf8bae(e)))}whbgjlxppfca446166e9c41cf800bc53c732d2b60(){return{points:this.points.map(t=>t.whbgjlxppfca446166e9c41cf800bc53c732d2b60()),tag:this.tag,sectionTag:this.sectionTag,materialTag:this.materialTag}}static cppyod7e0e1adc35d84975a09fb37371a6f02f(t){let e={};e.svXkZ=function(f,l){return f-l},e.gnAIM=function(f,l){return f-l},e.YZhjX=function(f,l){return f*l},e.SdkFb=function(f,l){return f>l};let n=e,[r,a,s]=t,i=n.svXkZ(n.svXkZ(a.x,r.x)*n.gnAIM(s.y,r.y),n.YZhjX(n.gnAIM(a.y,r.y),s.x-r.x));return n.SdkFb(i,0)}wxxlfwia8a4fba239c9946b3855a2299c3f99599(t,e,n){this.tag=t,this.sectionTag=e,this.materialTag=n}xdyjpq175a0ef5c5a2498f9365cd07ec17f6d2(){let t={};t.DLkdM=function(f,l){return f/l},t.eIkSa=function(f,l){return f+l},t.XRlWh=function(f,l){return f+l};let e=t,[n,r,a]=this.points,s=e.DLkdM(e.eIkSa(e.eIkSa(n.x,r.x),a.x),3),i=e.XRlWh(e.XRlWh(n.y,r.y),a.y)/3;return new rt(s,i)}cnuojbwvw0e7d79a769c945bc8f376b30d9f6962c(t=.1){let e={};e.JnwnK=function(l,_){return l-_},e.kgtTz=function(l,_){return l-_},e.WeULH=function(l,_){return l+_},e.EYiPP=function(l,_){return l*_},e.OWJtH=function(l,_){return l/_},e.JMsEr=function(l,_){return l*_};let n=e,r=this.xdyjpq175a0ef5c5a2498f9365cd07ec17f6d2(),a=this.points.map(l=>{let _=n.JnwnK(r.x,l.x),g=n.kgtTz(r.y,l.y);return Math.sqrt(n.WeULH(n.EYiPP(_,_),n.EYiPP(g,g)))}),s=Math.max(...a),i=n.JMsEr(s,t);return this.points.map(l=>{let _=n.JnwnK(r.x,l.x),g=n.kgtTz(r.y,l.y),u=Math.sqrt(_*_+n.EYiPP(g,g)),b=n.OWJtH(i,u);return new rt(n.WeULH(l.x,n.EYiPP(_,b)),n.WeULH(l.y,g*b))})}uheiuqzmj4814241d72b64cc688e76e6ae40052ac(){let t=this.xdyjpq175a0ef5c5a2498f9365cd07ec17f6d2();return[new st([this.points[0],this.points[1],t]),new st([this.points[1],this.points[2],t]),new st([this.points[2],this.points[0],t])]}ayyxhptra12d4e201e78427e9e764e3052456c73(){let t={};t.gDlJr=function(l,_){return l/_},t.nLZbW=function(l,_){return l+_},t.zYYTv=function(l,_){return l/_},t.SqpFU=function(l,_){return l/_},t.BDbOj=function(l,_){return l+_},t.llXuV=function(l,_){return l/_};let e=t,[n,r,a]=this.points,s=new rt(e.gDlJr(e.nLZbW(n.x,r.x),2),e.zYYTv(e.nLZbW(n.y,r.y),2)),i=new rt((r.x+a.x)/2,e.zYYTv(r.y+a.y,2)),f=new rt(e.SqpFU(e.BDbOj(a.x,n.x),2),e.llXuV(e.BDbOj(a.y,n.y),2));return[new st([n,s,f]),new st([s,r,i]),new st([f,i,a]),new st([s,i,f])]}ovghrhvzcd9f5ca43e00e4d49aa07805592db9b8a(){let t={};t.NdFIP=function(b,y){return b+y},t.gcUEz=function(b,y){return b*y},t.Muoaw=function(b,y){return b-y},t.ItxQy=function(b,y){return b-y};let e=t,[n,r,a]=this.points,s=n.x,i=r.x,f=a.x,l=n.y,_=r.y,g=a.y;return .5*Math.abs(e.NdFIP(e.gcUEz(s,e.Muoaw(_,g)),e.gcUEz(i,e.ItxQy(g,l)))+e.gcUEz(f,e.Muoaw(l,_)))}tunqmdf19ca0be6c2b4869aa52de022094a5a6(){let t={ZlYAq:function(n,r,a,s){return n(r,a,s)}},e=this.ovghrhvzcd9f5ca43e00e4d49aa07805592db9b8a();return t.ZlYAq(Re.default,e,0,1e-7)}nzxzoakcc82d806a5c04cb299ecfabfa45231e6(){let t={zBXhO:function(s,i,f,l){return s(i,f,l)},qnmsd:function(s,i,f,l){return s(i,f,l)}},[e,n,r]=this.points;return[t.zBXhO(Jt,n,e,r),t.qnmsd(Jt,e,n,r),Jt(e,r,n)]}ttddopzlem82cb32843c094881840156e9d9576709(t=20*Math.PI/180){return!!this.nzxzoakcc82d806a5c04cb299ecfabfa45231e6().some(n=>n<t)}};var mr=class Le{constructor(t,e,n,r){let a={};a.wuXlm="4|1|0|2|3";let s=a,i=s.wuXlm.split("|"),f=0;for(;;){switch(i[f++]){case"0":this.sectionTag=n;continue;case"1":this.tag=e;continue;case"2":this.materialTag=r;continue;case"3":this.d3Polygon=t.map(l=>[l.x,l.y]);continue;case"4":this.points=t;continue}break}}static FromDto(t){return new Le(t.points.map(e=>rt.rpctjymv4b3bb83481ef40b4b50c76fc38cf8bae(e)),t.tag,t.sectionTag,t.materialTag)}hdxspelwe47ec429a72cf4f0a9e08ebea58ca349f(t){let e={KpaOA:function(r,a){return r-a},JjqNT:function(r,a,s,i){return r(a,s,i)},EpiQm:function(r,a,s){return r(a,s)}};for(let r=0,a=e.KpaOA(this.points.length,1);r<this.points.length;a=r++)if(e.JjqNT(pr,t,this.points[r],this.points[a]))return!0;return e.EpiQm(Zt,this.d3Polygon,[t.x,t.y])}rmpbago19a22e49e61d4f999a3ab25faf5c098e(t,e){let n={};n.OuyvP=function(s,i){return s<i},n.vdRbA=function(s,i){return s+i},n.hYOJi=function(s,i){return s-i},n.ysyKj=function(s,i){return s+i},n.VtmAm=function(s,i){return s*i},n.NhNLe=function(s,i){return s*i},n.yVZdG=function(s,i){return s/i},n.XDIfu=function(s,i){return s*i},n.Zymci=function(s,i){return s*i},n.tCrFB=function(s,i){return s+i},n.wXJXD=function(s,i){return s*i};let r=n,a=[];for(let s=0;r.OuyvP(s,t.length);s++){let i=t[s],f=t[r.vdRbA(s,1)%t.length],l=r.hYOJi(f.x,i.x),_=r.hYOJi(f.y,i.y),g=Math.sqrt(r.ysyKj(r.VtmAm(l,l),r.NhNLe(_,_))),u=Math.floor(r.yVZdG(g,e));a.push(new rt(i.x,i.y));for(let b=1;r.OuyvP(b,u);b++){let y=r.yVZdG(r.XDIfu(b,e),g),T=r.vdRbA(i.x,r.Zymci(y,l)),N=r.tCrFB(i.y,r.wXJXD(y,_));a.push(new rt(T,N))}}return a}};function pr(h,t,e){let n={WOjnu:function(i,f){return i-f},QrTSO:function(i,f){return i*f},felLi:function(i,f){return i-f},lexRS:function(i,f){return i-f},AQRPG:function(i,f,l){return i(f,l)},iSAgv:function(i,f){return i+f},CRoAj:function(i,f){return i-f},DcVcU:function(i,f){return i-f},nGZJe:function(i,f){return i<f},ycfwk:function(i,f){return i**f},JlVrc:function(i,f){return i>f}},r=n.WOjnu(n.QrTSO(n.WOjnu(h.y,t.y),e.x-t.x),n.felLi(h.x,t.x)*n.lexRS(e.y,t.y));if(!n.AQRPG(Ne.default,Math.abs(r),0))return!1;let a=n.iSAgv(n.WOjnu(h.x,t.x)*n.CRoAj(e.x,t.x),n.DcVcU(h.y,t.y)*n.lexRS(e.y,t.y));if(n.nGZJe(a,0))return!1;let s=n.iSAgv(n.ycfwk(e.x-t.x,2),n.WOjnu(e.y,t.y)**2);return!n.JlVrc(a,s)}var br=class Ce{constructor(t,e,n){this.center=t,this.radius=e,this.maxTriangleArea=n}static rpctjymv4b3bb83481ef40b4b50c76fc38cf8bae(t){return new Ce(rt.rpctjymv4b3bb83481ef40b4b50c76fc38cf8bae(t.center),t.radius,t.maxTriangleArea)}ehvro7b357212fd2d4334ad79f738d2e8d3b6(t){let e={};e.DBqNh=function(f,l){return f>l};let n=e,r=t.xdyjpq175a0ef5c5a2498f9365cd07ec17f6d2();if(!this.contains(r))return!1;let s=t.ovghrhvzcd9f5ca43e00e4d49aa07805592db9b8a();return n.DBqNh(s,this.maxTriangleArea)}contains(t){let e={};e.YstXS=function(s,i){return s-i},e.rMTjq=function(s,i){return s-i},e.FIgQu=function(s,i){return s<=i},e.bPBKl=function(s,i){return s+i},e.Lauvp=function(s,i){return s*i},e.ZRMvW=function(s,i){return s*i};let n=e,r=n.YstXS(t.x,this.center.x),a=n.rMTjq(t.y,this.center.y);return n.FIgQu(n.bPBKl(n.Lauvp(r,r),n.ZRMvW(a,a)),this.radius*this.radius)}};function Be(h){let t={Kkmoe:function(l,_,g){return l(_,g)},Slfuq:function(l,_){return l(_)}},e=h.polygons.map(l=>mr.FromDto(l)),n=h.baseTriangles.map(l=>De.rpctjymv4b3bb83481ef40b4b50c76fc38cf8bae(l)),r=h.meshingConfiguration.refinementPoints.map(l=>br.rpctjymv4b3bb83481ef40b4b50c76fc38cf8bae(l)),a=t.Kkmoe(gr,r,n),s=[...a.flatMap(l=>l.points),...h.extraPoints.map(l=>rt.rpctjymv4b3bb83481ef40b4b50c76fc38cf8bae(l))],i=t.Kkmoe(_r,t.Slfuq(vr,s),e),f=[];for(let l of i){let _=l.xdyjpq175a0ef5c5a2498f9365cd07ec17f6d2(),g=e.find(u=>u.hdxspelwe47ec429a72cf4f0a9e08ebea58ca349f(_));g&&(l.wxxlfwia8a4fba239c9946b3855a2299c3f99599(g.tag,g.sectionTag,g.materialTag),f.push(l))}return{triangles:f.map(l=>l.whbgjlxppfca446166e9c41cf800bc53c732d2b60())}}function gr(h,t){let e={};e.qHVLU=function(f,l){return f>l},e.NhXdq=function(f,l){return f<l},e.OZiYr=function(f,l){return f||l};let n=e,r=0,a=n.qHVLU(h.length,0);if(!a)return t;let s=t,i=[];for(;a&&n.NhXdq(r,100);){i=[],a=!1;for(let f of s){let l=h.some(_=>_.ehvro7b357212fd2d4334ad79f738d2e8d3b6(f));l?i.push(...f.ayyxhptra12d4e201e78427e9e764e3052456c73()):i.push(f),a=n.OZiYr(a,l)}s=i,r++}return i}function vr(h){let t=h.map(r=>r.tdintth31bd8e4e546e447c9ebda24acdecbf50());return[..._t.from(t).trianglePolygons()].map(r=>[new rt(r[2][0],r[2][1]),new rt(r[1][0],r[1][1]),new rt(r[0][0],r[0][1])]).map(r=>new De(r)).filter(r=>!r.tunqmdf19ca0be6c2b4869aa52de022094a5a6())}function _r(h,t){let e=[];for(let n of h)n.cnuojbwvw0e7d79a769c945bc8f376b30d9f6962c().every(a=>t.some(s=>s.hdxspelwe47ec429a72cf4f0a9e08ebea58ca349f(a)))&&e.push(n);return e}var ne=Tt(Ve());var je=(h,t,e="")=>`View3dModel-${h}-${t}${e}`,Fe=h=>`Triangles-${h}`;function Ye(h){if(h.length<3)throw new Error("At least three vertices are required to form a face.");return{vertices:[...h.filter(t=>t)],results:[]}}var Rt=Tt(We());var Et=h=>{let t=(h.points??"").trim().split(/\s+/).map(n=>n.split(",")),e=[];for(let[n,r]of t){let a=parseFloat(n),s=parseFloat(r);if(Number.isFinite(a)&&Number.isFinite(s))e.push({x:a,y:s});else throw new Error("Invalid vertex coordinates")}return{vertices:e}};function ke(h){let t=0,e=0,n=0,r=h.length;for(let a=0;a<r;a++){let{x:s,y:i}=h[a],{x:f,y:l}=h[(a+1)%r],_=s*l-f*i;t+=_,e+=(s+f)*_,n+=(i+l)*_}return t*=.5,t===0?{x:0,y:0}:(e/=6*t,n/=6*t,{x:e,y:n})}function*qe(h,t){let e=[...new Set(t.rectangles.map(u=>u.name).concat(t.polygons.map(u=>u.name)))],n=[];for(let u of h){let b=u.points.map(N=>Sr(N)),y=Ye(b);if(e.indexOf(u.name)===-1)throw new Error(`Geometry name ${u.name} not found in geometry rectangles or polygons.`);n.push(y)}let r=t.supports.map(u=>Ir(u)),a=h.flatMap(u=>u.points).map(u=>u.x).reduce((u,b)=>Math.max(u,b),-1/0),s=h.flatMap(u=>u.points).map(u=>u.x).reduce((u,b)=>Math.min(u,b),1/0),i=h.flatMap(u=>u.points).map(u=>u.y).reduce((u,b)=>Math.max(u,b),-1/0),f=h.flatMap(u=>u.points).map(u=>u.y).reduce((u,b)=>Math.min(u,b),1/0),l=a-s,_=i-f,g=[...t.polygons.map(u=>Et(u)),...t.rectangles.map(u=>St(u))].map(u=>u.vertices.map(b=>({x:b.x,y:b.y}))).map(u=>({points:u}));for(let u of t.loadCases)yield{faces:n,wireframeFaces:[],supports:r,borders:g,loads:Tr(u,t),loadCaseTag:u.name,width:l,height:_,hasResults:!1}}function Tr(h,t){let e=[];for(let n of h.pointLoads)(0,Rt.default)(n.fx,0)||e.push({x:n.x,y:n.y,z:0,valueX:n.fx,valueY:0,valueZ:0}),(0,Rt.default)(n.fy,0)||e.push({x:n.x,y:n.y,z:0,valueY:n.fy,valueZ:0,valueX:0,type:"point"});for(let n of h.distributedLoads){let r=t.polygons.filter(i=>i.name===n.geometryName).map(i=>Et(i)),a=t.rectangles.filter(i=>i.name===n.geometryName).map(i=>St(i)),s=[...r,...a];for(let i of s){let f=ke(i.vertices);(0,Rt.default)(n.fx,0)||e.push({x:f.x,y:f.y,z:0,valueX:n.fx,valueY:0,valueZ:0,type:"distributed"}),(0,Rt.default)(n.fy,0)||e.push({x:f.x,y:f.y,z:0,valueX:0,valueY:n.fy,valueZ:0,type:"distributed"})}}return e}function Sr(h){return{x:h.x,y:h.y,z:0,ux:0,uy:0,uz:0,value:0}}function Ir(h){return{x:h.x,y:h.y,z:0,ux:h.fixedX,uy:h.fixedY,uz:!1}}addEventListener("message",({data:h})=>{Mr(h)});var Mr=async h=>{let{geometry:t,uuid:e,baseTriangles:n}=h,r=t.loadCases.flatMap(y=>y.pointLoads).map(y=>({x:y.x,y:y.y})),a=t.supports.map(y=>({x:y.x,y:y.y})),s=t.resultPoints.map(y=>({x:y.x,y:y.y})),i=t.rectangles.map(y=>Rr(y)),f=t.polygons.map(y=>Dr(y)),l=i.concat(f),_={maxTriangleArea:t.meshingConfiguration.maxTriangleArea,refinementPoints:t.meshingConfiguration.refinementPoints.map(y=>Ar(y))},u=Be({polygons:l,extraPoints:r.concat(a).concat(s),meshingConfiguration:_,baseTriangles:n.map(y=>Nr(y))}).triangles.map(y=>Er(y));await ne.setItem(Fe(e),u);for(let y of qe(u,t))await ne.setItem(je(e,y.loadCaseTag),y);postMessage({uuid:e})},Ar=h=>({radius:h.radius,maxTriangleArea:h.maxArea,center:{x:h.x,y:h.y}}),Pr=h=>({x:h.x,y:h.y}),Er=h=>({points:h.points.map(e=>Pr(e)),name:h.tag,sectionTag:h.sectionTag,materialTag:h.materialTag}),Rr=h=>({points:St(h).vertices.map(e=>({x:e.x,y:e.y})),tag:h.name,sectionTag:h.sectionName,materialTag:h.materialName}),Dr=h=>({points:Et(h).vertices.map(e=>({x:e.x,y:e.y})),tag:h.name,sectionTag:h.sectionName,materialTag:h.materialName}),Nr=h=>({points:h.points.map(e=>({x:e.x,y:e.y}))});
