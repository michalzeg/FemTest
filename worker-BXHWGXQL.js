var jn=Object.create;var Te=Object.defineProperty;var Yn=Object.getOwnPropertyDescriptor;var $n=Object.getOwnPropertyNames;var Xn=Object.getPrototypeOf,Hn=Object.prototype.hasOwnProperty;var wt=(h=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(h,{get:(t,e)=>(typeof require<"u"?require:t)[e]}):h)(function(h){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+h+'" is not supported')});var Ht=(h,t)=>()=>(t||h((t={exports:{}}).exports,t),t.exports);var qn=(h,t,e,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of $n(t))!Hn.call(h,r)&&r!==e&&Te(h,r,{get:()=>t[r],enumerable:!(n=Yn(t,r))||n.enumerable});return h};var Tt=(h,t,e)=>(e=h!=null?jn(Xn(h)):{},qn(t||!h||!h.__esModule?Te(e,"default",{value:h,enumerable:!0}):e,h));var Bt=Ht((Fr,Ie)=>{"use strict";var qt=Math.abs,Kn=Math.min;function Ct(h,t,e,n){var r=qt(h-t);return e==null&&(e=Ct.DBL_EPSILON),n==null&&(n=e),r<=e||r<=n*Kn(qt(h),qt(t))?!0:h===t}Ct.FLT_EPSILON=11920929e-14;Ct.DBL_EPSILON=2220446049250313e-31;Ie.exports=Ct});var Ve=Ht((Fe,te)=>{"use strict";(function(h){if(typeof Fe=="object"&&typeof te<"u")te.exports=h();else if(typeof define=="function"&&define.amd)define([],h);else{var t;typeof window<"u"?t=window:typeof global<"u"?t=global:typeof self<"u"?t=self:t=this,t.localforage=h()}})(function(){var h,t,e;return function n(r,c,s){function i(v,_){if(!c[v]){if(!r[v]){var f=typeof wt=="function"&&wt;if(!_&&f)return f(v,!0);if(u)return u(v,!0);var g=new Error("Cannot find module '"+v+"'");throw g.code="MODULE_NOT_FOUND",g}var b=c[v]={exports:{}};r[v][0].call(b.exports,function(T){var N=r[v][1][T];return i(N||T)},b,b.exports,n,r,c,s)}return c[v].exports}for(var u=typeof wt=="function"&&wt,l=0;l<s.length;l++)i(s[l]);return i}({1:[function(n,r,c){(function(s){"use strict";var i=s.MutationObserver||s.WebKitMutationObserver,u;if(i){var l=0,v=new i(T),_=s.document.createTextNode("");v.observe(_,{characterData:!0}),u=function(){_.data=l=++l%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=T,u=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?u=function(){var A=s.document.createElement("script");A.onreadystatechange=function(){T(),A.onreadystatechange=null,A.parentNode.removeChild(A),A=null},s.document.documentElement.appendChild(A)}:u=function(){setTimeout(T,0)};var g,b=[];function T(){g=!0;for(var A,L,O=b.length;O;){for(L=b,b=[],A=-1;++A<O;)L[A]();O=b.length}g=!1}r.exports=N;function N(A){b.push(A)===1&&!g&&u()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,c){"use strict";var s=n(1);function i(){}var u={},l=["REJECTED"],v=["FULFILLED"],_=["PENDING"];r.exports=f;function f(S){if(typeof S!="function")throw new TypeError("resolver must be a function");this.state=_,this.queue=[],this.outcome=void 0,S!==i&&N(this,S)}f.prototype.catch=function(S){return this.then(null,S)},f.prototype.then=function(S,V){if(typeof S!="function"&&this.state===v||typeof V!="function"&&this.state===l)return this;var R=new this.constructor(i);if(this.state!==_){var E=this.state===v?S:V;b(R,E,this.outcome)}else this.queue.push(new g(R,S,V));return R};function g(S,V,R){this.promise=S,typeof V=="function"&&(this.onFulfilled=V,this.callFulfilled=this.otherCallFulfilled),typeof R=="function"&&(this.onRejected=R,this.callRejected=this.otherCallRejected)}g.prototype.callFulfilled=function(S){u.resolve(this.promise,S)},g.prototype.otherCallFulfilled=function(S){b(this.promise,this.onFulfilled,S)},g.prototype.callRejected=function(S){u.reject(this.promise,S)},g.prototype.otherCallRejected=function(S){b(this.promise,this.onRejected,S)};function b(S,V,R){s(function(){var E;try{E=V(R)}catch(B){return u.reject(S,B)}E===S?u.reject(S,new TypeError("Cannot resolve promise with itself")):u.resolve(S,E)})}u.resolve=function(S,V){var R=A(T,V);if(R.status==="error")return u.reject(S,R.value);var E=R.value;if(E)N(S,E);else{S.state=v,S.outcome=V;for(var B=-1,F=S.queue.length;++B<F;)S.queue[B].callFulfilled(V)}return S},u.reject=function(S,V){S.state=l,S.outcome=V;for(var R=-1,E=S.queue.length;++R<E;)S.queue[R].callRejected(V);return S};function T(S){var V=S&&S.then;if(S&&(typeof S=="object"||typeof S=="function")&&typeof V=="function")return function(){V.apply(S,arguments)}}function N(S,V){var R=!1;function E(W){R||(R=!0,u.reject(S,W))}function B(W){R||(R=!0,u.resolve(S,W))}function F(){V(B,E)}var G=A(F);G.status==="error"&&E(G.value)}function A(S,V){var R={};try{R.value=S(V),R.status="success"}catch(E){R.status="error",R.value=E}return R}f.resolve=L;function L(S){return S instanceof this?S:u.resolve(new this(i),S)}f.reject=O;function O(S){var V=new this(i);return u.reject(V,S)}f.all=$;function $(S){var V=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var R=S.length,E=!1;if(!R)return this.resolve([]);for(var B=new Array(R),F=0,G=-1,W=new this(i);++G<R;)X(S[G],G);return W;function X(Z,U){V.resolve(Z).then(K,function(J){E||(E=!0,u.reject(W,J))});function K(J){B[U]=J,++F===R&&!E&&(E=!0,u.resolve(W,B))}}}f.race=Y;function Y(S){var V=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var R=S.length,E=!1;if(!R)return this.resolve([]);for(var B=-1,F=new this(i);++B<R;)G(S[B]);return F;function G(W){V.resolve(W).then(function(X){E||(E=!0,u.resolve(F,X))},function(X){E||(E=!0,u.reject(F,X))})}}},{1:1}],3:[function(n,r,c){(function(s){"use strict";typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,c){"use strict";var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o};function i(o,d){if(!(o instanceof d))throw new TypeError("Cannot call a class as a function")}function u(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var l=u();function v(){try{if(!l||!l.open)return!1;var o=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),d=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!o||d)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function _(o,d){o=o||[],d=d||{};try{return new Blob(o,d)}catch(m){if(m.name!=="TypeError")throw m;for(var a=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,p=new a,y=0;y<o.length;y+=1)p.append(o[y]);return p.getBlob(d.type)}}typeof Promise>"u"&&n(3);var f=Promise;function g(o,d){d&&o.then(function(a){d(null,a)},function(a){d(a)})}function b(o,d,a){typeof d=="function"&&o.then(d),typeof a=="function"&&o.catch(a)}function T(o){return typeof o!="string"&&(console.warn(o+" used as a key, but it is not a string."),o=String(o)),o}function N(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var A="local-forage-detect-blob-support",L=void 0,O={},$=Object.prototype.toString,Y="readonly",S="readwrite";function V(o){for(var d=o.length,a=new ArrayBuffer(d),p=new Uint8Array(a),y=0;y<d;y++)p[y]=o.charCodeAt(y);return a}function R(o){return new f(function(d){var a=o.transaction(A,S),p=_([""]);a.objectStore(A).put(p,"key"),a.onabort=function(y){y.preventDefault(),y.stopPropagation(),d(!1)},a.oncomplete=function(){var y=navigator.userAgent.match(/Chrome\/(\d+)/),m=navigator.userAgent.match(/Edge\//);d(m||!y||parseInt(y[1],10)>=43)}}).catch(function(){return!1})}function E(o){return typeof L=="boolean"?f.resolve(L):R(o).then(function(d){return L=d,L})}function B(o){var d=O[o.name],a={};a.promise=new f(function(p,y){a.resolve=p,a.reject=y}),d.deferredOperations.push(a),d.dbReady?d.dbReady=d.dbReady.then(function(){return a.promise}):d.dbReady=a.promise}function F(o){var d=O[o.name],a=d.deferredOperations.pop();if(a)return a.resolve(),a.promise}function G(o,d){var a=O[o.name],p=a.deferredOperations.pop();if(p)return p.reject(d),p.promise}function W(o,d){return new f(function(a,p){if(O[o.name]=O[o.name]||re(),o.db)if(d)B(o),o.db.close();else return a(o.db);var y=[o.name];d&&y.push(o.version);var m=l.open.apply(l,y);d&&(m.onupgradeneeded=function(x){var I=m.result;try{I.createObjectStore(o.storeName),x.oldVersion<=1&&I.createObjectStore(A)}catch(P){if(P.name==="ConstraintError")console.warn('The database "'+o.name+'" has been upgraded from version '+x.oldVersion+" to version "+x.newVersion+', but the storage "'+o.storeName+'" already exists.');else throw P}}),m.onerror=function(x){x.preventDefault(),p(m.error)},m.onsuccess=function(){var x=m.result;x.onversionchange=function(I){I.target.close()},a(x),F(o)}})}function X(o){return W(o,!1)}function Z(o){return W(o,!0)}function U(o,d){if(!o.db)return!0;var a=!o.db.objectStoreNames.contains(o.storeName),p=o.version<o.db.version,y=o.version>o.db.version;if(p&&(o.version!==d&&console.warn('The database "'+o.name+`" can't be downgraded from version `+o.db.version+" to version "+o.version+"."),o.version=o.db.version),y||a){if(a){var m=o.db.version+1;m>o.version&&(o.version=m)}return!0}return!1}function K(o){return new f(function(d,a){var p=new FileReader;p.onerror=a,p.onloadend=function(y){var m=btoa(y.target.result||"");d({__local_forage_encoded_blob:!0,data:m,type:o.type})},p.readAsBinaryString(o)})}function J(o){var d=V(atob(o.data));return _([d],{type:o.type})}function et(o){return o&&o.__local_forage_encoded_blob}function ct(o){var d=this,a=d._initReady().then(function(){var p=O[d._dbInfo.name];if(p&&p.dbReady)return p.dbReady});return b(a,o,o),a}function Vt(o){B(o);for(var d=O[o.name],a=d.forages,p=0;p<a.length;p++){var y=a[p];y._dbInfo.db&&(y._dbInfo.db.close(),y._dbInfo.db=null)}return o.db=null,X(o).then(function(m){return o.db=m,U(o)?Z(o):m}).then(function(m){o.db=d.db=m;for(var x=0;x<a.length;x++)a[x]._dbInfo.db=m}).catch(function(m){throw G(o,m),m})}function at(o,d,a,p){p===void 0&&(p=1);try{var y=o.db.transaction(o.storeName,d);a(null,y)}catch(m){if(p>0&&(!o.db||m.name==="InvalidStateError"||m.name==="NotFoundError"))return f.resolve().then(function(){if(!o.db||m.name==="NotFoundError"&&!o.db.objectStoreNames.contains(o.storeName)&&o.version<=o.db.version)return o.db&&(o.version=o.db.version+1),Z(o)}).then(function(){return Vt(o).then(function(){at(o,d,a,p-1)})}).catch(a);a(m)}}function re(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function $e(o){var d=this,a={db:null};if(o)for(var p in o)a[p]=o[p];var y=O[a.name];y||(y=re(),O[a.name]=y),y.forages.push(d),d._initReady||(d._initReady=d.ready,d.ready=ct);var m=[];function x(){return f.resolve()}for(var I=0;I<y.forages.length;I++){var P=y.forages[I];P!==d&&m.push(P._initReady().catch(x))}var D=y.forages.slice(0);return f.all(m).then(function(){return a.db=y.db,X(a)}).then(function(M){return a.db=M,U(a,d._defaultConfig.version)?Z(a):M}).then(function(M){a.db=y.db=M,d._dbInfo=a;for(var C=0;C<D.length;C++){var k=D[C];k!==d&&(k._dbInfo.db=a.db,k._dbInfo.version=a.version)}})}function Xe(o,d){var a=this;o=T(o);var p=new f(function(y,m){a.ready().then(function(){at(a._dbInfo,Y,function(x,I){if(x)return m(x);try{var P=I.objectStore(a._dbInfo.storeName),D=P.get(o);D.onsuccess=function(){var M=D.result;M===void 0&&(M=null),et(M)&&(M=J(M)),y(M)},D.onerror=function(){m(D.error)}}catch(M){m(M)}})}).catch(m)});return g(p,d),p}function He(o,d){var a=this,p=new f(function(y,m){a.ready().then(function(){at(a._dbInfo,Y,function(x,I){if(x)return m(x);try{var P=I.objectStore(a._dbInfo.storeName),D=P.openCursor(),M=1;D.onsuccess=function(){var C=D.result;if(C){var k=C.value;et(k)&&(k=J(k));var H=o(k,C.key,M++);H!==void 0?y(H):C.continue()}else y()},D.onerror=function(){m(D.error)}}catch(C){m(C)}})}).catch(m)});return g(p,d),p}function qe(o,d,a){var p=this;o=T(o);var y=new f(function(m,x){var I;p.ready().then(function(){return I=p._dbInfo,$.call(d)==="[object Blob]"?E(I.db).then(function(P){return P?d:K(d)}):d}).then(function(P){at(p._dbInfo,S,function(D,M){if(D)return x(D);try{var C=M.objectStore(p._dbInfo.storeName);P===null&&(P=void 0);var k=C.put(P,o);M.oncomplete=function(){P===void 0&&(P=null),m(P)},M.onabort=M.onerror=function(){var H=k.error?k.error:k.transaction.error;x(H)}}catch(H){x(H)}})}).catch(x)});return g(y,a),y}function Ke(o,d){var a=this;o=T(o);var p=new f(function(y,m){a.ready().then(function(){at(a._dbInfo,S,function(x,I){if(x)return m(x);try{var P=I.objectStore(a._dbInfo.storeName),D=P.delete(o);I.oncomplete=function(){y()},I.onerror=function(){m(D.error)},I.onabort=function(){var M=D.error?D.error:D.transaction.error;m(M)}}catch(M){m(M)}})}).catch(m)});return g(p,d),p}function Ze(o){var d=this,a=new f(function(p,y){d.ready().then(function(){at(d._dbInfo,S,function(m,x){if(m)return y(m);try{var I=x.objectStore(d._dbInfo.storeName),P=I.clear();x.oncomplete=function(){p()},x.onabort=x.onerror=function(){var D=P.error?P.error:P.transaction.error;y(D)}}catch(D){y(D)}})}).catch(y)});return g(a,o),a}function Qe(o){var d=this,a=new f(function(p,y){d.ready().then(function(){at(d._dbInfo,Y,function(m,x){if(m)return y(m);try{var I=x.objectStore(d._dbInfo.storeName),P=I.count();P.onsuccess=function(){p(P.result)},P.onerror=function(){y(P.error)}}catch(D){y(D)}})}).catch(y)});return g(a,o),a}function Je(o,d){var a=this,p=new f(function(y,m){if(o<0){y(null);return}a.ready().then(function(){at(a._dbInfo,Y,function(x,I){if(x)return m(x);try{var P=I.objectStore(a._dbInfo.storeName),D=!1,M=P.openKeyCursor();M.onsuccess=function(){var C=M.result;if(!C){y(null);return}o===0||D?y(C.key):(D=!0,C.advance(o))},M.onerror=function(){m(M.error)}}catch(C){m(C)}})}).catch(m)});return g(p,d),p}function ze(o){var d=this,a=new f(function(p,y){d.ready().then(function(){at(d._dbInfo,Y,function(m,x){if(m)return y(m);try{var I=x.objectStore(d._dbInfo.storeName),P=I.openKeyCursor(),D=[];P.onsuccess=function(){var M=P.result;if(!M){p(D);return}D.push(M.key),M.continue()},P.onerror=function(){y(P.error)}}catch(M){y(M)}})}).catch(y)});return g(a,o),a}function tn(o,d){d=N.apply(this,arguments);var a=this.config();o=typeof o!="function"&&o||{},o.name||(o.name=o.name||a.name,o.storeName=o.storeName||a.storeName);var p=this,y;if(!o.name)y=f.reject("Invalid arguments");else{var m=o.name===a.name&&p._dbInfo.db,x=m?f.resolve(p._dbInfo.db):X(o).then(function(I){var P=O[o.name],D=P.forages;P.db=I;for(var M=0;M<D.length;M++)D[M]._dbInfo.db=I;return I});o.storeName?y=x.then(function(I){if(I.objectStoreNames.contains(o.storeName)){var P=I.version+1;B(o);var D=O[o.name],M=D.forages;I.close();for(var C=0;C<M.length;C++){var k=M[C];k._dbInfo.db=null,k._dbInfo.version=P}var H=new f(function(q,z){var Q=l.open(o.name,P);Q.onerror=function(ot){var xt=Q.result;xt.close(),z(ot)},Q.onupgradeneeded=function(){var ot=Q.result;ot.deleteObjectStore(o.storeName)},Q.onsuccess=function(){var ot=Q.result;ot.close(),q(ot)}});return H.then(function(q){D.db=q;for(var z=0;z<M.length;z++){var Q=M[z];Q._dbInfo.db=q,F(Q._dbInfo)}}).catch(function(q){throw(G(o,q)||f.resolve()).catch(function(){}),q})}}):y=x.then(function(I){B(o);var P=O[o.name],D=P.forages;I.close();for(var M=0;M<D.length;M++){var C=D[M];C._dbInfo.db=null}var k=new f(function(H,q){var z=l.deleteDatabase(o.name);z.onerror=function(){var Q=z.result;Q&&Q.close(),q(z.error)},z.onblocked=function(){console.warn('dropInstance blocked for database "'+o.name+'" until all open connections are closed')},z.onsuccess=function(){var Q=z.result;Q&&Q.close(),H(Q)}});return k.then(function(H){P.db=H;for(var q=0;q<D.length;q++){var z=D[q];F(z._dbInfo)}}).catch(function(H){throw(G(o,H)||f.resolve()).catch(function(){}),H})})}return g(y,d),y}var en={_driver:"asyncStorage",_initStorage:$e,_support:v(),iterate:He,getItem:Xe,setItem:qe,removeItem:Ke,clear:Ze,length:Qe,key:Je,keys:ze,dropInstance:tn};function nn(){return typeof openDatabase=="function"}var ut="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",rn="~~local_forage_type~",oe=/^~~local_forage_type~([^~]+)~/,Rt="__lfsc__:",Ot=Rt.length,Gt="arbf",Ut="blob",ie="si08",se="ui08",ae="uic8",ce="si16",ue="si32",fe="ur16",le="ui32",he="fl32",de="fl64",me=Ot+Gt.length,pe=Object.prototype.toString;function ge(o){var d=o.length*.75,a=o.length,p,y=0,m,x,I,P;o[o.length-1]==="="&&(d--,o[o.length-2]==="="&&d--);var D=new ArrayBuffer(d),M=new Uint8Array(D);for(p=0;p<a;p+=4)m=ut.indexOf(o[p]),x=ut.indexOf(o[p+1]),I=ut.indexOf(o[p+2]),P=ut.indexOf(o[p+3]),M[y++]=m<<2|x>>4,M[y++]=(x&15)<<4|I>>2,M[y++]=(I&3)<<6|P&63;return D}function Wt(o){var d=new Uint8Array(o),a="",p;for(p=0;p<d.length;p+=3)a+=ut[d[p]>>2],a+=ut[(d[p]&3)<<4|d[p+1]>>4],a+=ut[(d[p+1]&15)<<2|d[p+2]>>6],a+=ut[d[p+2]&63];return d.length%3===2?a=a.substring(0,a.length-1)+"=":d.length%3===1&&(a=a.substring(0,a.length-2)+"=="),a}function on(o,d){var a="";if(o&&(a=pe.call(o)),o&&(a==="[object ArrayBuffer]"||o.buffer&&pe.call(o.buffer)==="[object ArrayBuffer]")){var p,y=Rt;o instanceof ArrayBuffer?(p=o,y+=Gt):(p=o.buffer,a==="[object Int8Array]"?y+=ie:a==="[object Uint8Array]"?y+=se:a==="[object Uint8ClampedArray]"?y+=ae:a==="[object Int16Array]"?y+=ce:a==="[object Uint16Array]"?y+=fe:a==="[object Int32Array]"?y+=ue:a==="[object Uint32Array]"?y+=le:a==="[object Float32Array]"?y+=he:a==="[object Float64Array]"?y+=de:d(new Error("Failed to get type for BinaryArray"))),d(y+Wt(p))}else if(a==="[object Blob]"){var m=new FileReader;m.onload=function(){var x=rn+o.type+"~"+Wt(this.result);d(Rt+Ut+x)},m.readAsArrayBuffer(o)}else try{d(JSON.stringify(o))}catch(x){console.error("Couldn't convert value into a JSON string: ",o),d(null,x)}}function sn(o){if(o.substring(0,Ot)!==Rt)return JSON.parse(o);var d=o.substring(me),a=o.substring(Ot,me),p;if(a===Ut&&oe.test(d)){var y=d.match(oe);p=y[1],d=d.substring(y[0].length)}var m=ge(d);switch(a){case Gt:return m;case Ut:return _([m],{type:p});case ie:return new Int8Array(m);case se:return new Uint8Array(m);case ae:return new Uint8ClampedArray(m);case ce:return new Int16Array(m);case fe:return new Uint16Array(m);case ue:return new Int32Array(m);case le:return new Uint32Array(m);case he:return new Float32Array(m);case de:return new Float64Array(m);default:throw new Error("Unkown type: "+a)}}var kt={serialize:on,deserialize:sn,stringToBuffer:ge,bufferToString:Wt};function _e(o,d,a,p){o.executeSql("CREATE TABLE IF NOT EXISTS "+d.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],a,p)}function an(o){var d=this,a={db:null};if(o)for(var p in o)a[p]=typeof o[p]!="string"?o[p].toString():o[p];var y=new f(function(m,x){try{a.db=openDatabase(a.name,String(a.version),a.description,a.size)}catch(I){return x(I)}a.db.transaction(function(I){_e(I,a,function(){d._dbInfo=a,m()},function(P,D){x(D)})},x)});return a.serializer=kt,y}function ft(o,d,a,p,y,m){o.executeSql(a,p,y,function(x,I){I.code===I.SYNTAX_ERR?x.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[d.storeName],function(P,D){D.rows.length?m(P,I):_e(P,d,function(){P.executeSql(a,p,y,m)},m)},m):m(x,I)},m)}function cn(o,d){var a=this;o=T(o);var p=new f(function(y,m){a.ready().then(function(){var x=a._dbInfo;x.db.transaction(function(I){ft(I,x,"SELECT * FROM "+x.storeName+" WHERE key = ? LIMIT 1",[o],function(P,D){var M=D.rows.length?D.rows.item(0).value:null;M&&(M=x.serializer.deserialize(M)),y(M)},function(P,D){m(D)})})}).catch(m)});return g(p,d),p}function un(o,d){var a=this,p=new f(function(y,m){a.ready().then(function(){var x=a._dbInfo;x.db.transaction(function(I){ft(I,x,"SELECT * FROM "+x.storeName,[],function(P,D){for(var M=D.rows,C=M.length,k=0;k<C;k++){var H=M.item(k),q=H.value;if(q&&(q=x.serializer.deserialize(q)),q=o(q,H.key,k+1),q!==void 0){y(q);return}}y()},function(P,D){m(D)})})}).catch(m)});return g(p,d),p}function ve(o,d,a,p){var y=this;o=T(o);var m=new f(function(x,I){y.ready().then(function(){d===void 0&&(d=null);var P=d,D=y._dbInfo;D.serializer.serialize(d,function(M,C){C?I(C):D.db.transaction(function(k){ft(k,D,"INSERT OR REPLACE INTO "+D.storeName+" (key, value) VALUES (?, ?)",[o,M],function(){x(P)},function(H,q){I(q)})},function(k){if(k.code===k.QUOTA_ERR){if(p>0){x(ve.apply(y,[o,P,a,p-1]));return}I(k)}})})}).catch(I)});return g(m,a),m}function fn(o,d,a){return ve.apply(this,[o,d,a,1])}function ln(o,d){var a=this;o=T(o);var p=new f(function(y,m){a.ready().then(function(){var x=a._dbInfo;x.db.transaction(function(I){ft(I,x,"DELETE FROM "+x.storeName+" WHERE key = ?",[o],function(){y()},function(P,D){m(D)})})}).catch(m)});return g(p,d),p}function hn(o){var d=this,a=new f(function(p,y){d.ready().then(function(){var m=d._dbInfo;m.db.transaction(function(x){ft(x,m,"DELETE FROM "+m.storeName,[],function(){p()},function(I,P){y(P)})})}).catch(y)});return g(a,o),a}function dn(o){var d=this,a=new f(function(p,y){d.ready().then(function(){var m=d._dbInfo;m.db.transaction(function(x){ft(x,m,"SELECT COUNT(key) as c FROM "+m.storeName,[],function(I,P){var D=P.rows.item(0).c;p(D)},function(I,P){y(P)})})}).catch(y)});return g(a,o),a}function mn(o,d){var a=this,p=new f(function(y,m){a.ready().then(function(){var x=a._dbInfo;x.db.transaction(function(I){ft(I,x,"SELECT key FROM "+x.storeName+" WHERE id = ? LIMIT 1",[o+1],function(P,D){var M=D.rows.length?D.rows.item(0).key:null;y(M)},function(P,D){m(D)})})}).catch(m)});return g(p,d),p}function pn(o){var d=this,a=new f(function(p,y){d.ready().then(function(){var m=d._dbInfo;m.db.transaction(function(x){ft(x,m,"SELECT key FROM "+m.storeName,[],function(I,P){for(var D=[],M=0;M<P.rows.length;M++)D.push(P.rows.item(M).key);p(D)},function(I,P){y(P)})})}).catch(y)});return g(a,o),a}function gn(o){return new f(function(d,a){o.transaction(function(p){p.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(y,m){for(var x=[],I=0;I<m.rows.length;I++)x.push(m.rows.item(I).name);d({db:o,storeNames:x})},function(y,m){a(m)})},function(p){a(p)})})}function _n(o,d){d=N.apply(this,arguments);var a=this.config();o=typeof o!="function"&&o||{},o.name||(o.name=o.name||a.name,o.storeName=o.storeName||a.storeName);var p=this,y;return o.name?y=new f(function(m){var x;o.name===a.name?x=p._dbInfo.db:x=openDatabase(o.name,"","",0),o.storeName?m({db:x,storeNames:[o.storeName]}):m(gn(x))}).then(function(m){return new f(function(x,I){m.db.transaction(function(P){function D(H){return new f(function(q,z){P.executeSql("DROP TABLE IF EXISTS "+H,[],function(){q()},function(Q,ot){z(ot)})})}for(var M=[],C=0,k=m.storeNames.length;C<k;C++)M.push(D(m.storeNames[C]));f.all(M).then(function(){x()}).catch(function(H){I(H)})},function(P){I(P)})})}):y=f.reject("Invalid arguments"),g(y,d),y}var vn={_driver:"webSQLStorage",_initStorage:an,_support:nn(),iterate:un,getItem:cn,setItem:fn,removeItem:ln,clear:hn,length:dn,key:mn,keys:pn,dropInstance:_n};function yn(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function ye(o,d){var a=o.name+"/";return o.storeName!==d.storeName&&(a+=o.storeName+"/"),a}function bn(){var o="_localforage_support_test";try{return localStorage.setItem(o,!0),localStorage.removeItem(o),!1}catch{return!0}}function xn(){return!bn()||localStorage.length>0}function wn(o){var d=this,a={};if(o)for(var p in o)a[p]=o[p];return a.keyPrefix=ye(o,d._defaultConfig),xn()?(d._dbInfo=a,a.serializer=kt,f.resolve()):f.reject()}function Tn(o){var d=this,a=d.ready().then(function(){for(var p=d._dbInfo.keyPrefix,y=localStorage.length-1;y>=0;y--){var m=localStorage.key(y);m.indexOf(p)===0&&localStorage.removeItem(m)}});return g(a,o),a}function In(o,d){var a=this;o=T(o);var p=a.ready().then(function(){var y=a._dbInfo,m=localStorage.getItem(y.keyPrefix+o);return m&&(m=y.serializer.deserialize(m)),m});return g(p,d),p}function Sn(o,d){var a=this,p=a.ready().then(function(){for(var y=a._dbInfo,m=y.keyPrefix,x=m.length,I=localStorage.length,P=1,D=0;D<I;D++){var M=localStorage.key(D);if(M.indexOf(m)===0){var C=localStorage.getItem(M);if(C&&(C=y.serializer.deserialize(C)),C=o(C,M.substring(x),P++),C!==void 0)return C}}});return g(p,d),p}function Pn(o,d){var a=this,p=a.ready().then(function(){var y=a._dbInfo,m;try{m=localStorage.key(o)}catch{m=null}return m&&(m=m.substring(y.keyPrefix.length)),m});return g(p,d),p}function En(o){var d=this,a=d.ready().then(function(){for(var p=d._dbInfo,y=localStorage.length,m=[],x=0;x<y;x++){var I=localStorage.key(x);I.indexOf(p.keyPrefix)===0&&m.push(I.substring(p.keyPrefix.length))}return m});return g(a,o),a}function Dn(o){var d=this,a=d.keys().then(function(p){return p.length});return g(a,o),a}function Mn(o,d){var a=this;o=T(o);var p=a.ready().then(function(){var y=a._dbInfo;localStorage.removeItem(y.keyPrefix+o)});return g(p,d),p}function An(o,d,a){var p=this;o=T(o);var y=p.ready().then(function(){d===void 0&&(d=null);var m=d;return new f(function(x,I){var P=p._dbInfo;P.serializer.serialize(d,function(D,M){if(M)I(M);else try{localStorage.setItem(P.keyPrefix+o,D),x(m)}catch(C){(C.name==="QuotaExceededError"||C.name==="NS_ERROR_DOM_QUOTA_REACHED")&&I(C),I(C)}})})});return g(y,a),y}function Rn(o,d){if(d=N.apply(this,arguments),o=typeof o!="function"&&o||{},!o.name){var a=this.config();o.name=o.name||a.name,o.storeName=o.storeName||a.storeName}var p=this,y;return o.name?y=new f(function(m){o.storeName?m(ye(o,p._defaultConfig)):m(o.name+"/")}).then(function(m){for(var x=localStorage.length-1;x>=0;x--){var I=localStorage.key(x);I.indexOf(m)===0&&localStorage.removeItem(I)}}):y=f.reject("Invalid arguments"),g(y,d),y}var Nn={_driver:"localStorageWrapper",_initStorage:wn,_support:yn(),iterate:Sn,getItem:In,setItem:An,removeItem:Mn,clear:Tn,length:Dn,key:Pn,keys:En,dropInstance:Rn},Cn=function(d,a){return d===a||typeof d=="number"&&typeof a=="number"&&isNaN(d)&&isNaN(a)},Bn=function(d,a){for(var p=d.length,y=0;y<p;){if(Cn(d[y],a))return!0;y++}return!1},be=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"},bt={},xe={},dt={INDEXEDDB:en,WEBSQL:vn,LOCALSTORAGE:Nn},Ln=[dt.INDEXEDDB._driver,dt.WEBSQL._driver,dt.LOCALSTORAGE._driver],Nt=["dropInstance"],jt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Nt),Fn={description:"",driver:Ln.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Vn(o,d){o[d]=function(){var a=arguments;return o.ready().then(function(){return o[d].apply(o,a)})}}function Yt(){for(var o=1;o<arguments.length;o++){var d=arguments[o];if(d)for(var a in d)d.hasOwnProperty(a)&&(be(d[a])?arguments[0][a]=d[a].slice():arguments[0][a]=d[a])}return arguments[0]}var On=function(){function o(d){i(this,o);for(var a in dt)if(dt.hasOwnProperty(a)){var p=dt[a],y=p._driver;this[a]=y,bt[y]||this.defineDriver(p)}this._defaultConfig=Yt({},Fn),this._config=Yt({},this._defaultConfig,d),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return o.prototype.config=function(a){if((typeof a>"u"?"undefined":s(a))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var p in a){if(p==="storeName"&&(a[p]=a[p].replace(/\W/g,"_")),p==="version"&&typeof a[p]!="number")return new Error("Database version must be a number.");this._config[p]=a[p]}return"driver"in a&&a.driver?this.setDriver(this._config.driver):!0}else return typeof a=="string"?this._config[a]:this._config},o.prototype.defineDriver=function(a,p,y){var m=new f(function(x,I){try{var P=a._driver,D=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!a._driver){I(D);return}for(var M=jt.concat("_initStorage"),C=0,k=M.length;C<k;C++){var H=M[C],q=!Bn(Nt,H);if((q||a[H])&&typeof a[H]!="function"){I(D);return}}var z=function(){for(var xt=function(Wn){return function(){var kn=new Error("Method "+Wn+" is not implemented by the current driver"),we=f.reject(kn);return g(we,arguments[arguments.length-1]),we}},$t=0,Un=Nt.length;$t<Un;$t++){var Xt=Nt[$t];a[Xt]||(a[Xt]=xt(Xt))}};z();var Q=function(xt){bt[P]&&console.info("Redefining LocalForage driver: "+P),bt[P]=a,xe[P]=xt,x()};"_support"in a?a._support&&typeof a._support=="function"?a._support().then(Q,I):Q(!!a._support):Q(!0)}catch(ot){I(ot)}});return b(m,p,y),m},o.prototype.driver=function(){return this._driver||null},o.prototype.getDriver=function(a,p,y){var m=bt[a]?f.resolve(bt[a]):f.reject(new Error("Driver not found."));return b(m,p,y),m},o.prototype.getSerializer=function(a){var p=f.resolve(kt);return b(p,a),p},o.prototype.ready=function(a){var p=this,y=p._driverSet.then(function(){return p._ready===null&&(p._ready=p._initDriver()),p._ready});return b(y,a,a),y},o.prototype.setDriver=function(a,p,y){var m=this;be(a)||(a=[a]);var x=this._getSupportedDrivers(a);function I(){m._config.driver=m.driver()}function P(C){return m._extend(C),I(),m._ready=m._initStorage(m._config),m._ready}function D(C){return function(){var k=0;function H(){for(;k<C.length;){var q=C[k];return k++,m._dbInfo=null,m._ready=null,m.getDriver(q).then(P).catch(H)}I();var z=new Error("No available storage method found.");return m._driverSet=f.reject(z),m._driverSet}return H()}}var M=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=M.then(function(){var C=x[0];return m._dbInfo=null,m._ready=null,m.getDriver(C).then(function(k){m._driver=k._driver,I(),m._wrapLibraryMethodsWithReady(),m._initDriver=D(x)})}).catch(function(){I();var C=new Error("No available storage method found.");return m._driverSet=f.reject(C),m._driverSet}),b(this._driverSet,p,y),this._driverSet},o.prototype.supports=function(a){return!!xe[a]},o.prototype._extend=function(a){Yt(this,a)},o.prototype._getSupportedDrivers=function(a){for(var p=[],y=0,m=a.length;y<m;y++){var x=a[y];this.supports(x)&&p.push(x)}return p},o.prototype._wrapLibraryMethodsWithReady=function(){for(var a=0,p=jt.length;a<p;a++)Vn(this,jt[a])},o.prototype.createInstance=function(a){return new o(a)},o}(),Gn=new On;r.exports=Gn},{3:3}]},{},[4])(4)})});var ke=Ht((Ss,We)=>{"use strict";var ee=Math.abs,wr=Math.min;function Ft(h,t,e,n){var r=ee(h-t);return e==null&&(e=Ft.DBL_EPSILON),n==null&&(n=e),r<=e||r<=n*wr(ee(h),ee(t))?!0:h===t}Ft.FLT_EPSILON=11920929e-14;Ft.DBL_EPSILON=2220446049250313e-31;We.exports=Ft});var It=h=>({vertices:[{x:h.x,y:h.y},{x:h.x+h.width,y:h.y},{x:h.x+h.width,y:h.y+h.height},{x:h.x,y:h.y+h.height}]});var Jt=Tt(Bt(),1),Ae=Tt(Bt(),1);var j=11102230246251565e-32,tt=134217729,St=(3+8*j)*j;function ht(h,t,e,n,r){let c,s,i,u,l=t[0],v=n[0],_=0,f=0;v>l==v>-l?(c=l,l=t[++_]):(c=v,v=n[++f]);let g=0;if(_<h&&f<e)for(v>l==v>-l?(s=l+c,i=c-(s-l),l=t[++_]):(s=v+c,i=c-(s-v),v=n[++f]),c=s,i!==0&&(r[g++]=i);_<h&&f<e;)v>l==v>-l?(s=c+l,u=s-c,i=c-(s-u)+(l-u),l=t[++_]):(s=c+v,u=s-c,i=c-(s-u)+(v-u),v=n[++f]),c=s,i!==0&&(r[g++]=i);for(;_<h;)s=c+l,u=s-c,i=c-(s-u)+(l-u),l=t[++_],c=s,i!==0&&(r[g++]=i);for(;f<e;)s=c+v,u=s-c,i=c-(s-u)+(v-u),v=n[++f],c=s,i!==0&&(r[g++]=i);return(c!==0||g===0)&&(r[g++]=c),g}function Pt(h,t){let e=t[0];for(let n=1;n<h;n++)e+=t[n];return e}function w(h){return new Float64Array(h)}var Zn=(3+16*j)*j,Qn=(2+12*j)*j,Jn=(9+64*j)*j*j,mt=w(4),Se=w(8),Pe=w(12),Ee=w(16),nt=w(4);function zn(h,t,e,n,r,c,s){let i,u,l,v,_,f,g,b,T,N,A,L,O,$,Y,S,V,R,E=h-r,B=e-r,F=t-c,G=n-c;$=E*G,f=tt*E,g=f-(f-E),b=E-g,f=tt*G,T=f-(f-G),N=G-T,Y=b*N-($-g*T-b*T-g*N),S=F*B,f=tt*F,g=f-(f-F),b=F-g,f=tt*B,T=f-(f-B),N=B-T,V=b*N-(S-g*T-b*T-g*N),A=Y-V,_=Y-A,mt[0]=Y-(A+_)+(_-V),L=$+A,_=L-$,O=$-(L-_)+(A-_),A=O-S,_=O-A,mt[1]=O-(A+_)+(_-S),R=L+A,_=R-L,mt[2]=L-(R-_)+(A-_),mt[3]=R;let W=Pt(4,mt),X=Qn*s;if(W>=X||-W>=X||(_=h-E,i=h-(E+_)+(_-r),_=e-B,l=e-(B+_)+(_-r),_=t-F,u=t-(F+_)+(_-c),_=n-G,v=n-(G+_)+(_-c),i===0&&u===0&&l===0&&v===0)||(X=Jn*s+St*Math.abs(W),W+=E*v+G*i-(F*l+B*u),W>=X||-W>=X))return W;$=i*G,f=tt*i,g=f-(f-i),b=i-g,f=tt*G,T=f-(f-G),N=G-T,Y=b*N-($-g*T-b*T-g*N),S=u*B,f=tt*u,g=f-(f-u),b=u-g,f=tt*B,T=f-(f-B),N=B-T,V=b*N-(S-g*T-b*T-g*N),A=Y-V,_=Y-A,nt[0]=Y-(A+_)+(_-V),L=$+A,_=L-$,O=$-(L-_)+(A-_),A=O-S,_=O-A,nt[1]=O-(A+_)+(_-S),R=L+A,_=R-L,nt[2]=L-(R-_)+(A-_),nt[3]=R;let Z=ht(4,mt,4,nt,Se);$=E*v,f=tt*E,g=f-(f-E),b=E-g,f=tt*v,T=f-(f-v),N=v-T,Y=b*N-($-g*T-b*T-g*N),S=F*l,f=tt*F,g=f-(f-F),b=F-g,f=tt*l,T=f-(f-l),N=l-T,V=b*N-(S-g*T-b*T-g*N),A=Y-V,_=Y-A,nt[0]=Y-(A+_)+(_-V),L=$+A,_=L-$,O=$-(L-_)+(A-_),A=O-S,_=O-A,nt[1]=O-(A+_)+(_-S),R=L+A,_=R-L,nt[2]=L-(R-_)+(A-_),nt[3]=R;let U=ht(Z,Se,4,nt,Pe);$=i*v,f=tt*i,g=f-(f-i),b=i-g,f=tt*v,T=f-(f-v),N=v-T,Y=b*N-($-g*T-b*T-g*N),S=u*l,f=tt*u,g=f-(f-u),b=u-g,f=tt*l,T=f-(f-l),N=l-T,V=b*N-(S-g*T-b*T-g*N),A=Y-V,_=Y-A,nt[0]=Y-(A+_)+(_-V),L=$+A,_=L-$,O=$-(L-_)+(A-_),A=O-S,_=O-A,nt[1]=O-(A+_)+(_-S),R=L+A,_=R-L,nt[2]=L-(R-_)+(A-_),nt[3]=R;let K=ht(U,Pe,4,nt,Ee);return Ee[K-1]}function pt(h,t,e,n,r,c){let s=(t-c)*(e-r),i=(h-r)*(n-c),u=s-i,l=Math.abs(s+i);return Math.abs(u)>=Zn*l?u:-zn(h,t,e,n,r,c,l)}var Wr=(7+56*j)*j,kr=(3+28*j)*j,jr=(26+288*j)*j*j,Yr=w(4),$r=w(4),Xr=w(4),Hr=w(4),qr=w(4),Kr=w(4),Zr=w(4),Qr=w(4),Jr=w(4),zr=w(8),to=w(8),eo=w(8),no=w(4),ro=w(8),oo=w(8),io=w(8),so=w(12),ao=w(192),co=w(192);var lo=(10+96*j)*j,ho=(4+48*j)*j,mo=(44+576*j)*j*j,po=w(4),go=w(4),_o=w(4),vo=w(4),yo=w(4),bo=w(4),xo=w(4),wo=w(4),To=w(8),Io=w(8),So=w(8),Po=w(8),Eo=w(8),Do=w(8),Mo=w(8),Ao=w(8),Ro=w(8),No=w(4),Co=w(4),Bo=w(4),Lo=w(8),Fo=w(16),Vo=w(16),Oo=w(16),Go=w(32),Uo=w(32),Wo=w(48),ko=w(64),jo=w(1152),Yo=w(1152);var qo=(16+224*j)*j,Ko=(5+72*j)*j,Zo=(71+1408*j)*j*j,Qo=w(4),Jo=w(4),zo=w(4),ti=w(4),ei=w(4),ni=w(4),ri=w(4),oi=w(4),ii=w(4),si=w(4),ai=w(24),ci=w(24),ui=w(24),fi=w(24),li=w(24),hi=w(24),di=w(24),mi=w(24),pi=w(24),gi=w(24),_i=w(1152),vi=w(1152),yi=w(1152),bi=w(1152),xi=w(1152),wi=w(2304),Ti=w(2304),Ii=w(3456),Si=w(5760),Pi=w(8),Ei=w(8),Di=w(8),Mi=w(16),Ai=w(24),Ri=w(48),Ni=w(48),Ci=w(96),Bi=w(192),Li=w(384),Fi=w(384),Vi=w(384),Oi=w(768);var Gi=w(96),Ui=w(96),Wi=w(96),ki=w(1152);var Me=Math.pow(2,-52),Lt=new Uint32Array(512),_t=class h{static from(t,e=ir,n=sr){let r=t.length,c=new Float64Array(r*2);for(let s=0;s<r;s++){let i=t[s];c[2*s]=e(i),c[2*s+1]=n(i)}return new h(c)}constructor(t){let e=t.length>>1;if(e>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;let n=Math.max(2*e-5,0);this._triangles=new Uint32Array(n*3),this._halfedges=new Int32Array(n*3),this._hashSize=Math.ceil(Math.sqrt(e)),this._hullPrev=new Uint32Array(e),this._hullNext=new Uint32Array(e),this._hullTri=new Uint32Array(e),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(e),this._dists=new Float64Array(e),this.update()}update(){let{coords:t,_hullPrev:e,_hullNext:n,_hullTri:r,_hullHash:c}=this,s=t.length>>1,i=1/0,u=1/0,l=-1/0,v=-1/0;for(let E=0;E<s;E++){let B=t[2*E],F=t[2*E+1];B<i&&(i=B),F<u&&(u=F),B>l&&(l=B),F>v&&(v=F),this._ids[E]=E}let _=(i+l)/2,f=(u+v)/2,g,b,T;for(let E=0,B=1/0;E<s;E++){let F=Kt(_,f,t[2*E],t[2*E+1]);F<B&&(g=E,B=F)}let N=t[2*g],A=t[2*g+1];for(let E=0,B=1/0;E<s;E++){if(E===g)continue;let F=Kt(N,A,t[2*E],t[2*E+1]);F<B&&F>0&&(b=E,B=F)}let L=t[2*b],O=t[2*b+1],$=1/0;for(let E=0;E<s;E++){if(E===g||E===b)continue;let B=rr(N,A,L,O,t[2*E],t[2*E+1]);B<$&&(T=E,$=B)}let Y=t[2*T],S=t[2*T+1];if($===1/0){for(let F=0;F<s;F++)this._dists[F]=t[2*F]-t[0]||t[2*F+1]-t[1];gt(this._ids,this._dists,0,s-1);let E=new Uint32Array(s),B=0;for(let F=0,G=-1/0;F<s;F++){let W=this._ids[F],X=this._dists[W];X>G&&(E[B++]=W,G=X)}this.hull=E.subarray(0,B),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(pt(N,A,L,O,Y,S)<0){let E=b,B=L,F=O;b=T,L=Y,O=S,T=E,Y=B,S=F}let V=or(N,A,L,O,Y,S);this._cx=V.x,this._cy=V.y;for(let E=0;E<s;E++)this._dists[E]=Kt(t[2*E],t[2*E+1],V.x,V.y);gt(this._ids,this._dists,0,s-1),this._hullStart=g;let R=3;n[g]=e[T]=b,n[b]=e[g]=T,n[T]=e[b]=g,r[g]=0,r[b]=1,r[T]=2,c.fill(-1),c[this._hashKey(N,A)]=g,c[this._hashKey(L,O)]=b,c[this._hashKey(Y,S)]=T,this.trianglesLen=0,this._addTriangle(g,b,T,-1,-1,-1);for(let E=0,B,F;E<this._ids.length;E++){let G=this._ids[E],W=t[2*G],X=t[2*G+1];if(E>0&&Math.abs(W-B)<=Me&&Math.abs(X-F)<=Me||(B=W,F=X,G===g||G===b||G===T))continue;let Z=0;for(let ct=0,Vt=this._hashKey(W,X);ct<this._hashSize&&(Z=c[(Vt+ct)%this._hashSize],!(Z!==-1&&Z!==n[Z]));ct++);Z=e[Z];let U=Z,K;for(;K=n[U],pt(W,X,t[2*U],t[2*U+1],t[2*K],t[2*K+1])>=0;)if(U=K,U===Z){U=-1;break}if(U===-1)continue;let J=this._addTriangle(U,G,n[U],-1,-1,r[U]);r[G]=this._legalize(J+2),r[U]=J,R++;let et=n[U];for(;K=n[et],pt(W,X,t[2*et],t[2*et+1],t[2*K],t[2*K+1])<0;)J=this._addTriangle(et,G,K,r[G],-1,r[et]),r[G]=this._legalize(J+2),n[et]=et,R--,et=K;if(U===Z)for(;K=e[U],pt(W,X,t[2*K],t[2*K+1],t[2*U],t[2*U+1])<0;)J=this._addTriangle(K,G,U,-1,r[U],r[K]),this._legalize(J+2),r[K]=J,n[U]=U,R--,U=K;this._hullStart=e[G]=U,n[U]=e[et]=G,n[G]=et,c[this._hashKey(W,X)]=G,c[this._hashKey(t[2*U],t[2*U+1])]=U}this.hull=new Uint32Array(R);for(let E=0,B=this._hullStart;E<R;E++)this.hull[E]=B,B=n[B];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,e){return Math.floor(er(t-this._cx,e-this._cy)*this._hashSize)%this._hashSize}_legalize(t){let{_triangles:e,_halfedges:n,coords:r}=this,c=0,s=0;for(;;){let i=n[t],u=t-t%3;if(s=u+(t+2)%3,i===-1){if(c===0)break;t=Lt[--c];continue}let l=i-i%3,v=u+(t+1)%3,_=l+(i+2)%3,f=e[s],g=e[t],b=e[v],T=e[_];if(nr(r[2*f],r[2*f+1],r[2*g],r[2*g+1],r[2*b],r[2*b+1],r[2*T],r[2*T+1])){e[t]=T,e[i]=f;let A=n[_];if(A===-1){let O=this._hullStart;do{if(this._hullTri[O]===_){this._hullTri[O]=t;break}O=this._hullPrev[O]}while(O!==this._hullStart)}this._link(t,A),this._link(i,n[s]),this._link(s,_);let L=l+(i+1)%3;c<Lt.length&&(Lt[c++]=L)}else{if(c===0)break;t=Lt[--c]}}return s}_link(t,e){this._halfedges[t]=e,e!==-1&&(this._halfedges[e]=t)}_addTriangle(t,e,n,r,c,s){let i=this.trianglesLen;return this._triangles[i]=t,this._triangles[i+1]=e,this._triangles[i+2]=n,this._link(i,r),this._link(i+1,c),this._link(i+2,s),this.trianglesLen+=3,i}};function er(h,t){let e=h/(Math.abs(h)+Math.abs(t));return(t>0?3-e:1+e)/4}function Kt(h,t,e,n){let r=h-e,c=t-n;return r*r+c*c}function nr(h,t,e,n,r,c,s,i){let u=h-s,l=t-i,v=e-s,_=n-i,f=r-s,g=c-i,b=u*u+l*l,T=v*v+_*_,N=f*f+g*g;return u*(_*N-T*g)-l*(v*N-T*f)+b*(v*g-_*f)<0}function rr(h,t,e,n,r,c){let s=e-h,i=n-t,u=r-h,l=c-t,v=s*s+i*i,_=u*u+l*l,f=.5/(s*l-i*u),g=(l*v-i*_)*f,b=(s*_-u*v)*f;return g*g+b*b}function or(h,t,e,n,r,c){let s=e-h,i=n-t,u=r-h,l=c-t,v=s*s+i*i,_=u*u+l*l,f=.5/(s*l-i*u),g=h+(l*v-i*_)*f,b=t+(s*_-u*v)*f;return{x:g,y:b}}function gt(h,t,e,n){if(n-e<=20)for(let r=e+1;r<=n;r++){let c=h[r],s=t[c],i=r-1;for(;i>=e&&t[h[i]]>s;)h[i+1]=h[i--];h[i+1]=c}else{let r=e+n>>1,c=e+1,s=n;Et(h,r,c),t[h[e]]>t[h[n]]&&Et(h,e,n),t[h[c]]>t[h[n]]&&Et(h,c,n),t[h[e]]>t[h[c]]&&Et(h,e,c);let i=h[c],u=t[i];for(;;){do c++;while(t[h[c]]<u);do s--;while(t[h[s]]>u);if(s<c)break;Et(h,c,s)}h[e+1]=h[s],h[s]=i,n-c+1>=s-e?(gt(h,t,c,n),gt(h,t,e,s-1)):(gt(h,t,e,s-1),gt(h,t,c,n))}}function Et(h,t,e){let n=h[t];h[t]=h[e],h[e]=n}function ir(h){return h[0]}function sr(h){return h[1]}var it=class{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,e){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,e){this._+=`L${this._x1=+t},${this._y1=+e}`}arc(t,e,n){t=+t,e=+e,n=+n;let r=t+n,c=e;if(n<0)throw new Error("negative radius");this._x1===null?this._+=`M${r},${c}`:(Math.abs(this._x1-r)>1e-6||Math.abs(this._y1-c)>1e-6)&&(this._+="L"+r+","+c),n&&(this._+=`A${n},${n},0,1,1,${t-n},${e}A${n},${n},0,1,1,${this._x1=r},${this._y1=c}`)}rect(t,e,n,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${+n}v${+r}h${-n}Z`}value(){return this._||null}};var lt=class{constructor(){this._=[]}moveTo(t,e){this._.push([t,e])}closePath(){this._.push(this._[0].slice())}lineTo(t,e){this._.push([t,e])}value(){return this._.length?this._:null}};var Dt=class{constructor(t,[e,n,r,c]=[0,0,960,500]){if(!((r=+r)>=(e=+e))||!((c=+c)>=(n=+n)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=r,this.xmin=e,this.ymax=c,this.ymin=n,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){let{delaunay:{points:t,hull:e,triangles:n},vectors:r}=this,c,s,i=this.circumcenters=this._circumcenters.subarray(0,n.length/3*2);for(let T=0,N=0,A=n.length,L,O;T<A;T+=3,N+=2){let $=n[T]*2,Y=n[T+1]*2,S=n[T+2]*2,V=t[$],R=t[$+1],E=t[Y],B=t[Y+1],F=t[S],G=t[S+1],W=E-V,X=B-R,Z=F-V,U=G-R,K=(W*U-X*Z)*2;if(Math.abs(K)<1e-9){if(c===void 0){c=s=0;for(let et of e)c+=t[et*2],s+=t[et*2+1];c/=e.length,s/=e.length}let J=1e9*Math.sign((c-V)*U-(s-R)*Z);L=(V+F)/2-J*U,O=(R+G)/2+J*Z}else{let J=1/K,et=W*W+X*X,ct=Z*Z+U*U;L=V+(U*et-X*ct)*J,O=R+(W*ct-Z*et)*J}i[N]=L,i[N+1]=O}let u=e[e.length-1],l,v=u*4,_,f=t[2*u],g,b=t[2*u+1];r.fill(0);for(let T=0;T<e.length;++T)u=e[T],l=v,_=f,g=b,v=u*4,f=t[2*u],b=t[2*u+1],r[l+2]=r[v]=g-b,r[l+3]=r[v+1]=f-_}render(t){let e=t==null?t=new it:void 0,{delaunay:{halfedges:n,inedges:r,hull:c},circumcenters:s,vectors:i}=this;if(c.length<=1)return null;for(let v=0,_=n.length;v<_;++v){let f=n[v];if(f<v)continue;let g=Math.floor(v/3)*2,b=Math.floor(f/3)*2,T=s[g],N=s[g+1],A=s[b],L=s[b+1];this._renderSegment(T,N,A,L,t)}let u,l=c[c.length-1];for(let v=0;v<c.length;++v){u=l,l=c[v];let _=Math.floor(r[l]/3)*2,f=s[_],g=s[_+1],b=u*4,T=this._project(f,g,i[b+2],i[b+3]);T&&this._renderSegment(f,g,T[0],T[1],t)}return e&&e.value()}renderBounds(t){let e=t==null?t=new it:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),e&&e.value()}renderCell(t,e){let n=e==null?e=new it:void 0,r=this._clip(t);if(r===null||!r.length)return;e.moveTo(r[0],r[1]);let c=r.length;for(;r[0]===r[c-2]&&r[1]===r[c-1]&&c>1;)c-=2;for(let s=2;s<c;s+=2)(r[s]!==r[s-2]||r[s+1]!==r[s-1])&&e.lineTo(r[s],r[s+1]);return e.closePath(),n&&n.value()}*cellPolygons(){let{delaunay:{points:t}}=this;for(let e=0,n=t.length/2;e<n;++e){let r=this.cellPolygon(e);r&&(r.index=e,yield r)}}cellPolygon(t){let e=new lt;return this.renderCell(t,e),e.value()}_renderSegment(t,e,n,r,c){let s,i=this._regioncode(t,e),u=this._regioncode(n,r);i===0&&u===0?(c.moveTo(t,e),c.lineTo(n,r)):(s=this._clipSegment(t,e,n,r,i,u))&&(c.moveTo(s[0],s[1]),c.lineTo(s[2],s[3]))}contains(t,e,n){return e=+e,e!==e||(n=+n,n!==n)?!1:this.delaunay._step(t,e,n)===t}*neighbors(t){let e=this._clip(t);if(e)for(let n of this.delaunay.neighbors(t)){let r=this._clip(n);if(r){t:for(let c=0,s=e.length;c<s;c+=2)for(let i=0,u=r.length;i<u;i+=2)if(e[c]===r[i]&&e[c+1]===r[i+1]&&e[(c+2)%s]===r[(i+u-2)%u]&&e[(c+3)%s]===r[(i+u-1)%u]){yield n;break t}}}}_cell(t){let{circumcenters:e,delaunay:{inedges:n,halfedges:r,triangles:c}}=this,s=n[t];if(s===-1)return null;let i=[],u=s;do{let l=Math.floor(u/3);if(i.push(e[l*2],e[l*2+1]),u=u%3===2?u-2:u+1,c[u]!==t)break;u=r[u]}while(u!==s&&u!==-1);return i}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];let e=this._cell(t);if(e===null)return null;let{vectors:n}=this,r=t*4;return this._simplify(n[r]||n[r+1]?this._clipInfinite(t,e,n[r],n[r+1],n[r+2],n[r+3]):this._clipFinite(t,e))}_clipFinite(t,e){let n=e.length,r=null,c,s,i=e[n-2],u=e[n-1],l,v=this._regioncode(i,u),_,f=0;for(let g=0;g<n;g+=2)if(c=i,s=u,i=e[g],u=e[g+1],l=v,v=this._regioncode(i,u),l===0&&v===0)_=f,f=0,r?r.push(i,u):r=[i,u];else{let b,T,N,A,L;if(l===0){if((b=this._clipSegment(c,s,i,u,l,v))===null)continue;[T,N,A,L]=b}else{if((b=this._clipSegment(i,u,c,s,v,l))===null)continue;[A,L,T,N]=b,_=f,f=this._edgecode(T,N),_&&f&&this._edge(t,_,f,r,r.length),r?r.push(T,N):r=[T,N]}_=f,f=this._edgecode(A,L),_&&f&&this._edge(t,_,f,r,r.length),r?r.push(A,L):r=[A,L]}if(r)_=f,f=this._edgecode(r[0],r[1]),_&&f&&this._edge(t,_,f,r,r.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return r}_clipSegment(t,e,n,r,c,s){let i=c<s;for(i&&([t,e,n,r,c,s]=[n,r,t,e,s,c]);;){if(c===0&&s===0)return i?[n,r,t,e]:[t,e,n,r];if(c&s)return null;let u,l,v=c||s;v&8?(u=t+(n-t)*(this.ymax-e)/(r-e),l=this.ymax):v&4?(u=t+(n-t)*(this.ymin-e)/(r-e),l=this.ymin):v&2?(l=e+(r-e)*(this.xmax-t)/(n-t),u=this.xmax):(l=e+(r-e)*(this.xmin-t)/(n-t),u=this.xmin),c?(t=u,e=l,c=this._regioncode(t,e)):(n=u,r=l,s=this._regioncode(n,r))}}_clipInfinite(t,e,n,r,c,s){let i=Array.from(e),u;if((u=this._project(i[0],i[1],n,r))&&i.unshift(u[0],u[1]),(u=this._project(i[i.length-2],i[i.length-1],c,s))&&i.push(u[0],u[1]),i=this._clipFinite(t,i))for(let l=0,v=i.length,_,f=this._edgecode(i[v-2],i[v-1]);l<v;l+=2)_=f,f=this._edgecode(i[l],i[l+1]),_&&f&&(l=this._edge(t,_,f,i,l),v=i.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(i=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return i}_edge(t,e,n,r,c){for(;e!==n;){let s,i;switch(e){case 5:e=4;continue;case 4:e=6,s=this.xmax,i=this.ymin;break;case 6:e=2;continue;case 2:e=10,s=this.xmax,i=this.ymax;break;case 10:e=8;continue;case 8:e=9,s=this.xmin,i=this.ymax;break;case 9:e=1;continue;case 1:e=5,s=this.xmin,i=this.ymin;break}(r[c]!==s||r[c+1]!==i)&&this.contains(t,s,i)&&(r.splice(c,0,s,i),c+=2)}return c}_project(t,e,n,r){let c=1/0,s,i,u;if(r<0){if(e<=this.ymin)return null;(s=(this.ymin-e)/r)<c&&(u=this.ymin,i=t+(c=s)*n)}else if(r>0){if(e>=this.ymax)return null;(s=(this.ymax-e)/r)<c&&(u=this.ymax,i=t+(c=s)*n)}if(n>0){if(t>=this.xmax)return null;(s=(this.xmax-t)/n)<c&&(i=this.xmax,u=e+(c=s)*r)}else if(n<0){if(t<=this.xmin)return null;(s=(this.xmin-t)/n)<c&&(i=this.xmin,u=e+(c=s)*r)}return[i,u]}_edgecode(t,e){return(t===this.xmin?1:t===this.xmax?2:0)|(e===this.ymin?4:e===this.ymax?8:0)}_regioncode(t,e){return(t<this.xmin?1:t>this.xmax?2:0)|(e<this.ymin?4:e>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let e=0;e<t.length;e+=2){let n=(e+2)%t.length,r=(e+4)%t.length;(t[e]===t[n]&&t[n]===t[r]||t[e+1]===t[n+1]&&t[n+1]===t[r+1])&&(t.splice(n,2),e-=2)}t.length||(t=null)}return t}};var ar=2*Math.PI,vt=Math.pow;function cr(h){return h[0]}function ur(h){return h[1]}function fr(h){let{triangles:t,coords:e}=h;for(let n=0;n<t.length;n+=3){let r=2*t[n],c=2*t[n+1],s=2*t[n+2];if((e[s]-e[r])*(e[c+1]-e[r+1])-(e[c]-e[r])*(e[s+1]-e[r+1])>1e-10)return!1}return!0}function lr(h,t,e){return[h+Math.sin(h+t)*e,t+Math.cos(h-t)*e]}var yt=class h{static from(t,e=cr,n=ur,r){return new h("length"in t?hr(t,e,n,r):Float64Array.from(dr(t,e,n,r)))}constructor(t){this._delaunator=new _t(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){let t=this._delaunator,e=this.points;if(t.hull&&t.hull.length>2&&fr(t)){this.collinear=Int32Array.from({length:e.length/2},(f,g)=>g).sort((f,g)=>e[2*f]-e[2*g]||e[2*f+1]-e[2*g+1]);let u=this.collinear[0],l=this.collinear[this.collinear.length-1],v=[e[2*u],e[2*u+1],e[2*l],e[2*l+1]],_=1e-8*Math.hypot(v[3]-v[1],v[2]-v[0]);for(let f=0,g=e.length/2;f<g;++f){let b=lr(e[2*f],e[2*f+1],_);e[2*f]=b[0],e[2*f+1]=b[1]}this._delaunator=new _t(e)}else delete this.collinear;let n=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,c=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),i=this._hullIndex.fill(-1);for(let u=0,l=n.length;u<l;++u){let v=c[u%3===2?u-2:u+1];(n[u]===-1||s[v]===-1)&&(s[v]=u)}for(let u=0,l=r.length;u<l;++u)i[r[u]]=u;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],s[r[0]]=1,r.length===2&&(s[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(t){return new Dt(this,t)}*neighbors(t){let{inedges:e,hull:n,_hullIndex:r,halfedges:c,triangles:s,collinear:i}=this;if(i){let _=i.indexOf(t);_>0&&(yield i[_-1]),_<i.length-1&&(yield i[_+1]);return}let u=e[t];if(u===-1)return;let l=u,v=-1;do{if(yield v=s[l],l=l%3===2?l-2:l+1,s[l]!==t)return;if(l=c[l],l===-1){let _=n[(r[t]+1)%n.length];_!==v&&(yield _);return}}while(l!==u)}find(t,e,n=0){if(t=+t,t!==t||(e=+e,e!==e))return-1;let r=n,c;for(;(c=this._step(n,t,e))>=0&&c!==n&&c!==r;)n=c;return c}_step(t,e,n){let{inedges:r,hull:c,_hullIndex:s,halfedges:i,triangles:u,points:l}=this;if(r[t]===-1||!l.length)return(t+1)%(l.length>>1);let v=t,_=vt(e-l[t*2],2)+vt(n-l[t*2+1],2),f=r[t],g=f;do{let b=u[g],T=vt(e-l[b*2],2)+vt(n-l[b*2+1],2);if(T<_&&(_=T,v=b),g=g%3===2?g-2:g+1,u[g]!==t)break;if(g=i[g],g===-1){if(g=c[(s[t]+1)%c.length],g!==b&&vt(e-l[g*2],2)+vt(n-l[g*2+1],2)<_)return g;break}}while(g!==f);return v}render(t){let e=t==null?t=new it:void 0,{points:n,halfedges:r,triangles:c}=this;for(let s=0,i=r.length;s<i;++s){let u=r[s];if(u<s)continue;let l=c[s]*2,v=c[u]*2;t.moveTo(n[l],n[l+1]),t.lineTo(n[v],n[v+1])}return this.renderHull(t),e&&e.value()}renderPoints(t,e){e===void 0&&(!t||typeof t.moveTo!="function")&&(e=t,t=null),e=e==null?2:+e;let n=t==null?t=new it:void 0,{points:r}=this;for(let c=0,s=r.length;c<s;c+=2){let i=r[c],u=r[c+1];t.moveTo(i+e,u),t.arc(i,u,e,0,ar)}return n&&n.value()}renderHull(t){let e=t==null?t=new it:void 0,{hull:n,points:r}=this,c=n[0]*2,s=n.length;t.moveTo(r[c],r[c+1]);for(let i=1;i<s;++i){let u=2*n[i];t.lineTo(r[u],r[u+1])}return t.closePath(),e&&e.value()}hullPolygon(){let t=new lt;return this.renderHull(t),t.value()}renderTriangle(t,e){let n=e==null?e=new it:void 0,{points:r,triangles:c}=this,s=c[t*=3]*2,i=c[t+1]*2,u=c[t+2]*2;return e.moveTo(r[s],r[s+1]),e.lineTo(r[i],r[i+1]),e.lineTo(r[u],r[u+1]),e.closePath(),n&&n.value()}*trianglePolygons(){let{triangles:t}=this;for(let e=0,n=t.length/3;e<n;++e)yield this.trianglePolygon(e)}trianglePolygon(t){let e=new lt;return this.renderTriangle(t,e),e.value()}};function hr(h,t,e,n){let r=h.length,c=new Float64Array(r*2);for(let s=0;s<r;++s){let i=h[s];c[s*2]=t.call(n,i,s,h),c[s*2+1]=e.call(n,i,s,h)}return c}function*dr(h,t,e,n){let r=0;for(let c of h)yield t.call(n,c,r,h),yield e.call(n,c,r,h),++r}function Zt(h,t){for(var e=h.length,n=h[e-1],r=t[0],c=t[1],s=n[0],i=n[1],u,l,v=!1,_=0;_<e;++_)n=h[_],u=n[0],l=n[1],l>c!=i>c&&r<(s-u)*(c-l)/(i-l)+u&&(v=!v),s=u,i=l;return v}var Ne=Tt(Bt(),1);var rt=class zt{constructor(t,e){this.x=t,this.y=e}static FromDto(t){return new zt(t.x,t.y)}ToDto(){let t={};return t.x=this.x,t.y=this.y,t}hasTheSamePosition(t){let e={DbUst:function(r,c,s){return r(c,s)}};return e.DbUst(Jt.default,this.x,t.x)&&e.DbUst(Jt.default,this.y,t.y)}toDelauayPoint(){return[this.x,this.y]}middlePoint(t){let e={};e.YbRAK=function(s,i){return s/i},e.FgsPI=function(s,i){return s+i};let n=e,r=n.YbRAK(n.FgsPI(this.x,t.x),2),c=n.YbRAK(this.y+t.y,2);return new zt(r,c)}};function Qt(h,t,e){let n={};n.xhsNk=function(_,f){return _-f},n.VsjnH=function(_,f){return _-f},n.VwwiA=function(_,f){return _-f},n.fPqNI=function(_,f){return _*f},n.obWIa=function(_,f){return _===f},n.zghmh=function(_,f){return _/f},n.Naupu=function(_,f){return _*f};let r=n,c={x:r.xhsNk(h.x,t.x),y:r.VsjnH(h.y,t.y)},s={x:r.xhsNk(e.x,t.x),y:r.VwwiA(e.y,t.y)},i=r.fPqNI(c.x,s.x)+r.fPqNI(c.y,s.y),u=Math.hypot(c.x,c.y),l=Math.hypot(s.x,s.y);if(r.obWIa(u,0)||r.obWIa(l,0))return 0;let v=Math.min(1,Math.max(-1,r.zghmh(i,r.Naupu(u,l))));return Math.acos(v)}var Re=class st{constructor(t){let e="0|2|4|3|1".split("|"),n=0;for(;;){switch(e[n++]){case"0":this.points=t;continue;case"1":!st.isCounterClockwise(t)&&this.points.reverse();continue;case"2":this.tag="";continue;case"3":this.materialTag="";continue;case"4":this.sectionTag="";continue}break}}static FromDto(t){return new st(t.points.map(e=>rt.FromDto(e)))}toDto(){return{points:this.points.map(t=>t.ToDto()),tag:this.tag,sectionTag:this.sectionTag,materialTag:this.materialTag}}static isCounterClockwise(t){let e={};e.sWXZS=function(u,l){return u-l},e.Paixj=function(u,l){return u*l};let n=e,[r,c,s]=t;return n.sWXZS(n.Paixj(n.sWXZS(c.x,r.x),n.sWXZS(s.y,r.y)),n.Paixj(c.y-r.y,n.sWXZS(s.x,r.x)))>0}applyTags(t,e,n){this.tag=t,this.sectionTag=e,this.materialTag=n}getCenter(){let t={};t.RehHN=function(u,l){return u/l},t.kMWxx=function(u,l){return u+l};let e=t,[n,r,c]=this.points,s=e.RehHN(e.kMWxx(n.x+r.x,c.x),3),i=e.RehHN(e.kMWxx(e.kMWxx(n.y,r.y),c.y),3);return new rt(s,i)}getInsideVertices(t=.1){let e={};e.BHczB=function(l,v){return l-v},e.bvjgb=function(l,v){return l+v},e.NcJcf=function(l,v){return l*v},e.HzztV=function(l,v){return l*v},e.mthGL=function(l,v){return l*v},e.zHNma=function(l,v){return l/v},e.dtTJD=function(l,v){return l+v};let n=e,r=this.getCenter(),c=this.points.map(l=>{let v=n.BHczB(r.x,l.x),_=r.y-l.y;return Math.sqrt(n.bvjgb(n.NcJcf(v,v),n.HzztV(_,_)))}),s=Math.max(...c),i=n.mthGL(s,t);return this.points.map(l=>{let v=r.x-l.x,_=n.BHczB(r.y,l.y),f=Math.sqrt(n.bvjgb(n.HzztV(v,v),n.mthGL(_,_))),g=n.zHNma(i,f);return new rt(n.dtTJD(l.x,v*g),l.y+_*g)})}splitToCenterTriangles(){let t=this.getCenter();return[new st([this.points[0],this.points[1],t]),new st([this.points[1],this.points[2],t]),new st([this.points[2],this.points[0],t])]}splitToMidpointTriangles(){let t={};t.IdCIb=function(l,v){return l/v},t.Mpvam=function(l,v){return l+v},t.bvQJN=function(l,v){return l/v},t.tkXwe=function(l,v){return l/v},t.uuLwx=function(l,v){return l/v},t.yIuss=function(l,v){return l/v};let e=t,[n,r,c]=this.points,s=new rt(e.IdCIb(n.x+r.x,2),e.Mpvam(n.y,r.y)/2),i=new rt(e.bvQJN(r.x+c.x,2),e.tkXwe(e.Mpvam(r.y,c.y),2)),u=new rt(e.uuLwx(c.x+n.x,2),e.yIuss(e.Mpvam(c.y,n.y),2));return[new st([n,s,u]),new st([s,r,i]),new st([u,i,c]),new st([s,i,u])]}getArea(){let t={};t.EmvlB=function(g,b){return g+b},t.kGIGD=function(g,b){return g+b},t.UFPDy=function(g,b){return g*b},t.oIzux=function(g,b){return g-b},t.vOPfU=function(g,b){return g*b},t.LIblj=function(g,b){return g-b};let e=t,[n,r,c]=this.points,s=n.x,i=r.x,u=c.x,l=n.y,v=r.y,_=c.y;return .5*Math.abs(e.EmvlB(e.kGIGD(e.UFPDy(s,e.oIzux(v,_)),e.vOPfU(i,e.LIblj(_,l))),e.UFPDy(u,l-v)))}isFlatTriangle(){let t=this.getArea();return(0,Ae.default)(t,0,1e-7)}angles(){let t={hSoRT:function(s,i,u,l){return s(i,u,l)},zFAuu:function(s,i,u,l){return s(i,u,l)}},[e,n,r]=this.points;return[t.hSoRT(Qt,n,e,r),Qt(e,n,r),t.zFAuu(Qt,e,r,n)]}isWrongTriangle(t=20*Math.PI/180){return!!this.angles().some(n=>n<t)}};var mr=class Ce{constructor(t,e,n,r){let c={};c.YDoBJ="3|0|1|4|2";let s=c,i=s.YDoBJ.split("|"),u=0;for(;;){switch(i[u++]){case"0":this.tag=e;continue;case"1":this.sectionTag=n;continue;case"2":this.d3Polygon=t.map(l=>[l.x,l.y]);continue;case"3":this.points=t;continue;case"4":this.materialTag=r;continue}break}}static FromDto(t){return new Ce(t.points.map(e=>rt.FromDto(e)),t.tag,t.sectionTag,t.materialTag)}isInside(t){for(let n=0,r=this.points.length-1;n<this.points.length;r=n++)if(pr(t,this.points[n],this.points[r]))return!0;return Zt(this.d3Polygon,[t.x,t.y])}splitPolygonEdges(t,e){let n={};n.XrGBN=function(s,i){return s%i},n.ZjWfc=function(s,i){return s+i},n.LkBVP=function(s,i){return s-i},n.ciEfw=function(s,i){return s-i},n.WuBrq=function(s,i){return s+i},n.QNPXE=function(s,i){return s*i},n.xhhWN=function(s,i){return s/i},n.mjyqj=function(s,i){return s/i},n.llJnW=function(s,i){return s*i},n.dqPsr=function(s,i){return s+i};let r=n,c=[];for(let s=0;s<t.length;s++){let i=t[s],u=t[r.XrGBN(r.ZjWfc(s,1),t.length)],l=r.LkBVP(u.x,i.x),v=r.ciEfw(u.y,i.y),_=Math.sqrt(r.WuBrq(r.QNPXE(l,l),r.QNPXE(v,v))),f=Math.floor(r.xhhWN(_,e));c.push(new rt(i.x,i.y));for(let g=1;g<f;g++){let b=r.mjyqj(r.llJnW(g,e),_),T=r.dqPsr(i.x,b*l),N=r.dqPsr(i.y,b*v);c.push(new rt(T,N))}}return c}};function pr(h,t,e){let n={VrVQZ:function(i,u){return i*u},jWHFR:function(i,u){return i-u},eTGOl:function(i,u){return i-u},EODiq:function(i,u,l){return i(u,l)},EEJfs:function(i,u){return i+u},BEfKc:function(i,u){return i-u},PAxCg:function(i,u){return i<u},VIybs:function(i,u){return i-u},Riqjl:function(i,u){return i**u},GoVHH:function(i,u){return i>u}},r=n.VrVQZ(n.jWHFR(h.y,t.y),n.jWHFR(e.x,t.x))-n.VrVQZ(n.jWHFR(h.x,t.x),n.eTGOl(e.y,t.y));if(!n.EODiq(Ne.default,Math.abs(r),0))return!1;let c=n.EEJfs(n.eTGOl(h.x,t.x)*n.BEfKc(e.x,t.x),n.VrVQZ(n.eTGOl(h.y,t.y),n.BEfKc(e.y,t.y)));if(n.PAxCg(c,0))return!1;let s=n.EEJfs(n.VIybs(e.x,t.x)**2,n.Riqjl(n.eTGOl(e.y,t.y),2));return!n.GoVHH(c,s)}var gr=class Be{constructor(t,e,n){this.center=t,this.radius=e,this.maxTriangleArea=n}static FromDto(t){return new Be(rt.FromDto(t.center),t.radius,t.maxTriangleArea)}isToBeRefined(t){let e={};e.CMXUK=function(u,l){return u>l};let n=e,r=t.getCenter();if(!this.contains(r))return!1;let s=t.getArea();return n.CMXUK(s,this.maxTriangleArea)}contains(t){let e={};e.sFNcL=function(s,i){return s-i},e.baUed=function(s,i){return s-i},e.BCCkb=function(s,i){return s*i},e.OSCFP=function(s,i){return s*i};let n=e,r=n.sFNcL(t.x,this.center.x),c=n.baUed(t.y,this.center.y);return n.BCCkb(r,r)+n.BCCkb(c,c)<=n.OSCFP(this.radius,this.radius)}};function Le(h){let t={XBKXE:function(l,v,_){return l(v,_)},cDCZy:function(l,v){return l(v)}},e=h.polygons.map(l=>mr.FromDto(l)),n=h.baseTriangles.map(l=>Re.FromDto(l)),r=h.meshingConfiguration.refinementPoints.map(l=>gr.FromDto(l)),c=t.XBKXE(_r,r,n),s=[...c.flatMap(l=>l.points),...h.extraPoints.map(l=>rt.FromDto(l))],i=yr(t.cDCZy(vr,s),e),u=[];for(let l of i){let v=l.getCenter(),_=e.find(f=>f.isInside(v));_&&(l.applyTags(_.tag,_.sectionTag,_.materialTag),u.push(l))}return{triangles:u.map(l=>l.toDto())}}function _r(h,t){let e={};e.dkPjU=function(u,l){return u>l},e.LWrCU=function(u,l){return u<l},e.yuGds=function(u,l){return u||l};let n=e,r=0,c=n.dkPjU(h.length,0);if(!c)return t;let s=t,i=[];for(;c&&n.LWrCU(r,100);){i=[],c=!1;for(let u of s){let l=h.some(v=>v.isToBeRefined(u));l?i.push(...u.splitToMidpointTriangles()):i.push(u),c=n.yuGds(c,l)}s=i,r++}return i}function vr(h){let t=h.map(r=>r.toDelauayPoint());return[...yt.from(t).trianglePolygons()].map(r=>[new rt(r[2][0],r[2][1]),new rt(r[1][0],r[1][1]),new rt(r[0][0],r[0][1])]).map(r=>new Re(r)).filter(r=>!r.isFlatTriangle())}function yr(h,t){let e=[];for(let n of h)n.getInsideVertices().every(c=>t.some(s=>s.isInside(c)))&&e.push(n);return e}var ne=Tt(Ve());var Oe=(h,t,e="")=>`View3dModel-${h}-${t}${e}`,Ge=h=>`Triangles-${h}`;function Ue(h){if(h.length<3)throw new Error("At least three vertices are required to form a face.");return{vertices:[...h.filter(t=>t)],results:[]}}var At=Tt(ke());var Mt=h=>{let t=(h.points??"").trim().split(/\s+/).map(n=>n.split(",")),e=[];for(let[n,r]of t){let c=parseFloat(n),s=parseFloat(r);if(Number.isFinite(c)&&Number.isFinite(s))e.push({x:c,y:s});else throw new Error("Invalid vertex coordinates")}return{vertices:e}};function je(h){let t=0,e=0,n=0,r=h.length;for(let c=0;c<r;c++){let{x:s,y:i}=h[c],{x:u,y:l}=h[(c+1)%r],v=s*l-u*i;t+=v,e+=(s+u)*v,n+=(i+l)*v}return t*=.5,t===0?{x:0,y:0}:(e/=6*t,n/=6*t,{x:e,y:n})}function*Ye(h,t){let e=[...new Set(t.rectangles.map(f=>f.name).concat(t.polygons.map(f=>f.name)))],n=[];for(let f of h){let g=f.points.map(N=>Ir(N)),b=Ue(g);if(e.indexOf(f.name)===-1)throw new Error(`Geometry name ${f.name} not found in geometry rectangles or polygons.`);n.push(b)}let r=t.supports.map(f=>Sr(f)),c=h.flatMap(f=>f.points).map(f=>f.x).reduce((f,g)=>Math.max(f,g),-1/0),s=h.flatMap(f=>f.points).map(f=>f.x).reduce((f,g)=>Math.min(f,g),1/0),i=h.flatMap(f=>f.points).map(f=>f.y).reduce((f,g)=>Math.max(f,g),-1/0),u=h.flatMap(f=>f.points).map(f=>f.y).reduce((f,g)=>Math.min(f,g),1/0),l=c-s,v=i-u,_=[...t.polygons.map(f=>Mt(f)),...t.rectangles.map(f=>It(f))].map(f=>f.vertices.map(g=>({x:g.x,y:g.y}))).map(f=>({points:f}));for(let f of t.loadCases)yield{faces:n,wireframeFaces:[],supports:r,borders:_,loads:Tr(f,t),loadCaseTag:f.name,width:l,height:v,hasResults:!1}}function Tr(h,t){let e=[];for(let n of h.pointLoads)(0,At.default)(n.fx,0)||e.push({x:n.x,y:n.y,z:0,valueX:n.fx,valueY:0,valueZ:0}),(0,At.default)(n.fy,0)||e.push({x:n.x,y:n.y,z:0,valueY:n.fy,valueZ:0,valueX:0,type:"point"});for(let n of h.distributedLoads){let r=t.polygons.filter(i=>i.name===n.geometryName).map(i=>Mt(i)),c=t.rectangles.filter(i=>i.name===n.geometryName).map(i=>It(i)),s=[...r,...c];for(let i of s){let u=je(i.vertices);(0,At.default)(n.fx,0)||e.push({x:u.x,y:u.y,z:0,valueX:n.fx,valueY:0,valueZ:0,type:"distributed"}),(0,At.default)(n.fy,0)||e.push({x:u.x,y:u.y,z:0,valueX:0,valueY:n.fy,valueZ:0,type:"distributed"})}}return e}function Ir(h){return{x:h.x,y:h.y,z:0,ux:0,uy:0,uz:0,value:0}}function Sr(h){return{x:h.x,y:h.y,z:0,ux:h.fixedX,uy:h.fixedY,uz:!1}}addEventListener("message",({data:h})=>{Pr(h)});var Pr=async h=>{let{geometry:t,uuid:e,baseTriangles:n}=h,r=t.loadCases.flatMap(b=>b.pointLoads).map(b=>({x:b.x,y:b.y})),c=t.supports.map(b=>({x:b.x,y:b.y})),s=t.resultPoints.map(b=>({x:b.x,y:b.y})),i=t.rectangles.map(b=>Ar(b)),u=t.polygons.map(b=>Rr(b)),l=i.concat(u),v={maxTriangleArea:t.meshingConfiguration.maxTriangleArea,refinementPoints:t.meshingConfiguration.refinementPoints.map(b=>Er(b))},f=Le({polygons:l,extraPoints:r.concat(c).concat(s),meshingConfiguration:v,baseTriangles:n.map(b=>Nr(b))}).triangles.map(b=>Mr(b));await ne.setItem(Ge(e),f);for(let b of Ye(f,t))await ne.setItem(Oe(e,b.loadCaseTag),b);postMessage({uuid:e})},Er=h=>({radius:h.radius,maxTriangleArea:h.maxArea,center:{x:h.x,y:h.y}}),Dr=h=>({x:h.x,y:h.y}),Mr=h=>({points:h.points.map(e=>Dr(e)),name:h.tag,sectionTag:h.sectionTag,materialTag:h.materialTag}),Ar=h=>({points:It(h).vertices.map(e=>({x:e.x,y:e.y})),tag:h.name,sectionTag:h.sectionName,materialTag:h.materialName}),Rr=h=>({points:Mt(h).vertices.map(e=>({x:e.x,y:e.y})),tag:h.name,sectionTag:h.sectionName,materialTag:h.materialName}),Nr=h=>({points:h.points.map(e=>({x:e.x,y:e.y}))});
