var Un=Object.create;var Te=Object.defineProperty;var Gn=Object.getOwnPropertyDescriptor;var Kn=Object.getOwnPropertyNames;var $n=Object.getPrototypeOf,Hn=Object.prototype.hasOwnProperty;var wt=(h=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(h,{get:(t,e)=>(typeof require<"u"?require:t)[e]}):h)(function(h){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+h+'" is not supported')});var Ht=(h,t)=>()=>(t||h((t={exports:{}}).exports,t),t.exports);var qn=(h,t,e,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of Kn(t))!Hn.call(h,r)&&r!==e&&Te(h,r,{get:()=>t[r],enumerable:!(n=Gn(t,r))||n.enumerable});return h};var Tt=(h,t,e)=>(e=h!=null?Un($n(h)):{},qn(t||!h||!h.__esModule?Te(e,"default",{value:h,enumerable:!0}):e,h));var Ct=Ht((Fr,Ie)=>{"use strict";var qt=Math.abs,zn=Math.min;function Lt(h,t,e,n){var r=qt(h-t);return e==null&&(e=Lt.DBL_EPSILON),n==null&&(n=e),r<=e||r<=n*zn(qt(h),qt(t))?!0:h===t}Lt.FLT_EPSILON=11920929e-14;Lt.DBL_EPSILON=2220446049250313e-31;Ie.exports=Lt});var Ve=Ht((Fe,te)=>{"use strict";(function(h){if(typeof Fe=="object"&&typeof te<"u")te.exports=h();else if(typeof define=="function"&&define.amd)define([],h);else{var t;typeof window<"u"?t=window:typeof global<"u"?t=global:typeof self<"u"?t=self:t=this,t.localforage=h()}})(function(){var h,t,e;return function n(r,a,i){function s(v,g){if(!a[v]){if(!r[v]){var u=typeof wt=="function"&&wt;if(!g&&u)return u(v,!0);if(f)return f(v,!0);var p=new Error("Cannot find module '"+v+"'");throw p.code="MODULE_NOT_FOUND",p}var y=a[v]={exports:{}};r[v][0].call(y.exports,function(T){var N=r[v][1][T];return s(N||T)},y,y.exports,n,r,a,i)}return a[v].exports}for(var f=typeof wt=="function"&&wt,l=0;l<i.length;l++)s(i[l]);return s}({1:[function(n,r,a){(function(i){"use strict";var s=i.MutationObserver||i.WebKitMutationObserver,f;if(s){var l=0,v=new s(T),g=i.document.createTextNode("");v.observe(g,{characterData:!0}),f=function(){g.data=l=++l%2}}else if(!i.setImmediate&&typeof i.MessageChannel<"u"){var u=new i.MessageChannel;u.port1.onmessage=T,f=function(){u.port2.postMessage(0)}}else"document"in i&&"onreadystatechange"in i.document.createElement("script")?f=function(){var P=i.document.createElement("script");P.onreadystatechange=function(){T(),P.onreadystatechange=null,P.parentNode.removeChild(P),P=null},i.document.documentElement.appendChild(P)}:f=function(){setTimeout(T,0)};var p,y=[];function T(){p=!0;for(var P,B,O=y.length;O;){for(B=y,y=[],P=-1;++P<O;)B[P]();O=y.length}p=!1}r.exports=N;function N(P){y.push(P)===1&&!p&&f()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,a){"use strict";var i=n(1);function s(){}var f={},l=["REJECTED"],v=["FULFILLED"],g=["PENDING"];r.exports=u;function u(S){if(typeof S!="function")throw new TypeError("resolver must be a function");this.state=g,this.queue=[],this.outcome=void 0,S!==s&&N(this,S)}u.prototype.catch=function(S){return this.then(null,S)},u.prototype.then=function(S,V){if(typeof S!="function"&&this.state===v||typeof V!="function"&&this.state===l)return this;var R=new this.constructor(s);if(this.state!==g){var E=this.state===v?S:V;y(R,E,this.outcome)}else this.queue.push(new p(R,S,V));return R};function p(S,V,R){this.promise=S,typeof V=="function"&&(this.onFulfilled=V,this.callFulfilled=this.otherCallFulfilled),typeof R=="function"&&(this.onRejected=R,this.callRejected=this.otherCallRejected)}p.prototype.callFulfilled=function(S){f.resolve(this.promise,S)},p.prototype.otherCallFulfilled=function(S){y(this.promise,this.onFulfilled,S)},p.prototype.callRejected=function(S){f.reject(this.promise,S)},p.prototype.otherCallRejected=function(S){y(this.promise,this.onRejected,S)};function y(S,V,R){i(function(){var E;try{E=V(R)}catch(C){return f.reject(S,C)}E===S?f.reject(S,new TypeError("Cannot resolve promise with itself")):f.resolve(S,E)})}f.resolve=function(S,V){var R=P(T,V);if(R.status==="error")return f.reject(S,R.value);var E=R.value;if(E)N(S,E);else{S.state=v,S.outcome=V;for(var C=-1,F=S.queue.length;++C<F;)S.queue[C].callFulfilled(V)}return S},f.reject=function(S,V){S.state=l,S.outcome=V;for(var R=-1,E=S.queue.length;++R<E;)S.queue[R].callRejected(V);return S};function T(S){var V=S&&S.then;if(S&&(typeof S=="object"||typeof S=="function")&&typeof V=="function")return function(){V.apply(S,arguments)}}function N(S,V){var R=!1;function E(j){R||(R=!0,f.reject(S,j))}function C(j){R||(R=!0,f.resolve(S,j))}function F(){V(C,E)}var Y=P(F);Y.status==="error"&&E(Y.value)}function P(S,V){var R={};try{R.value=S(V),R.status="success"}catch(E){R.status="error",R.value=E}return R}u.resolve=B;function B(S){return S instanceof this?S:f.resolve(new this(s),S)}u.reject=O;function O(S){var V=new this(s);return f.reject(V,S)}u.all=K;function K(S){var V=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var R=S.length,E=!1;if(!R)return this.resolve([]);for(var C=new Array(R),F=0,Y=-1,j=new this(s);++Y<R;)$(S[Y],Y);return j;function $(J,k){V.resolve(J).then(z,function(Q){E||(E=!0,f.reject(j,Q))});function z(Q){C[k]=Q,++F===R&&!E&&(E=!0,f.resolve(j,C))}}}u.race=G;function G(S){var V=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var R=S.length,E=!1;if(!R)return this.resolve([]);for(var C=-1,F=new this(s);++C<R;)Y(S[C]);return F;function Y(j){V.resolve(j).then(function($){E||(E=!0,f.resolve(F,$))},function($){E||(E=!0,f.reject(F,$))})}}},{1:1}],3:[function(n,r,a){(function(i){"use strict";typeof i.Promise!="function"&&(i.Promise=n(2))}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,a){"use strict";var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o};function s(o,d){if(!(o instanceof d))throw new TypeError("Cannot call a class as a function")}function f(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var l=f();function v(){try{if(!l||!l.open)return!1;var o=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),d=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!o||d)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function g(o,d){o=o||[],d=d||{};try{return new Blob(o,d)}catch(m){if(m.name!=="TypeError")throw m;for(var c=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,b=new c,_=0;_<o.length;_+=1)b.append(o[_]);return b.getBlob(d.type)}}typeof Promise>"u"&&n(3);var u=Promise;function p(o,d){d&&o.then(function(c){d(null,c)},function(c){d(c)})}function y(o,d,c){typeof d=="function"&&o.then(d),typeof c=="function"&&o.catch(c)}function T(o){return typeof o!="string"&&(console.warn(o+" used as a key, but it is not a string."),o=String(o)),o}function N(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var P="local-forage-detect-blob-support",B=void 0,O={},K=Object.prototype.toString,G="readonly",S="readwrite";function V(o){for(var d=o.length,c=new ArrayBuffer(d),b=new Uint8Array(c),_=0;_<d;_++)b[_]=o.charCodeAt(_);return c}function R(o){return new u(function(d){var c=o.transaction(P,S),b=g([""]);c.objectStore(P).put(b,"key"),c.onabort=function(_){_.preventDefault(),_.stopPropagation(),d(!1)},c.oncomplete=function(){var _=navigator.userAgent.match(/Chrome\/(\d+)/),m=navigator.userAgent.match(/Edge\//);d(m||!_||parseInt(_[1],10)>=43)}}).catch(function(){return!1})}function E(o){return typeof B=="boolean"?u.resolve(B):R(o).then(function(d){return B=d,B})}function C(o){var d=O[o.name],c={};c.promise=new u(function(b,_){c.resolve=b,c.reject=_}),d.deferredOperations.push(c),d.dbReady?d.dbReady=d.dbReady.then(function(){return c.promise}):d.dbReady=c.promise}function F(o){var d=O[o.name],c=d.deferredOperations.pop();if(c)return c.resolve(),c.promise}function Y(o,d){var c=O[o.name],b=c.deferredOperations.pop();if(b)return b.reject(d),b.promise}function j(o,d){return new u(function(c,b){if(O[o.name]=O[o.name]||re(),o.db)if(d)C(o),o.db.close();else return c(o.db);var _=[o.name];d&&_.push(o.version);var m=l.open.apply(l,_);d&&(m.onupgradeneeded=function(x){var I=m.result;try{I.createObjectStore(o.storeName),x.oldVersion<=1&&I.createObjectStore(P)}catch(M){if(M.name==="ConstraintError")console.warn('The database "'+o.name+'" has been upgraded from version '+x.oldVersion+" to version "+x.newVersion+', but the storage "'+o.storeName+'" already exists.');else throw M}}),m.onerror=function(x){x.preventDefault(),b(m.error)},m.onsuccess=function(){var x=m.result;x.onversionchange=function(I){I.target.close()},c(x),F(o)}})}function $(o){return j(o,!1)}function J(o){return j(o,!0)}function k(o,d){if(!o.db)return!0;var c=!o.db.objectStoreNames.contains(o.storeName),b=o.version<o.db.version,_=o.version>o.db.version;if(b&&(o.version!==d&&console.warn('The database "'+o.name+`" can't be downgraded from version `+o.db.version+" to version "+o.version+"."),o.version=o.db.version),_||c){if(c){var m=o.db.version+1;m>o.version&&(o.version=m)}return!0}return!1}function z(o){return new u(function(d,c){var b=new FileReader;b.onerror=c,b.onloadend=function(_){var m=btoa(_.target.result||"");d({__local_forage_encoded_blob:!0,data:m,type:o.type})},b.readAsBinaryString(o)})}function Q(o){var d=V(atob(o.data));return g([d],{type:o.type})}function et(o){return o&&o.__local_forage_encoded_blob}function ct(o){var d=this,c=d._initReady().then(function(){var b=O[d._dbInfo.name];if(b&&b.dbReady)return b.dbReady});return y(c,o,o),c}function Vt(o){C(o);for(var d=O[o.name],c=d.forages,b=0;b<c.length;b++){var _=c[b];_._dbInfo.db&&(_._dbInfo.db.close(),_._dbInfo.db=null)}return o.db=null,$(o).then(function(m){return o.db=m,k(o)?J(o):m}).then(function(m){o.db=d.db=m;for(var x=0;x<c.length;x++)c[x]._dbInfo.db=m}).catch(function(m){throw Y(o,m),m})}function at(o,d,c,b){b===void 0&&(b=1);try{var _=o.db.transaction(o.storeName,d);c(null,_)}catch(m){if(b>0&&(!o.db||m.name==="InvalidStateError"||m.name==="NotFoundError"))return u.resolve().then(function(){if(!o.db||m.name==="NotFoundError"&&!o.db.objectStoreNames.contains(o.storeName)&&o.version<=o.db.version)return o.db&&(o.version=o.db.version+1),J(o)}).then(function(){return Vt(o).then(function(){at(o,d,c,b-1)})}).catch(c);c(m)}}function re(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Ke(o){var d=this,c={db:null};if(o)for(var b in o)c[b]=o[b];var _=O[c.name];_||(_=re(),O[c.name]=_),_.forages.push(d),d._initReady||(d._initReady=d.ready,d.ready=ct);var m=[];function x(){return u.resolve()}for(var I=0;I<_.forages.length;I++){var M=_.forages[I];M!==d&&m.push(M._initReady().catch(x))}var A=_.forages.slice(0);return u.all(m).then(function(){return c.db=_.db,$(c)}).then(function(D){return c.db=D,k(c,d._defaultConfig.version)?J(c):D}).then(function(D){c.db=_.db=D,d._dbInfo=c;for(var L=0;L<A.length;L++){var W=A[L];W!==d&&(W._dbInfo.db=c.db,W._dbInfo.version=c.version)}})}function $e(o,d){var c=this;o=T(o);var b=new u(function(_,m){c.ready().then(function(){at(c._dbInfo,G,function(x,I){if(x)return m(x);try{var M=I.objectStore(c._dbInfo.storeName),A=M.get(o);A.onsuccess=function(){var D=A.result;D===void 0&&(D=null),et(D)&&(D=Q(D)),_(D)},A.onerror=function(){m(A.error)}}catch(D){m(D)}})}).catch(m)});return p(b,d),b}function He(o,d){var c=this,b=new u(function(_,m){c.ready().then(function(){at(c._dbInfo,G,function(x,I){if(x)return m(x);try{var M=I.objectStore(c._dbInfo.storeName),A=M.openCursor(),D=1;A.onsuccess=function(){var L=A.result;if(L){var W=L.value;et(W)&&(W=Q(W));var H=o(W,L.key,D++);H!==void 0?_(H):L.continue()}else _()},A.onerror=function(){m(A.error)}}catch(L){m(L)}})}).catch(m)});return p(b,d),b}function qe(o,d,c){var b=this;o=T(o);var _=new u(function(m,x){var I;b.ready().then(function(){return I=b._dbInfo,K.call(d)==="[object Blob]"?E(I.db).then(function(M){return M?d:z(d)}):d}).then(function(M){at(b._dbInfo,S,function(A,D){if(A)return x(A);try{var L=D.objectStore(b._dbInfo.storeName);M===null&&(M=void 0);var W=L.put(M,o);D.oncomplete=function(){M===void 0&&(M=null),m(M)},D.onabort=D.onerror=function(){var H=W.error?W.error:W.transaction.error;x(H)}}catch(H){x(H)}})}).catch(x)});return p(_,c),_}function ze(o,d){var c=this;o=T(o);var b=new u(function(_,m){c.ready().then(function(){at(c._dbInfo,S,function(x,I){if(x)return m(x);try{var M=I.objectStore(c._dbInfo.storeName),A=M.delete(o);I.oncomplete=function(){_()},I.onerror=function(){m(A.error)},I.onabort=function(){var D=A.error?A.error:A.transaction.error;m(D)}}catch(D){m(D)}})}).catch(m)});return p(b,d),b}function Je(o){var d=this,c=new u(function(b,_){d.ready().then(function(){at(d._dbInfo,S,function(m,x){if(m)return _(m);try{var I=x.objectStore(d._dbInfo.storeName),M=I.clear();x.oncomplete=function(){b()},x.onabort=x.onerror=function(){var A=M.error?M.error:M.transaction.error;_(A)}}catch(A){_(A)}})}).catch(_)});return p(c,o),c}function Ze(o){var d=this,c=new u(function(b,_){d.ready().then(function(){at(d._dbInfo,G,function(m,x){if(m)return _(m);try{var I=x.objectStore(d._dbInfo.storeName),M=I.count();M.onsuccess=function(){b(M.result)},M.onerror=function(){_(M.error)}}catch(A){_(A)}})}).catch(_)});return p(c,o),c}function Qe(o,d){var c=this,b=new u(function(_,m){if(o<0){_(null);return}c.ready().then(function(){at(c._dbInfo,G,function(x,I){if(x)return m(x);try{var M=I.objectStore(c._dbInfo.storeName),A=!1,D=M.openKeyCursor();D.onsuccess=function(){var L=D.result;if(!L){_(null);return}o===0||A?_(L.key):(A=!0,L.advance(o))},D.onerror=function(){m(D.error)}}catch(L){m(L)}})}).catch(m)});return p(b,d),b}function Xe(o){var d=this,c=new u(function(b,_){d.ready().then(function(){at(d._dbInfo,G,function(m,x){if(m)return _(m);try{var I=x.objectStore(d._dbInfo.storeName),M=I.openKeyCursor(),A=[];M.onsuccess=function(){var D=M.result;if(!D){b(A);return}A.push(D.key),D.continue()},M.onerror=function(){_(M.error)}}catch(D){_(D)}})}).catch(_)});return p(c,o),c}function tn(o,d){d=N.apply(this,arguments);var c=this.config();o=typeof o!="function"&&o||{},o.name||(o.name=o.name||c.name,o.storeName=o.storeName||c.storeName);var b=this,_;if(!o.name)_=u.reject("Invalid arguments");else{var m=o.name===c.name&&b._dbInfo.db,x=m?u.resolve(b._dbInfo.db):$(o).then(function(I){var M=O[o.name],A=M.forages;M.db=I;for(var D=0;D<A.length;D++)A[D]._dbInfo.db=I;return I});o.storeName?_=x.then(function(I){if(I.objectStoreNames.contains(o.storeName)){var M=I.version+1;C(o);var A=O[o.name],D=A.forages;I.close();for(var L=0;L<D.length;L++){var W=D[L];W._dbInfo.db=null,W._dbInfo.version=M}var H=new u(function(q,X){var Z=l.open(o.name,M);Z.onerror=function(ot){var xt=Z.result;xt.close(),X(ot)},Z.onupgradeneeded=function(){var ot=Z.result;ot.deleteObjectStore(o.storeName)},Z.onsuccess=function(){var ot=Z.result;ot.close(),q(ot)}});return H.then(function(q){A.db=q;for(var X=0;X<D.length;X++){var Z=D[X];Z._dbInfo.db=q,F(Z._dbInfo)}}).catch(function(q){throw(Y(o,q)||u.resolve()).catch(function(){}),q})}}):_=x.then(function(I){C(o);var M=O[o.name],A=M.forages;I.close();for(var D=0;D<A.length;D++){var L=A[D];L._dbInfo.db=null}var W=new u(function(H,q){var X=l.deleteDatabase(o.name);X.onerror=function(){var Z=X.result;Z&&Z.close(),q(X.error)},X.onblocked=function(){console.warn('dropInstance blocked for database "'+o.name+'" until all open connections are closed')},X.onsuccess=function(){var Z=X.result;Z&&Z.close(),H(Z)}});return W.then(function(H){M.db=H;for(var q=0;q<A.length;q++){var X=A[q];F(X._dbInfo)}}).catch(function(H){throw(Y(o,H)||u.resolve()).catch(function(){}),H})})}return p(_,d),_}var en={_driver:"asyncStorage",_initStorage:Ke,_support:v(),iterate:He,getItem:$e,setItem:qe,removeItem:ze,clear:Je,length:Ze,key:Qe,keys:Xe,dropInstance:tn};function nn(){return typeof openDatabase=="function"}var ft="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",rn="~~local_forage_type~",oe=/^~~local_forage_type~([^~]+)~/,Rt="__lfsc__:",Ot=Rt.length,Yt="arbf",kt="blob",ie="si08",se="ui08",ae="uic8",ce="si16",fe="si32",ue="ur16",le="ui32",he="fl32",de="fl64",me=Ot+Yt.length,be=Object.prototype.toString;function pe(o){var d=o.length*.75,c=o.length,b,_=0,m,x,I,M;o[o.length-1]==="="&&(d--,o[o.length-2]==="="&&d--);var A=new ArrayBuffer(d),D=new Uint8Array(A);for(b=0;b<c;b+=4)m=ft.indexOf(o[b]),x=ft.indexOf(o[b+1]),I=ft.indexOf(o[b+2]),M=ft.indexOf(o[b+3]),D[_++]=m<<2|x>>4,D[_++]=(x&15)<<4|I>>2,D[_++]=(I&3)<<6|M&63;return A}function jt(o){var d=new Uint8Array(o),c="",b;for(b=0;b<d.length;b+=3)c+=ft[d[b]>>2],c+=ft[(d[b]&3)<<4|d[b+1]>>4],c+=ft[(d[b+1]&15)<<2|d[b+2]>>6],c+=ft[d[b+2]&63];return d.length%3===2?c=c.substring(0,c.length-1)+"=":d.length%3===1&&(c=c.substring(0,c.length-2)+"=="),c}function on(o,d){var c="";if(o&&(c=be.call(o)),o&&(c==="[object ArrayBuffer]"||o.buffer&&be.call(o.buffer)==="[object ArrayBuffer]")){var b,_=Rt;o instanceof ArrayBuffer?(b=o,_+=Yt):(b=o.buffer,c==="[object Int8Array]"?_+=ie:c==="[object Uint8Array]"?_+=se:c==="[object Uint8ClampedArray]"?_+=ae:c==="[object Int16Array]"?_+=ce:c==="[object Uint16Array]"?_+=ue:c==="[object Int32Array]"?_+=fe:c==="[object Uint32Array]"?_+=le:c==="[object Float32Array]"?_+=he:c==="[object Float64Array]"?_+=de:d(new Error("Failed to get type for BinaryArray"))),d(_+jt(b))}else if(c==="[object Blob]"){var m=new FileReader;m.onload=function(){var x=rn+o.type+"~"+jt(this.result);d(Rt+kt+x)},m.readAsArrayBuffer(o)}else try{d(JSON.stringify(o))}catch(x){console.error("Couldn't convert value into a JSON string: ",o),d(null,x)}}function sn(o){if(o.substring(0,Ot)!==Rt)return JSON.parse(o);var d=o.substring(me),c=o.substring(Ot,me),b;if(c===kt&&oe.test(d)){var _=d.match(oe);b=_[1],d=d.substring(_[0].length)}var m=pe(d);switch(c){case Yt:return m;case kt:return g([m],{type:b});case ie:return new Int8Array(m);case se:return new Uint8Array(m);case ae:return new Uint8ClampedArray(m);case ce:return new Int16Array(m);case ue:return new Uint16Array(m);case fe:return new Int32Array(m);case le:return new Uint32Array(m);case he:return new Float32Array(m);case de:return new Float64Array(m);default:throw new Error("Unkown type: "+c)}}var Wt={serialize:on,deserialize:sn,stringToBuffer:pe,bufferToString:jt};function ge(o,d,c,b){o.executeSql("CREATE TABLE IF NOT EXISTS "+d.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],c,b)}function an(o){var d=this,c={db:null};if(o)for(var b in o)c[b]=typeof o[b]!="string"?o[b].toString():o[b];var _=new u(function(m,x){try{c.db=openDatabase(c.name,String(c.version),c.description,c.size)}catch(I){return x(I)}c.db.transaction(function(I){ge(I,c,function(){d._dbInfo=c,m()},function(M,A){x(A)})},x)});return c.serializer=Wt,_}function ut(o,d,c,b,_,m){o.executeSql(c,b,_,function(x,I){I.code===I.SYNTAX_ERR?x.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[d.storeName],function(M,A){A.rows.length?m(M,I):ge(M,d,function(){M.executeSql(c,b,_,m)},m)},m):m(x,I)},m)}function cn(o,d){var c=this;o=T(o);var b=new u(function(_,m){c.ready().then(function(){var x=c._dbInfo;x.db.transaction(function(I){ut(I,x,"SELECT * FROM "+x.storeName+" WHERE key = ? LIMIT 1",[o],function(M,A){var D=A.rows.length?A.rows.item(0).value:null;D&&(D=x.serializer.deserialize(D)),_(D)},function(M,A){m(A)})})}).catch(m)});return p(b,d),b}function fn(o,d){var c=this,b=new u(function(_,m){c.ready().then(function(){var x=c._dbInfo;x.db.transaction(function(I){ut(I,x,"SELECT * FROM "+x.storeName,[],function(M,A){for(var D=A.rows,L=D.length,W=0;W<L;W++){var H=D.item(W),q=H.value;if(q&&(q=x.serializer.deserialize(q)),q=o(q,H.key,W+1),q!==void 0){_(q);return}}_()},function(M,A){m(A)})})}).catch(m)});return p(b,d),b}function ve(o,d,c,b){var _=this;o=T(o);var m=new u(function(x,I){_.ready().then(function(){d===void 0&&(d=null);var M=d,A=_._dbInfo;A.serializer.serialize(d,function(D,L){L?I(L):A.db.transaction(function(W){ut(W,A,"INSERT OR REPLACE INTO "+A.storeName+" (key, value) VALUES (?, ?)",[o,D],function(){x(M)},function(H,q){I(q)})},function(W){if(W.code===W.QUOTA_ERR){if(b>0){x(ve.apply(_,[o,M,c,b-1]));return}I(W)}})})}).catch(I)});return p(m,c),m}function un(o,d,c){return ve.apply(this,[o,d,c,1])}function ln(o,d){var c=this;o=T(o);var b=new u(function(_,m){c.ready().then(function(){var x=c._dbInfo;x.db.transaction(function(I){ut(I,x,"DELETE FROM "+x.storeName+" WHERE key = ?",[o],function(){_()},function(M,A){m(A)})})}).catch(m)});return p(b,d),b}function hn(o){var d=this,c=new u(function(b,_){d.ready().then(function(){var m=d._dbInfo;m.db.transaction(function(x){ut(x,m,"DELETE FROM "+m.storeName,[],function(){b()},function(I,M){_(M)})})}).catch(_)});return p(c,o),c}function dn(o){var d=this,c=new u(function(b,_){d.ready().then(function(){var m=d._dbInfo;m.db.transaction(function(x){ut(x,m,"SELECT COUNT(key) as c FROM "+m.storeName,[],function(I,M){var A=M.rows.item(0).c;b(A)},function(I,M){_(M)})})}).catch(_)});return p(c,o),c}function mn(o,d){var c=this,b=new u(function(_,m){c.ready().then(function(){var x=c._dbInfo;x.db.transaction(function(I){ut(I,x,"SELECT key FROM "+x.storeName+" WHERE id = ? LIMIT 1",[o+1],function(M,A){var D=A.rows.length?A.rows.item(0).key:null;_(D)},function(M,A){m(A)})})}).catch(m)});return p(b,d),b}function bn(o){var d=this,c=new u(function(b,_){d.ready().then(function(){var m=d._dbInfo;m.db.transaction(function(x){ut(x,m,"SELECT key FROM "+m.storeName,[],function(I,M){for(var A=[],D=0;D<M.rows.length;D++)A.push(M.rows.item(D).key);b(A)},function(I,M){_(M)})})}).catch(_)});return p(c,o),c}function pn(o){return new u(function(d,c){o.transaction(function(b){b.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(_,m){for(var x=[],I=0;I<m.rows.length;I++)x.push(m.rows.item(I).name);d({db:o,storeNames:x})},function(_,m){c(m)})},function(b){c(b)})})}function gn(o,d){d=N.apply(this,arguments);var c=this.config();o=typeof o!="function"&&o||{},o.name||(o.name=o.name||c.name,o.storeName=o.storeName||c.storeName);var b=this,_;return o.name?_=new u(function(m){var x;o.name===c.name?x=b._dbInfo.db:x=openDatabase(o.name,"","",0),o.storeName?m({db:x,storeNames:[o.storeName]}):m(pn(x))}).then(function(m){return new u(function(x,I){m.db.transaction(function(M){function A(H){return new u(function(q,X){M.executeSql("DROP TABLE IF EXISTS "+H,[],function(){q()},function(Z,ot){X(ot)})})}for(var D=[],L=0,W=m.storeNames.length;L<W;L++)D.push(A(m.storeNames[L]));u.all(D).then(function(){x()}).catch(function(H){I(H)})},function(M){I(M)})})}):_=u.reject("Invalid arguments"),p(_,d),_}var vn={_driver:"webSQLStorage",_initStorage:an,_support:nn(),iterate:fn,getItem:cn,setItem:un,removeItem:ln,clear:hn,length:dn,key:mn,keys:bn,dropInstance:gn};function _n(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function _e(o,d){var c=o.name+"/";return o.storeName!==d.storeName&&(c+=o.storeName+"/"),c}function yn(){var o="_localforage_support_test";try{return localStorage.setItem(o,!0),localStorage.removeItem(o),!1}catch{return!0}}function xn(){return!yn()||localStorage.length>0}function wn(o){var d=this,c={};if(o)for(var b in o)c[b]=o[b];return c.keyPrefix=_e(o,d._defaultConfig),xn()?(d._dbInfo=c,c.serializer=Wt,u.resolve()):u.reject()}function Tn(o){var d=this,c=d.ready().then(function(){for(var b=d._dbInfo.keyPrefix,_=localStorage.length-1;_>=0;_--){var m=localStorage.key(_);m.indexOf(b)===0&&localStorage.removeItem(m)}});return p(c,o),c}function In(o,d){var c=this;o=T(o);var b=c.ready().then(function(){var _=c._dbInfo,m=localStorage.getItem(_.keyPrefix+o);return m&&(m=_.serializer.deserialize(m)),m});return p(b,d),b}function Sn(o,d){var c=this,b=c.ready().then(function(){for(var _=c._dbInfo,m=_.keyPrefix,x=m.length,I=localStorage.length,M=1,A=0;A<I;A++){var D=localStorage.key(A);if(D.indexOf(m)===0){var L=localStorage.getItem(D);if(L&&(L=_.serializer.deserialize(L)),L=o(L,D.substring(x),M++),L!==void 0)return L}}});return p(b,d),b}function Mn(o,d){var c=this,b=c.ready().then(function(){var _=c._dbInfo,m;try{m=localStorage.key(o)}catch{m=null}return m&&(m=m.substring(_.keyPrefix.length)),m});return p(b,d),b}function En(o){var d=this,c=d.ready().then(function(){for(var b=d._dbInfo,_=localStorage.length,m=[],x=0;x<_;x++){var I=localStorage.key(x);I.indexOf(b.keyPrefix)===0&&m.push(I.substring(b.keyPrefix.length))}return m});return p(c,o),c}function An(o){var d=this,c=d.keys().then(function(b){return b.length});return p(c,o),c}function Dn(o,d){var c=this;o=T(o);var b=c.ready().then(function(){var _=c._dbInfo;localStorage.removeItem(_.keyPrefix+o)});return p(b,d),b}function Pn(o,d,c){var b=this;o=T(o);var _=b.ready().then(function(){d===void 0&&(d=null);var m=d;return new u(function(x,I){var M=b._dbInfo;M.serializer.serialize(d,function(A,D){if(D)I(D);else try{localStorage.setItem(M.keyPrefix+o,A),x(m)}catch(L){(L.name==="QuotaExceededError"||L.name==="NS_ERROR_DOM_QUOTA_REACHED")&&I(L),I(L)}})})});return p(_,c),_}function Rn(o,d){if(d=N.apply(this,arguments),o=typeof o!="function"&&o||{},!o.name){var c=this.config();o.name=o.name||c.name,o.storeName=o.storeName||c.storeName}var b=this,_;return o.name?_=new u(function(m){o.storeName?m(_e(o,b._defaultConfig)):m(o.name+"/")}).then(function(m){for(var x=localStorage.length-1;x>=0;x--){var I=localStorage.key(x);I.indexOf(m)===0&&localStorage.removeItem(I)}}):_=u.reject("Invalid arguments"),p(_,d),_}var Nn={_driver:"localStorageWrapper",_initStorage:wn,_support:_n(),iterate:Sn,getItem:In,setItem:Pn,removeItem:Dn,clear:Tn,length:An,key:Mn,keys:En,dropInstance:Rn},Ln=function(d,c){return d===c||typeof d=="number"&&typeof c=="number"&&isNaN(d)&&isNaN(c)},Cn=function(d,c){for(var b=d.length,_=0;_<b;){if(Ln(d[_],c))return!0;_++}return!1},ye=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"},yt={},xe={},dt={INDEXEDDB:en,WEBSQL:vn,LOCALSTORAGE:Nn},Bn=[dt.INDEXEDDB._driver,dt.WEBSQL._driver,dt.LOCALSTORAGE._driver],Nt=["dropInstance"],Ut=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Nt),Fn={description:"",driver:Bn.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Vn(o,d){o[d]=function(){var c=arguments;return o.ready().then(function(){return o[d].apply(o,c)})}}function Gt(){for(var o=1;o<arguments.length;o++){var d=arguments[o];if(d)for(var c in d)d.hasOwnProperty(c)&&(ye(d[c])?arguments[0][c]=d[c].slice():arguments[0][c]=d[c])}return arguments[0]}var On=function(){function o(d){s(this,o);for(var c in dt)if(dt.hasOwnProperty(c)){var b=dt[c],_=b._driver;this[c]=_,yt[_]||this.defineDriver(b)}this._defaultConfig=Gt({},Fn),this._config=Gt({},this._defaultConfig,d),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return o.prototype.config=function(c){if((typeof c>"u"?"undefined":i(c))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var b in c){if(b==="storeName"&&(c[b]=c[b].replace(/\W/g,"_")),b==="version"&&typeof c[b]!="number")return new Error("Database version must be a number.");this._config[b]=c[b]}return"driver"in c&&c.driver?this.setDriver(this._config.driver):!0}else return typeof c=="string"?this._config[c]:this._config},o.prototype.defineDriver=function(c,b,_){var m=new u(function(x,I){try{var M=c._driver,A=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!c._driver){I(A);return}for(var D=Ut.concat("_initStorage"),L=0,W=D.length;L<W;L++){var H=D[L],q=!Cn(Nt,H);if((q||c[H])&&typeof c[H]!="function"){I(A);return}}var X=function(){for(var xt=function(jn){return function(){var Wn=new Error("Method "+jn+" is not implemented by the current driver"),we=u.reject(Wn);return p(we,arguments[arguments.length-1]),we}},Kt=0,kn=Nt.length;Kt<kn;Kt++){var $t=Nt[Kt];c[$t]||(c[$t]=xt($t))}};X();var Z=function(xt){yt[M]&&console.info("Redefining LocalForage driver: "+M),yt[M]=c,xe[M]=xt,x()};"_support"in c?c._support&&typeof c._support=="function"?c._support().then(Z,I):Z(!!c._support):Z(!0)}catch(ot){I(ot)}});return y(m,b,_),m},o.prototype.driver=function(){return this._driver||null},o.prototype.getDriver=function(c,b,_){var m=yt[c]?u.resolve(yt[c]):u.reject(new Error("Driver not found."));return y(m,b,_),m},o.prototype.getSerializer=function(c){var b=u.resolve(Wt);return y(b,c),b},o.prototype.ready=function(c){var b=this,_=b._driverSet.then(function(){return b._ready===null&&(b._ready=b._initDriver()),b._ready});return y(_,c,c),_},o.prototype.setDriver=function(c,b,_){var m=this;ye(c)||(c=[c]);var x=this._getSupportedDrivers(c);function I(){m._config.driver=m.driver()}function M(L){return m._extend(L),I(),m._ready=m._initStorage(m._config),m._ready}function A(L){return function(){var W=0;function H(){for(;W<L.length;){var q=L[W];return W++,m._dbInfo=null,m._ready=null,m.getDriver(q).then(M).catch(H)}I();var X=new Error("No available storage method found.");return m._driverSet=u.reject(X),m._driverSet}return H()}}var D=this._driverSet!==null?this._driverSet.catch(function(){return u.resolve()}):u.resolve();return this._driverSet=D.then(function(){var L=x[0];return m._dbInfo=null,m._ready=null,m.getDriver(L).then(function(W){m._driver=W._driver,I(),m._wrapLibraryMethodsWithReady(),m._initDriver=A(x)})}).catch(function(){I();var L=new Error("No available storage method found.");return m._driverSet=u.reject(L),m._driverSet}),y(this._driverSet,b,_),this._driverSet},o.prototype.supports=function(c){return!!xe[c]},o.prototype._extend=function(c){Gt(this,c)},o.prototype._getSupportedDrivers=function(c){for(var b=[],_=0,m=c.length;_<m;_++){var x=c[_];this.supports(x)&&b.push(x)}return b},o.prototype._wrapLibraryMethodsWithReady=function(){for(var c=0,b=Ut.length;c<b;c++)Vn(this,Ut[c])},o.prototype.createInstance=function(c){return new o(c)},o}(),Yn=new On;r.exports=Yn},{3:3}]},{},[4])(4)})});var We=Ht((Ss,je)=>{"use strict";var ee=Math.abs,wr=Math.min;function Ft(h,t,e,n){var r=ee(h-t);return e==null&&(e=Ft.DBL_EPSILON),n==null&&(n=e),r<=e||r<=n*wr(ee(h),ee(t))?!0:h===t}Ft.FLT_EPSILON=11920929e-14;Ft.DBL_EPSILON=2220446049250313e-31;je.exports=Ft});var It=h=>({vertices:[{x:h.x,y:h.y},{x:h.x+h.width,y:h.y},{x:h.x+h.width,y:h.y+h.height},{x:h.x,y:h.y+h.height}]});var Qt=Tt(Ct(),1),Pe=Tt(Ct(),1);var U=11102230246251565e-32,tt=134217729,St=(3+8*U)*U;function ht(h,t,e,n,r){let a,i,s,f,l=t[0],v=n[0],g=0,u=0;v>l==v>-l?(a=l,l=t[++g]):(a=v,v=n[++u]);let p=0;if(g<h&&u<e)for(v>l==v>-l?(i=l+a,s=a-(i-l),l=t[++g]):(i=v+a,s=a-(i-v),v=n[++u]),a=i,s!==0&&(r[p++]=s);g<h&&u<e;)v>l==v>-l?(i=a+l,f=i-a,s=a-(i-f)+(l-f),l=t[++g]):(i=a+v,f=i-a,s=a-(i-f)+(v-f),v=n[++u]),a=i,s!==0&&(r[p++]=s);for(;g<h;)i=a+l,f=i-a,s=a-(i-f)+(l-f),l=t[++g],a=i,s!==0&&(r[p++]=s);for(;u<e;)i=a+v,f=i-a,s=a-(i-f)+(v-f),v=n[++u],a=i,s!==0&&(r[p++]=s);return(a!==0||p===0)&&(r[p++]=a),p}function Mt(h,t){let e=t[0];for(let n=1;n<h;n++)e+=t[n];return e}function w(h){return new Float64Array(h)}var Jn=(3+16*U)*U,Zn=(2+12*U)*U,Qn=(9+64*U)*U*U,mt=w(4),Se=w(8),Me=w(12),Ee=w(16),nt=w(4);function Xn(h,t,e,n,r,a,i){let s,f,l,v,g,u,p,y,T,N,P,B,O,K,G,S,V,R,E=h-r,C=e-r,F=t-a,Y=n-a;K=E*Y,u=tt*E,p=u-(u-E),y=E-p,u=tt*Y,T=u-(u-Y),N=Y-T,G=y*N-(K-p*T-y*T-p*N),S=F*C,u=tt*F,p=u-(u-F),y=F-p,u=tt*C,T=u-(u-C),N=C-T,V=y*N-(S-p*T-y*T-p*N),P=G-V,g=G-P,mt[0]=G-(P+g)+(g-V),B=K+P,g=B-K,O=K-(B-g)+(P-g),P=O-S,g=O-P,mt[1]=O-(P+g)+(g-S),R=B+P,g=R-B,mt[2]=B-(R-g)+(P-g),mt[3]=R;let j=Mt(4,mt),$=Zn*i;if(j>=$||-j>=$||(g=h-E,s=h-(E+g)+(g-r),g=e-C,l=e-(C+g)+(g-r),g=t-F,f=t-(F+g)+(g-a),g=n-Y,v=n-(Y+g)+(g-a),s===0&&f===0&&l===0&&v===0)||($=Qn*i+St*Math.abs(j),j+=E*v+Y*s-(F*l+C*f),j>=$||-j>=$))return j;K=s*Y,u=tt*s,p=u-(u-s),y=s-p,u=tt*Y,T=u-(u-Y),N=Y-T,G=y*N-(K-p*T-y*T-p*N),S=f*C,u=tt*f,p=u-(u-f),y=f-p,u=tt*C,T=u-(u-C),N=C-T,V=y*N-(S-p*T-y*T-p*N),P=G-V,g=G-P,nt[0]=G-(P+g)+(g-V),B=K+P,g=B-K,O=K-(B-g)+(P-g),P=O-S,g=O-P,nt[1]=O-(P+g)+(g-S),R=B+P,g=R-B,nt[2]=B-(R-g)+(P-g),nt[3]=R;let J=ht(4,mt,4,nt,Se);K=E*v,u=tt*E,p=u-(u-E),y=E-p,u=tt*v,T=u-(u-v),N=v-T,G=y*N-(K-p*T-y*T-p*N),S=F*l,u=tt*F,p=u-(u-F),y=F-p,u=tt*l,T=u-(u-l),N=l-T,V=y*N-(S-p*T-y*T-p*N),P=G-V,g=G-P,nt[0]=G-(P+g)+(g-V),B=K+P,g=B-K,O=K-(B-g)+(P-g),P=O-S,g=O-P,nt[1]=O-(P+g)+(g-S),R=B+P,g=R-B,nt[2]=B-(R-g)+(P-g),nt[3]=R;let k=ht(J,Se,4,nt,Me);K=s*v,u=tt*s,p=u-(u-s),y=s-p,u=tt*v,T=u-(u-v),N=v-T,G=y*N-(K-p*T-y*T-p*N),S=f*l,u=tt*f,p=u-(u-f),y=f-p,u=tt*l,T=u-(u-l),N=l-T,V=y*N-(S-p*T-y*T-p*N),P=G-V,g=G-P,nt[0]=G-(P+g)+(g-V),B=K+P,g=B-K,O=K-(B-g)+(P-g),P=O-S,g=O-P,nt[1]=O-(P+g)+(g-S),R=B+P,g=R-B,nt[2]=B-(R-g)+(P-g),nt[3]=R;let z=ht(k,Me,4,nt,Ee);return Ee[z-1]}function bt(h,t,e,n,r,a){let i=(t-a)*(e-r),s=(h-r)*(n-a),f=i-s,l=Math.abs(i+s);return Math.abs(f)>=Jn*l?f:-Xn(h,t,e,n,r,a,l)}var jr=(7+56*U)*U,Wr=(3+28*U)*U,Ur=(26+288*U)*U*U,Gr=w(4),Kr=w(4),$r=w(4),Hr=w(4),qr=w(4),zr=w(4),Jr=w(4),Zr=w(4),Qr=w(4),Xr=w(8),to=w(8),eo=w(8),no=w(4),ro=w(8),oo=w(8),io=w(8),so=w(12),ao=w(192),co=w(192);var lo=(10+96*U)*U,ho=(4+48*U)*U,mo=(44+576*U)*U*U,bo=w(4),po=w(4),go=w(4),vo=w(4),_o=w(4),yo=w(4),xo=w(4),wo=w(4),To=w(8),Io=w(8),So=w(8),Mo=w(8),Eo=w(8),Ao=w(8),Do=w(8),Po=w(8),Ro=w(8),No=w(4),Lo=w(4),Co=w(4),Bo=w(8),Fo=w(16),Vo=w(16),Oo=w(16),Yo=w(32),ko=w(32),jo=w(48),Wo=w(64),Uo=w(1152),Go=w(1152);var qo=(16+224*U)*U,zo=(5+72*U)*U,Jo=(71+1408*U)*U*U,Zo=w(4),Qo=w(4),Xo=w(4),ti=w(4),ei=w(4),ni=w(4),ri=w(4),oi=w(4),ii=w(4),si=w(4),ai=w(24),ci=w(24),fi=w(24),ui=w(24),li=w(24),hi=w(24),di=w(24),mi=w(24),bi=w(24),pi=w(24),gi=w(1152),vi=w(1152),_i=w(1152),yi=w(1152),xi=w(1152),wi=w(2304),Ti=w(2304),Ii=w(3456),Si=w(5760),Mi=w(8),Ei=w(8),Ai=w(8),Di=w(16),Pi=w(24),Ri=w(48),Ni=w(48),Li=w(96),Ci=w(192),Bi=w(384),Fi=w(384),Vi=w(384),Oi=w(768);var Yi=w(96),ki=w(96),ji=w(96),Wi=w(1152);var De=Math.pow(2,-52),Bt=new Uint32Array(512),gt=class h{static from(t,e=ir,n=sr){let r=t.length,a=new Float64Array(r*2);for(let i=0;i<r;i++){let s=t[i];a[2*i]=e(s),a[2*i+1]=n(s)}return new h(a)}constructor(t){let e=t.length>>1;if(e>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;let n=Math.max(2*e-5,0);this._triangles=new Uint32Array(n*3),this._halfedges=new Int32Array(n*3),this._hashSize=Math.ceil(Math.sqrt(e)),this._hullPrev=new Uint32Array(e),this._hullNext=new Uint32Array(e),this._hullTri=new Uint32Array(e),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(e),this._dists=new Float64Array(e),this.update()}update(){let{coords:t,_hullPrev:e,_hullNext:n,_hullTri:r,_hullHash:a}=this,i=t.length>>1,s=1/0,f=1/0,l=-1/0,v=-1/0;for(let E=0;E<i;E++){let C=t[2*E],F=t[2*E+1];C<s&&(s=C),F<f&&(f=F),C>l&&(l=C),F>v&&(v=F),this._ids[E]=E}let g=(s+l)/2,u=(f+v)/2,p,y,T;for(let E=0,C=1/0;E<i;E++){let F=zt(g,u,t[2*E],t[2*E+1]);F<C&&(p=E,C=F)}let N=t[2*p],P=t[2*p+1];for(let E=0,C=1/0;E<i;E++){if(E===p)continue;let F=zt(N,P,t[2*E],t[2*E+1]);F<C&&F>0&&(y=E,C=F)}let B=t[2*y],O=t[2*y+1],K=1/0;for(let E=0;E<i;E++){if(E===p||E===y)continue;let C=rr(N,P,B,O,t[2*E],t[2*E+1]);C<K&&(T=E,K=C)}let G=t[2*T],S=t[2*T+1];if(K===1/0){for(let F=0;F<i;F++)this._dists[F]=t[2*F]-t[0]||t[2*F+1]-t[1];pt(this._ids,this._dists,0,i-1);let E=new Uint32Array(i),C=0;for(let F=0,Y=-1/0;F<i;F++){let j=this._ids[F],$=this._dists[j];$>Y&&(E[C++]=j,Y=$)}this.hull=E.subarray(0,C),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(bt(N,P,B,O,G,S)<0){let E=y,C=B,F=O;y=T,B=G,O=S,T=E,G=C,S=F}let V=or(N,P,B,O,G,S);this._cx=V.x,this._cy=V.y;for(let E=0;E<i;E++)this._dists[E]=zt(t[2*E],t[2*E+1],V.x,V.y);pt(this._ids,this._dists,0,i-1),this._hullStart=p;let R=3;n[p]=e[T]=y,n[y]=e[p]=T,n[T]=e[y]=p,r[p]=0,r[y]=1,r[T]=2,a.fill(-1),a[this._hashKey(N,P)]=p,a[this._hashKey(B,O)]=y,a[this._hashKey(G,S)]=T,this.trianglesLen=0,this._addTriangle(p,y,T,-1,-1,-1);for(let E=0,C,F;E<this._ids.length;E++){let Y=this._ids[E],j=t[2*Y],$=t[2*Y+1];if(E>0&&Math.abs(j-C)<=De&&Math.abs($-F)<=De||(C=j,F=$,Y===p||Y===y||Y===T))continue;let J=0;for(let ct=0,Vt=this._hashKey(j,$);ct<this._hashSize&&(J=a[(Vt+ct)%this._hashSize],!(J!==-1&&J!==n[J]));ct++);J=e[J];let k=J,z;for(;z=n[k],bt(j,$,t[2*k],t[2*k+1],t[2*z],t[2*z+1])>=0;)if(k=z,k===J){k=-1;break}if(k===-1)continue;let Q=this._addTriangle(k,Y,n[k],-1,-1,r[k]);r[Y]=this._legalize(Q+2),r[k]=Q,R++;let et=n[k];for(;z=n[et],bt(j,$,t[2*et],t[2*et+1],t[2*z],t[2*z+1])<0;)Q=this._addTriangle(et,Y,z,r[Y],-1,r[et]),r[Y]=this._legalize(Q+2),n[et]=et,R--,et=z;if(k===J)for(;z=e[k],bt(j,$,t[2*z],t[2*z+1],t[2*k],t[2*k+1])<0;)Q=this._addTriangle(z,Y,k,-1,r[k],r[z]),this._legalize(Q+2),r[z]=Q,n[k]=k,R--,k=z;this._hullStart=e[Y]=k,n[k]=e[et]=Y,n[Y]=et,a[this._hashKey(j,$)]=Y,a[this._hashKey(t[2*k],t[2*k+1])]=k}this.hull=new Uint32Array(R);for(let E=0,C=this._hullStart;E<R;E++)this.hull[E]=C,C=n[C];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,e){return Math.floor(er(t-this._cx,e-this._cy)*this._hashSize)%this._hashSize}_legalize(t){let{_triangles:e,_halfedges:n,coords:r}=this,a=0,i=0;for(;;){let s=n[t],f=t-t%3;if(i=f+(t+2)%3,s===-1){if(a===0)break;t=Bt[--a];continue}let l=s-s%3,v=f+(t+1)%3,g=l+(s+2)%3,u=e[i],p=e[t],y=e[v],T=e[g];if(nr(r[2*u],r[2*u+1],r[2*p],r[2*p+1],r[2*y],r[2*y+1],r[2*T],r[2*T+1])){e[t]=T,e[s]=u;let P=n[g];if(P===-1){let O=this._hullStart;do{if(this._hullTri[O]===g){this._hullTri[O]=t;break}O=this._hullPrev[O]}while(O!==this._hullStart)}this._link(t,P),this._link(s,n[i]),this._link(i,g);let B=l+(s+1)%3;a<Bt.length&&(Bt[a++]=B)}else{if(a===0)break;t=Bt[--a]}}return i}_link(t,e){this._halfedges[t]=e,e!==-1&&(this._halfedges[e]=t)}_addTriangle(t,e,n,r,a,i){let s=this.trianglesLen;return this._triangles[s]=t,this._triangles[s+1]=e,this._triangles[s+2]=n,this._link(s,r),this._link(s+1,a),this._link(s+2,i),this.trianglesLen+=3,s}};function er(h,t){let e=h/(Math.abs(h)+Math.abs(t));return(t>0?3-e:1+e)/4}function zt(h,t,e,n){let r=h-e,a=t-n;return r*r+a*a}function nr(h,t,e,n,r,a,i,s){let f=h-i,l=t-s,v=e-i,g=n-s,u=r-i,p=a-s,y=f*f+l*l,T=v*v+g*g,N=u*u+p*p;return f*(g*N-T*p)-l*(v*N-T*u)+y*(v*p-g*u)<0}function rr(h,t,e,n,r,a){let i=e-h,s=n-t,f=r-h,l=a-t,v=i*i+s*s,g=f*f+l*l,u=.5/(i*l-s*f),p=(l*v-s*g)*u,y=(i*g-f*v)*u;return p*p+y*y}function or(h,t,e,n,r,a){let i=e-h,s=n-t,f=r-h,l=a-t,v=i*i+s*s,g=f*f+l*l,u=.5/(i*l-s*f),p=h+(l*v-s*g)*u,y=t+(i*g-f*v)*u;return{x:p,y}}function pt(h,t,e,n){if(n-e<=20)for(let r=e+1;r<=n;r++){let a=h[r],i=t[a],s=r-1;for(;s>=e&&t[h[s]]>i;)h[s+1]=h[s--];h[s+1]=a}else{let r=e+n>>1,a=e+1,i=n;Et(h,r,a),t[h[e]]>t[h[n]]&&Et(h,e,n),t[h[a]]>t[h[n]]&&Et(h,a,n),t[h[e]]>t[h[a]]&&Et(h,e,a);let s=h[a],f=t[s];for(;;){do a++;while(t[h[a]]<f);do i--;while(t[h[i]]>f);if(i<a)break;Et(h,a,i)}h[e+1]=h[i],h[i]=s,n-a+1>=i-e?(pt(h,t,a,n),pt(h,t,e,i-1)):(pt(h,t,e,i-1),pt(h,t,a,n))}}function Et(h,t,e){let n=h[t];h[t]=h[e],h[e]=n}function ir(h){return h[0]}function sr(h){return h[1]}var it=class{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,e){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,e){this._+=`L${this._x1=+t},${this._y1=+e}`}arc(t,e,n){t=+t,e=+e,n=+n;let r=t+n,a=e;if(n<0)throw new Error("negative radius");this._x1===null?this._+=`M${r},${a}`:(Math.abs(this._x1-r)>1e-6||Math.abs(this._y1-a)>1e-6)&&(this._+="L"+r+","+a),n&&(this._+=`A${n},${n},0,1,1,${t-n},${e}A${n},${n},0,1,1,${this._x1=r},${this._y1=a}`)}rect(t,e,n,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${+n}v${+r}h${-n}Z`}value(){return this._||null}};var lt=class{constructor(){this._=[]}moveTo(t,e){this._.push([t,e])}closePath(){this._.push(this._[0].slice())}lineTo(t,e){this._.push([t,e])}value(){return this._.length?this._:null}};var At=class{constructor(t,[e,n,r,a]=[0,0,960,500]){if(!((r=+r)>=(e=+e))||!((a=+a)>=(n=+n)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=r,this.xmin=e,this.ymax=a,this.ymin=n,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){let{delaunay:{points:t,hull:e,triangles:n},vectors:r}=this,a,i,s=this.circumcenters=this._circumcenters.subarray(0,n.length/3*2);for(let T=0,N=0,P=n.length,B,O;T<P;T+=3,N+=2){let K=n[T]*2,G=n[T+1]*2,S=n[T+2]*2,V=t[K],R=t[K+1],E=t[G],C=t[G+1],F=t[S],Y=t[S+1],j=E-V,$=C-R,J=F-V,k=Y-R,z=(j*k-$*J)*2;if(Math.abs(z)<1e-9){if(a===void 0){a=i=0;for(let et of e)a+=t[et*2],i+=t[et*2+1];a/=e.length,i/=e.length}let Q=1e9*Math.sign((a-V)*k-(i-R)*J);B=(V+F)/2-Q*k,O=(R+Y)/2+Q*J}else{let Q=1/z,et=j*j+$*$,ct=J*J+k*k;B=V+(k*et-$*ct)*Q,O=R+(j*ct-J*et)*Q}s[N]=B,s[N+1]=O}let f=e[e.length-1],l,v=f*4,g,u=t[2*f],p,y=t[2*f+1];r.fill(0);for(let T=0;T<e.length;++T)f=e[T],l=v,g=u,p=y,v=f*4,u=t[2*f],y=t[2*f+1],r[l+2]=r[v]=p-y,r[l+3]=r[v+1]=u-g}render(t){let e=t==null?t=new it:void 0,{delaunay:{halfedges:n,inedges:r,hull:a},circumcenters:i,vectors:s}=this;if(a.length<=1)return null;for(let v=0,g=n.length;v<g;++v){let u=n[v];if(u<v)continue;let p=Math.floor(v/3)*2,y=Math.floor(u/3)*2,T=i[p],N=i[p+1],P=i[y],B=i[y+1];this._renderSegment(T,N,P,B,t)}let f,l=a[a.length-1];for(let v=0;v<a.length;++v){f=l,l=a[v];let g=Math.floor(r[l]/3)*2,u=i[g],p=i[g+1],y=f*4,T=this._project(u,p,s[y+2],s[y+3]);T&&this._renderSegment(u,p,T[0],T[1],t)}return e&&e.value()}renderBounds(t){let e=t==null?t=new it:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),e&&e.value()}renderCell(t,e){let n=e==null?e=new it:void 0,r=this._clip(t);if(r===null||!r.length)return;e.moveTo(r[0],r[1]);let a=r.length;for(;r[0]===r[a-2]&&r[1]===r[a-1]&&a>1;)a-=2;for(let i=2;i<a;i+=2)(r[i]!==r[i-2]||r[i+1]!==r[i-1])&&e.lineTo(r[i],r[i+1]);return e.closePath(),n&&n.value()}*cellPolygons(){let{delaunay:{points:t}}=this;for(let e=0,n=t.length/2;e<n;++e){let r=this.cellPolygon(e);r&&(r.index=e,yield r)}}cellPolygon(t){let e=new lt;return this.renderCell(t,e),e.value()}_renderSegment(t,e,n,r,a){let i,s=this._regioncode(t,e),f=this._regioncode(n,r);s===0&&f===0?(a.moveTo(t,e),a.lineTo(n,r)):(i=this._clipSegment(t,e,n,r,s,f))&&(a.moveTo(i[0],i[1]),a.lineTo(i[2],i[3]))}contains(t,e,n){return e=+e,e!==e||(n=+n,n!==n)?!1:this.delaunay._step(t,e,n)===t}*neighbors(t){let e=this._clip(t);if(e)for(let n of this.delaunay.neighbors(t)){let r=this._clip(n);if(r){t:for(let a=0,i=e.length;a<i;a+=2)for(let s=0,f=r.length;s<f;s+=2)if(e[a]===r[s]&&e[a+1]===r[s+1]&&e[(a+2)%i]===r[(s+f-2)%f]&&e[(a+3)%i]===r[(s+f-1)%f]){yield n;break t}}}}_cell(t){let{circumcenters:e,delaunay:{inedges:n,halfedges:r,triangles:a}}=this,i=n[t];if(i===-1)return null;let s=[],f=i;do{let l=Math.floor(f/3);if(s.push(e[l*2],e[l*2+1]),f=f%3===2?f-2:f+1,a[f]!==t)break;f=r[f]}while(f!==i&&f!==-1);return s}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];let e=this._cell(t);if(e===null)return null;let{vectors:n}=this,r=t*4;return this._simplify(n[r]||n[r+1]?this._clipInfinite(t,e,n[r],n[r+1],n[r+2],n[r+3]):this._clipFinite(t,e))}_clipFinite(t,e){let n=e.length,r=null,a,i,s=e[n-2],f=e[n-1],l,v=this._regioncode(s,f),g,u=0;for(let p=0;p<n;p+=2)if(a=s,i=f,s=e[p],f=e[p+1],l=v,v=this._regioncode(s,f),l===0&&v===0)g=u,u=0,r?r.push(s,f):r=[s,f];else{let y,T,N,P,B;if(l===0){if((y=this._clipSegment(a,i,s,f,l,v))===null)continue;[T,N,P,B]=y}else{if((y=this._clipSegment(s,f,a,i,v,l))===null)continue;[P,B,T,N]=y,g=u,u=this._edgecode(T,N),g&&u&&this._edge(t,g,u,r,r.length),r?r.push(T,N):r=[T,N]}g=u,u=this._edgecode(P,B),g&&u&&this._edge(t,g,u,r,r.length),r?r.push(P,B):r=[P,B]}if(r)g=u,u=this._edgecode(r[0],r[1]),g&&u&&this._edge(t,g,u,r,r.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return r}_clipSegment(t,e,n,r,a,i){let s=a<i;for(s&&([t,e,n,r,a,i]=[n,r,t,e,i,a]);;){if(a===0&&i===0)return s?[n,r,t,e]:[t,e,n,r];if(a&i)return null;let f,l,v=a||i;v&8?(f=t+(n-t)*(this.ymax-e)/(r-e),l=this.ymax):v&4?(f=t+(n-t)*(this.ymin-e)/(r-e),l=this.ymin):v&2?(l=e+(r-e)*(this.xmax-t)/(n-t),f=this.xmax):(l=e+(r-e)*(this.xmin-t)/(n-t),f=this.xmin),a?(t=f,e=l,a=this._regioncode(t,e)):(n=f,r=l,i=this._regioncode(n,r))}}_clipInfinite(t,e,n,r,a,i){let s=Array.from(e),f;if((f=this._project(s[0],s[1],n,r))&&s.unshift(f[0],f[1]),(f=this._project(s[s.length-2],s[s.length-1],a,i))&&s.push(f[0],f[1]),s=this._clipFinite(t,s))for(let l=0,v=s.length,g,u=this._edgecode(s[v-2],s[v-1]);l<v;l+=2)g=u,u=this._edgecode(s[l],s[l+1]),g&&u&&(l=this._edge(t,g,u,s,l),v=s.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(s=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return s}_edge(t,e,n,r,a){for(;e!==n;){let i,s;switch(e){case 5:e=4;continue;case 4:e=6,i=this.xmax,s=this.ymin;break;case 6:e=2;continue;case 2:e=10,i=this.xmax,s=this.ymax;break;case 10:e=8;continue;case 8:e=9,i=this.xmin,s=this.ymax;break;case 9:e=1;continue;case 1:e=5,i=this.xmin,s=this.ymin;break}(r[a]!==i||r[a+1]!==s)&&this.contains(t,i,s)&&(r.splice(a,0,i,s),a+=2)}return a}_project(t,e,n,r){let a=1/0,i,s,f;if(r<0){if(e<=this.ymin)return null;(i=(this.ymin-e)/r)<a&&(f=this.ymin,s=t+(a=i)*n)}else if(r>0){if(e>=this.ymax)return null;(i=(this.ymax-e)/r)<a&&(f=this.ymax,s=t+(a=i)*n)}if(n>0){if(t>=this.xmax)return null;(i=(this.xmax-t)/n)<a&&(s=this.xmax,f=e+(a=i)*r)}else if(n<0){if(t<=this.xmin)return null;(i=(this.xmin-t)/n)<a&&(s=this.xmin,f=e+(a=i)*r)}return[s,f]}_edgecode(t,e){return(t===this.xmin?1:t===this.xmax?2:0)|(e===this.ymin?4:e===this.ymax?8:0)}_regioncode(t,e){return(t<this.xmin?1:t>this.xmax?2:0)|(e<this.ymin?4:e>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let e=0;e<t.length;e+=2){let n=(e+2)%t.length,r=(e+4)%t.length;(t[e]===t[n]&&t[n]===t[r]||t[e+1]===t[n+1]&&t[n+1]===t[r+1])&&(t.splice(n,2),e-=2)}t.length||(t=null)}return t}};var ar=2*Math.PI,vt=Math.pow;function cr(h){return h[0]}function fr(h){return h[1]}function ur(h){let{triangles:t,coords:e}=h;for(let n=0;n<t.length;n+=3){let r=2*t[n],a=2*t[n+1],i=2*t[n+2];if((e[i]-e[r])*(e[a+1]-e[r+1])-(e[a]-e[r])*(e[i+1]-e[r+1])>1e-10)return!1}return!0}function lr(h,t,e){return[h+Math.sin(h+t)*e,t+Math.cos(h-t)*e]}var _t=class h{static from(t,e=cr,n=fr,r){return new h("length"in t?hr(t,e,n,r):Float64Array.from(dr(t,e,n,r)))}constructor(t){this._delaunator=new gt(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){let t=this._delaunator,e=this.points;if(t.hull&&t.hull.length>2&&ur(t)){this.collinear=Int32Array.from({length:e.length/2},(u,p)=>p).sort((u,p)=>e[2*u]-e[2*p]||e[2*u+1]-e[2*p+1]);let f=this.collinear[0],l=this.collinear[this.collinear.length-1],v=[e[2*f],e[2*f+1],e[2*l],e[2*l+1]],g=1e-8*Math.hypot(v[3]-v[1],v[2]-v[0]);for(let u=0,p=e.length/2;u<p;++u){let y=lr(e[2*u],e[2*u+1],g);e[2*u]=y[0],e[2*u+1]=y[1]}this._delaunator=new gt(e)}else delete this.collinear;let n=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,a=this.triangles=this._delaunator.triangles,i=this.inedges.fill(-1),s=this._hullIndex.fill(-1);for(let f=0,l=n.length;f<l;++f){let v=a[f%3===2?f-2:f+1];(n[f]===-1||i[v]===-1)&&(i[v]=f)}for(let f=0,l=r.length;f<l;++f)s[r[f]]=f;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],i[r[0]]=1,r.length===2&&(i[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(t){return new At(this,t)}*neighbors(t){let{inedges:e,hull:n,_hullIndex:r,halfedges:a,triangles:i,collinear:s}=this;if(s){let g=s.indexOf(t);g>0&&(yield s[g-1]),g<s.length-1&&(yield s[g+1]);return}let f=e[t];if(f===-1)return;let l=f,v=-1;do{if(yield v=i[l],l=l%3===2?l-2:l+1,i[l]!==t)return;if(l=a[l],l===-1){let g=n[(r[t]+1)%n.length];g!==v&&(yield g);return}}while(l!==f)}find(t,e,n=0){if(t=+t,t!==t||(e=+e,e!==e))return-1;let r=n,a;for(;(a=this._step(n,t,e))>=0&&a!==n&&a!==r;)n=a;return a}_step(t,e,n){let{inedges:r,hull:a,_hullIndex:i,halfedges:s,triangles:f,points:l}=this;if(r[t]===-1||!l.length)return(t+1)%(l.length>>1);let v=t,g=vt(e-l[t*2],2)+vt(n-l[t*2+1],2),u=r[t],p=u;do{let y=f[p],T=vt(e-l[y*2],2)+vt(n-l[y*2+1],2);if(T<g&&(g=T,v=y),p=p%3===2?p-2:p+1,f[p]!==t)break;if(p=s[p],p===-1){if(p=a[(i[t]+1)%a.length],p!==y&&vt(e-l[p*2],2)+vt(n-l[p*2+1],2)<g)return p;break}}while(p!==u);return v}render(t){let e=t==null?t=new it:void 0,{points:n,halfedges:r,triangles:a}=this;for(let i=0,s=r.length;i<s;++i){let f=r[i];if(f<i)continue;let l=a[i]*2,v=a[f]*2;t.moveTo(n[l],n[l+1]),t.lineTo(n[v],n[v+1])}return this.renderHull(t),e&&e.value()}renderPoints(t,e){e===void 0&&(!t||typeof t.moveTo!="function")&&(e=t,t=null),e=e==null?2:+e;let n=t==null?t=new it:void 0,{points:r}=this;for(let a=0,i=r.length;a<i;a+=2){let s=r[a],f=r[a+1];t.moveTo(s+e,f),t.arc(s,f,e,0,ar)}return n&&n.value()}renderHull(t){let e=t==null?t=new it:void 0,{hull:n,points:r}=this,a=n[0]*2,i=n.length;t.moveTo(r[a],r[a+1]);for(let s=1;s<i;++s){let f=2*n[s];t.lineTo(r[f],r[f+1])}return t.closePath(),e&&e.value()}hullPolygon(){let t=new lt;return this.renderHull(t),t.value()}renderTriangle(t,e){let n=e==null?e=new it:void 0,{points:r,triangles:a}=this,i=a[t*=3]*2,s=a[t+1]*2,f=a[t+2]*2;return e.moveTo(r[i],r[i+1]),e.lineTo(r[s],r[s+1]),e.lineTo(r[f],r[f+1]),e.closePath(),n&&n.value()}*trianglePolygons(){let{triangles:t}=this;for(let e=0,n=t.length/3;e<n;++e)yield this.trianglePolygon(e)}trianglePolygon(t){let e=new lt;return this.renderTriangle(t,e),e.value()}};function hr(h,t,e,n){let r=h.length,a=new Float64Array(r*2);for(let i=0;i<r;++i){let s=h[i];a[i*2]=t.call(n,s,i,h),a[i*2+1]=e.call(n,s,i,h)}return a}function*dr(h,t,e,n){let r=0;for(let a of h)yield t.call(n,a,r,h),yield e.call(n,a,r,h),++r}function Jt(h,t){for(var e=h.length,n=h[e-1],r=t[0],a=t[1],i=n[0],s=n[1],f,l,v=!1,g=0;g<e;++g)n=h[g],f=n[0],l=n[1],l>a!=s>a&&r<(i-f)*(a-l)/(s-l)+f&&(v=!v),i=f,s=l;return v}var Ne=Tt(Ct(),1);var rt=class Xt{constructor(t,e){this.x=t,this.y=e}static fcxauy404bf06553024aefbfd64940993f6188(t){return new Xt(t.x,t.y)}bviymo50171b66ed0a408f933bb1c24d7db792(){let t={};return t.x=this.x,t.y=this.y,t}aawdosdnx4ff17cdaafc24ff69085586699388696(t){return{xBcQV:function(r,a,i){return r(a,i)}}.xBcQV(Qt.default,this.x,t.x)&&(0,Qt.default)(this.y,t.y)}acujirxg675ff420eb7d49f4bd33ffe854d3267b(){return[this.x,this.y]}dmised1706b5bd0454b469ed335593623fa1b(t){let e={};e.zNxvl=function(i,s){return i+s},e.cDRQZ=function(i,s){return i/s};let n=e,r=n.zNxvl(this.x,t.x)/2,a=n.cDRQZ(this.y+t.y,2);return new Xt(r,a)}};function Zt(h,t,e){let n={};n.iLHHn=function(g,u){return g-u},n.dBBHc=function(g,u){return g-u},n.pfhvO=function(g,u){return g-u},n.DWMRT=function(g,u){return g+u},n.zOvGd=function(g,u){return g*u},n.YQAwy=function(g,u){return g===u},n.lLgNb=function(g,u){return g===u},n.NpAiG=function(g,u){return g/u};let r=n,a={x:r.iLHHn(h.x,t.x),y:r.dBBHc(h.y,t.y)},i={x:r.iLHHn(e.x,t.x),y:r.pfhvO(e.y,t.y)},s=r.DWMRT(r.zOvGd(a.x,i.x),a.y*i.y),f=Math.hypot(a.x,a.y),l=Math.hypot(i.x,i.y);if(r.YQAwy(f,0)||r.lLgNb(l,0))return 0;let v=Math.min(1,Math.max(-1,r.NpAiG(s,f*l)));return Math.acos(v)}var Re=class st{constructor(t){let e={};e.LuDvD="1|3|4|2|0";let n=e,r=n.LuDvD.split("|"),a=0;for(;;){switch(r[a++]){case"0":!st.qytxa379ac38c9e7045119c6a7a1481883d45(t)&&this.points.reverse();continue;case"1":this.points=t;continue;case"2":this.materialTag="";continue;case"3":this.tag="";continue;case"4":this.sectionTag="";continue}break}}static fcxauy404bf06553024aefbfd64940993f6188(t){return new st(t.points.map(e=>rt.fcxauy404bf06553024aefbfd64940993f6188(e)))}bviymo50171b66ed0a408f933bb1c24d7db792(){return{points:this.points.map(t=>t.bviymo50171b66ed0a408f933bb1c24d7db792()),tag:this.tag,sectionTag:this.sectionTag,materialTag:this.materialTag}}static qytxa379ac38c9e7045119c6a7a1481883d45(t){let e={};e.VFqza=function(f,l){return f-l},e.zrVaD=function(f,l){return f-l},e.djEAB=function(f,l){return f-l},e.WjWPd=function(f,l){return f*l},e.LxFLM=function(f,l){return f>l};let n=e,[r,a,i]=t,s=n.VFqza(n.zrVaD(a.x,r.x)*n.djEAB(i.y,r.y),n.WjWPd(n.djEAB(a.y,r.y),n.zrVaD(i.x,r.x)));return n.LxFLM(s,0)}wzctr2ec40f3b43ae4baca37bfa4361b6a8f5(t,e,n){this.tag=t,this.sectionTag=e,this.materialTag=n}uhsped9d2e833575c4c7bb6130d6d70dbe392(){let t={};t.mTOZG=function(f,l){return f/l},t.HGlFx=function(f,l){return f+l},t.TsvDg=function(f,l){return f+l};let e=t,[n,r,a]=this.points,i=e.mTOZG(e.HGlFx(e.HGlFx(n.x,r.x),a.x),3),s=e.TsvDg(e.TsvDg(n.y,r.y),a.y)/3;return new rt(i,s)}qxetbknpd937a4f0056ea497695aae455b9e275a7(t=.1){let e={};e.brKta=function(l,v){return l-v},e.oYgYN=function(l,v){return l+v},e.cHKnG=function(l,v){return l*v},e.obYHl=function(l,v){return l-v},e.IeaJC=function(l,v){return l*v},e.bMsxh=function(l,v){return l/v},e.DZMJB=function(l,v){return l+v};let n=e,r=this.uhsped9d2e833575c4c7bb6130d6d70dbe392(),a=this.points.map(l=>{let v=n.brKta(r.x,l.x),g=r.y-l.y;return Math.sqrt(n.oYgYN(n.cHKnG(v,v),n.cHKnG(g,g)))}),i=Math.max(...a),s=i*t;return this.points.map(l=>{let v=n.obYHl(r.x,l.x),g=n.obYHl(r.y,l.y),u=Math.sqrt(n.oYgYN(n.IeaJC(v,v),n.cHKnG(g,g))),p=n.bMsxh(s,u);return new rt(n.oYgYN(l.x,v*p),n.DZMJB(l.y,g*p))})}skruzke380879d940e4497905b3d2d04951438(){let t=this.uhsped9d2e833575c4c7bb6130d6d70dbe392();return[new st([this.points[0],this.points[1],t]),new st([this.points[1],this.points[2],t]),new st([this.points[2],this.points[0],t])]}tvmxcqv8bb90841707f4855a4dd6846b5dae2b6(){let t={};t.FjJUO=function(l,v){return l/v},t.glreW=function(l,v){return l+v},t.kLxFY=function(l,v){return l/v},t.zFYqU=function(l,v){return l+v},t.zvepR=function(l,v){return l/v},t.uWzdK=function(l,v){return l/v},t.LleDV=function(l,v){return l/v};let e=t,[n,r,a]=this.points,i=new rt(e.FjJUO(e.glreW(n.x,r.x),2),e.kLxFY(e.zFYqU(n.y,r.y),2)),s=new rt(e.FjJUO(e.glreW(r.x,a.x),2),e.zvepR(r.y+a.y,2)),f=new rt(e.uWzdK(a.x+n.x,2),e.LleDV(e.zFYqU(a.y,n.y),2));return[new st([n,i,f]),new st([i,r,s]),new st([f,s,a]),new st([i,s,f])]}vnghzpacd4085b465e04be48ebd64f3b3877bcf(){let t={};t.tpnWb=function(p,y){return p*y},t.GpSdw=function(p,y){return p+y},t.waIcA=function(p,y){return p+y},t.LNqSq=function(p,y){return p*y},t.NUTnf=function(p,y){return p-y},t.mHUMI=function(p,y){return p-y};let e=t,[n,r,a]=this.points,i=n.x,s=r.x,f=a.x,l=n.y,v=r.y,g=a.y;return e.tpnWb(.5,Math.abs(e.GpSdw(e.waIcA(e.LNqSq(i,e.NUTnf(v,g)),s*(g-l)),f*e.mHUMI(l,v))))}hybvrbvre084ef294d374425b9b3e6748fc35262(){let t={kONHK:function(n,r,a,i){return n(r,a,i)}},e=this.vnghzpacd4085b465e04be48ebd64f3b3877bcf();return t.kONHK(Pe.default,e,0,1e-7)}xnipwd60d7f978446406987fe9faecbc7a768(){let t={KZIRU:function(i,s,f,l){return i(s,f,l)},JpUPy:function(i,s,f,l){return i(s,f,l)}},[e,n,r]=this.points;return[t.KZIRU(Zt,n,e,r),t.JpUPy(Zt,e,n,r),t.KZIRU(Zt,e,r,n)]}wskudqeccd1b7f976f43bc8b061e7f58482b1e(t=20*Math.PI/180){return!!this.xnipwd60d7f978446406987fe9faecbc7a768().some(n=>n<t)}};var mr=class Le{constructor(t,e,n,r){let a={};a.mPCVO="3|0|2|1|4";let i=a,s=i.mPCVO.split("|"),f=0;for(;;){switch(s[f++]){case"0":this.tag=e;continue;case"1":this.materialTag=r;continue;case"2":this.sectionTag=n;continue;case"3":this.points=t;continue;case"4":this.d3Polygon=t.map(l=>[l.x,l.y]);continue}break}}static FromDto(t){return new Le(t.points.map(e=>rt.fcxauy404bf06553024aefbfd64940993f6188(e)),t.tag,t.sectionTag,t.materialTag)}crdqgrc24f423645894383bcf1543478214477(t){let e={BTQLq:function(r,a){return r-a},auhKV:function(r,a){return r<a},DCIqr:function(r,a,i){return r(a,i)}};for(let r=0,a=e.BTQLq(this.points.length,1);e.auhKV(r,this.points.length);a=r++)if(br(t,this.points[r],this.points[a]))return!0;return e.DCIqr(Jt,this.d3Polygon,[t.x,t.y])}tcwojkw643442b7053e4922a77fdb5044fa2a08(t,e){let n={};n.zMngB=function(i,s){return i%s},n.YSZyr=function(i,s){return i+s},n.fhSBI=function(i,s){return i-s},n.Bhebu=function(i,s){return i*s},n.fivcA=function(i,s){return i<s},n.MUeJn=function(i,s){return i/s},n.wybPa=function(i,s){return i*s},n.cCZhj=function(i,s){return i*s};let r=n,a=[];for(let i=0;i<t.length;i++){let s=t[i],f=t[r.zMngB(r.YSZyr(i,1),t.length)],l=r.fhSBI(f.x,s.x),v=r.fhSBI(f.y,s.y),g=Math.sqrt(r.Bhebu(l,l)+v*v),u=Math.floor(g/e);a.push(new rt(s.x,s.y));for(let p=1;r.fivcA(p,u);p++){let y=r.MUeJn(p*e,g),T=r.YSZyr(s.x,r.wybPa(y,l)),N=s.y+r.cCZhj(y,v);a.push(new rt(T,N))}}return a}};function br(h,t,e){let n={jiWJK:function(s,f){return s-f},QELdz:function(s,f){return s*f},VxMjq:function(s,f,l){return s(f,l)},EIrES:function(s,f){return s+f},xjmkK:function(s,f){return s*f},Njfik:function(s,f){return s-f},NshyJ:function(s,f){return s<f},XkTbG:function(s,f){return s+f},zleTz:function(s,f){return s**f}},r=n.jiWJK(n.QELdz(n.jiWJK(h.y,t.y),n.jiWJK(e.x,t.x)),n.jiWJK(h.x,t.x)*n.jiWJK(e.y,t.y));if(!n.VxMjq(Ne.default,Math.abs(r),0))return!1;let a=n.EIrES(n.QELdz(h.x-t.x,e.x-t.x),n.xjmkK(n.jiWJK(h.y,t.y),n.Njfik(e.y,t.y)));if(n.NshyJ(a,0))return!1;let i=n.XkTbG(n.zleTz(n.Njfik(e.x,t.x),2),n.zleTz(e.y-t.y,2));return!(a>i)}var pr=class Ce{constructor(t,e,n){this.center=t,this.radius=e,this.maxTriangleArea=n}static fcxauy404bf06553024aefbfd64940993f6188(t){return new Ce(rt.fcxauy404bf06553024aefbfd64940993f6188(t.center),t.radius,t.maxTriangleArea)}zzdfksk8b0bd9bf0a3b43288be5fef8387ae8a8(t){let e={};e.evECH=function(f,l){return f>l};let n=e,r=t.uhsped9d2e833575c4c7bb6130d6d70dbe392();if(!this.contains(r))return!1;let i=t.vnghzpacd4085b465e04be48ebd64f3b3877bcf();return n.evECH(i,this.maxTriangleArea)}contains(t){let e={};e.hRoNq=function(i,s){return i-s},e.aqaYt=function(i,s){return i*s},e.PuamM=function(i,s){return i*s},e.uLLKF=function(i,s){return i*s};let n=e,r=n.hRoNq(t.x,this.center.x),a=t.y-this.center.y;return n.aqaYt(r,r)+n.PuamM(a,a)<=n.uLLKF(this.radius,this.radius)}};function Be(h){let t={Kkfcp:function(l,v,g){return l(v,g)},YCLvf:function(l,v){return l(v)}},e=h.polygons.map(l=>mr.FromDto(l)),n=h.baseTriangles.map(l=>Re.fcxauy404bf06553024aefbfd64940993f6188(l)),r=h.meshingConfiguration.refinementPoints.map(l=>pr.fcxauy404bf06553024aefbfd64940993f6188(l)),a=t.Kkfcp(gr,r,n),i=[...a.flatMap(l=>l.points),...h.extraPoints.map(l=>rt.fcxauy404bf06553024aefbfd64940993f6188(l))],s=_r(t.YCLvf(vr,i),e),f=[];for(let l of s){let v=l.uhsped9d2e833575c4c7bb6130d6d70dbe392(),g=e.find(u=>u.crdqgrc24f423645894383bcf1543478214477(v));g&&(l.wzctr2ec40f3b43ae4baca37bfa4361b6a8f5(g.tag,g.sectionTag,g.materialTag),f.push(l))}return{triangles:f.map(l=>l.bviymo50171b66ed0a408f933bb1c24d7db792())}}function gr(h,t){let e={};e.XPaWD=function(f,l){return f>l},e.HpYAz=function(f,l){return f||l};let n=e,r=0,a=n.XPaWD(h.length,0);if(!a)return t;let i=t,s=[];for(;a&&r<100;){s=[],a=!1;for(let f of i){let l=h.some(v=>v.zzdfksk8b0bd9bf0a3b43288be5fef8387ae8a8(f));l?s.push(...f.tvmxcqv8bb90841707f4855a4dd6846b5dae2b6()):s.push(f),a=n.HpYAz(a,l)}i=s,r++}return s}function vr(h){let t=h.map(r=>r.acujirxg675ff420eb7d49f4bd33ffe854d3267b());return[..._t.from(t).trianglePolygons()].map(r=>[new rt(r[2][0],r[2][1]),new rt(r[1][0],r[1][1]),new rt(r[0][0],r[0][1])]).map(r=>new Re(r)).filter(r=>!r.hybvrbvre084ef294d374425b9b3e6748fc35262())}function _r(h,t){let e=[];for(let n of h)n.qxetbknpd937a4f0056ea497695aae455b9e275a7().every(a=>t.some(i=>i.crdqgrc24f423645894383bcf1543478214477(a)))&&e.push(n);return e}var ne=Tt(Ve());var Oe=(h,t,e="")=>`View3dModel-${h}-${t}${e}`,Ye=h=>`Triangles-${h}`;function ke(h){if(h.length<3)throw new Error("At least three vertices are required to form a face.");return{vertices:[...h.filter(t=>t)],results:[]}}var Pt=Tt(We());var Dt=h=>{let t=(h.points??"").trim().split(/\s+/).map(n=>n.split(",")),e=[];for(let[n,r]of t){let a=parseFloat(n),i=parseFloat(r);if(Number.isFinite(a)&&Number.isFinite(i))e.push({x:a,y:i});else throw new Error("Invalid vertex coordinates")}return{vertices:e}};function Ue(h){let t=0,e=0,n=0,r=h.length;for(let a=0;a<r;a++){let{x:i,y:s}=h[a],{x:f,y:l}=h[(a+1)%r],v=i*l-f*s;t+=v,e+=(i+f)*v,n+=(s+l)*v}return t*=.5,t===0?{x:0,y:0}:(e/=6*t,n/=6*t,{x:e,y:n})}function*Ge(h,t){let e=[...new Set(t.rectangles.map(u=>u.name).concat(t.polygons.map(u=>u.name)))],n=[];for(let u of h){let p=u.points.map(N=>Ir(N)),y=ke(p);if(e.indexOf(u.name)===-1)throw new Error(`Geometry name ${u.name} not found in geometry rectangles or polygons.`);n.push(y)}let r=t.supports.map(u=>Sr(u)),a=h.flatMap(u=>u.points).map(u=>u.x).reduce((u,p)=>Math.max(u,p),-1/0),i=h.flatMap(u=>u.points).map(u=>u.x).reduce((u,p)=>Math.min(u,p),1/0),s=h.flatMap(u=>u.points).map(u=>u.y).reduce((u,p)=>Math.max(u,p),-1/0),f=h.flatMap(u=>u.points).map(u=>u.y).reduce((u,p)=>Math.min(u,p),1/0),l=a-i,v=s-f,g=[...t.polygons.map(u=>Dt(u)),...t.rectangles.map(u=>It(u))].map(u=>u.vertices.map(p=>({x:p.x,y:p.y}))).map(u=>({points:u}));for(let u of t.loadCases)yield{faces:n,wireframeFaces:[],supports:r,borders:g,loads:Tr(u,t),loadCaseTag:u.name,width:l,height:v,hasResults:!1}}function Tr(h,t){let e=[];for(let n of h.pointLoads)(0,Pt.default)(n.fx,0)||e.push({x:n.x,y:n.y,z:0,valueX:n.fx,valueY:0,valueZ:0}),(0,Pt.default)(n.fy,0)||e.push({x:n.x,y:n.y,z:0,valueY:n.fy,valueZ:0,valueX:0,type:"point"});for(let n of h.distributedLoads){let r=t.polygons.filter(s=>s.name===n.geometryName).map(s=>Dt(s)),a=t.rectangles.filter(s=>s.name===n.geometryName).map(s=>It(s)),i=[...r,...a];for(let s of i){let f=Ue(s.vertices);(0,Pt.default)(n.fx,0)||e.push({x:f.x,y:f.y,z:0,valueX:n.fx,valueY:0,valueZ:0,type:"distributed"}),(0,Pt.default)(n.fy,0)||e.push({x:f.x,y:f.y,z:0,valueX:0,valueY:n.fy,valueZ:0,type:"distributed"})}}return e}function Ir(h){return{x:h.x,y:h.y,z:0,ux:0,uy:0,uz:0,value:0}}function Sr(h){return{x:h.x,y:h.y,z:0,ux:h.fixedX,uy:h.fixedY,uz:!1}}addEventListener("message",({data:h})=>{Mr(h)});var Mr=async h=>{let{geometry:t,uuid:e,baseTriangles:n}=h,r=t.loadCases.flatMap(y=>y.pointLoads).map(y=>({x:y.x,y:y.y})),a=t.supports.map(y=>({x:y.x,y:y.y})),i=t.resultPoints.map(y=>({x:y.x,y:y.y})),s=t.rectangles.map(y=>Pr(y)),f=t.polygons.map(y=>Rr(y)),l=s.concat(f),v={maxTriangleArea:t.meshingConfiguration.maxTriangleArea,refinementPoints:t.meshingConfiguration.refinementPoints.map(y=>Er(y))},u=Be({polygons:l,extraPoints:r.concat(a).concat(i),meshingConfiguration:v,baseTriangles:n.map(y=>Nr(y))}).triangles.map(y=>Dr(y));await ne.setItem(Ye(e),u);for(let y of Ge(u,t))await ne.setItem(Oe(e,y.loadCaseTag),y);postMessage({uuid:e})},Er=h=>({radius:h.radius,maxTriangleArea:h.maxArea,center:{x:h.x,y:h.y}}),Ar=h=>({x:h.x,y:h.y}),Dr=h=>({points:h.points.map(e=>Ar(e)),name:h.tag,sectionTag:h.sectionTag,materialTag:h.materialTag}),Pr=h=>({points:It(h).vertices.map(e=>({x:e.x,y:e.y})),tag:h.name,sectionTag:h.sectionName,materialTag:h.materialName}),Rr=h=>({points:Dt(h).vertices.map(e=>({x:e.x,y:e.y})),tag:h.name,sectionTag:h.sectionName,materialTag:h.materialName}),Nr=h=>({points:h.points.map(e=>({x:e.x,y:e.y}))});
